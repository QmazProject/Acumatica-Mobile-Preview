const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-B0Gk_P0t-Dv9uDKM7.js","assets/url-Bs332b_7-DBKEgtJa.js","assets/index-rMqNZYyA-CVtMPITQ.js"])))=>i.map(i=>d[i]);
var yR=s=>{throw TypeError(s)};var Fw=(s,t,e)=>t.has(s)||yR("Cannot "+e);var tn=(s,t,e)=>(Fw(s,t,"read from private field"),e?e.call(s):t.get(s)),sr=(s,t,e)=>t.has(s)?yR("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,e),Pi=(s,t,e,n)=>(Fw(s,t,"write to private field"),n?n.call(s,e):t.set(s,e),e),rr=(s,t,e)=>(Fw(s,t,"access private method"),e);var vR=(s,t,e,n)=>({set _(i){Pi(s,t,i,e)},get _(){return tn(s,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=e(i);fetch(i.href,r)}})();var Bm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function u2(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var zw={exports:{}},Zd={};var bR;function j4(){if(bR)return Zd;bR=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,i,r){var o=null;if(r!==void 0&&(o=""+r),i.key!==void 0&&(o=""+i.key),"key"in i){r={};for(var c in i)c!=="key"&&(r[c]=i[c])}else r=i;return i=r.ref,{$$typeof:s,type:n,key:o,ref:i!==void 0?i:null,props:r}}return Zd.Fragment=t,Zd.jsx=e,Zd.jsxs=e,Zd}var xR;function B4(){return xR||(xR=1,zw.exports=j4()),zw.exports}var A=B4(),Uw={exports:{}},ne={};var wR;function F4(){if(wR)return ne;wR=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),m=Symbol.iterator;function y(U){return U===null||typeof U!="object"?null:(U=m&&U[m]||U["@@iterator"],typeof U=="function"?U:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,E={};function _(U,W,st){this.props=U,this.context=W,this.refs=E,this.updater=st||w}_.prototype.isReactComponent={},_.prototype.setState=function(U,W){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,W,"setState")},_.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function k(){}k.prototype=_.prototype;function T(U,W,st){this.props=U,this.context=W,this.refs=E,this.updater=st||w}var R=T.prototype=new k;R.constructor=T,b(R,_.prototype),R.isPureReactComponent=!0;var D=Array.isArray;function F(){}var j={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function O(U,W,st){var lt=st.ref;return{$$typeof:s,type:U,key:W,ref:lt!==void 0?lt:null,props:st}}function X(U,W){return O(U.type,W,U.props)}function Q(U){return typeof U=="object"&&U!==null&&U.$$typeof===s}function H(U){var W={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(st){return W[st]})}var J=/\/+/g;function N(U,W){return typeof U=="object"&&U!==null&&U.key!=null?H(""+U.key):W.toString(36)}function tt(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(F,F):(U.status="pending",U.then(function(W){U.status==="pending"&&(U.status="fulfilled",U.value=W)},function(W){U.status==="pending"&&(U.status="rejected",U.reason=W)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function $(U,W,st,lt,ut){var Rt=typeof U;(Rt==="undefined"||Rt==="boolean")&&(U=null);var St=!1;if(U===null)St=!0;else switch(Rt){case"bigint":case"string":case"number":St=!0;break;case"object":switch(U.$$typeof){case s:case t:St=!0;break;case f:return St=U._init,$(St(U._payload),W,st,lt,ut)}}if(St)return ut=ut(U),St=lt===""?"."+N(U,0):lt,D(ut)?(st="",St!=null&&(st=St.replace(J,"$&/")+"/"),$(ut,W,st,"",function(Bt){return Bt})):ut!=null&&(Q(ut)&&(ut=X(ut,st+(ut.key==null||U&&U.key===ut.key?"":(""+ut.key).replace(J,"$&/")+"/")+St)),W.push(ut)),1;St=0;var Ct=lt===""?".":lt+":";if(D(U))for(var xt=0;xt<U.length;xt++)lt=U[xt],Rt=Ct+N(lt,xt),St+=$(lt,W,st,Rt,ut);else if(xt=y(U),typeof xt=="function")for(U=xt.call(U),xt=0;!(lt=U.next()).done;)lt=lt.value,Rt=Ct+N(lt,xt++),St+=$(lt,W,st,Rt,ut);else if(Rt==="object"){if(typeof U.then=="function")return $(tt(U),W,st,lt,ut);throw W=String(U),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return St}function G(U,W,st){if(U==null)return U;var lt=[],ut=0;return $(U,lt,"","",function(Rt){return W.call(st,Rt,ut++)}),lt}function gt(U){if(U._status===-1){var W=U._result;W=W(),W.then(function(st){(U._status===0||U._status===-1)&&(U._status=1,U._result=st)},function(st){(U._status===0||U._status===-1)&&(U._status=2,U._result=st)}),U._status===-1&&(U._status=0,U._result=W)}if(U._status===1)return U._result.default;throw U._result}var nt=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)},Tt={map:G,forEach:function(U,W,st){G(U,function(){W.apply(this,arguments)},st)},count:function(U){var W=0;return G(U,function(){W++}),W},toArray:function(U){return G(U,function(W){return W})||[]},only:function(U){if(!Q(U))throw Error("React.Children.only expected to receive a single React element child.");return U}};return ne.Activity=p,ne.Children=Tt,ne.Component=_,ne.Fragment=e,ne.Profiler=i,ne.PureComponent=T,ne.StrictMode=n,ne.Suspense=h,ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,ne.__COMPILER_RUNTIME={__proto__:null,c:function(U){return j.H.useMemoCache(U)}},ne.cache=function(U){return function(){return U.apply(null,arguments)}},ne.cacheSignal=function(){return null},ne.cloneElement=function(U,W,st){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var lt=b({},U.props),ut=U.key;if(W!=null)for(Rt in W.key!==void 0&&(ut=""+W.key),W)!I.call(W,Rt)||Rt==="key"||Rt==="__self"||Rt==="__source"||Rt==="ref"&&W.ref===void 0||(lt[Rt]=W[Rt]);var Rt=arguments.length-2;if(Rt===1)lt.children=st;else if(1<Rt){for(var St=Array(Rt),Ct=0;Ct<Rt;Ct++)St[Ct]=arguments[Ct+2];lt.children=St}return O(U.type,ut,lt)},ne.createContext=function(U){return U={$$typeof:o,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:r,_context:U},U},ne.createElement=function(U,W,st){var lt,ut={},Rt=null;if(W!=null)for(lt in W.key!==void 0&&(Rt=""+W.key),W)I.call(W,lt)&&lt!=="key"&&lt!=="__self"&&lt!=="__source"&&(ut[lt]=W[lt]);var St=arguments.length-2;if(St===1)ut.children=st;else if(1<St){for(var Ct=Array(St),xt=0;xt<St;xt++)Ct[xt]=arguments[xt+2];ut.children=Ct}if(U&&U.defaultProps)for(lt in St=U.defaultProps,St)ut[lt]===void 0&&(ut[lt]=St[lt]);return O(U,Rt,ut)},ne.createRef=function(){return{current:null}},ne.forwardRef=function(U){return{$$typeof:c,render:U}},ne.isValidElement=Q,ne.lazy=function(U){return{$$typeof:f,_payload:{_status:-1,_result:U},_init:gt}},ne.memo=function(U,W){return{$$typeof:d,type:U,compare:W===void 0?null:W}},ne.startTransition=function(U){var W=j.T,st={};j.T=st;try{var lt=U(),ut=j.S;ut!==null&&ut(st,lt),typeof lt=="object"&&lt!==null&&typeof lt.then=="function"&&lt.then(F,nt)}catch(Rt){nt(Rt)}finally{W!==null&&st.types!==null&&(W.types=st.types),j.T=W}},ne.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},ne.use=function(U){return j.H.use(U)},ne.useActionState=function(U,W,st){return j.H.useActionState(U,W,st)},ne.useCallback=function(U,W){return j.H.useCallback(U,W)},ne.useContext=function(U){return j.H.useContext(U)},ne.useDebugValue=function(){},ne.useDeferredValue=function(U,W){return j.H.useDeferredValue(U,W)},ne.useEffect=function(U,W){return j.H.useEffect(U,W)},ne.useEffectEvent=function(U){return j.H.useEffectEvent(U)},ne.useId=function(){return j.H.useId()},ne.useImperativeHandle=function(U,W,st){return j.H.useImperativeHandle(U,W,st)},ne.useInsertionEffect=function(U,W){return j.H.useInsertionEffect(U,W)},ne.useLayoutEffect=function(U,W){return j.H.useLayoutEffect(U,W)},ne.useMemo=function(U,W){return j.H.useMemo(U,W)},ne.useOptimistic=function(U,W){return j.H.useOptimistic(U,W)},ne.useReducer=function(U,W,st){return j.H.useReducer(U,W,st)},ne.useRef=function(U){return j.H.useRef(U)},ne.useState=function(U){return j.H.useState(U)},ne.useSyncExternalStore=function(U,W,st){return j.H.useSyncExternalStore(U,W,st)},ne.useTransition=function(){return j.H.useTransition()},ne.version="19.2.4",ne}var AR;function d2(){return AR||(AR=1,Uw.exports=F4()),Uw.exports}var at=d2();const Ue=u2(at);var Hw={exports:{}},Qd={},Ww={exports:{}},Gw={};var SR;function z4(){return SR||(SR=1,(function(s){function t($,G){var gt=$.length;$.push(G);t:for(;0<gt;){var nt=gt-1>>>1,Tt=$[nt];if(0<i(Tt,G))$[nt]=G,$[gt]=Tt,gt=nt;else break t}}function e($){return $.length===0?null:$[0]}function n($){if($.length===0)return null;var G=$[0],gt=$.pop();if(gt!==G){$[0]=gt;t:for(var nt=0,Tt=$.length,U=Tt>>>1;nt<U;){var W=2*(nt+1)-1,st=$[W],lt=W+1,ut=$[lt];if(0>i(st,gt))lt<Tt&&0>i(ut,st)?($[nt]=ut,$[lt]=gt,nt=lt):($[nt]=st,$[W]=gt,nt=W);else if(lt<Tt&&0>i(ut,gt))$[nt]=ut,$[lt]=gt,nt=lt;else break t}}return G}function i($,G){var gt=$.sortIndex-G.sortIndex;return gt!==0?gt:$.id-G.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;s.unstable_now=function(){return r.now()}}else{var o=Date,c=o.now();s.unstable_now=function(){return o.now()-c}}var h=[],d=[],f=1,p=null,m=3,y=!1,w=!1,b=!1,E=!1,_=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function R($){for(var G=e(d);G!==null;){if(G.callback===null)n(d);else if(G.startTime<=$)n(d),G.sortIndex=G.expirationTime,t(h,G);else break;G=e(d)}}function D($){if(b=!1,R($),!w)if(e(h)!==null)w=!0,F||(F=!0,H());else{var G=e(d);G!==null&&tt(D,G.startTime-$)}}var F=!1,j=-1,I=5,O=-1;function X(){return E?!0:!(s.unstable_now()-O<I)}function Q(){if(E=!1,F){var $=s.unstable_now();O=$;var G=!0;try{t:{w=!1,b&&(b=!1,k(j),j=-1),y=!0;var gt=m;try{e:{for(R($),p=e(h);p!==null&&!(p.expirationTime>$&&X());){var nt=p.callback;if(typeof nt=="function"){p.callback=null,m=p.priorityLevel;var Tt=nt(p.expirationTime<=$);if($=s.unstable_now(),typeof Tt=="function"){p.callback=Tt,R($),G=!0;break e}p===e(h)&&n(h),R($)}else n(h);p=e(h)}if(p!==null)G=!0;else{var U=e(d);U!==null&&tt(D,U.startTime-$),G=!1}}break t}finally{p=null,m=gt,y=!1}G=void 0}}finally{G?H():F=!1}}}var H;if(typeof T=="function")H=function(){T(Q)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,N=J.port2;J.port1.onmessage=Q,H=function(){N.postMessage(null)}}else H=function(){_(Q,0)};function tt($,G){j=_(function(){$(s.unstable_now())},G)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function($){$.callback=null},s.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<$?Math.floor(1e3/$):5},s.unstable_getCurrentPriorityLevel=function(){return m},s.unstable_next=function($){switch(m){case 1:case 2:case 3:var G=3;break;default:G=m}var gt=m;m=G;try{return $()}finally{m=gt}},s.unstable_requestPaint=function(){E=!0},s.unstable_runWithPriority=function($,G){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var gt=m;m=$;try{return G()}finally{m=gt}},s.unstable_scheduleCallback=function($,G,gt){var nt=s.unstable_now();switch(typeof gt=="object"&&gt!==null?(gt=gt.delay,gt=typeof gt=="number"&&0<gt?nt+gt:nt):gt=nt,$){case 1:var Tt=-1;break;case 2:Tt=250;break;case 5:Tt=1073741823;break;case 4:Tt=1e4;break;default:Tt=5e3}return Tt=gt+Tt,$={id:f++,callback:G,priorityLevel:$,startTime:gt,expirationTime:Tt,sortIndex:-1},gt>nt?($.sortIndex=gt,t(d,$),e(h)===null&&$===e(d)&&(b?(k(j),j=-1):b=!0,tt(D,gt-nt))):($.sortIndex=Tt,t(h,$),w||y||(w=!0,F||(F=!0,H()))),$},s.unstable_shouldYield=X,s.unstable_wrapCallback=function($){var G=m;return function(){var gt=m;m=G;try{return $.apply(this,arguments)}finally{m=gt}}}})(Gw)),Gw}var _R;function U4(){return _R||(_R=1,Ww.exports=z4()),Ww.exports}var Vw={exports:{}},ti={};var ER;function H4(){if(ER)return ti;ER=1;var s=d2();function t(h){var d="https://react.dev/errors/"+h;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)d+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+h+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},i=Symbol.for("react.portal");function r(h,d,f){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:h,containerInfo:d,implementation:f}}var o=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(h,d){if(h==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return ti.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,ti.createPortal=function(h,d){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return r(h,d,null,f)},ti.flushSync=function(h){var d=o.T,f=n.p;try{if(o.T=null,n.p=2,h)return h()}finally{o.T=d,n.p=f,n.d.f()}},ti.preconnect=function(h,d){typeof h=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,n.d.C(h,d))},ti.prefetchDNS=function(h){typeof h=="string"&&n.d.D(h)},ti.preinit=function(h,d){if(typeof h=="string"&&d&&typeof d.as=="string"){var f=d.as,p=c(f,d.crossOrigin),m=typeof d.integrity=="string"?d.integrity:void 0,y=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;f==="style"?n.d.S(h,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:m,fetchPriority:y}):f==="script"&&n.d.X(h,{crossOrigin:p,integrity:m,fetchPriority:y,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},ti.preinitModule=function(h,d){if(typeof h=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var f=c(d.as,d.crossOrigin);n.d.M(h,{crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&n.d.M(h)},ti.preload=function(h,d){if(typeof h=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var f=d.as,p=c(f,d.crossOrigin);n.d.L(h,f,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},ti.preloadModule=function(h,d){if(typeof h=="string")if(d){var f=c(d.as,d.crossOrigin);n.d.m(h,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else n.d.m(h)},ti.requestFormReset=function(h){n.d.r(h)},ti.unstable_batchedUpdates=function(h,d){return h(d)},ti.useFormState=function(h,d,f){return o.H.useFormState(h,d,f)},ti.useFormStatus=function(){return o.H.useHostTransitionStatus()},ti.version="19.2.4",ti}var CR;function W4(){if(CR)return Vw.exports;CR=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Vw.exports=H4(),Vw.exports}var kR;function G4(){if(kR)return Qd;kR=1;var s=U4(),t=d2(),e=W4();function n(a){var l="https://react.dev/errors/"+a;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)l+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function r(a){var l=a,u=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(u=l.return),a=l.return;while(a)}return l.tag===3?u:null}function o(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function c(a){if(a.tag===31){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function h(a){if(r(a)!==a)throw Error(n(188))}function d(a){var l=a.alternate;if(!l){if(l=r(a),l===null)throw Error(n(188));return l!==a?null:a}for(var u=a,g=l;;){var x=u.return;if(x===null)break;var S=x.alternate;if(S===null){if(g=x.return,g!==null){u=g;continue}break}if(x.child===S.child){for(S=x.child;S;){if(S===u)return h(x),a;if(S===g)return h(x),l;S=S.sibling}throw Error(n(188))}if(u.return!==g.return)u=x,g=S;else{for(var P=!1,V=x.child;V;){if(V===u){P=!0,u=x,g=S;break}if(V===g){P=!0,g=x,u=S;break}V=V.sibling}if(!P){for(V=S.child;V;){if(V===u){P=!0,u=S,g=x;break}if(V===g){P=!0,g=S,u=x;break}V=V.sibling}if(!P)throw Error(n(189))}}if(u.alternate!==g)throw Error(n(190))}if(u.tag!==3)throw Error(n(188));return u.stateNode.current===u?a:l}function f(a){var l=a.tag;if(l===5||l===26||l===27||l===6)return a;for(a=a.child;a!==null;){if(l=f(a),l!==null)return l;a=a.sibling}return null}var p=Object.assign,m=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),T=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),X=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function H(a){return a===null||typeof a!="object"?null:(a=Q&&a[Q]||a["@@iterator"],typeof a=="function"?a:null)}var J=Symbol.for("react.client.reference");function N(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===J?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case b:return"Fragment";case _:return"Profiler";case E:return"StrictMode";case D:return"Suspense";case F:return"SuspenseList";case O:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case w:return"Portal";case T:return a.displayName||"Context";case k:return(a._context.displayName||"Context")+".Consumer";case R:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case j:return l=a.displayName||null,l!==null?l:N(a.type)||"Memo";case I:l=a._payload,a=a._init;try{return N(a(l))}catch{}}return null}var tt=Array.isArray,$=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,gt={pending:!1,data:null,method:null,action:null},nt=[],Tt=-1;function U(a){return{current:a}}function W(a){0>Tt||(a.current=nt[Tt],nt[Tt]=null,Tt--)}function st(a,l){Tt++,nt[Tt]=a.current,a.current=l}var lt=U(null),ut=U(null),Rt=U(null),St=U(null);function Ct(a,l){switch(st(Rt,l),st(ut,a),st(lt,null),l.nodeType){case 9:case 11:a=(a=l.documentElement)&&(a=a.namespaceURI)?zM(a):0;break;default:if(a=l.tagName,l=l.namespaceURI)l=zM(l),a=UM(l,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}W(lt),st(lt,a)}function xt(){W(lt),W(ut),W(Rt)}function Bt(a){a.memoizedState!==null&&st(St,a);var l=lt.current,u=UM(l,a.type);l!==u&&(st(ut,a),st(lt,u))}function jt(a){ut.current===a&&(W(lt),W(ut)),St.current===a&&(W(St),qd._currentValue=gt)}var Ut,Ft;function L(a){if(Ut===void 0)try{throw Error()}catch(u){var l=u.stack.trim().match(/\n( *(at )?)/);Ut=l&&l[1]||"",Ft=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ut+a+Ft}var ft=!1;function rt(a,l){if(!a||ft)return"";ft=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(l){var Nt=function(){throw Error()};if(Object.defineProperty(Nt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Nt,[])}catch(wt){var bt=wt}Reflect.construct(a,[],Nt)}else{try{Nt.call()}catch(wt){bt=wt}a.call(Nt.prototype)}}else{try{throw Error()}catch(wt){bt=wt}(Nt=a())&&typeof Nt.catch=="function"&&Nt.catch(function(){})}}catch(wt){if(wt&&bt&&typeof wt.stack=="string")return[wt.stack,bt.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=g.DetermineComponentFrameRoot(),P=S[0],V=S[1];if(P&&V){var it=P.split(`
`),vt=V.split(`
`);for(x=g=0;g<it.length&&!it[g].includes("DetermineComponentFrameRoot");)g++;for(;x<vt.length&&!vt[x].includes("DetermineComponentFrameRoot");)x++;if(g===it.length||x===vt.length)for(g=it.length-1,x=vt.length-1;1<=g&&0<=x&&it[g]!==vt[x];)x--;for(;1<=g&&0<=x;g--,x--)if(it[g]!==vt[x]){if(g!==1||x!==1)do if(g--,x--,0>x||it[g]!==vt[x]){var Pt=`
`+it[g].replace(" at new "," at ");return a.displayName&&Pt.includes("<anonymous>")&&(Pt=Pt.replace("<anonymous>",a.displayName)),Pt}while(1<=g&&0<=x);break}}}finally{ft=!1,Error.prepareStackTrace=u}return(u=a?a.displayName||a.name:"")?L(u):""}function K(a,l){switch(a.tag){case 26:case 27:case 5:return L(a.type);case 16:return L("Lazy");case 13:return a.child!==l&&l!==null?L("Suspense Fallback"):L("Suspense");case 19:return L("SuspenseList");case 0:case 15:return rt(a.type,!1);case 11:return rt(a.type.render,!1);case 1:return rt(a.type,!0);case 31:return L("Activity");default:return""}}function Z(a){try{var l="",u=null;do l+=K(a,u),u=a,a=a.return;while(a);return l}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var ot=Object.prototype.hasOwnProperty,kt=s.unstable_scheduleCallback,Mt=s.unstable_cancelCallback,pt=s.unstable_shouldYield,Lt=s.unstable_requestPaint,It=s.unstable_now,Et=s.unstable_getCurrentPriorityLevel,zt=s.unstable_ImmediatePriority,Jt=s.unstable_UserBlockingPriority,Ht=s.unstable_NormalPriority,we=s.unstable_LowPriority,C=s.unstable_IdlePriority,M=s.log,z=s.unstable_setDisableYieldValue,et=null,dt=null;function _t(a){if(typeof M=="function"&&z(a),dt&&typeof dt.setStrictMode=="function")try{dt.setStrictMode(et,a)}catch{}}var Ot=Math.clz32?Math.clz32:Ne,Re=Math.log,cn=Math.LN2;function Ne(a){return a>>>=0,a===0?32:31-(Re(a)/cn|0)|0}var _e=256,Oe=262144,Js=4194304;function hs(a){var l=a&42;if(l!==0)return l;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Eg(a,l,u){var g=a.pendingLanes;if(g===0)return 0;var x=0,S=a.suspendedLanes,P=a.pingedLanes;a=a.warmLanes;var V=g&134217727;return V!==0?(g=V&~S,g!==0?x=hs(g):(P&=V,P!==0?x=hs(P):u||(u=V&~a,u!==0&&(x=hs(u))))):(V=g&~S,V!==0?x=hs(V):P!==0?x=hs(P):u||(u=g&~a,u!==0&&(x=hs(u)))),x===0?0:l!==0&&l!==x&&(l&S)===0&&(S=x&-x,u=l&-l,S>=u||S===32&&(u&4194048)!==0)?l:x}function ad(a,l){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&l)===0}function _6(a,l){switch(a){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wC(){var a=Js;return Js<<=1,(Js&62914560)===0&&(Js=4194304),a}function k1(a){for(var l=[],u=0;31>u;u++)l.push(a);return l}function od(a,l){a.pendingLanes|=l,l!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function E6(a,l,u,g,x,S){var P=a.pendingLanes;a.pendingLanes=u,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=u,a.entangledLanes&=u,a.errorRecoveryDisabledLanes&=u,a.shellSuspendCounter=0;var V=a.entanglements,it=a.expirationTimes,vt=a.hiddenUpdates;for(u=P&~u;0<u;){var Pt=31-Ot(u),Nt=1<<Pt;V[Pt]=0,it[Pt]=-1;var bt=vt[Pt];if(bt!==null)for(vt[Pt]=null,Pt=0;Pt<bt.length;Pt++){var wt=bt[Pt];wt!==null&&(wt.lane&=-536870913)}u&=~Nt}g!==0&&AC(a,g,0),S!==0&&x===0&&a.tag!==0&&(a.suspendedLanes|=S&~(P&~l))}function AC(a,l,u){a.pendingLanes|=l,a.suspendedLanes&=~l;var g=31-Ot(l);a.entangledLanes|=l,a.entanglements[g]=a.entanglements[g]|1073741824|u&261930}function SC(a,l){var u=a.entangledLanes|=l;for(a=a.entanglements;u;){var g=31-Ot(u),x=1<<g;x&l|a[g]&l&&(a[g]|=l),u&=~x}}function _C(a,l){var u=l&-l;return u=(u&42)!==0?1:T1(u),(u&(a.suspendedLanes|l))!==0?0:u}function T1(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function M1(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function EC(){var a=G.p;return a!==0?a:(a=window.event,a===void 0?32:hR(a.type))}function CC(a,l){var u=G.p;try{return G.p=a,l()}finally{G.p=u}}var Fa=Math.random().toString(36).slice(2),Wn="__reactFiber$"+Fa,_i="__reactProps$"+Fa,Mc="__reactContainer$"+Fa,R1="__reactEvents$"+Fa,C6="__reactListeners$"+Fa,k6="__reactHandles$"+Fa,kC="__reactResources$"+Fa,ld="__reactMarker$"+Fa;function P1(a){delete a[Wn],delete a[_i],delete a[R1],delete a[C6],delete a[k6]}function Rc(a){var l=a[Wn];if(l)return l;for(var u=a.parentNode;u;){if(l=u[Mc]||u[Wn]){if(u=l.alternate,l.child!==null||u!==null&&u.child!==null)for(a=YM(a);a!==null;){if(u=a[Wn])return u;a=YM(a)}return l}a=u,u=a.parentNode}return null}function Pc(a){if(a=a[Wn]||a[Mc]){var l=a.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return a}return null}function cd(a){var l=a.tag;if(l===5||l===26||l===27||l===6)return a.stateNode;throw Error(n(33))}function Lc(a){var l=a[kC];return l||(l=a[kC]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Ln(a){a[ld]=!0}var TC=new Set,MC={};function Zo(a,l){Dc(a,l),Dc(a+"Capture",l)}function Dc(a,l){for(MC[a]=l,a=0;a<l.length;a++)TC.add(l[a])}var T6=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),RC={},PC={};function M6(a){return ot.call(PC,a)?!0:ot.call(RC,a)?!1:T6.test(a)?PC[a]=!0:(RC[a]=!0,!1)}function Cg(a,l,u){if(M6(l))if(u===null)a.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":a.removeAttribute(l);return;case"boolean":var g=l.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){a.removeAttribute(l);return}}a.setAttribute(l,""+u)}}function kg(a,l,u){if(u===null)a.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(l);return}a.setAttribute(l,""+u)}}function Or(a,l,u,g){if(g===null)a.removeAttribute(u);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(u);return}a.setAttributeNS(l,u,""+g)}}function us(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function LC(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function R6(a,l,u){var g=Object.getOwnPropertyDescriptor(a.constructor.prototype,l);if(!a.hasOwnProperty(l)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var x=g.get,S=g.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return x.call(this)},set:function(P){u=""+P,S.call(this,P)}}),Object.defineProperty(a,l,{enumerable:g.enumerable}),{getValue:function(){return u},setValue:function(P){u=""+P},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function L1(a){if(!a._valueTracker){var l=LC(a)?"checked":"value";a._valueTracker=R6(a,l,""+a[l])}}function DC(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var u=l.getValue(),g="";return a&&(g=LC(a)?a.checked?"true":"false":a.value),a=g,a!==u?(l.setValue(a),!0):!1}function Tg(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var P6=/[\n"\\]/g;function ds(a){return a.replace(P6,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function D1(a,l,u,g,x,S,P,V){a.name="",P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?a.type=P:a.removeAttribute("type"),l!=null?P==="number"?(l===0&&a.value===""||a.value!=l)&&(a.value=""+us(l)):a.value!==""+us(l)&&(a.value=""+us(l)):P!=="submit"&&P!=="reset"||a.removeAttribute("value"),l!=null?N1(a,P,us(l)):u!=null?N1(a,P,us(u)):g!=null&&a.removeAttribute("value"),x==null&&S!=null&&(a.defaultChecked=!!S),x!=null&&(a.checked=x&&typeof x!="function"&&typeof x!="symbol"),V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?a.name=""+us(V):a.removeAttribute("name")}function NC(a,l,u,g,x,S,P,V){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(a.type=S),l!=null||u!=null){if(!(S!=="submit"&&S!=="reset"||l!=null)){L1(a);return}u=u!=null?""+us(u):"",l=l!=null?""+us(l):u,V||l===a.value||(a.value=l),a.defaultValue=l}g=g??x,g=typeof g!="function"&&typeof g!="symbol"&&!!g,a.checked=V?a.checked:!!g,a.defaultChecked=!!g,P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"&&(a.name=P),L1(a)}function N1(a,l,u){l==="number"&&Tg(a.ownerDocument)===a||a.defaultValue===""+u||(a.defaultValue=""+u)}function Nc(a,l,u,g){if(a=a.options,l){l={};for(var x=0;x<u.length;x++)l["$"+u[x]]=!0;for(u=0;u<a.length;u++)x=l.hasOwnProperty("$"+a[u].value),a[u].selected!==x&&(a[u].selected=x),x&&g&&(a[u].defaultSelected=!0)}else{for(u=""+us(u),l=null,x=0;x<a.length;x++){if(a[x].value===u){a[x].selected=!0,g&&(a[x].defaultSelected=!0);return}l!==null||a[x].disabled||(l=a[x])}l!==null&&(l.selected=!0)}}function OC(a,l,u){if(l!=null&&(l=""+us(l),l!==a.value&&(a.value=l),u==null)){a.defaultValue!==l&&(a.defaultValue=l);return}a.defaultValue=u!=null?""+us(u):""}function IC(a,l,u,g){if(l==null){if(g!=null){if(u!=null)throw Error(n(92));if(tt(g)){if(1<g.length)throw Error(n(93));g=g[0]}u=g}u==null&&(u=""),l=u}u=us(l),a.defaultValue=u,g=a.textContent,g===u&&g!==""&&g!==null&&(a.value=g),L1(a)}function Oc(a,l){if(l){var u=a.firstChild;if(u&&u===a.lastChild&&u.nodeType===3){u.nodeValue=l;return}}a.textContent=l}var L6=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function jC(a,l,u){var g=l.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?g?a.setProperty(l,""):l==="float"?a.cssFloat="":a[l]="":g?a.setProperty(l,u):typeof u!="number"||u===0||L6.has(l)?l==="float"?a.cssFloat=u:a[l]=(""+u).trim():a[l]=u+"px"}function BC(a,l,u){if(l!=null&&typeof l!="object")throw Error(n(62));if(a=a.style,u!=null){for(var g in u)!u.hasOwnProperty(g)||l!=null&&l.hasOwnProperty(g)||(g.indexOf("--")===0?a.setProperty(g,""):g==="float"?a.cssFloat="":a[g]="");for(var x in l)g=l[x],l.hasOwnProperty(x)&&u[x]!==g&&jC(a,x,g)}else for(var S in l)l.hasOwnProperty(S)&&jC(a,S,l[S])}function O1(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var D6=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),N6=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Mg(a){return N6.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function Ir(){}var I1=null;function j1(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Ic=null,jc=null;function FC(a){var l=Pc(a);if(l&&(a=l.stateNode)){var u=a[_i]||null;t:switch(a=l.stateNode,l.type){case"input":if(D1(a,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),l=u.name,u.type==="radio"&&l!=null){for(u=a;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+ds(""+l)+'"][type="radio"]'),l=0;l<u.length;l++){var g=u[l];if(g!==a&&g.form===a.form){var x=g[_i]||null;if(!x)throw Error(n(90));D1(g,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(l=0;l<u.length;l++)g=u[l],g.form===a.form&&DC(g)}break t;case"textarea":OC(a,u.value,u.defaultValue);break t;case"select":l=u.value,l!=null&&Nc(a,!!u.multiple,l,!1)}}}var B1=!1;function zC(a,l,u){if(B1)return a(l,u);B1=!0;try{var g=a(l);return g}finally{if(B1=!1,(Ic!==null||jc!==null)&&(mm(),Ic&&(l=Ic,a=jc,jc=Ic=null,FC(l),a)))for(l=0;l<a.length;l++)FC(a[l])}}function hd(a,l){var u=a.stateNode;if(u===null)return null;var g=u[_i]||null;if(g===null)return null;u=g[l];t:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(a=a.type,g=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!g;break t;default:a=!1}if(a)return null;if(u&&typeof u!="function")throw Error(n(231,l,typeof u));return u}var jr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),F1=!1;if(jr)try{var ud={};Object.defineProperty(ud,"passive",{get:function(){F1=!0}}),window.addEventListener("test",ud,ud),window.removeEventListener("test",ud,ud)}catch{F1=!1}var za=null,z1=null,Rg=null;function UC(){if(Rg)return Rg;var a,l=z1,u=l.length,g,x="value"in za?za.value:za.textContent,S=x.length;for(a=0;a<u&&l[a]===x[a];a++);var P=u-a;for(g=1;g<=P&&l[u-g]===x[S-g];g++);return Rg=x.slice(a,1<g?1-g:void 0)}function Pg(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function Lg(){return!0}function HC(){return!1}function Ei(a){function l(u,g,x,S,P){this._reactName=u,this._targetInst=x,this.type=g,this.nativeEvent=S,this.target=P,this.currentTarget=null;for(var V in a)a.hasOwnProperty(V)&&(u=a[V],this[V]=u?u(S):S[V]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?Lg:HC,this.isPropagationStopped=HC,this}return p(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Lg)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Lg)},persist:function(){},isPersistent:Lg}),l}var Qo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dg=Ei(Qo),dd=p({},Qo,{view:0,detail:0}),O6=Ei(dd),U1,H1,fd,Ng=p({},dd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:G1,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==fd&&(fd&&a.type==="mousemove"?(U1=a.screenX-fd.screenX,H1=a.screenY-fd.screenY):H1=U1=0,fd=a),U1)},movementY:function(a){return"movementY"in a?a.movementY:H1}}),WC=Ei(Ng),I6=p({},Ng,{dataTransfer:0}),j6=Ei(I6),B6=p({},dd,{relatedTarget:0}),W1=Ei(B6),F6=p({},Qo,{animationName:0,elapsedTime:0,pseudoElement:0}),z6=Ei(F6),U6=p({},Qo,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),H6=Ei(U6),W6=p({},Qo,{data:0}),GC=Ei(W6),G6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},V6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function q6(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=$6[a])?!!l[a]:!1}function G1(){return q6}var Y6=p({},dd,{key:function(a){if(a.key){var l=G6[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=Pg(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?V6[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:G1,charCode:function(a){return a.type==="keypress"?Pg(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Pg(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),X6=Ei(Y6),K6=p({},Ng,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),VC=Ei(K6),Z6=p({},dd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:G1}),Q6=Ei(Z6),J6=p({},Qo,{propertyName:0,elapsedTime:0,pseudoElement:0}),t5=Ei(J6),e5=p({},Ng,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),n5=Ei(e5),i5=p({},Qo,{newState:0,oldState:0}),s5=Ei(i5),r5=[9,13,27,32],V1=jr&&"CompositionEvent"in window,pd=null;jr&&"documentMode"in document&&(pd=document.documentMode);var a5=jr&&"TextEvent"in window&&!pd,$C=jr&&(!V1||pd&&8<pd&&11>=pd),qC=" ",YC=!1;function XC(a,l){switch(a){case"keyup":return r5.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function KC(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Bc=!1;function o5(a,l){switch(a){case"compositionend":return KC(l);case"keypress":return l.which!==32?null:(YC=!0,qC);case"textInput":return a=l.data,a===qC&&YC?null:a;default:return null}}function l5(a,l){if(Bc)return a==="compositionend"||!V1&&XC(a,l)?(a=UC(),Rg=z1=za=null,Bc=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return $C&&l.locale!=="ko"?null:l.data;default:return null}}var c5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ZC(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!c5[a.type]:l==="textarea"}function QC(a,l,u,g){Ic?jc?jc.push(g):jc=[g]:Ic=g,l=Sm(l,"onChange"),0<l.length&&(u=new Dg("onChange","change",null,u,g),a.push({event:u,listeners:l}))}var gd=null,md=null;function h5(a){NM(a,0)}function Og(a){var l=cd(a);if(DC(l))return a}function JC(a,l){if(a==="change")return l}var tk=!1;if(jr){var $1;if(jr){var q1="oninput"in document;if(!q1){var ek=document.createElement("div");ek.setAttribute("oninput","return;"),q1=typeof ek.oninput=="function"}$1=q1}else $1=!1;tk=$1&&(!document.documentMode||9<document.documentMode)}function nk(){gd&&(gd.detachEvent("onpropertychange",ik),md=gd=null)}function ik(a){if(a.propertyName==="value"&&Og(md)){var l=[];QC(l,md,a,j1(a)),zC(h5,l)}}function u5(a,l,u){a==="focusin"?(nk(),gd=l,md=u,gd.attachEvent("onpropertychange",ik)):a==="focusout"&&nk()}function d5(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Og(md)}function f5(a,l){if(a==="click")return Og(l)}function p5(a,l){if(a==="input"||a==="change")return Og(l)}function g5(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var Gi=typeof Object.is=="function"?Object.is:g5;function yd(a,l){if(Gi(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var u=Object.keys(a),g=Object.keys(l);if(u.length!==g.length)return!1;for(g=0;g<u.length;g++){var x=u[g];if(!ot.call(l,x)||!Gi(a[x],l[x]))return!1}return!0}function sk(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function rk(a,l){var u=sk(a);a=0;for(var g;u;){if(u.nodeType===3){if(g=a+u.textContent.length,a<=l&&g>=l)return{node:u,offset:l-a};a=g}t:{for(;u;){if(u.nextSibling){u=u.nextSibling;break t}u=u.parentNode}u=void 0}u=sk(u)}}function ak(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?ak(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function ok(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var l=Tg(a.document);l instanceof a.HTMLIFrameElement;){try{var u=typeof l.contentWindow.location.href=="string"}catch{u=!1}if(u)a=l.contentWindow;else break;l=Tg(a.document)}return l}function Y1(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}var m5=jr&&"documentMode"in document&&11>=document.documentMode,Fc=null,X1=null,vd=null,K1=!1;function lk(a,l,u){var g=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;K1||Fc==null||Fc!==Tg(g)||(g=Fc,"selectionStart"in g&&Y1(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),vd&&yd(vd,g)||(vd=g,g=Sm(X1,"onSelect"),0<g.length&&(l=new Dg("onSelect","select",null,l,u),a.push({event:l,listeners:g}),l.target=Fc)))}function Jo(a,l){var u={};return u[a.toLowerCase()]=l.toLowerCase(),u["Webkit"+a]="webkit"+l,u["Moz"+a]="moz"+l,u}var zc={animationend:Jo("Animation","AnimationEnd"),animationiteration:Jo("Animation","AnimationIteration"),animationstart:Jo("Animation","AnimationStart"),transitionrun:Jo("Transition","TransitionRun"),transitionstart:Jo("Transition","TransitionStart"),transitioncancel:Jo("Transition","TransitionCancel"),transitionend:Jo("Transition","TransitionEnd")},Z1={},ck={};jr&&(ck=document.createElement("div").style,"AnimationEvent"in window||(delete zc.animationend.animation,delete zc.animationiteration.animation,delete zc.animationstart.animation),"TransitionEvent"in window||delete zc.transitionend.transition);function tl(a){if(Z1[a])return Z1[a];if(!zc[a])return a;var l=zc[a],u;for(u in l)if(l.hasOwnProperty(u)&&u in ck)return Z1[a]=l[u];return a}var hk=tl("animationend"),uk=tl("animationiteration"),dk=tl("animationstart"),y5=tl("transitionrun"),v5=tl("transitionstart"),b5=tl("transitioncancel"),fk=tl("transitionend"),pk=new Map,Q1="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Q1.push("scrollEnd");function Fs(a,l){pk.set(a,l),Zo(l,[a])}var Ig=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},fs=[],Uc=0,J1=0;function jg(){for(var a=Uc,l=J1=Uc=0;l<a;){var u=fs[l];fs[l++]=null;var g=fs[l];fs[l++]=null;var x=fs[l];fs[l++]=null;var S=fs[l];if(fs[l++]=null,g!==null&&x!==null){var P=g.pending;P===null?x.next=x:(x.next=P.next,P.next=x),g.pending=x}S!==0&&gk(u,x,S)}}function Bg(a,l,u,g){fs[Uc++]=a,fs[Uc++]=l,fs[Uc++]=u,fs[Uc++]=g,J1|=g,a.lanes|=g,a=a.alternate,a!==null&&(a.lanes|=g)}function tx(a,l,u,g){return Bg(a,l,u,g),Fg(a)}function el(a,l){return Bg(a,null,null,l),Fg(a)}function gk(a,l,u){a.lanes|=u;var g=a.alternate;g!==null&&(g.lanes|=u);for(var x=!1,S=a.return;S!==null;)S.childLanes|=u,g=S.alternate,g!==null&&(g.childLanes|=u),S.tag===22&&(a=S.stateNode,a===null||a._visibility&1||(x=!0)),a=S,S=S.return;return a.tag===3?(S=a.stateNode,x&&l!==null&&(x=31-Ot(u),a=S.hiddenUpdates,g=a[x],g===null?a[x]=[l]:g.push(l),l.lane=u|536870912),S):null}function Fg(a){if(50<zd)throw zd=0,cw=null,Error(n(185));for(var l=a.return;l!==null;)a=l,l=a.return;return a.tag===3?a.stateNode:null}var Hc={};function x5(a,l,u,g){this.tag=a,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vi(a,l,u,g){return new x5(a,l,u,g)}function ex(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Br(a,l){var u=a.alternate;return u===null?(u=Vi(a.tag,l,a.key,a.mode),u.elementType=a.elementType,u.type=a.type,u.stateNode=a.stateNode,u.alternate=a,a.alternate=u):(u.pendingProps=l,u.type=a.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=a.flags&65011712,u.childLanes=a.childLanes,u.lanes=a.lanes,u.child=a.child,u.memoizedProps=a.memoizedProps,u.memoizedState=a.memoizedState,u.updateQueue=a.updateQueue,l=a.dependencies,u.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},u.sibling=a.sibling,u.index=a.index,u.ref=a.ref,u.refCleanup=a.refCleanup,u}function mk(a,l){a.flags&=65011714;var u=a.alternate;return u===null?(a.childLanes=0,a.lanes=l,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,l=u.dependencies,a.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),a}function zg(a,l,u,g,x,S){var P=0;if(g=a,typeof a=="function")ex(a)&&(P=1);else if(typeof a=="string")P=E4(a,u,lt.current)?26:a==="html"||a==="head"||a==="body"?27:5;else t:switch(a){case O:return a=Vi(31,u,l,x),a.elementType=O,a.lanes=S,a;case b:return nl(u.children,x,S,l);case E:P=8,x|=24;break;case _:return a=Vi(12,u,l,x|2),a.elementType=_,a.lanes=S,a;case D:return a=Vi(13,u,l,x),a.elementType=D,a.lanes=S,a;case F:return a=Vi(19,u,l,x),a.elementType=F,a.lanes=S,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case T:P=10;break t;case k:P=9;break t;case R:P=11;break t;case j:P=14;break t;case I:P=16,g=null;break t}P=29,u=Error(n(130,a===null?"null":typeof a,"")),g=null}return l=Vi(P,u,l,x),l.elementType=a,l.type=g,l.lanes=S,l}function nl(a,l,u,g){return a=Vi(7,a,g,l),a.lanes=u,a}function nx(a,l,u){return a=Vi(6,a,null,l),a.lanes=u,a}function yk(a){var l=Vi(18,null,null,0);return l.stateNode=a,l}function ix(a,l,u){return l=Vi(4,a.children!==null?a.children:[],a.key,l),l.lanes=u,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}var vk=new WeakMap;function ps(a,l){if(typeof a=="object"&&a!==null){var u=vk.get(a);return u!==void 0?u:(l={value:a,source:l,stack:Z(l)},vk.set(a,l),l)}return{value:a,source:l,stack:Z(l)}}var Wc=[],Gc=0,Ug=null,bd=0,gs=[],ms=0,Ua=null,tr=1,er="";function Fr(a,l){Wc[Gc++]=bd,Wc[Gc++]=Ug,Ug=a,bd=l}function bk(a,l,u){gs[ms++]=tr,gs[ms++]=er,gs[ms++]=Ua,Ua=a;var g=tr;a=er;var x=32-Ot(g)-1;g&=~(1<<x),u+=1;var S=32-Ot(l)+x;if(30<S){var P=x-x%5;S=(g&(1<<P)-1).toString(32),g>>=P,x-=P,tr=1<<32-Ot(l)+x|u<<x|g,er=S+a}else tr=1<<S|u<<x|g,er=a}function sx(a){a.return!==null&&(Fr(a,1),bk(a,1,0))}function rx(a){for(;a===Ug;)Ug=Wc[--Gc],Wc[Gc]=null,bd=Wc[--Gc],Wc[Gc]=null;for(;a===Ua;)Ua=gs[--ms],gs[ms]=null,er=gs[--ms],gs[ms]=null,tr=gs[--ms],gs[ms]=null}function xk(a,l){gs[ms++]=tr,gs[ms++]=er,gs[ms++]=Ua,tr=l.id,er=l.overflow,Ua=a}var Gn=null,Ke=null,be=!1,Ha=null,ys=!1,ax=Error(n(519));function Wa(a){var l=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw xd(ps(l,a)),ax}function wk(a){var l=a.stateNode,u=a.type,g=a.memoizedProps;switch(l[Wn]=a,l[_i]=g,u){case"dialog":pe("cancel",l),pe("close",l);break;case"iframe":case"object":case"embed":pe("load",l);break;case"video":case"audio":for(u=0;u<Hd.length;u++)pe(Hd[u],l);break;case"source":pe("error",l);break;case"img":case"image":case"link":pe("error",l),pe("load",l);break;case"details":pe("toggle",l);break;case"input":pe("invalid",l),NC(l,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":pe("invalid",l);break;case"textarea":pe("invalid",l),IC(l,g.value,g.defaultValue,g.children)}u=g.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||l.textContent===""+u||g.suppressHydrationWarning===!0||BM(l.textContent,u)?(g.popover!=null&&(pe("beforetoggle",l),pe("toggle",l)),g.onScroll!=null&&pe("scroll",l),g.onScrollEnd!=null&&pe("scrollend",l),g.onClick!=null&&(l.onclick=Ir),l=!0):l=!1,l||Wa(a,!0)}function Ak(a){for(Gn=a.return;Gn;)switch(Gn.tag){case 5:case 31:case 13:ys=!1;return;case 27:case 3:ys=!0;return;default:Gn=Gn.return}}function Vc(a){if(a!==Gn)return!1;if(!be)return Ak(a),be=!0,!1;var l=a.tag,u;if((u=l!==3&&l!==27)&&((u=l===5)&&(u=a.type,u=!(u!=="form"&&u!=="button")||_w(a.type,a.memoizedProps)),u=!u),u&&Ke&&Wa(a),Ak(a),l===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));Ke=qM(a)}else if(l===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));Ke=qM(a)}else l===27?(l=Ke,io(a.type)?(a=Mw,Mw=null,Ke=a):Ke=l):Ke=Gn?bs(a.stateNode.nextSibling):null;return!0}function il(){Ke=Gn=null,be=!1}function ox(){var a=Ha;return a!==null&&(Mi===null?Mi=a:Mi.push.apply(Mi,a),Ha=null),a}function xd(a){Ha===null?Ha=[a]:Ha.push(a)}var lx=U(null),sl=null,zr=null;function Ga(a,l,u){st(lx,l._currentValue),l._currentValue=u}function Ur(a){a._currentValue=lx.current,W(lx)}function cx(a,l,u){for(;a!==null;){var g=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),a===u)break;a=a.return}}function hx(a,l,u,g){var x=a.child;for(x!==null&&(x.return=a);x!==null;){var S=x.dependencies;if(S!==null){var P=x.child;S=S.firstContext;t:for(;S!==null;){var V=S;S=x;for(var it=0;it<l.length;it++)if(V.context===l[it]){S.lanes|=u,V=S.alternate,V!==null&&(V.lanes|=u),cx(S.return,u,a),g||(P=null);break t}S=V.next}}else if(x.tag===18){if(P=x.return,P===null)throw Error(n(341));P.lanes|=u,S=P.alternate,S!==null&&(S.lanes|=u),cx(P,u,a),P=null}else P=x.child;if(P!==null)P.return=x;else for(P=x;P!==null;){if(P===a){P=null;break}if(x=P.sibling,x!==null){x.return=P.return,P=x;break}P=P.return}x=P}}function $c(a,l,u,g){a=null;for(var x=l,S=!1;x!==null;){if(!S){if((x.flags&524288)!==0)S=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var P=x.alternate;if(P===null)throw Error(n(387));if(P=P.memoizedProps,P!==null){var V=x.type;Gi(x.pendingProps.value,P.value)||(a!==null?a.push(V):a=[V])}}else if(x===St.current){if(P=x.alternate,P===null)throw Error(n(387));P.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(a!==null?a.push(qd):a=[qd])}x=x.return}a!==null&&hx(l,a,u,g),l.flags|=262144}function Hg(a){for(a=a.firstContext;a!==null;){if(!Gi(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function rl(a){sl=a,zr=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function Vn(a){return Sk(sl,a)}function Wg(a,l){return sl===null&&rl(a),Sk(a,l)}function Sk(a,l){var u=l._currentValue;if(l={context:l,memoizedValue:u,next:null},zr===null){if(a===null)throw Error(n(308));zr=l,a.dependencies={lanes:0,firstContext:l},a.flags|=524288}else zr=zr.next=l;return u}var w5=typeof AbortController<"u"?AbortController:function(){var a=[],l=this.signal={aborted:!1,addEventListener:function(u,g){a.push(g)}};this.abort=function(){l.aborted=!0,a.forEach(function(u){return u()})}},A5=s.unstable_scheduleCallback,S5=s.unstable_NormalPriority,yn={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ux(){return{controller:new w5,data:new Map,refCount:0}}function wd(a){a.refCount--,a.refCount===0&&A5(S5,function(){a.controller.abort()})}var Ad=null,dx=0,qc=0,Yc=null;function _5(a,l){if(Ad===null){var u=Ad=[];dx=0,qc=gw(),Yc={status:"pending",value:void 0,then:function(g){u.push(g)}}}return dx++,l.then(_k,_k),l}function _k(){if(--dx===0&&Ad!==null){Yc!==null&&(Yc.status="fulfilled");var a=Ad;Ad=null,qc=0,Yc=null;for(var l=0;l<a.length;l++)(0,a[l])()}}function E5(a,l){var u=[],g={status:"pending",value:null,reason:null,then:function(x){u.push(x)}};return a.then(function(){g.status="fulfilled",g.value=l;for(var x=0;x<u.length;x++)(0,u[x])(l)},function(x){for(g.status="rejected",g.reason=x,x=0;x<u.length;x++)(0,u[x])(void 0)}),g}var Ek=$.S;$.S=function(a,l){lM=It(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&_5(a,l),Ek!==null&&Ek(a,l)};var al=U(null);function fx(){var a=al.current;return a!==null?a:We.pooledCache}function Gg(a,l){l===null?st(al,al.current):st(al,l.pool)}function Ck(){var a=fx();return a===null?null:{parent:yn._currentValue,pool:a}}var Xc=Error(n(460)),px=Error(n(474)),Vg=Error(n(542)),$g={then:function(){}};function kk(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Tk(a,l,u){switch(u=a[u],u===void 0?a.push(l):u!==l&&(l.then(Ir,Ir),l=u),l.status){case"fulfilled":return l.value;case"rejected":throw a=l.reason,Rk(a),a;default:if(typeof l.status=="string")l.then(Ir,Ir);else{if(a=We,a!==null&&100<a.shellSuspendCounter)throw Error(n(482));a=l,a.status="pending",a.then(function(g){if(l.status==="pending"){var x=l;x.status="fulfilled",x.value=g}},function(g){if(l.status==="pending"){var x=l;x.status="rejected",x.reason=g}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw a=l.reason,Rk(a),a}throw ll=l,Xc}}function ol(a){try{var l=a._init;return l(a._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(ll=u,Xc):u}}var ll=null;function Mk(){if(ll===null)throw Error(n(459));var a=ll;return ll=null,a}function Rk(a){if(a===Xc||a===Vg)throw Error(n(483))}var Kc=null,Sd=0;function qg(a){var l=Sd;return Sd+=1,Kc===null&&(Kc=[]),Tk(Kc,a,l)}function _d(a,l){l=l.props.ref,a.ref=l!==void 0?l:null}function Yg(a,l){throw l.$$typeof===m?Error(n(525)):(a=Object.prototype.toString.call(l),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a)))}function Pk(a){function l(mt,ct){if(a){var yt=mt.deletions;yt===null?(mt.deletions=[ct],mt.flags|=16):yt.push(ct)}}function u(mt,ct){if(!a)return null;for(;ct!==null;)l(mt,ct),ct=ct.sibling;return null}function g(mt){for(var ct=new Map;mt!==null;)mt.key!==null?ct.set(mt.key,mt):ct.set(mt.index,mt),mt=mt.sibling;return ct}function x(mt,ct){return mt=Br(mt,ct),mt.index=0,mt.sibling=null,mt}function S(mt,ct,yt){return mt.index=yt,a?(yt=mt.alternate,yt!==null?(yt=yt.index,yt<ct?(mt.flags|=67108866,ct):yt):(mt.flags|=67108866,ct)):(mt.flags|=1048576,ct)}function P(mt){return a&&mt.alternate===null&&(mt.flags|=67108866),mt}function V(mt,ct,yt,Dt){return ct===null||ct.tag!==6?(ct=nx(yt,mt.mode,Dt),ct.return=mt,ct):(ct=x(ct,yt),ct.return=mt,ct)}function it(mt,ct,yt,Dt){var Yt=yt.type;return Yt===b?Pt(mt,ct,yt.props.children,Dt,yt.key):ct!==null&&(ct.elementType===Yt||typeof Yt=="object"&&Yt!==null&&Yt.$$typeof===I&&ol(Yt)===ct.type)?(ct=x(ct,yt.props),_d(ct,yt),ct.return=mt,ct):(ct=zg(yt.type,yt.key,yt.props,null,mt.mode,Dt),_d(ct,yt),ct.return=mt,ct)}function vt(mt,ct,yt,Dt){return ct===null||ct.tag!==4||ct.stateNode.containerInfo!==yt.containerInfo||ct.stateNode.implementation!==yt.implementation?(ct=ix(yt,mt.mode,Dt),ct.return=mt,ct):(ct=x(ct,yt.children||[]),ct.return=mt,ct)}function Pt(mt,ct,yt,Dt,Yt){return ct===null||ct.tag!==7?(ct=nl(yt,mt.mode,Dt,Yt),ct.return=mt,ct):(ct=x(ct,yt),ct.return=mt,ct)}function Nt(mt,ct,yt){if(typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint")return ct=nx(""+ct,mt.mode,yt),ct.return=mt,ct;if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case y:return yt=zg(ct.type,ct.key,ct.props,null,mt.mode,yt),_d(yt,ct),yt.return=mt,yt;case w:return ct=ix(ct,mt.mode,yt),ct.return=mt,ct;case I:return ct=ol(ct),Nt(mt,ct,yt)}if(tt(ct)||H(ct))return ct=nl(ct,mt.mode,yt,null),ct.return=mt,ct;if(typeof ct.then=="function")return Nt(mt,qg(ct),yt);if(ct.$$typeof===T)return Nt(mt,Wg(mt,ct),yt);Yg(mt,ct)}return null}function bt(mt,ct,yt,Dt){var Yt=ct!==null?ct.key:null;if(typeof yt=="string"&&yt!==""||typeof yt=="number"||typeof yt=="bigint")return Yt!==null?null:V(mt,ct,""+yt,Dt);if(typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case y:return yt.key===Yt?it(mt,ct,yt,Dt):null;case w:return yt.key===Yt?vt(mt,ct,yt,Dt):null;case I:return yt=ol(yt),bt(mt,ct,yt,Dt)}if(tt(yt)||H(yt))return Yt!==null?null:Pt(mt,ct,yt,Dt,null);if(typeof yt.then=="function")return bt(mt,ct,qg(yt),Dt);if(yt.$$typeof===T)return bt(mt,ct,Wg(mt,yt),Dt);Yg(mt,yt)}return null}function wt(mt,ct,yt,Dt,Yt){if(typeof Dt=="string"&&Dt!==""||typeof Dt=="number"||typeof Dt=="bigint")return mt=mt.get(yt)||null,V(ct,mt,""+Dt,Yt);if(typeof Dt=="object"&&Dt!==null){switch(Dt.$$typeof){case y:return mt=mt.get(Dt.key===null?yt:Dt.key)||null,it(ct,mt,Dt,Yt);case w:return mt=mt.get(Dt.key===null?yt:Dt.key)||null,vt(ct,mt,Dt,Yt);case I:return Dt=ol(Dt),wt(mt,ct,yt,Dt,Yt)}if(tt(Dt)||H(Dt))return mt=mt.get(yt)||null,Pt(ct,mt,Dt,Yt,null);if(typeof Dt.then=="function")return wt(mt,ct,yt,qg(Dt),Yt);if(Dt.$$typeof===T)return wt(mt,ct,yt,Wg(ct,Dt),Yt);Yg(ct,Dt)}return null}function Vt(mt,ct,yt,Dt){for(var Yt=null,Ce=null,$t=ct,le=ct=0,ye=null;$t!==null&&le<yt.length;le++){$t.index>le?(ye=$t,$t=null):ye=$t.sibling;var ke=bt(mt,$t,yt[le],Dt);if(ke===null){$t===null&&($t=ye);break}a&&$t&&ke.alternate===null&&l(mt,$t),ct=S(ke,ct,le),Ce===null?Yt=ke:Ce.sibling=ke,Ce=ke,$t=ye}if(le===yt.length)return u(mt,$t),be&&Fr(mt,le),Yt;if($t===null){for(;le<yt.length;le++)$t=Nt(mt,yt[le],Dt),$t!==null&&(ct=S($t,ct,le),Ce===null?Yt=$t:Ce.sibling=$t,Ce=$t);return be&&Fr(mt,le),Yt}for($t=g($t);le<yt.length;le++)ye=wt($t,mt,le,yt[le],Dt),ye!==null&&(a&&ye.alternate!==null&&$t.delete(ye.key===null?le:ye.key),ct=S(ye,ct,le),Ce===null?Yt=ye:Ce.sibling=ye,Ce=ye);return a&&$t.forEach(function(lo){return l(mt,lo)}),be&&Fr(mt,le),Yt}function Kt(mt,ct,yt,Dt){if(yt==null)throw Error(n(151));for(var Yt=null,Ce=null,$t=ct,le=ct=0,ye=null,ke=yt.next();$t!==null&&!ke.done;le++,ke=yt.next()){$t.index>le?(ye=$t,$t=null):ye=$t.sibling;var lo=bt(mt,$t,ke.value,Dt);if(lo===null){$t===null&&($t=ye);break}a&&$t&&lo.alternate===null&&l(mt,$t),ct=S(lo,ct,le),Ce===null?Yt=lo:Ce.sibling=lo,Ce=lo,$t=ye}if(ke.done)return u(mt,$t),be&&Fr(mt,le),Yt;if($t===null){for(;!ke.done;le++,ke=yt.next())ke=Nt(mt,ke.value,Dt),ke!==null&&(ct=S(ke,ct,le),Ce===null?Yt=ke:Ce.sibling=ke,Ce=ke);return be&&Fr(mt,le),Yt}for($t=g($t);!ke.done;le++,ke=yt.next())ke=wt($t,mt,le,ke.value,Dt),ke!==null&&(a&&ke.alternate!==null&&$t.delete(ke.key===null?le:ke.key),ct=S(ke,ct,le),Ce===null?Yt=ke:Ce.sibling=ke,Ce=ke);return a&&$t.forEach(function(I4){return l(mt,I4)}),be&&Fr(mt,le),Yt}function Be(mt,ct,yt,Dt){if(typeof yt=="object"&&yt!==null&&yt.type===b&&yt.key===null&&(yt=yt.props.children),typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case y:t:{for(var Yt=yt.key;ct!==null;){if(ct.key===Yt){if(Yt=yt.type,Yt===b){if(ct.tag===7){u(mt,ct.sibling),Dt=x(ct,yt.props.children),Dt.return=mt,mt=Dt;break t}}else if(ct.elementType===Yt||typeof Yt=="object"&&Yt!==null&&Yt.$$typeof===I&&ol(Yt)===ct.type){u(mt,ct.sibling),Dt=x(ct,yt.props),_d(Dt,yt),Dt.return=mt,mt=Dt;break t}u(mt,ct);break}else l(mt,ct);ct=ct.sibling}yt.type===b?(Dt=nl(yt.props.children,mt.mode,Dt,yt.key),Dt.return=mt,mt=Dt):(Dt=zg(yt.type,yt.key,yt.props,null,mt.mode,Dt),_d(Dt,yt),Dt.return=mt,mt=Dt)}return P(mt);case w:t:{for(Yt=yt.key;ct!==null;){if(ct.key===Yt)if(ct.tag===4&&ct.stateNode.containerInfo===yt.containerInfo&&ct.stateNode.implementation===yt.implementation){u(mt,ct.sibling),Dt=x(ct,yt.children||[]),Dt.return=mt,mt=Dt;break t}else{u(mt,ct);break}else l(mt,ct);ct=ct.sibling}Dt=ix(yt,mt.mode,Dt),Dt.return=mt,mt=Dt}return P(mt);case I:return yt=ol(yt),Be(mt,ct,yt,Dt)}if(tt(yt))return Vt(mt,ct,yt,Dt);if(H(yt)){if(Yt=H(yt),typeof Yt!="function")throw Error(n(150));return yt=Yt.call(yt),Kt(mt,ct,yt,Dt)}if(typeof yt.then=="function")return Be(mt,ct,qg(yt),Dt);if(yt.$$typeof===T)return Be(mt,ct,Wg(mt,yt),Dt);Yg(mt,yt)}return typeof yt=="string"&&yt!==""||typeof yt=="number"||typeof yt=="bigint"?(yt=""+yt,ct!==null&&ct.tag===6?(u(mt,ct.sibling),Dt=x(ct,yt),Dt.return=mt,mt=Dt):(u(mt,ct),Dt=nx(yt,mt.mode,Dt),Dt.return=mt,mt=Dt),P(mt)):u(mt,ct)}return function(mt,ct,yt,Dt){try{Sd=0;var Yt=Be(mt,ct,yt,Dt);return Kc=null,Yt}catch($t){if($t===Xc||$t===Vg)throw $t;var Ce=Vi(29,$t,null,mt.mode);return Ce.lanes=Dt,Ce.return=mt,Ce}}}var cl=Pk(!0),Lk=Pk(!1),Va=!1;function gx(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function mx(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function $a(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function qa(a,l,u){var g=a.updateQueue;if(g===null)return null;if(g=g.shared,(Te&2)!==0){var x=g.pending;return x===null?l.next=l:(l.next=x.next,x.next=l),g.pending=l,l=Fg(a),gk(a,null,u),l}return Bg(a,g,l,u),Fg(a)}function Ed(a,l,u){if(l=l.updateQueue,l!==null&&(l=l.shared,(u&4194048)!==0)){var g=l.lanes;g&=a.pendingLanes,u|=g,l.lanes=u,SC(a,u)}}function yx(a,l){var u=a.updateQueue,g=a.alternate;if(g!==null&&(g=g.updateQueue,u===g)){var x=null,S=null;if(u=u.firstBaseUpdate,u!==null){do{var P={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};S===null?x=S=P:S=S.next=P,u=u.next}while(u!==null);S===null?x=S=l:S=S.next=l}else x=S=l;u={baseState:g.baseState,firstBaseUpdate:x,lastBaseUpdate:S,shared:g.shared,callbacks:g.callbacks},a.updateQueue=u;return}a=u.lastBaseUpdate,a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=l}var vx=!1;function Cd(){if(vx){var a=Yc;if(a!==null)throw a}}function kd(a,l,u,g){vx=!1;var x=a.updateQueue;Va=!1;var S=x.firstBaseUpdate,P=x.lastBaseUpdate,V=x.shared.pending;if(V!==null){x.shared.pending=null;var it=V,vt=it.next;it.next=null,P===null?S=vt:P.next=vt,P=it;var Pt=a.alternate;Pt!==null&&(Pt=Pt.updateQueue,V=Pt.lastBaseUpdate,V!==P&&(V===null?Pt.firstBaseUpdate=vt:V.next=vt,Pt.lastBaseUpdate=it))}if(S!==null){var Nt=x.baseState;P=0,Pt=vt=it=null,V=S;do{var bt=V.lane&-536870913,wt=bt!==V.lane;if(wt?(me&bt)===bt:(g&bt)===bt){bt!==0&&bt===qc&&(vx=!0),Pt!==null&&(Pt=Pt.next={lane:0,tag:V.tag,payload:V.payload,callback:null,next:null});t:{var Vt=a,Kt=V;bt=l;var Be=u;switch(Kt.tag){case 1:if(Vt=Kt.payload,typeof Vt=="function"){Nt=Vt.call(Be,Nt,bt);break t}Nt=Vt;break t;case 3:Vt.flags=Vt.flags&-65537|128;case 0:if(Vt=Kt.payload,bt=typeof Vt=="function"?Vt.call(Be,Nt,bt):Vt,bt==null)break t;Nt=p({},Nt,bt);break t;case 2:Va=!0}}bt=V.callback,bt!==null&&(a.flags|=64,wt&&(a.flags|=8192),wt=x.callbacks,wt===null?x.callbacks=[bt]:wt.push(bt))}else wt={lane:bt,tag:V.tag,payload:V.payload,callback:V.callback,next:null},Pt===null?(vt=Pt=wt,it=Nt):Pt=Pt.next=wt,P|=bt;if(V=V.next,V===null){if(V=x.shared.pending,V===null)break;wt=V,V=wt.next,wt.next=null,x.lastBaseUpdate=wt,x.shared.pending=null}}while(!0);Pt===null&&(it=Nt),x.baseState=it,x.firstBaseUpdate=vt,x.lastBaseUpdate=Pt,S===null&&(x.shared.lanes=0),Qa|=P,a.lanes=P,a.memoizedState=Nt}}function Dk(a,l){if(typeof a!="function")throw Error(n(191,a));a.call(l)}function Nk(a,l){var u=a.callbacks;if(u!==null)for(a.callbacks=null,a=0;a<u.length;a++)Dk(u[a],l)}var Zc=U(null),Xg=U(0);function Ok(a,l){a=Kr,st(Xg,a),st(Zc,l),Kr=a|l.baseLanes}function bx(){st(Xg,Kr),st(Zc,Zc.current)}function xx(){Kr=Xg.current,W(Zc),W(Xg)}var $i=U(null),vs=null;function Ya(a){var l=a.alternate;st(hn,hn.current&1),st($i,a),vs===null&&(l===null||Zc.current!==null||l.memoizedState!==null)&&(vs=a)}function wx(a){st(hn,hn.current),st($i,a),vs===null&&(vs=a)}function Ik(a){a.tag===22?(st(hn,hn.current),st($i,a),vs===null&&(vs=a)):Xa()}function Xa(){st(hn,hn.current),st($i,$i.current)}function qi(a){W($i),vs===a&&(vs=null),W(hn)}var hn=U(0);function Kg(a){for(var l=a;l!==null;){if(l.tag===13){var u=l.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||kw(u)||Tw(u)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Hr=0,ae=null,Ie=null,vn=null,Zg=!1,Qc=!1,hl=!1,Qg=0,Td=0,Jc=null,C5=0;function on(){throw Error(n(321))}function Ax(a,l){if(l===null)return!1;for(var u=0;u<l.length&&u<a.length;u++)if(!Gi(a[u],l[u]))return!1;return!0}function Sx(a,l,u,g,x,S){return Hr=S,ae=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,$.H=a===null||a.memoizedState===null?bT:Bx,hl=!1,S=u(g,x),hl=!1,Qc&&(S=Bk(l,u,g,x)),jk(a),S}function jk(a){$.H=Pd;var l=Ie!==null&&Ie.next!==null;if(Hr=0,vn=Ie=ae=null,Zg=!1,Td=0,Jc=null,l)throw Error(n(300));a===null||bn||(a=a.dependencies,a!==null&&Hg(a)&&(bn=!0))}function Bk(a,l,u,g){ae=a;var x=0;do{if(Qc&&(Jc=null),Td=0,Qc=!1,25<=x)throw Error(n(301));if(x+=1,vn=Ie=null,a.updateQueue!=null){var S=a.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}$.H=xT,S=l(u,g)}while(Qc);return S}function k5(){var a=$.H,l=a.useState()[0];return l=typeof l.then=="function"?Md(l):l,a=a.useState()[0],(Ie!==null?Ie.memoizedState:null)!==a&&(ae.flags|=1024),l}function _x(){var a=Qg!==0;return Qg=0,a}function Ex(a,l,u){l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~u}function Cx(a){if(Zg){for(a=a.memoizedState;a!==null;){var l=a.queue;l!==null&&(l.pending=null),a=a.next}Zg=!1}Hr=0,vn=Ie=ae=null,Qc=!1,Td=Qg=0,Jc=null}function yi(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vn===null?ae.memoizedState=vn=a:vn=vn.next=a,vn}function un(){if(Ie===null){var a=ae.alternate;a=a!==null?a.memoizedState:null}else a=Ie.next;var l=vn===null?ae.memoizedState:vn.next;if(l!==null)vn=l,Ie=a;else{if(a===null)throw ae.alternate===null?Error(n(467)):Error(n(310));Ie=a,a={memoizedState:Ie.memoizedState,baseState:Ie.baseState,baseQueue:Ie.baseQueue,queue:Ie.queue,next:null},vn===null?ae.memoizedState=vn=a:vn=vn.next=a}return vn}function Jg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Md(a){var l=Td;return Td+=1,Jc===null&&(Jc=[]),a=Tk(Jc,a,l),l=ae,(vn===null?l.memoizedState:vn.next)===null&&(l=l.alternate,$.H=l===null||l.memoizedState===null?bT:Bx),a}function tm(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Md(a);if(a.$$typeof===T)return Vn(a)}throw Error(n(438,String(a)))}function kx(a){var l=null,u=ae.updateQueue;if(u!==null&&(l=u.memoCache),l==null){var g=ae.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(l={data:g.data.map(function(x){return x.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),u===null&&(u=Jg(),ae.updateQueue=u),u.memoCache=l,u=l.data[l.index],u===void 0)for(u=l.data[l.index]=Array(a),g=0;g<a;g++)u[g]=X;return l.index++,u}function Wr(a,l){return typeof l=="function"?l(a):l}function em(a){var l=un();return Tx(l,Ie,a)}function Tx(a,l,u){var g=a.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=u;var x=a.baseQueue,S=g.pending;if(S!==null){if(x!==null){var P=x.next;x.next=S.next,S.next=P}l.baseQueue=x=S,g.pending=null}if(S=a.baseState,x===null)a.memoizedState=S;else{l=x.next;var V=P=null,it=null,vt=l,Pt=!1;do{var Nt=vt.lane&-536870913;if(Nt!==vt.lane?(me&Nt)===Nt:(Hr&Nt)===Nt){var bt=vt.revertLane;if(bt===0)it!==null&&(it=it.next={lane:0,revertLane:0,gesture:null,action:vt.action,hasEagerState:vt.hasEagerState,eagerState:vt.eagerState,next:null}),Nt===qc&&(Pt=!0);else if((Hr&bt)===bt){vt=vt.next,bt===qc&&(Pt=!0);continue}else Nt={lane:0,revertLane:vt.revertLane,gesture:null,action:vt.action,hasEagerState:vt.hasEagerState,eagerState:vt.eagerState,next:null},it===null?(V=it=Nt,P=S):it=it.next=Nt,ae.lanes|=bt,Qa|=bt;Nt=vt.action,hl&&u(S,Nt),S=vt.hasEagerState?vt.eagerState:u(S,Nt)}else bt={lane:Nt,revertLane:vt.revertLane,gesture:vt.gesture,action:vt.action,hasEagerState:vt.hasEagerState,eagerState:vt.eagerState,next:null},it===null?(V=it=bt,P=S):it=it.next=bt,ae.lanes|=Nt,Qa|=Nt;vt=vt.next}while(vt!==null&&vt!==l);if(it===null?P=S:it.next=V,!Gi(S,a.memoizedState)&&(bn=!0,Pt&&(u=Yc,u!==null)))throw u;a.memoizedState=S,a.baseState=P,a.baseQueue=it,g.lastRenderedState=S}return x===null&&(g.lanes=0),[a.memoizedState,g.dispatch]}function Mx(a){var l=un(),u=l.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=a;var g=u.dispatch,x=u.pending,S=l.memoizedState;if(x!==null){u.pending=null;var P=x=x.next;do S=a(S,P.action),P=P.next;while(P!==x);Gi(S,l.memoizedState)||(bn=!0),l.memoizedState=S,l.baseQueue===null&&(l.baseState=S),u.lastRenderedState=S}return[S,g]}function Fk(a,l,u){var g=ae,x=un(),S=be;if(S){if(u===void 0)throw Error(n(407));u=u()}else u=l();var P=!Gi((Ie||x).memoizedState,u);if(P&&(x.memoizedState=u,bn=!0),x=x.queue,Lx(Hk.bind(null,g,x,a),[a]),x.getSnapshot!==l||P||vn!==null&&vn.memoizedState.tag&1){if(g.flags|=2048,th(9,{destroy:void 0},Uk.bind(null,g,x,u,l),null),We===null)throw Error(n(349));S||(Hr&127)!==0||zk(g,l,u)}return u}function zk(a,l,u){a.flags|=16384,a={getSnapshot:l,value:u},l=ae.updateQueue,l===null?(l=Jg(),ae.updateQueue=l,l.stores=[a]):(u=l.stores,u===null?l.stores=[a]:u.push(a))}function Uk(a,l,u,g){l.value=u,l.getSnapshot=g,Wk(l)&&Gk(a)}function Hk(a,l,u){return u(function(){Wk(l)&&Gk(a)})}function Wk(a){var l=a.getSnapshot;a=a.value;try{var u=l();return!Gi(a,u)}catch{return!0}}function Gk(a){var l=el(a,2);l!==null&&Ri(l,a,2)}function Rx(a){var l=yi();if(typeof a=="function"){var u=a;if(a=u(),hl){_t(!0);try{u()}finally{_t(!1)}}}return l.memoizedState=l.baseState=a,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wr,lastRenderedState:a},l}function Vk(a,l,u,g){return a.baseState=u,Tx(a,Ie,typeof g=="function"?g:Wr)}function T5(a,l,u,g,x){if(sm(a))throw Error(n(485));if(a=l.action,a!==null){var S={payload:x,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(P){S.listeners.push(P)}};$.T!==null?u(!0):S.isTransition=!1,g(S),u=l.pending,u===null?(S.next=l.pending=S,$k(l,S)):(S.next=u.next,l.pending=u.next=S)}}function $k(a,l){var u=l.action,g=l.payload,x=a.state;if(l.isTransition){var S=$.T,P={};$.T=P;try{var V=u(x,g),it=$.S;it!==null&&it(P,V),qk(a,l,V)}catch(vt){Px(a,l,vt)}finally{S!==null&&P.types!==null&&(S.types=P.types),$.T=S}}else try{S=u(x,g),qk(a,l,S)}catch(vt){Px(a,l,vt)}}function qk(a,l,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(g){Yk(a,l,g)},function(g){return Px(a,l,g)}):Yk(a,l,u)}function Yk(a,l,u){l.status="fulfilled",l.value=u,Xk(l),a.state=u,l=a.pending,l!==null&&(u=l.next,u===l?a.pending=null:(u=u.next,l.next=u,$k(a,u)))}function Px(a,l,u){var g=a.pending;if(a.pending=null,g!==null){g=g.next;do l.status="rejected",l.reason=u,Xk(l),l=l.next;while(l!==g)}a.action=null}function Xk(a){a=a.listeners;for(var l=0;l<a.length;l++)(0,a[l])()}function Kk(a,l){return l}function Zk(a,l){if(be){var u=We.formState;if(u!==null){t:{var g=ae;if(be){if(Ke){e:{for(var x=Ke,S=ys;x.nodeType!==8;){if(!S){x=null;break e}if(x=bs(x.nextSibling),x===null){x=null;break e}}S=x.data,x=S==="F!"||S==="F"?x:null}if(x){Ke=bs(x.nextSibling),g=x.data==="F!";break t}}Wa(g)}g=!1}g&&(l=u[0])}}return u=yi(),u.memoizedState=u.baseState=l,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kk,lastRenderedState:l},u.queue=g,u=mT.bind(null,ae,g),g.dispatch=u,g=Rx(!1),S=jx.bind(null,ae,!1,g.queue),g=yi(),x={state:l,dispatch:null,action:a,pending:null},g.queue=x,u=T5.bind(null,ae,x,S,u),x.dispatch=u,g.memoizedState=a,[l,u,!1]}function Qk(a){var l=un();return Jk(l,Ie,a)}function Jk(a,l,u){if(l=Tx(a,l,Kk)[0],a=em(Wr)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var g=Md(l)}catch(P){throw P===Xc?Vg:P}else g=l;l=un();var x=l.queue,S=x.dispatch;return u!==l.memoizedState&&(ae.flags|=2048,th(9,{destroy:void 0},M5.bind(null,x,u),null)),[g,S,a]}function M5(a,l){a.action=l}function tT(a){var l=un(),u=Ie;if(u!==null)return Jk(l,u,a);un(),l=l.memoizedState,u=un();var g=u.queue.dispatch;return u.memoizedState=a,[l,g,!1]}function th(a,l,u,g){return a={tag:a,create:u,deps:g,inst:l,next:null},l=ae.updateQueue,l===null&&(l=Jg(),ae.updateQueue=l),u=l.lastEffect,u===null?l.lastEffect=a.next=a:(g=u.next,u.next=a,a.next=g,l.lastEffect=a),a}function eT(){return un().memoizedState}function nm(a,l,u,g){var x=yi();ae.flags|=a,x.memoizedState=th(1|l,{destroy:void 0},u,g===void 0?null:g)}function im(a,l,u,g){var x=un();g=g===void 0?null:g;var S=x.memoizedState.inst;Ie!==null&&g!==null&&Ax(g,Ie.memoizedState.deps)?x.memoizedState=th(l,S,u,g):(ae.flags|=a,x.memoizedState=th(1|l,S,u,g))}function nT(a,l){nm(8390656,8,a,l)}function Lx(a,l){im(2048,8,a,l)}function R5(a){ae.flags|=4;var l=ae.updateQueue;if(l===null)l=Jg(),ae.updateQueue=l,l.events=[a];else{var u=l.events;u===null?l.events=[a]:u.push(a)}}function iT(a){var l=un().memoizedState;return R5({ref:l,nextImpl:a}),function(){if((Te&2)!==0)throw Error(n(440));return l.impl.apply(void 0,arguments)}}function sT(a,l){return im(4,2,a,l)}function rT(a,l){return im(4,4,a,l)}function aT(a,l){if(typeof l=="function"){a=a();var u=l(a);return function(){typeof u=="function"?u():l(null)}}if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function oT(a,l,u){u=u!=null?u.concat([a]):null,im(4,4,aT.bind(null,l,a),u)}function Dx(){}function lT(a,l){var u=un();l=l===void 0?null:l;var g=u.memoizedState;return l!==null&&Ax(l,g[1])?g[0]:(u.memoizedState=[a,l],a)}function cT(a,l){var u=un();l=l===void 0?null:l;var g=u.memoizedState;if(l!==null&&Ax(l,g[1]))return g[0];if(g=a(),hl){_t(!0);try{a()}finally{_t(!1)}}return u.memoizedState=[g,l],g}function Nx(a,l,u){return u===void 0||(Hr&1073741824)!==0&&(me&261930)===0?a.memoizedState=l:(a.memoizedState=u,a=hM(),ae.lanes|=a,Qa|=a,u)}function hT(a,l,u,g){return Gi(u,l)?u:Zc.current!==null?(a=Nx(a,u,g),Gi(a,l)||(bn=!0),a):(Hr&42)===0||(Hr&1073741824)!==0&&(me&261930)===0?(bn=!0,a.memoizedState=u):(a=hM(),ae.lanes|=a,Qa|=a,l)}function uT(a,l,u,g,x){var S=G.p;G.p=S!==0&&8>S?S:8;var P=$.T,V={};$.T=V,jx(a,!1,l,u);try{var it=x(),vt=$.S;if(vt!==null&&vt(V,it),it!==null&&typeof it=="object"&&typeof it.then=="function"){var Pt=E5(it,g);Rd(a,l,Pt,Ki(a))}else Rd(a,l,g,Ki(a))}catch(Nt){Rd(a,l,{then:function(){},status:"rejected",reason:Nt},Ki())}finally{G.p=S,P!==null&&V.types!==null&&(P.types=V.types),$.T=P}}function P5(){}function Ox(a,l,u,g){if(a.tag!==5)throw Error(n(476));var x=dT(a).queue;uT(a,x,l,gt,u===null?P5:function(){return fT(a),u(g)})}function dT(a){var l=a.memoizedState;if(l!==null)return l;l={memoizedState:gt,baseState:gt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wr,lastRenderedState:gt},next:null};var u={};return l.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wr,lastRenderedState:u},next:null},a.memoizedState=l,a=a.alternate,a!==null&&(a.memoizedState=l),l}function fT(a){var l=dT(a);l.next===null&&(l=a.alternate.memoizedState),Rd(a,l.next.queue,{},Ki())}function Ix(){return Vn(qd)}function pT(){return un().memoizedState}function gT(){return un().memoizedState}function L5(a){for(var l=a.return;l!==null;){switch(l.tag){case 24:case 3:var u=Ki();a=$a(u);var g=qa(l,a,u);g!==null&&(Ri(g,l,u),Ed(g,l,u)),l={cache:ux()},a.payload=l;return}l=l.return}}function D5(a,l,u){var g=Ki();u={lane:g,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},sm(a)?yT(l,u):(u=tx(a,l,u,g),u!==null&&(Ri(u,a,g),vT(u,l,g)))}function mT(a,l,u){var g=Ki();Rd(a,l,u,g)}function Rd(a,l,u,g){var x={lane:g,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(sm(a))yT(l,x);else{var S=a.alternate;if(a.lanes===0&&(S===null||S.lanes===0)&&(S=l.lastRenderedReducer,S!==null))try{var P=l.lastRenderedState,V=S(P,u);if(x.hasEagerState=!0,x.eagerState=V,Gi(V,P))return Bg(a,l,x,0),We===null&&jg(),!1}catch{}if(u=tx(a,l,x,g),u!==null)return Ri(u,a,g),vT(u,l,g),!0}return!1}function jx(a,l,u,g){if(g={lane:2,revertLane:gw(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},sm(a)){if(l)throw Error(n(479))}else l=tx(a,u,g,2),l!==null&&Ri(l,a,2)}function sm(a){var l=a.alternate;return a===ae||l!==null&&l===ae}function yT(a,l){Qc=Zg=!0;var u=a.pending;u===null?l.next=l:(l.next=u.next,u.next=l),a.pending=l}function vT(a,l,u){if((u&4194048)!==0){var g=l.lanes;g&=a.pendingLanes,u|=g,l.lanes=u,SC(a,u)}}var Pd={readContext:Vn,use:tm,useCallback:on,useContext:on,useEffect:on,useImperativeHandle:on,useLayoutEffect:on,useInsertionEffect:on,useMemo:on,useReducer:on,useRef:on,useState:on,useDebugValue:on,useDeferredValue:on,useTransition:on,useSyncExternalStore:on,useId:on,useHostTransitionStatus:on,useFormState:on,useActionState:on,useOptimistic:on,useMemoCache:on,useCacheRefresh:on};Pd.useEffectEvent=on;var bT={readContext:Vn,use:tm,useCallback:function(a,l){return yi().memoizedState=[a,l===void 0?null:l],a},useContext:Vn,useEffect:nT,useImperativeHandle:function(a,l,u){u=u!=null?u.concat([a]):null,nm(4194308,4,aT.bind(null,l,a),u)},useLayoutEffect:function(a,l){return nm(4194308,4,a,l)},useInsertionEffect:function(a,l){nm(4,2,a,l)},useMemo:function(a,l){var u=yi();l=l===void 0?null:l;var g=a();if(hl){_t(!0);try{a()}finally{_t(!1)}}return u.memoizedState=[g,l],g},useReducer:function(a,l,u){var g=yi();if(u!==void 0){var x=u(l);if(hl){_t(!0);try{u(l)}finally{_t(!1)}}}else x=l;return g.memoizedState=g.baseState=x,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:x},g.queue=a,a=a.dispatch=D5.bind(null,ae,a),[g.memoizedState,a]},useRef:function(a){var l=yi();return a={current:a},l.memoizedState=a},useState:function(a){a=Rx(a);var l=a.queue,u=mT.bind(null,ae,l);return l.dispatch=u,[a.memoizedState,u]},useDebugValue:Dx,useDeferredValue:function(a,l){var u=yi();return Nx(u,a,l)},useTransition:function(){var a=Rx(!1);return a=uT.bind(null,ae,a.queue,!0,!1),yi().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,l,u){var g=ae,x=yi();if(be){if(u===void 0)throw Error(n(407));u=u()}else{if(u=l(),We===null)throw Error(n(349));(me&127)!==0||zk(g,l,u)}x.memoizedState=u;var S={value:u,getSnapshot:l};return x.queue=S,nT(Hk.bind(null,g,S,a),[a]),g.flags|=2048,th(9,{destroy:void 0},Uk.bind(null,g,S,u,l),null),u},useId:function(){var a=yi(),l=We.identifierPrefix;if(be){var u=er,g=tr;u=(g&~(1<<32-Ot(g)-1)).toString(32)+u,l="_"+l+"R_"+u,u=Qg++,0<u&&(l+="H"+u.toString(32)),l+="_"}else u=C5++,l="_"+l+"r_"+u.toString(32)+"_";return a.memoizedState=l},useHostTransitionStatus:Ix,useFormState:Zk,useActionState:Zk,useOptimistic:function(a){var l=yi();l.memoizedState=l.baseState=a;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=u,l=jx.bind(null,ae,!0,u),u.dispatch=l,[a,l]},useMemoCache:kx,useCacheRefresh:function(){return yi().memoizedState=L5.bind(null,ae)},useEffectEvent:function(a){var l=yi(),u={impl:a};return l.memoizedState=u,function(){if((Te&2)!==0)throw Error(n(440));return u.impl.apply(void 0,arguments)}}},Bx={readContext:Vn,use:tm,useCallback:lT,useContext:Vn,useEffect:Lx,useImperativeHandle:oT,useInsertionEffect:sT,useLayoutEffect:rT,useMemo:cT,useReducer:em,useRef:eT,useState:function(){return em(Wr)},useDebugValue:Dx,useDeferredValue:function(a,l){var u=un();return hT(u,Ie.memoizedState,a,l)},useTransition:function(){var a=em(Wr)[0],l=un().memoizedState;return[typeof a=="boolean"?a:Md(a),l]},useSyncExternalStore:Fk,useId:pT,useHostTransitionStatus:Ix,useFormState:Qk,useActionState:Qk,useOptimistic:function(a,l){var u=un();return Vk(u,Ie,a,l)},useMemoCache:kx,useCacheRefresh:gT};Bx.useEffectEvent=iT;var xT={readContext:Vn,use:tm,useCallback:lT,useContext:Vn,useEffect:Lx,useImperativeHandle:oT,useInsertionEffect:sT,useLayoutEffect:rT,useMemo:cT,useReducer:Mx,useRef:eT,useState:function(){return Mx(Wr)},useDebugValue:Dx,useDeferredValue:function(a,l){var u=un();return Ie===null?Nx(u,a,l):hT(u,Ie.memoizedState,a,l)},useTransition:function(){var a=Mx(Wr)[0],l=un().memoizedState;return[typeof a=="boolean"?a:Md(a),l]},useSyncExternalStore:Fk,useId:pT,useHostTransitionStatus:Ix,useFormState:tT,useActionState:tT,useOptimistic:function(a,l){var u=un();return Ie!==null?Vk(u,Ie,a,l):(u.baseState=a,[a,u.queue.dispatch])},useMemoCache:kx,useCacheRefresh:gT};xT.useEffectEvent=iT;function Fx(a,l,u,g){l=a.memoizedState,u=u(g,l),u=u==null?l:p({},l,u),a.memoizedState=u,a.lanes===0&&(a.updateQueue.baseState=u)}var zx={enqueueSetState:function(a,l,u){a=a._reactInternals;var g=Ki(),x=$a(g);x.payload=l,u!=null&&(x.callback=u),l=qa(a,x,g),l!==null&&(Ri(l,a,g),Ed(l,a,g))},enqueueReplaceState:function(a,l,u){a=a._reactInternals;var g=Ki(),x=$a(g);x.tag=1,x.payload=l,u!=null&&(x.callback=u),l=qa(a,x,g),l!==null&&(Ri(l,a,g),Ed(l,a,g))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var u=Ki(),g=$a(u);g.tag=2,l!=null&&(g.callback=l),l=qa(a,g,u),l!==null&&(Ri(l,a,u),Ed(l,a,u))}};function wT(a,l,u,g,x,S,P){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(g,S,P):l.prototype&&l.prototype.isPureReactComponent?!yd(u,g)||!yd(x,S):!0}function AT(a,l,u,g){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(u,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(u,g),l.state!==a&&zx.enqueueReplaceState(l,l.state,null)}function ul(a,l){var u=l;if("ref"in l){u={};for(var g in l)g!=="ref"&&(u[g]=l[g])}if(a=a.defaultProps){u===l&&(u=p({},u));for(var x in a)u[x]===void 0&&(u[x]=a[x])}return u}function ST(a){Ig(a)}function _T(a){console.error(a)}function ET(a){Ig(a)}function rm(a,l){try{var u=a.onUncaughtError;u(l.value,{componentStack:l.stack})}catch(g){setTimeout(function(){throw g})}}function CT(a,l,u){try{var g=a.onCaughtError;g(u.value,{componentStack:u.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function Ux(a,l,u){return u=$a(u),u.tag=3,u.payload={element:null},u.callback=function(){rm(a,l)},u}function kT(a){return a=$a(a),a.tag=3,a}function TT(a,l,u,g){var x=u.type.getDerivedStateFromError;if(typeof x=="function"){var S=g.value;a.payload=function(){return x(S)},a.callback=function(){CT(l,u,g)}}var P=u.stateNode;P!==null&&typeof P.componentDidCatch=="function"&&(a.callback=function(){CT(l,u,g),typeof x!="function"&&(Ja===null?Ja=new Set([this]):Ja.add(this));var V=g.stack;this.componentDidCatch(g.value,{componentStack:V!==null?V:""})})}function N5(a,l,u,g,x){if(u.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(l=u.alternate,l!==null&&$c(l,u,x,!0),u=$i.current,u!==null){switch(u.tag){case 31:case 13:return vs===null?ym():u.alternate===null&&ln===0&&(ln=3),u.flags&=-257,u.flags|=65536,u.lanes=x,g===$g?u.flags|=16384:(l=u.updateQueue,l===null?u.updateQueue=new Set([g]):l.add(g),dw(a,g,x)),!1;case 22:return u.flags|=65536,g===$g?u.flags|=16384:(l=u.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([g])},u.updateQueue=l):(u=l.retryQueue,u===null?l.retryQueue=new Set([g]):u.add(g)),dw(a,g,x)),!1}throw Error(n(435,u.tag))}return dw(a,g,x),ym(),!1}if(be)return l=$i.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=x,g!==ax&&(a=Error(n(422),{cause:g}),xd(ps(a,u)))):(g!==ax&&(l=Error(n(423),{cause:g}),xd(ps(l,u))),a=a.current.alternate,a.flags|=65536,x&=-x,a.lanes|=x,g=ps(g,u),x=Ux(a.stateNode,g,x),yx(a,x),ln!==4&&(ln=2)),!1;var S=Error(n(520),{cause:g});if(S=ps(S,u),Fd===null?Fd=[S]:Fd.push(S),ln!==4&&(ln=2),l===null)return!0;g=ps(g,u),u=l;do{switch(u.tag){case 3:return u.flags|=65536,a=x&-x,u.lanes|=a,a=Ux(u.stateNode,g,a),yx(u,a),!1;case 1:if(l=u.type,S=u.stateNode,(u.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Ja===null||!Ja.has(S))))return u.flags|=65536,x&=-x,u.lanes|=x,x=kT(x),TT(x,a,u,g),yx(u,x),!1}u=u.return}while(u!==null);return!1}var Hx=Error(n(461)),bn=!1;function $n(a,l,u,g){l.child=a===null?Lk(l,null,u,g):cl(l,a.child,u,g)}function MT(a,l,u,g,x){u=u.render;var S=l.ref;if("ref"in g){var P={};for(var V in g)V!=="ref"&&(P[V]=g[V])}else P=g;return rl(l),g=Sx(a,l,u,P,S,x),V=_x(),a!==null&&!bn?(Ex(a,l,x),Gr(a,l,x)):(be&&V&&sx(l),l.flags|=1,$n(a,l,g,x),l.child)}function RT(a,l,u,g,x){if(a===null){var S=u.type;return typeof S=="function"&&!ex(S)&&S.defaultProps===void 0&&u.compare===null?(l.tag=15,l.type=S,PT(a,l,S,g,x)):(a=zg(u.type,null,g,l,l.mode,x),a.ref=l.ref,a.return=l,l.child=a)}if(S=a.child,!Kx(a,x)){var P=S.memoizedProps;if(u=u.compare,u=u!==null?u:yd,u(P,g)&&a.ref===l.ref)return Gr(a,l,x)}return l.flags|=1,a=Br(S,g),a.ref=l.ref,a.return=l,l.child=a}function PT(a,l,u,g,x){if(a!==null){var S=a.memoizedProps;if(yd(S,g)&&a.ref===l.ref)if(bn=!1,l.pendingProps=g=S,Kx(a,x))(a.flags&131072)!==0&&(bn=!0);else return l.lanes=a.lanes,Gr(a,l,x)}return Wx(a,l,u,g,x)}function LT(a,l,u,g){var x=g.children,S=a!==null?a.memoizedState:null;if(a===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((l.flags&128)!==0){if(S=S!==null?S.baseLanes|u:u,a!==null){for(g=l.child=a.child,x=0;g!==null;)x=x|g.lanes|g.childLanes,g=g.sibling;g=x&~S}else g=0,l.child=null;return DT(a,l,S,u,g)}if((u&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},a!==null&&Gg(l,S!==null?S.cachePool:null),S!==null?Ok(l,S):bx(),Ik(l);else return g=l.lanes=536870912,DT(a,l,S!==null?S.baseLanes|u:u,u,g)}else S!==null?(Gg(l,S.cachePool),Ok(l,S),Xa(),l.memoizedState=null):(a!==null&&Gg(l,null),bx(),Xa());return $n(a,l,x,u),l.child}function Ld(a,l){return a!==null&&a.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function DT(a,l,u,g,x){var S=fx();return S=S===null?null:{parent:yn._currentValue,pool:S},l.memoizedState={baseLanes:u,cachePool:S},a!==null&&Gg(l,null),bx(),Ik(l),a!==null&&$c(a,l,g,!0),l.childLanes=x,null}function am(a,l){return l=lm({mode:l.mode,children:l.children},a.mode),l.ref=a.ref,a.child=l,l.return=a,l}function NT(a,l,u){return cl(l,a.child,null,u),a=am(l,l.pendingProps),a.flags|=2,qi(l),l.memoizedState=null,a}function O5(a,l,u){var g=l.pendingProps,x=(l.flags&128)!==0;if(l.flags&=-129,a===null){if(be){if(g.mode==="hidden")return a=am(l,g),l.lanes=536870912,Ld(null,a);if(wx(l),(a=Ke)?(a=$M(a,ys),a=a!==null&&a.data==="&"?a:null,a!==null&&(l.memoizedState={dehydrated:a,treeContext:Ua!==null?{id:tr,overflow:er}:null,retryLane:536870912,hydrationErrors:null},u=yk(a),u.return=l,l.child=u,Gn=l,Ke=null)):a=null,a===null)throw Wa(l);return l.lanes=536870912,null}return am(l,g)}var S=a.memoizedState;if(S!==null){var P=S.dehydrated;if(wx(l),x)if(l.flags&256)l.flags&=-257,l=NT(a,l,u);else if(l.memoizedState!==null)l.child=a.child,l.flags|=128,l=null;else throw Error(n(558));else if(bn||$c(a,l,u,!1),x=(u&a.childLanes)!==0,bn||x){if(g=We,g!==null&&(P=_C(g,u),P!==0&&P!==S.retryLane))throw S.retryLane=P,el(a,P),Ri(g,a,P),Hx;ym(),l=NT(a,l,u)}else a=S.treeContext,Ke=bs(P.nextSibling),Gn=l,be=!0,Ha=null,ys=!1,a!==null&&xk(l,a),l=am(l,g),l.flags|=4096;return l}return a=Br(a.child,{mode:g.mode,children:g.children}),a.ref=l.ref,l.child=a,a.return=l,a}function om(a,l){var u=l.ref;if(u===null)a!==null&&a.ref!==null&&(l.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(n(284));(a===null||a.ref!==u)&&(l.flags|=4194816)}}function Wx(a,l,u,g,x){return rl(l),u=Sx(a,l,u,g,void 0,x),g=_x(),a!==null&&!bn?(Ex(a,l,x),Gr(a,l,x)):(be&&g&&sx(l),l.flags|=1,$n(a,l,u,x),l.child)}function OT(a,l,u,g,x,S){return rl(l),l.updateQueue=null,u=Bk(l,g,u,x),jk(a),g=_x(),a!==null&&!bn?(Ex(a,l,S),Gr(a,l,S)):(be&&g&&sx(l),l.flags|=1,$n(a,l,u,S),l.child)}function IT(a,l,u,g,x){if(rl(l),l.stateNode===null){var S=Hc,P=u.contextType;typeof P=="object"&&P!==null&&(S=Vn(P)),S=new u(g,S),l.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=zx,l.stateNode=S,S._reactInternals=l,S=l.stateNode,S.props=g,S.state=l.memoizedState,S.refs={},gx(l),P=u.contextType,S.context=typeof P=="object"&&P!==null?Vn(P):Hc,S.state=l.memoizedState,P=u.getDerivedStateFromProps,typeof P=="function"&&(Fx(l,u,P,g),S.state=l.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(P=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),P!==S.state&&zx.enqueueReplaceState(S,S.state,null),kd(l,g,S,x),Cd(),S.state=l.memoizedState),typeof S.componentDidMount=="function"&&(l.flags|=4194308),g=!0}else if(a===null){S=l.stateNode;var V=l.memoizedProps,it=ul(u,V);S.props=it;var vt=S.context,Pt=u.contextType;P=Hc,typeof Pt=="object"&&Pt!==null&&(P=Vn(Pt));var Nt=u.getDerivedStateFromProps;Pt=typeof Nt=="function"||typeof S.getSnapshotBeforeUpdate=="function",V=l.pendingProps!==V,Pt||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(V||vt!==P)&&AT(l,S,g,P),Va=!1;var bt=l.memoizedState;S.state=bt,kd(l,g,S,x),Cd(),vt=l.memoizedState,V||bt!==vt||Va?(typeof Nt=="function"&&(Fx(l,u,Nt,g),vt=l.memoizedState),(it=Va||wT(l,u,it,g,bt,vt,P))?(Pt||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(l.flags|=4194308)):(typeof S.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=vt),S.props=g,S.state=vt,S.context=P,g=it):(typeof S.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{S=l.stateNode,mx(a,l),P=l.memoizedProps,Pt=ul(u,P),S.props=Pt,Nt=l.pendingProps,bt=S.context,vt=u.contextType,it=Hc,typeof vt=="object"&&vt!==null&&(it=Vn(vt)),V=u.getDerivedStateFromProps,(vt=typeof V=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(P!==Nt||bt!==it)&&AT(l,S,g,it),Va=!1,bt=l.memoizedState,S.state=bt,kd(l,g,S,x),Cd();var wt=l.memoizedState;P!==Nt||bt!==wt||Va||a!==null&&a.dependencies!==null&&Hg(a.dependencies)?(typeof V=="function"&&(Fx(l,u,V,g),wt=l.memoizedState),(Pt=Va||wT(l,u,Pt,g,bt,wt,it)||a!==null&&a.dependencies!==null&&Hg(a.dependencies))?(vt||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(g,wt,it),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(g,wt,it)),typeof S.componentDidUpdate=="function"&&(l.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof S.componentDidUpdate!="function"||P===a.memoizedProps&&bt===a.memoizedState||(l.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||P===a.memoizedProps&&bt===a.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=wt),S.props=g,S.state=wt,S.context=it,g=Pt):(typeof S.componentDidUpdate!="function"||P===a.memoizedProps&&bt===a.memoizedState||(l.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||P===a.memoizedProps&&bt===a.memoizedState||(l.flags|=1024),g=!1)}return S=g,om(a,l),g=(l.flags&128)!==0,S||g?(S=l.stateNode,u=g&&typeof u.getDerivedStateFromError!="function"?null:S.render(),l.flags|=1,a!==null&&g?(l.child=cl(l,a.child,null,x),l.child=cl(l,null,u,x)):$n(a,l,u,x),l.memoizedState=S.state,a=l.child):a=Gr(a,l,x),a}function jT(a,l,u,g){return il(),l.flags|=256,$n(a,l,u,g),l.child}var Gx={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Vx(a){return{baseLanes:a,cachePool:Ck()}}function $x(a,l,u){return a=a!==null?a.childLanes&~u:0,l&&(a|=Xi),a}function BT(a,l,u){var g=l.pendingProps,x=!1,S=(l.flags&128)!==0,P;if((P=S)||(P=a!==null&&a.memoizedState===null?!1:(hn.current&2)!==0),P&&(x=!0,l.flags&=-129),P=(l.flags&32)!==0,l.flags&=-33,a===null){if(be){if(x?Ya(l):Xa(),(a=Ke)?(a=$M(a,ys),a=a!==null&&a.data!=="&"?a:null,a!==null&&(l.memoizedState={dehydrated:a,treeContext:Ua!==null?{id:tr,overflow:er}:null,retryLane:536870912,hydrationErrors:null},u=yk(a),u.return=l,l.child=u,Gn=l,Ke=null)):a=null,a===null)throw Wa(l);return Tw(a)?l.lanes=32:l.lanes=536870912,null}var V=g.children;return g=g.fallback,x?(Xa(),x=l.mode,V=lm({mode:"hidden",children:V},x),g=nl(g,x,u,null),V.return=l,g.return=l,V.sibling=g,l.child=V,g=l.child,g.memoizedState=Vx(u),g.childLanes=$x(a,P,u),l.memoizedState=Gx,Ld(null,g)):(Ya(l),qx(l,V))}var it=a.memoizedState;if(it!==null&&(V=it.dehydrated,V!==null)){if(S)l.flags&256?(Ya(l),l.flags&=-257,l=Yx(a,l,u)):l.memoizedState!==null?(Xa(),l.child=a.child,l.flags|=128,l=null):(Xa(),V=g.fallback,x=l.mode,g=lm({mode:"visible",children:g.children},x),V=nl(V,x,u,null),V.flags|=2,g.return=l,V.return=l,g.sibling=V,l.child=g,cl(l,a.child,null,u),g=l.child,g.memoizedState=Vx(u),g.childLanes=$x(a,P,u),l.memoizedState=Gx,l=Ld(null,g));else if(Ya(l),Tw(V)){if(P=V.nextSibling&&V.nextSibling.dataset,P)var vt=P.dgst;P=vt,g=Error(n(419)),g.stack="",g.digest=P,xd({value:g,source:null,stack:null}),l=Yx(a,l,u)}else if(bn||$c(a,l,u,!1),P=(u&a.childLanes)!==0,bn||P){if(P=We,P!==null&&(g=_C(P,u),g!==0&&g!==it.retryLane))throw it.retryLane=g,el(a,g),Ri(P,a,g),Hx;kw(V)||ym(),l=Yx(a,l,u)}else kw(V)?(l.flags|=192,l.child=a.child,l=null):(a=it.treeContext,Ke=bs(V.nextSibling),Gn=l,be=!0,Ha=null,ys=!1,a!==null&&xk(l,a),l=qx(l,g.children),l.flags|=4096);return l}return x?(Xa(),V=g.fallback,x=l.mode,it=a.child,vt=it.sibling,g=Br(it,{mode:"hidden",children:g.children}),g.subtreeFlags=it.subtreeFlags&65011712,vt!==null?V=Br(vt,V):(V=nl(V,x,u,null),V.flags|=2),V.return=l,g.return=l,g.sibling=V,l.child=g,Ld(null,g),g=l.child,V=a.child.memoizedState,V===null?V=Vx(u):(x=V.cachePool,x!==null?(it=yn._currentValue,x=x.parent!==it?{parent:it,pool:it}:x):x=Ck(),V={baseLanes:V.baseLanes|u,cachePool:x}),g.memoizedState=V,g.childLanes=$x(a,P,u),l.memoizedState=Gx,Ld(a.child,g)):(Ya(l),u=a.child,a=u.sibling,u=Br(u,{mode:"visible",children:g.children}),u.return=l,u.sibling=null,a!==null&&(P=l.deletions,P===null?(l.deletions=[a],l.flags|=16):P.push(a)),l.child=u,l.memoizedState=null,u)}function qx(a,l){return l=lm({mode:"visible",children:l},a.mode),l.return=a,a.child=l}function lm(a,l){return a=Vi(22,a,null,l),a.lanes=0,a}function Yx(a,l,u){return cl(l,a.child,null,u),a=qx(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function FT(a,l,u){a.lanes|=l;var g=a.alternate;g!==null&&(g.lanes|=l),cx(a.return,l,u)}function Xx(a,l,u,g,x,S){var P=a.memoizedState;P===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:u,tailMode:x,treeForkCount:S}:(P.isBackwards=l,P.rendering=null,P.renderingStartTime=0,P.last=g,P.tail=u,P.tailMode=x,P.treeForkCount=S)}function zT(a,l,u){var g=l.pendingProps,x=g.revealOrder,S=g.tail;g=g.children;var P=hn.current,V=(P&2)!==0;if(V?(P=P&1|2,l.flags|=128):P&=1,st(hn,P),$n(a,l,g,u),g=be?bd:0,!V&&a!==null&&(a.flags&128)!==0)t:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&FT(a,u,l);else if(a.tag===19)FT(a,u,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break t;for(;a.sibling===null;){if(a.return===null||a.return===l)break t;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(x){case"forwards":for(u=l.child,x=null;u!==null;)a=u.alternate,a!==null&&Kg(a)===null&&(x=u),u=u.sibling;u=x,u===null?(x=l.child,l.child=null):(x=u.sibling,u.sibling=null),Xx(l,!1,x,u,S,g);break;case"backwards":case"unstable_legacy-backwards":for(u=null,x=l.child,l.child=null;x!==null;){if(a=x.alternate,a!==null&&Kg(a)===null){l.child=x;break}a=x.sibling,x.sibling=u,u=x,x=a}Xx(l,!0,u,null,S,g);break;case"together":Xx(l,!1,null,null,void 0,g);break;default:l.memoizedState=null}return l.child}function Gr(a,l,u){if(a!==null&&(l.dependencies=a.dependencies),Qa|=l.lanes,(u&l.childLanes)===0)if(a!==null){if($c(a,l,u,!1),(u&l.childLanes)===0)return null}else return null;if(a!==null&&l.child!==a.child)throw Error(n(153));if(l.child!==null){for(a=l.child,u=Br(a,a.pendingProps),l.child=u,u.return=l;a.sibling!==null;)a=a.sibling,u=u.sibling=Br(a,a.pendingProps),u.return=l;u.sibling=null}return l.child}function Kx(a,l){return(a.lanes&l)!==0?!0:(a=a.dependencies,!!(a!==null&&Hg(a)))}function I5(a,l,u){switch(l.tag){case 3:Ct(l,l.stateNode.containerInfo),Ga(l,yn,a.memoizedState.cache),il();break;case 27:case 5:Bt(l);break;case 4:Ct(l,l.stateNode.containerInfo);break;case 10:Ga(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,wx(l),null;break;case 13:var g=l.memoizedState;if(g!==null)return g.dehydrated!==null?(Ya(l),l.flags|=128,null):(u&l.child.childLanes)!==0?BT(a,l,u):(Ya(l),a=Gr(a,l,u),a!==null?a.sibling:null);Ya(l);break;case 19:var x=(a.flags&128)!==0;if(g=(u&l.childLanes)!==0,g||($c(a,l,u,!1),g=(u&l.childLanes)!==0),x){if(g)return zT(a,l,u);l.flags|=128}if(x=l.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),st(hn,hn.current),g)break;return null;case 22:return l.lanes=0,LT(a,l,u,l.pendingProps);case 24:Ga(l,yn,a.memoizedState.cache)}return Gr(a,l,u)}function UT(a,l,u){if(a!==null)if(a.memoizedProps!==l.pendingProps)bn=!0;else{if(!Kx(a,u)&&(l.flags&128)===0)return bn=!1,I5(a,l,u);bn=(a.flags&131072)!==0}else bn=!1,be&&(l.flags&1048576)!==0&&bk(l,bd,l.index);switch(l.lanes=0,l.tag){case 16:t:{var g=l.pendingProps;if(a=ol(l.elementType),l.type=a,typeof a=="function")ex(a)?(g=ul(a,g),l.tag=1,l=IT(null,l,a,g,u)):(l.tag=0,l=Wx(null,l,a,g,u));else{if(a!=null){var x=a.$$typeof;if(x===R){l.tag=11,l=MT(null,l,a,g,u);break t}else if(x===j){l.tag=14,l=RT(null,l,a,g,u);break t}}throw l=N(a)||a,Error(n(306,l,""))}}return l;case 0:return Wx(a,l,l.type,l.pendingProps,u);case 1:return g=l.type,x=ul(g,l.pendingProps),IT(a,l,g,x,u);case 3:t:{if(Ct(l,l.stateNode.containerInfo),a===null)throw Error(n(387));g=l.pendingProps;var S=l.memoizedState;x=S.element,mx(a,l),kd(l,g,null,u);var P=l.memoizedState;if(g=P.cache,Ga(l,yn,g),g!==S.cache&&hx(l,[yn],u,!0),Cd(),g=P.element,S.isDehydrated)if(S={element:g,isDehydrated:!1,cache:P.cache},l.updateQueue.baseState=S,l.memoizedState=S,l.flags&256){l=jT(a,l,g,u);break t}else if(g!==x){x=ps(Error(n(424)),l),xd(x),l=jT(a,l,g,u);break t}else for(a=l.stateNode.containerInfo,a.nodeType===9?a=a.body:a=a.nodeName==="HTML"?a.ownerDocument.body:a,Ke=bs(a.firstChild),Gn=l,be=!0,Ha=null,ys=!0,u=Lk(l,null,g,u),l.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(il(),g===x){l=Gr(a,l,u);break t}$n(a,l,g,u)}l=l.child}return l;case 26:return om(a,l),a===null?(u=QM(l.type,null,l.pendingProps,null))?l.memoizedState=u:be||(u=l.type,a=l.pendingProps,g=_m(Rt.current).createElement(u),g[Wn]=l,g[_i]=a,qn(g,u,a),Ln(g),l.stateNode=g):l.memoizedState=QM(l.type,a.memoizedProps,l.pendingProps,a.memoizedState),null;case 27:return Bt(l),a===null&&be&&(g=l.stateNode=XM(l.type,l.pendingProps,Rt.current),Gn=l,ys=!0,x=Ke,io(l.type)?(Mw=x,Ke=bs(g.firstChild)):Ke=x),$n(a,l,l.pendingProps.children,u),om(a,l),a===null&&(l.flags|=4194304),l.child;case 5:return a===null&&be&&((x=g=Ke)&&(g=d4(g,l.type,l.pendingProps,ys),g!==null?(l.stateNode=g,Gn=l,Ke=bs(g.firstChild),ys=!1,x=!0):x=!1),x||Wa(l)),Bt(l),x=l.type,S=l.pendingProps,P=a!==null?a.memoizedProps:null,g=S.children,_w(x,S)?g=null:P!==null&&_w(x,P)&&(l.flags|=32),l.memoizedState!==null&&(x=Sx(a,l,k5,null,null,u),qd._currentValue=x),om(a,l),$n(a,l,g,u),l.child;case 6:return a===null&&be&&((a=u=Ke)&&(u=f4(u,l.pendingProps,ys),u!==null?(l.stateNode=u,Gn=l,Ke=null,a=!0):a=!1),a||Wa(l)),null;case 13:return BT(a,l,u);case 4:return Ct(l,l.stateNode.containerInfo),g=l.pendingProps,a===null?l.child=cl(l,null,g,u):$n(a,l,g,u),l.child;case 11:return MT(a,l,l.type,l.pendingProps,u);case 7:return $n(a,l,l.pendingProps,u),l.child;case 8:return $n(a,l,l.pendingProps.children,u),l.child;case 12:return $n(a,l,l.pendingProps.children,u),l.child;case 10:return g=l.pendingProps,Ga(l,l.type,g.value),$n(a,l,g.children,u),l.child;case 9:return x=l.type._context,g=l.pendingProps.children,rl(l),x=Vn(x),g=g(x),l.flags|=1,$n(a,l,g,u),l.child;case 14:return RT(a,l,l.type,l.pendingProps,u);case 15:return PT(a,l,l.type,l.pendingProps,u);case 19:return zT(a,l,u);case 31:return O5(a,l,u);case 22:return LT(a,l,u,l.pendingProps);case 24:return rl(l),g=Vn(yn),a===null?(x=fx(),x===null&&(x=We,S=ux(),x.pooledCache=S,S.refCount++,S!==null&&(x.pooledCacheLanes|=u),x=S),l.memoizedState={parent:g,cache:x},gx(l),Ga(l,yn,x)):((a.lanes&u)!==0&&(mx(a,l),kd(l,null,null,u),Cd()),x=a.memoizedState,S=l.memoizedState,x.parent!==g?(x={parent:g,cache:g},l.memoizedState=x,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=x),Ga(l,yn,g)):(g=S.cache,Ga(l,yn,g),g!==x.cache&&hx(l,[yn],u,!0))),$n(a,l,l.pendingProps.children,u),l.child;case 29:throw l.pendingProps}throw Error(n(156,l.tag))}function Vr(a){a.flags|=4}function Zx(a,l,u,g,x){if((l=(a.mode&32)!==0)&&(l=!1),l){if(a.flags|=16777216,(x&335544128)===x)if(a.stateNode.complete)a.flags|=8192;else if(pM())a.flags|=8192;else throw ll=$g,px}else a.flags&=-16777217}function HT(a,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!iR(l))if(pM())a.flags|=8192;else throw ll=$g,px}function cm(a,l){l!==null&&(a.flags|=4),a.flags&16384&&(l=a.tag!==22?wC():536870912,a.lanes|=l,sh|=l)}function Dd(a,l){if(!be)switch(a.tailMode){case"hidden":l=a.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?a.tail=null:u.sibling=null;break;case"collapsed":u=a.tail;for(var g=null;u!==null;)u.alternate!==null&&(g=u),u=u.sibling;g===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:g.sibling=null}}function Ze(a){var l=a.alternate!==null&&a.alternate.child===a.child,u=0,g=0;if(l)for(var x=a.child;x!==null;)u|=x.lanes|x.childLanes,g|=x.subtreeFlags&65011712,g|=x.flags&65011712,x.return=a,x=x.sibling;else for(x=a.child;x!==null;)u|=x.lanes|x.childLanes,g|=x.subtreeFlags,g|=x.flags,x.return=a,x=x.sibling;return a.subtreeFlags|=g,a.childLanes=u,l}function j5(a,l,u){var g=l.pendingProps;switch(rx(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(l),null;case 1:return Ze(l),null;case 3:return u=l.stateNode,g=null,a!==null&&(g=a.memoizedState.cache),l.memoizedState.cache!==g&&(l.flags|=2048),Ur(yn),xt(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(a===null||a.child===null)&&(Vc(l)?Vr(l):a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,ox())),Ze(l),null;case 26:var x=l.type,S=l.memoizedState;return a===null?(Vr(l),S!==null?(Ze(l),HT(l,S)):(Ze(l),Zx(l,x,null,g,u))):S?S!==a.memoizedState?(Vr(l),Ze(l),HT(l,S)):(Ze(l),l.flags&=-16777217):(a=a.memoizedProps,a!==g&&Vr(l),Ze(l),Zx(l,x,a,g,u)),null;case 27:if(jt(l),u=Rt.current,x=l.type,a!==null&&l.stateNode!=null)a.memoizedProps!==g&&Vr(l);else{if(!g){if(l.stateNode===null)throw Error(n(166));return Ze(l),null}a=lt.current,Vc(l)?wk(l):(a=XM(x,g,u),l.stateNode=a,Vr(l))}return Ze(l),null;case 5:if(jt(l),x=l.type,a!==null&&l.stateNode!=null)a.memoizedProps!==g&&Vr(l);else{if(!g){if(l.stateNode===null)throw Error(n(166));return Ze(l),null}if(S=lt.current,Vc(l))wk(l);else{var P=_m(Rt.current);switch(S){case 1:S=P.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:S=P.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":S=P.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":S=P.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":S=P.createElement("div"),S.innerHTML="<script><\/script>",S=S.removeChild(S.firstChild);break;case"select":S=typeof g.is=="string"?P.createElement("select",{is:g.is}):P.createElement("select"),g.multiple?S.multiple=!0:g.size&&(S.size=g.size);break;default:S=typeof g.is=="string"?P.createElement(x,{is:g.is}):P.createElement(x)}}S[Wn]=l,S[_i]=g;t:for(P=l.child;P!==null;){if(P.tag===5||P.tag===6)S.appendChild(P.stateNode);else if(P.tag!==4&&P.tag!==27&&P.child!==null){P.child.return=P,P=P.child;continue}if(P===l)break t;for(;P.sibling===null;){if(P.return===null||P.return===l)break t;P=P.return}P.sibling.return=P.return,P=P.sibling}l.stateNode=S;t:switch(qn(S,x,g),x){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break t;case"img":g=!0;break t;default:g=!1}g&&Vr(l)}}return Ze(l),Zx(l,l.type,a===null?null:a.memoizedProps,l.pendingProps,u),null;case 6:if(a&&l.stateNode!=null)a.memoizedProps!==g&&Vr(l);else{if(typeof g!="string"&&l.stateNode===null)throw Error(n(166));if(a=Rt.current,Vc(l)){if(a=l.stateNode,u=l.memoizedProps,g=null,x=Gn,x!==null)switch(x.tag){case 27:case 5:g=x.memoizedProps}a[Wn]=l,a=!!(a.nodeValue===u||g!==null&&g.suppressHydrationWarning===!0||BM(a.nodeValue,u)),a||Wa(l,!0)}else a=_m(a).createTextNode(g),a[Wn]=l,l.stateNode=a}return Ze(l),null;case 31:if(u=l.memoizedState,a===null||a.memoizedState!==null){if(g=Vc(l),u!==null){if(a===null){if(!g)throw Error(n(318));if(a=l.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(557));a[Wn]=l}else il(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Ze(l),a=!1}else u=ox(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=u),a=!0;if(!a)return l.flags&256?(qi(l),l):(qi(l),null);if((l.flags&128)!==0)throw Error(n(558))}return Ze(l),null;case 13:if(g=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(x=Vc(l),g!==null&&g.dehydrated!==null){if(a===null){if(!x)throw Error(n(318));if(x=l.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(n(317));x[Wn]=l}else il(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Ze(l),x=!1}else x=ox(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=x),x=!0;if(!x)return l.flags&256?(qi(l),l):(qi(l),null)}return qi(l),(l.flags&128)!==0?(l.lanes=u,l):(u=g!==null,a=a!==null&&a.memoizedState!==null,u&&(g=l.child,x=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(x=g.alternate.memoizedState.cachePool.pool),S=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(S=g.memoizedState.cachePool.pool),S!==x&&(g.flags|=2048)),u!==a&&u&&(l.child.flags|=8192),cm(l,l.updateQueue),Ze(l),null);case 4:return xt(),a===null&&bw(l.stateNode.containerInfo),Ze(l),null;case 10:return Ur(l.type),Ze(l),null;case 19:if(W(hn),g=l.memoizedState,g===null)return Ze(l),null;if(x=(l.flags&128)!==0,S=g.rendering,S===null)if(x)Dd(g,!1);else{if(ln!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if(S=Kg(a),S!==null){for(l.flags|=128,Dd(g,!1),a=S.updateQueue,l.updateQueue=a,cm(l,a),l.subtreeFlags=0,a=u,u=l.child;u!==null;)mk(u,a),u=u.sibling;return st(hn,hn.current&1|2),be&&Fr(l,g.treeForkCount),l.child}a=a.sibling}g.tail!==null&&It()>pm&&(l.flags|=128,x=!0,Dd(g,!1),l.lanes=4194304)}else{if(!x)if(a=Kg(S),a!==null){if(l.flags|=128,x=!0,a=a.updateQueue,l.updateQueue=a,cm(l,a),Dd(g,!0),g.tail===null&&g.tailMode==="hidden"&&!S.alternate&&!be)return Ze(l),null}else 2*It()-g.renderingStartTime>pm&&u!==536870912&&(l.flags|=128,x=!0,Dd(g,!1),l.lanes=4194304);g.isBackwards?(S.sibling=l.child,l.child=S):(a=g.last,a!==null?a.sibling=S:l.child=S,g.last=S)}return g.tail!==null?(a=g.tail,g.rendering=a,g.tail=a.sibling,g.renderingStartTime=It(),a.sibling=null,u=hn.current,st(hn,x?u&1|2:u&1),be&&Fr(l,g.treeForkCount),a):(Ze(l),null);case 22:case 23:return qi(l),xx(),g=l.memoizedState!==null,a!==null?a.memoizedState!==null!==g&&(l.flags|=8192):g&&(l.flags|=8192),g?(u&536870912)!==0&&(l.flags&128)===0&&(Ze(l),l.subtreeFlags&6&&(l.flags|=8192)):Ze(l),u=l.updateQueue,u!==null&&cm(l,u.retryQueue),u=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),g=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),g!==u&&(l.flags|=2048),a!==null&&W(al),null;case 24:return u=null,a!==null&&(u=a.memoizedState.cache),l.memoizedState.cache!==u&&(l.flags|=2048),Ur(yn),Ze(l),null;case 25:return null;case 30:return null}throw Error(n(156,l.tag))}function B5(a,l){switch(rx(l),l.tag){case 1:return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return Ur(yn),xt(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 26:case 27:case 5:return jt(l),null;case 31:if(l.memoizedState!==null){if(qi(l),l.alternate===null)throw Error(n(340));il()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 13:if(qi(l),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(n(340));il()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return W(hn),null;case 4:return xt(),null;case 10:return Ur(l.type),null;case 22:case 23:return qi(l),xx(),a!==null&&W(al),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 24:return Ur(yn),null;case 25:return null;default:return null}}function WT(a,l){switch(rx(l),l.tag){case 3:Ur(yn),xt();break;case 26:case 27:case 5:jt(l);break;case 4:xt();break;case 31:l.memoizedState!==null&&qi(l);break;case 13:qi(l);break;case 19:W(hn);break;case 10:Ur(l.type);break;case 22:case 23:qi(l),xx(),a!==null&&W(al);break;case 24:Ur(yn)}}function Nd(a,l){try{var u=l.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var x=g.next;u=x;do{if((u.tag&a)===a){g=void 0;var S=u.create,P=u.inst;g=S(),P.destroy=g}u=u.next}while(u!==x)}}catch(V){De(l,l.return,V)}}function Ka(a,l,u){try{var g=l.updateQueue,x=g!==null?g.lastEffect:null;if(x!==null){var S=x.next;g=S;do{if((g.tag&a)===a){var P=g.inst,V=P.destroy;if(V!==void 0){P.destroy=void 0,x=l;var it=u,vt=V;try{vt()}catch(Pt){De(x,it,Pt)}}}g=g.next}while(g!==S)}}catch(Pt){De(l,l.return,Pt)}}function GT(a){var l=a.updateQueue;if(l!==null){var u=a.stateNode;try{Nk(l,u)}catch(g){De(a,a.return,g)}}}function VT(a,l,u){u.props=ul(a.type,a.memoizedProps),u.state=a.memoizedState;try{u.componentWillUnmount()}catch(g){De(a,l,g)}}function Od(a,l){try{var u=a.ref;if(u!==null){switch(a.tag){case 26:case 27:case 5:var g=a.stateNode;break;case 30:g=a.stateNode;break;default:g=a.stateNode}typeof u=="function"?a.refCleanup=u(g):u.current=g}}catch(x){De(a,l,x)}}function nr(a,l){var u=a.ref,g=a.refCleanup;if(u!==null)if(typeof g=="function")try{g()}catch(x){De(a,l,x)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(x){De(a,l,x)}else u.current=null}function $T(a){var l=a.type,u=a.memoizedProps,g=a.stateNode;try{t:switch(l){case"button":case"input":case"select":case"textarea":u.autoFocus&&g.focus();break t;case"img":u.src?g.src=u.src:u.srcSet&&(g.srcset=u.srcSet)}}catch(x){De(a,a.return,x)}}function Qx(a,l,u){try{var g=a.stateNode;a4(g,a.type,u,l),g[_i]=l}catch(x){De(a,a.return,x)}}function qT(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&io(a.type)||a.tag===4}function Jx(a){t:for(;;){for(;a.sibling===null;){if(a.return===null||qT(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&io(a.type)||a.flags&2||a.child===null||a.tag===4)continue t;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function tw(a,l,u){var g=a.tag;if(g===5||g===6)a=a.stateNode,l?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(a,l):(l=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,l.appendChild(a),u=u._reactRootContainer,u!=null||l.onclick!==null||(l.onclick=Ir));else if(g!==4&&(g===27&&io(a.type)&&(u=a.stateNode,l=null),a=a.child,a!==null))for(tw(a,l,u),a=a.sibling;a!==null;)tw(a,l,u),a=a.sibling}function hm(a,l,u){var g=a.tag;if(g===5||g===6)a=a.stateNode,l?u.insertBefore(a,l):u.appendChild(a);else if(g!==4&&(g===27&&io(a.type)&&(u=a.stateNode),a=a.child,a!==null))for(hm(a,l,u),a=a.sibling;a!==null;)hm(a,l,u),a=a.sibling}function YT(a){var l=a.stateNode,u=a.memoizedProps;try{for(var g=a.type,x=l.attributes;x.length;)l.removeAttributeNode(x[0]);qn(l,g,u),l[Wn]=a,l[_i]=u}catch(S){De(a,a.return,S)}}var $r=!1,xn=!1,ew=!1,XT=typeof WeakSet=="function"?WeakSet:Set,Dn=null;function F5(a,l){if(a=a.containerInfo,Aw=Pm,a=ok(a),Y1(a)){if("selectionStart"in a)var u={start:a.selectionStart,end:a.selectionEnd};else t:{u=(u=a.ownerDocument)&&u.defaultView||window;var g=u.getSelection&&u.getSelection();if(g&&g.rangeCount!==0){u=g.anchorNode;var x=g.anchorOffset,S=g.focusNode;g=g.focusOffset;try{u.nodeType,S.nodeType}catch{u=null;break t}var P=0,V=-1,it=-1,vt=0,Pt=0,Nt=a,bt=null;e:for(;;){for(var wt;Nt!==u||x!==0&&Nt.nodeType!==3||(V=P+x),Nt!==S||g!==0&&Nt.nodeType!==3||(it=P+g),Nt.nodeType===3&&(P+=Nt.nodeValue.length),(wt=Nt.firstChild)!==null;)bt=Nt,Nt=wt;for(;;){if(Nt===a)break e;if(bt===u&&++vt===x&&(V=P),bt===S&&++Pt===g&&(it=P),(wt=Nt.nextSibling)!==null)break;Nt=bt,bt=Nt.parentNode}Nt=wt}u=V===-1||it===-1?null:{start:V,end:it}}else u=null}u=u||{start:0,end:0}}else u=null;for(Sw={focusedElem:a,selectionRange:u},Pm=!1,Dn=l;Dn!==null;)if(l=Dn,a=l.child,(l.subtreeFlags&1028)!==0&&a!==null)a.return=l,Dn=a;else for(;Dn!==null;){switch(l=Dn,S=l.alternate,a=l.flags,l.tag){case 0:if((a&4)!==0&&(a=l.updateQueue,a=a!==null?a.events:null,a!==null))for(u=0;u<a.length;u++)x=a[u],x.ref.impl=x.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&S!==null){a=void 0,u=l,x=S.memoizedProps,S=S.memoizedState,g=u.stateNode;try{var Vt=ul(u.type,x);a=g.getSnapshotBeforeUpdate(Vt,S),g.__reactInternalSnapshotBeforeUpdate=a}catch(Kt){De(u,u.return,Kt)}}break;case 3:if((a&1024)!==0){if(a=l.stateNode.containerInfo,u=a.nodeType,u===9)Cw(a);else if(u===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Cw(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(n(163))}if(a=l.sibling,a!==null){a.return=l.return,Dn=a;break}Dn=l.return}}function KT(a,l,u){var g=u.flags;switch(u.tag){case 0:case 11:case 15:Yr(a,u),g&4&&Nd(5,u);break;case 1:if(Yr(a,u),g&4)if(a=u.stateNode,l===null)try{a.componentDidMount()}catch(P){De(u,u.return,P)}else{var x=ul(u.type,l.memoizedProps);l=l.memoizedState;try{a.componentDidUpdate(x,l,a.__reactInternalSnapshotBeforeUpdate)}catch(P){De(u,u.return,P)}}g&64&&GT(u),g&512&&Od(u,u.return);break;case 3:if(Yr(a,u),g&64&&(a=u.updateQueue,a!==null)){if(l=null,u.child!==null)switch(u.child.tag){case 27:case 5:l=u.child.stateNode;break;case 1:l=u.child.stateNode}try{Nk(a,l)}catch(P){De(u,u.return,P)}}break;case 27:l===null&&g&4&&YT(u);case 26:case 5:Yr(a,u),l===null&&g&4&&$T(u),g&512&&Od(u,u.return);break;case 12:Yr(a,u);break;case 31:Yr(a,u),g&4&&JT(a,u);break;case 13:Yr(a,u),g&4&&tM(a,u),g&64&&(a=u.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(u=Y5.bind(null,u),p4(a,u))));break;case 22:if(g=u.memoizedState!==null||$r,!g){l=l!==null&&l.memoizedState!==null||xn,x=$r;var S=xn;$r=g,(xn=l)&&!S?Xr(a,u,(u.subtreeFlags&8772)!==0):Yr(a,u),$r=x,xn=S}break;case 30:break;default:Yr(a,u)}}function ZT(a){var l=a.alternate;l!==null&&(a.alternate=null,ZT(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&P1(l)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Je=null,Ci=!1;function qr(a,l,u){for(u=u.child;u!==null;)QT(a,l,u),u=u.sibling}function QT(a,l,u){if(dt&&typeof dt.onCommitFiberUnmount=="function")try{dt.onCommitFiberUnmount(et,u)}catch{}switch(u.tag){case 26:xn||nr(u,l),qr(a,l,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:xn||nr(u,l);var g=Je,x=Ci;io(u.type)&&(Je=u.stateNode,Ci=!1),qr(a,l,u),Gd(u.stateNode),Je=g,Ci=x;break;case 5:xn||nr(u,l);case 6:if(g=Je,x=Ci,Je=null,qr(a,l,u),Je=g,Ci=x,Je!==null)if(Ci)try{(Je.nodeType===9?Je.body:Je.nodeName==="HTML"?Je.ownerDocument.body:Je).removeChild(u.stateNode)}catch(S){De(u,l,S)}else try{Je.removeChild(u.stateNode)}catch(S){De(u,l,S)}break;case 18:Je!==null&&(Ci?(a=Je,GM(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,u.stateNode),dh(a)):GM(Je,u.stateNode));break;case 4:g=Je,x=Ci,Je=u.stateNode.containerInfo,Ci=!0,qr(a,l,u),Je=g,Ci=x;break;case 0:case 11:case 14:case 15:Ka(2,u,l),xn||Ka(4,u,l),qr(a,l,u);break;case 1:xn||(nr(u,l),g=u.stateNode,typeof g.componentWillUnmount=="function"&&VT(u,l,g)),qr(a,l,u);break;case 21:qr(a,l,u);break;case 22:xn=(g=xn)||u.memoizedState!==null,qr(a,l,u),xn=g;break;default:qr(a,l,u)}}function JT(a,l){if(l.memoizedState===null&&(a=l.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{dh(a)}catch(u){De(l,l.return,u)}}}function tM(a,l){if(l.memoizedState===null&&(a=l.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{dh(a)}catch(u){De(l,l.return,u)}}function z5(a){switch(a.tag){case 31:case 13:case 19:var l=a.stateNode;return l===null&&(l=a.stateNode=new XT),l;case 22:return a=a.stateNode,l=a._retryCache,l===null&&(l=a._retryCache=new XT),l;default:throw Error(n(435,a.tag))}}function um(a,l){var u=z5(a);l.forEach(function(g){if(!u.has(g)){u.add(g);var x=X5.bind(null,a,g);g.then(x,x)}})}function ki(a,l){var u=l.deletions;if(u!==null)for(var g=0;g<u.length;g++){var x=u[g],S=a,P=l,V=P;t:for(;V!==null;){switch(V.tag){case 27:if(io(V.type)){Je=V.stateNode,Ci=!1;break t}break;case 5:Je=V.stateNode,Ci=!1;break t;case 3:case 4:Je=V.stateNode.containerInfo,Ci=!0;break t}V=V.return}if(Je===null)throw Error(n(160));QT(S,P,x),Je=null,Ci=!1,S=x.alternate,S!==null&&(S.return=null),x.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)eM(l,a),l=l.sibling}var zs=null;function eM(a,l){var u=a.alternate,g=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:ki(l,a),Ti(a),g&4&&(Ka(3,a,a.return),Nd(3,a),Ka(5,a,a.return));break;case 1:ki(l,a),Ti(a),g&512&&(xn||u===null||nr(u,u.return)),g&64&&$r&&(a=a.updateQueue,a!==null&&(g=a.callbacks,g!==null&&(u=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=u===null?g:u.concat(g))));break;case 26:var x=zs;if(ki(l,a),Ti(a),g&512&&(xn||u===null||nr(u,u.return)),g&4){var S=u!==null?u.memoizedState:null;if(g=a.memoizedState,u===null)if(g===null)if(a.stateNode===null){t:{g=a.type,u=a.memoizedProps,x=x.ownerDocument||x;e:switch(g){case"title":S=x.getElementsByTagName("title")[0],(!S||S[ld]||S[Wn]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=x.createElement(g),x.head.insertBefore(S,x.querySelector("head > title"))),qn(S,g,u),S[Wn]=a,Ln(S),g=S;break t;case"link":var P=eR("link","href",x).get(g+(u.href||""));if(P){for(var V=0;V<P.length;V++)if(S=P[V],S.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&S.getAttribute("rel")===(u.rel==null?null:u.rel)&&S.getAttribute("title")===(u.title==null?null:u.title)&&S.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){P.splice(V,1);break e}}S=x.createElement(g),qn(S,g,u),x.head.appendChild(S);break;case"meta":if(P=eR("meta","content",x).get(g+(u.content||""))){for(V=0;V<P.length;V++)if(S=P[V],S.getAttribute("content")===(u.content==null?null:""+u.content)&&S.getAttribute("name")===(u.name==null?null:u.name)&&S.getAttribute("property")===(u.property==null?null:u.property)&&S.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&S.getAttribute("charset")===(u.charSet==null?null:u.charSet)){P.splice(V,1);break e}}S=x.createElement(g),qn(S,g,u),x.head.appendChild(S);break;default:throw Error(n(468,g))}S[Wn]=a,Ln(S),g=S}a.stateNode=g}else nR(x,a.type,a.stateNode);else a.stateNode=tR(x,g,a.memoizedProps);else S!==g?(S===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):S.count--,g===null?nR(x,a.type,a.stateNode):tR(x,g,a.memoizedProps)):g===null&&a.stateNode!==null&&Qx(a,a.memoizedProps,u.memoizedProps)}break;case 27:ki(l,a),Ti(a),g&512&&(xn||u===null||nr(u,u.return)),u!==null&&g&4&&Qx(a,a.memoizedProps,u.memoizedProps);break;case 5:if(ki(l,a),Ti(a),g&512&&(xn||u===null||nr(u,u.return)),a.flags&32){x=a.stateNode;try{Oc(x,"")}catch(Vt){De(a,a.return,Vt)}}g&4&&a.stateNode!=null&&(x=a.memoizedProps,Qx(a,x,u!==null?u.memoizedProps:x)),g&1024&&(ew=!0);break;case 6:if(ki(l,a),Ti(a),g&4){if(a.stateNode===null)throw Error(n(162));g=a.memoizedProps,u=a.stateNode;try{u.nodeValue=g}catch(Vt){De(a,a.return,Vt)}}break;case 3:if(km=null,x=zs,zs=Em(l.containerInfo),ki(l,a),zs=x,Ti(a),g&4&&u!==null&&u.memoizedState.isDehydrated)try{dh(l.containerInfo)}catch(Vt){De(a,a.return,Vt)}ew&&(ew=!1,nM(a));break;case 4:g=zs,zs=Em(a.stateNode.containerInfo),ki(l,a),Ti(a),zs=g;break;case 12:ki(l,a),Ti(a);break;case 31:ki(l,a),Ti(a),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,um(a,g)));break;case 13:ki(l,a),Ti(a),a.child.flags&8192&&a.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(fm=It()),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,um(a,g)));break;case 22:x=a.memoizedState!==null;var it=u!==null&&u.memoizedState!==null,vt=$r,Pt=xn;if($r=vt||x,xn=Pt||it,ki(l,a),xn=Pt,$r=vt,Ti(a),g&8192)t:for(l=a.stateNode,l._visibility=x?l._visibility&-2:l._visibility|1,x&&(u===null||it||$r||xn||dl(a)),u=null,l=a;;){if(l.tag===5||l.tag===26){if(u===null){it=u=l;try{if(S=it.stateNode,x)P=S.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none";else{V=it.stateNode;var Nt=it.memoizedProps.style,bt=Nt!=null&&Nt.hasOwnProperty("display")?Nt.display:null;V.style.display=bt==null||typeof bt=="boolean"?"":(""+bt).trim()}}catch(Vt){De(it,it.return,Vt)}}}else if(l.tag===6){if(u===null){it=l;try{it.stateNode.nodeValue=x?"":it.memoizedProps}catch(Vt){De(it,it.return,Vt)}}}else if(l.tag===18){if(u===null){it=l;try{var wt=it.stateNode;x?VM(wt,!0):VM(it.stateNode,!1)}catch(Vt){De(it,it.return,Vt)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===a)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break t;for(;l.sibling===null;){if(l.return===null||l.return===a)break t;u===l&&(u=null),l=l.return}u===l&&(u=null),l.sibling.return=l.return,l=l.sibling}g&4&&(g=a.updateQueue,g!==null&&(u=g.retryQueue,u!==null&&(g.retryQueue=null,um(a,u))));break;case 19:ki(l,a),Ti(a),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,um(a,g)));break;case 30:break;case 21:break;default:ki(l,a),Ti(a)}}function Ti(a){var l=a.flags;if(l&2){try{for(var u,g=a.return;g!==null;){if(qT(g)){u=g;break}g=g.return}if(u==null)throw Error(n(160));switch(u.tag){case 27:var x=u.stateNode,S=Jx(a);hm(a,S,x);break;case 5:var P=u.stateNode;u.flags&32&&(Oc(P,""),u.flags&=-33);var V=Jx(a);hm(a,V,P);break;case 3:case 4:var it=u.stateNode.containerInfo,vt=Jx(a);tw(a,vt,it);break;default:throw Error(n(161))}}catch(Pt){De(a,a.return,Pt)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function nM(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var l=a;nM(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),a=a.sibling}}function Yr(a,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)KT(a,l.alternate,l),l=l.sibling}function dl(a){for(a=a.child;a!==null;){var l=a;switch(l.tag){case 0:case 11:case 14:case 15:Ka(4,l,l.return),dl(l);break;case 1:nr(l,l.return);var u=l.stateNode;typeof u.componentWillUnmount=="function"&&VT(l,l.return,u),dl(l);break;case 27:Gd(l.stateNode);case 26:case 5:nr(l,l.return),dl(l);break;case 22:l.memoizedState===null&&dl(l);break;case 30:dl(l);break;default:dl(l)}a=a.sibling}}function Xr(a,l,u){for(u=u&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var g=l.alternate,x=a,S=l,P=S.flags;switch(S.tag){case 0:case 11:case 15:Xr(x,S,u),Nd(4,S);break;case 1:if(Xr(x,S,u),g=S,x=g.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(vt){De(g,g.return,vt)}if(g=S,x=g.updateQueue,x!==null){var V=g.stateNode;try{var it=x.shared.hiddenCallbacks;if(it!==null)for(x.shared.hiddenCallbacks=null,x=0;x<it.length;x++)Dk(it[x],V)}catch(vt){De(g,g.return,vt)}}u&&P&64&&GT(S),Od(S,S.return);break;case 27:YT(S);case 26:case 5:Xr(x,S,u),u&&g===null&&P&4&&$T(S),Od(S,S.return);break;case 12:Xr(x,S,u);break;case 31:Xr(x,S,u),u&&P&4&&JT(x,S);break;case 13:Xr(x,S,u),u&&P&4&&tM(x,S);break;case 22:S.memoizedState===null&&Xr(x,S,u),Od(S,S.return);break;case 30:break;default:Xr(x,S,u)}l=l.sibling}}function nw(a,l){var u=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),a=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(a=l.memoizedState.cachePool.pool),a!==u&&(a!=null&&a.refCount++,u!=null&&wd(u))}function iw(a,l){a=null,l.alternate!==null&&(a=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==a&&(l.refCount++,a!=null&&wd(a))}function Us(a,l,u,g){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)iM(a,l,u,g),l=l.sibling}function iM(a,l,u,g){var x=l.flags;switch(l.tag){case 0:case 11:case 15:Us(a,l,u,g),x&2048&&Nd(9,l);break;case 1:Us(a,l,u,g);break;case 3:Us(a,l,u,g),x&2048&&(a=null,l.alternate!==null&&(a=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==a&&(l.refCount++,a!=null&&wd(a)));break;case 12:if(x&2048){Us(a,l,u,g),a=l.stateNode;try{var S=l.memoizedProps,P=S.id,V=S.onPostCommit;typeof V=="function"&&V(P,l.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(it){De(l,l.return,it)}}else Us(a,l,u,g);break;case 31:Us(a,l,u,g);break;case 13:Us(a,l,u,g);break;case 23:break;case 22:S=l.stateNode,P=l.alternate,l.memoizedState!==null?S._visibility&2?Us(a,l,u,g):Id(a,l):S._visibility&2?Us(a,l,u,g):(S._visibility|=2,eh(a,l,u,g,(l.subtreeFlags&10256)!==0||!1)),x&2048&&nw(P,l);break;case 24:Us(a,l,u,g),x&2048&&iw(l.alternate,l);break;default:Us(a,l,u,g)}}function eh(a,l,u,g,x){for(x=x&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var S=a,P=l,V=u,it=g,vt=P.flags;switch(P.tag){case 0:case 11:case 15:eh(S,P,V,it,x),Nd(8,P);break;case 23:break;case 22:var Pt=P.stateNode;P.memoizedState!==null?Pt._visibility&2?eh(S,P,V,it,x):Id(S,P):(Pt._visibility|=2,eh(S,P,V,it,x)),x&&vt&2048&&nw(P.alternate,P);break;case 24:eh(S,P,V,it,x),x&&vt&2048&&iw(P.alternate,P);break;default:eh(S,P,V,it,x)}l=l.sibling}}function Id(a,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var u=a,g=l,x=g.flags;switch(g.tag){case 22:Id(u,g),x&2048&&nw(g.alternate,g);break;case 24:Id(u,g),x&2048&&iw(g.alternate,g);break;default:Id(u,g)}l=l.sibling}}var jd=8192;function nh(a,l,u){if(a.subtreeFlags&jd)for(a=a.child;a!==null;)sM(a,l,u),a=a.sibling}function sM(a,l,u){switch(a.tag){case 26:nh(a,l,u),a.flags&jd&&a.memoizedState!==null&&C4(u,zs,a.memoizedState,a.memoizedProps);break;case 5:nh(a,l,u);break;case 3:case 4:var g=zs;zs=Em(a.stateNode.containerInfo),nh(a,l,u),zs=g;break;case 22:a.memoizedState===null&&(g=a.alternate,g!==null&&g.memoizedState!==null?(g=jd,jd=16777216,nh(a,l,u),jd=g):nh(a,l,u));break;default:nh(a,l,u)}}function rM(a){var l=a.alternate;if(l!==null&&(a=l.child,a!==null)){l.child=null;do l=a.sibling,a.sibling=null,a=l;while(a!==null)}}function Bd(a){var l=a.deletions;if((a.flags&16)!==0){if(l!==null)for(var u=0;u<l.length;u++){var g=l[u];Dn=g,oM(g,a)}rM(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)aM(a),a=a.sibling}function aM(a){switch(a.tag){case 0:case 11:case 15:Bd(a),a.flags&2048&&Ka(9,a,a.return);break;case 3:Bd(a);break;case 12:Bd(a);break;case 22:var l=a.stateNode;a.memoizedState!==null&&l._visibility&2&&(a.return===null||a.return.tag!==13)?(l._visibility&=-3,dm(a)):Bd(a);break;default:Bd(a)}}function dm(a){var l=a.deletions;if((a.flags&16)!==0){if(l!==null)for(var u=0;u<l.length;u++){var g=l[u];Dn=g,oM(g,a)}rM(a)}for(a=a.child;a!==null;){switch(l=a,l.tag){case 0:case 11:case 15:Ka(8,l,l.return),dm(l);break;case 22:u=l.stateNode,u._visibility&2&&(u._visibility&=-3,dm(l));break;default:dm(l)}a=a.sibling}}function oM(a,l){for(;Dn!==null;){var u=Dn;switch(u.tag){case 0:case 11:case 15:Ka(8,u,l);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var g=u.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:wd(u.memoizedState.cache)}if(g=u.child,g!==null)g.return=u,Dn=g;else t:for(u=a;Dn!==null;){g=Dn;var x=g.sibling,S=g.return;if(ZT(g),g===u){Dn=null;break t}if(x!==null){x.return=S,Dn=x;break t}Dn=S}}}var U5={getCacheForType:function(a){var l=Vn(yn),u=l.data.get(a);return u===void 0&&(u=a(),l.data.set(a,u)),u},cacheSignal:function(){return Vn(yn).controller.signal}},H5=typeof WeakMap=="function"?WeakMap:Map,Te=0,We=null,fe=null,me=0,Le=0,Yi=null,Za=!1,ih=!1,sw=!1,Kr=0,ln=0,Qa=0,fl=0,rw=0,Xi=0,sh=0,Fd=null,Mi=null,aw=!1,fm=0,lM=0,pm=1/0,gm=null,Ja=null,Cn=0,to=null,rh=null,Zr=0,ow=0,lw=null,cM=null,zd=0,cw=null;function Ki(){return(Te&2)!==0&&me!==0?me&-me:$.T!==null?gw():EC()}function hM(){if(Xi===0)if((me&536870912)===0||be){var a=Oe;Oe<<=1,(Oe&3932160)===0&&(Oe=262144),Xi=a}else Xi=536870912;return a=$i.current,a!==null&&(a.flags|=32),Xi}function Ri(a,l,u){(a===We&&(Le===2||Le===9)||a.cancelPendingCommit!==null)&&(ah(a,0),eo(a,me,Xi,!1)),od(a,u),((Te&2)===0||a!==We)&&(a===We&&((Te&2)===0&&(fl|=u),ln===4&&eo(a,me,Xi,!1)),ir(a))}function uM(a,l,u){if((Te&6)!==0)throw Error(n(327));var g=!u&&(l&127)===0&&(l&a.expiredLanes)===0||ad(a,l),x=g?V5(a,l):uw(a,l,!0),S=g;do{if(x===0){ih&&!g&&eo(a,l,0,!1);break}else{if(u=a.current.alternate,S&&!W5(u)){x=uw(a,l,!1),S=!1;continue}if(x===2){if(S=l,a.errorRecoveryDisabledLanes&S)var P=0;else P=a.pendingLanes&-536870913,P=P!==0?P:P&536870912?536870912:0;if(P!==0){l=P;t:{var V=a;x=Fd;var it=V.current.memoizedState.isDehydrated;if(it&&(ah(V,P).flags|=256),P=uw(V,P,!1),P!==2){if(sw&&!it){V.errorRecoveryDisabledLanes|=S,fl|=S,x=4;break t}S=Mi,Mi=x,S!==null&&(Mi===null?Mi=S:Mi.push.apply(Mi,S))}x=P}if(S=!1,x!==2)continue}}if(x===1){ah(a,0),eo(a,l,0,!0);break}t:{switch(g=a,S=x,S){case 0:case 1:throw Error(n(345));case 4:if((l&4194048)!==l)break;case 6:eo(g,l,Xi,!Za);break t;case 2:Mi=null;break;case 3:case 5:break;default:throw Error(n(329))}if((l&62914560)===l&&(x=fm+300-It(),10<x)){if(eo(g,l,Xi,!Za),Eg(g,0,!0)!==0)break t;Zr=l,g.timeoutHandle=HM(dM.bind(null,g,u,Mi,gm,aw,l,Xi,fl,sh,Za,S,"Throttled",-0,0),x);break t}dM(g,u,Mi,gm,aw,l,Xi,fl,sh,Za,S,null,-0,0)}}break}while(!0);ir(a)}function dM(a,l,u,g,x,S,P,V,it,vt,Pt,Nt,bt,wt){if(a.timeoutHandle=-1,Nt=l.subtreeFlags,Nt&8192||(Nt&16785408)===16785408){Nt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ir},sM(l,S,Nt);var Vt=(S&62914560)===S?fm-It():(S&4194048)===S?lM-It():0;if(Vt=k4(Nt,Vt),Vt!==null){Zr=S,a.cancelPendingCommit=Vt(xM.bind(null,a,l,S,u,g,x,P,V,it,Pt,Nt,null,bt,wt)),eo(a,S,P,!vt);return}}xM(a,l,S,u,g,x,P,V,it)}function W5(a){for(var l=a;;){var u=l.tag;if((u===0||u===11||u===15)&&l.flags&16384&&(u=l.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var g=0;g<u.length;g++){var x=u[g],S=x.getSnapshot;x=x.value;try{if(!Gi(S(),x))return!1}catch{return!1}}if(u=l.child,l.subtreeFlags&16384&&u!==null)u.return=l,l=u;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function eo(a,l,u,g){l&=~rw,l&=~fl,a.suspendedLanes|=l,a.pingedLanes&=~l,g&&(a.warmLanes|=l),g=a.expirationTimes;for(var x=l;0<x;){var S=31-Ot(x),P=1<<S;g[S]=-1,x&=~P}u!==0&&AC(a,u,l)}function mm(){return(Te&6)===0?(Ud(0),!1):!0}function hw(){if(fe!==null){if(Le===0)var a=fe.return;else a=fe,zr=sl=null,Cx(a),Kc=null,Sd=0,a=fe;for(;a!==null;)WT(a.alternate,a),a=a.return;fe=null}}function ah(a,l){var u=a.timeoutHandle;u!==-1&&(a.timeoutHandle=-1,c4(u)),u=a.cancelPendingCommit,u!==null&&(a.cancelPendingCommit=null,u()),Zr=0,hw(),We=a,fe=u=Br(a.current,null),me=l,Le=0,Yi=null,Za=!1,ih=ad(a,l),sw=!1,sh=Xi=rw=fl=Qa=ln=0,Mi=Fd=null,aw=!1,(l&8)!==0&&(l|=l&32);var g=a.entangledLanes;if(g!==0)for(a=a.entanglements,g&=l;0<g;){var x=31-Ot(g),S=1<<x;l|=a[x],g&=~S}return Kr=l,jg(),u}function fM(a,l){ae=null,$.H=Pd,l===Xc||l===Vg?(l=Mk(),Le=3):l===px?(l=Mk(),Le=4):Le=l===Hx?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Yi=l,fe===null&&(ln=1,rm(a,ps(l,a.current)))}function pM(){var a=$i.current;return a===null?!0:(me&4194048)===me?vs===null:(me&62914560)===me||(me&536870912)!==0?a===vs:!1}function gM(){var a=$.H;return $.H=Pd,a===null?Pd:a}function mM(){var a=$.A;return $.A=U5,a}function ym(){ln=4,Za||(me&4194048)!==me&&$i.current!==null||(ih=!0),(Qa&134217727)===0&&(fl&134217727)===0||We===null||eo(We,me,Xi,!1)}function uw(a,l,u){var g=Te;Te|=2;var x=gM(),S=mM();(We!==a||me!==l)&&(gm=null,ah(a,l)),l=!1;var P=ln;t:do try{if(Le!==0&&fe!==null){var V=fe,it=Yi;switch(Le){case 8:hw(),P=6;break t;case 3:case 2:case 9:case 6:$i.current===null&&(l=!0);var vt=Le;if(Le=0,Yi=null,oh(a,V,it,vt),u&&ih){P=0;break t}break;default:vt=Le,Le=0,Yi=null,oh(a,V,it,vt)}}G5(),P=ln;break}catch(Pt){fM(a,Pt)}while(!0);return l&&a.shellSuspendCounter++,zr=sl=null,Te=g,$.H=x,$.A=S,fe===null&&(We=null,me=0,jg()),P}function G5(){for(;fe!==null;)yM(fe)}function V5(a,l){var u=Te;Te|=2;var g=gM(),x=mM();We!==a||me!==l?(gm=null,pm=It()+500,ah(a,l)):ih=ad(a,l);t:do try{if(Le!==0&&fe!==null){l=fe;var S=Yi;e:switch(Le){case 1:Le=0,Yi=null,oh(a,l,S,1);break;case 2:case 9:if(kk(S)){Le=0,Yi=null,vM(l);break}l=function(){Le!==2&&Le!==9||We!==a||(Le=7),ir(a)},S.then(l,l);break t;case 3:Le=7;break t;case 4:Le=5;break t;case 7:kk(S)?(Le=0,Yi=null,vM(l)):(Le=0,Yi=null,oh(a,l,S,7));break;case 5:var P=null;switch(fe.tag){case 26:P=fe.memoizedState;case 5:case 27:var V=fe;if(P?iR(P):V.stateNode.complete){Le=0,Yi=null;var it=V.sibling;if(it!==null)fe=it;else{var vt=V.return;vt!==null?(fe=vt,vm(vt)):fe=null}break e}}Le=0,Yi=null,oh(a,l,S,5);break;case 6:Le=0,Yi=null,oh(a,l,S,6);break;case 8:hw(),ln=6;break t;default:throw Error(n(462))}}$5();break}catch(Pt){fM(a,Pt)}while(!0);return zr=sl=null,$.H=g,$.A=x,Te=u,fe!==null?0:(We=null,me=0,jg(),ln)}function $5(){for(;fe!==null&&!pt();)yM(fe)}function yM(a){var l=UT(a.alternate,a,Kr);a.memoizedProps=a.pendingProps,l===null?vm(a):fe=l}function vM(a){var l=a,u=l.alternate;switch(l.tag){case 15:case 0:l=OT(u,l,l.pendingProps,l.type,void 0,me);break;case 11:l=OT(u,l,l.pendingProps,l.type.render,l.ref,me);break;case 5:Cx(l);default:WT(u,l),l=fe=mk(l,Kr),l=UT(u,l,Kr)}a.memoizedProps=a.pendingProps,l===null?vm(a):fe=l}function oh(a,l,u,g){zr=sl=null,Cx(l),Kc=null,Sd=0;var x=l.return;try{if(N5(a,x,l,u,me)){ln=1,rm(a,ps(u,a.current)),fe=null;return}}catch(S){if(x!==null)throw fe=x,S;ln=1,rm(a,ps(u,a.current)),fe=null;return}l.flags&32768?(be||g===1?a=!0:ih||(me&536870912)!==0?a=!1:(Za=a=!0,(g===2||g===9||g===3||g===6)&&(g=$i.current,g!==null&&g.tag===13&&(g.flags|=16384))),bM(l,a)):vm(l)}function vm(a){var l=a;do{if((l.flags&32768)!==0){bM(l,Za);return}a=l.return;var u=j5(l.alternate,l,Kr);if(u!==null){fe=u;return}if(l=l.sibling,l!==null){fe=l;return}fe=l=a}while(l!==null);ln===0&&(ln=5)}function bM(a,l){do{var u=B5(a.alternate,a);if(u!==null){u.flags&=32767,fe=u;return}if(u=a.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!l&&(a=a.sibling,a!==null)){fe=a;return}fe=a=u}while(a!==null);ln=6,fe=null}function xM(a,l,u,g,x,S,P,V,it){a.cancelPendingCommit=null;do bm();while(Cn!==0);if((Te&6)!==0)throw Error(n(327));if(l!==null){if(l===a.current)throw Error(n(177));if(S=l.lanes|l.childLanes,S|=J1,E6(a,u,S,P,V,it),a===We&&(fe=We=null,me=0),rh=l,to=a,Zr=u,ow=S,lw=x,cM=g,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,K5(Ht,function(){return EM(),null})):(a.callbackNode=null,a.callbackPriority=0),g=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||g){g=$.T,$.T=null,x=G.p,G.p=2,P=Te,Te|=4;try{F5(a,l,u)}finally{Te=P,G.p=x,$.T=g}}Cn=1,wM(),AM(),SM()}}function wM(){if(Cn===1){Cn=0;var a=to,l=rh,u=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||u){u=$.T,$.T=null;var g=G.p;G.p=2;var x=Te;Te|=4;try{eM(l,a);var S=Sw,P=ok(a.containerInfo),V=S.focusedElem,it=S.selectionRange;if(P!==V&&V&&V.ownerDocument&&ak(V.ownerDocument.documentElement,V)){if(it!==null&&Y1(V)){var vt=it.start,Pt=it.end;if(Pt===void 0&&(Pt=vt),"selectionStart"in V)V.selectionStart=vt,V.selectionEnd=Math.min(Pt,V.value.length);else{var Nt=V.ownerDocument||document,bt=Nt&&Nt.defaultView||window;if(bt.getSelection){var wt=bt.getSelection(),Vt=V.textContent.length,Kt=Math.min(it.start,Vt),Be=it.end===void 0?Kt:Math.min(it.end,Vt);!wt.extend&&Kt>Be&&(P=Be,Be=Kt,Kt=P);var mt=rk(V,Kt),ct=rk(V,Be);if(mt&&ct&&(wt.rangeCount!==1||wt.anchorNode!==mt.node||wt.anchorOffset!==mt.offset||wt.focusNode!==ct.node||wt.focusOffset!==ct.offset)){var yt=Nt.createRange();yt.setStart(mt.node,mt.offset),wt.removeAllRanges(),Kt>Be?(wt.addRange(yt),wt.extend(ct.node,ct.offset)):(yt.setEnd(ct.node,ct.offset),wt.addRange(yt))}}}}for(Nt=[],wt=V;wt=wt.parentNode;)wt.nodeType===1&&Nt.push({element:wt,left:wt.scrollLeft,top:wt.scrollTop});for(typeof V.focus=="function"&&V.focus(),V=0;V<Nt.length;V++){var Dt=Nt[V];Dt.element.scrollLeft=Dt.left,Dt.element.scrollTop=Dt.top}}Pm=!!Aw,Sw=Aw=null}finally{Te=x,G.p=g,$.T=u}}a.current=l,Cn=2}}function AM(){if(Cn===2){Cn=0;var a=to,l=rh,u=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||u){u=$.T,$.T=null;var g=G.p;G.p=2;var x=Te;Te|=4;try{KT(a,l.alternate,l)}finally{Te=x,G.p=g,$.T=u}}Cn=3}}function SM(){if(Cn===4||Cn===3){Cn=0,Lt();var a=to,l=rh,u=Zr,g=cM;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Cn=5:(Cn=0,rh=to=null,_M(a,a.pendingLanes));var x=a.pendingLanes;if(x===0&&(Ja=null),M1(u),l=l.stateNode,dt&&typeof dt.onCommitFiberRoot=="function")try{dt.onCommitFiberRoot(et,l,void 0,(l.current.flags&128)===128)}catch{}if(g!==null){l=$.T,x=G.p,G.p=2,$.T=null;try{for(var S=a.onRecoverableError,P=0;P<g.length;P++){var V=g[P];S(V.value,{componentStack:V.stack})}}finally{$.T=l,G.p=x}}(Zr&3)!==0&&bm(),ir(a),x=a.pendingLanes,(u&261930)!==0&&(x&42)!==0?a===cw?zd++:(zd=0,cw=a):zd=0,Ud(0)}}function _M(a,l){(a.pooledCacheLanes&=l)===0&&(l=a.pooledCache,l!=null&&(a.pooledCache=null,wd(l)))}function bm(){return wM(),AM(),SM(),EM()}function EM(){if(Cn!==5)return!1;var a=to,l=ow;ow=0;var u=M1(Zr),g=$.T,x=G.p;try{G.p=32>u?32:u,$.T=null,u=lw,lw=null;var S=to,P=Zr;if(Cn=0,rh=to=null,Zr=0,(Te&6)!==0)throw Error(n(331));var V=Te;if(Te|=4,aM(S.current),iM(S,S.current,P,u),Te=V,Ud(0,!1),dt&&typeof dt.onPostCommitFiberRoot=="function")try{dt.onPostCommitFiberRoot(et,S)}catch{}return!0}finally{G.p=x,$.T=g,_M(a,l)}}function CM(a,l,u){l=ps(u,l),l=Ux(a.stateNode,l,2),a=qa(a,l,2),a!==null&&(od(a,2),ir(a))}function De(a,l,u){if(a.tag===3)CM(a,a,u);else for(;l!==null;){if(l.tag===3){CM(l,a,u);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Ja===null||!Ja.has(g))){a=ps(u,a),u=kT(2),g=qa(l,u,2),g!==null&&(TT(u,g,l,a),od(g,2),ir(g));break}}l=l.return}}function dw(a,l,u){var g=a.pingCache;if(g===null){g=a.pingCache=new H5;var x=new Set;g.set(l,x)}else x=g.get(l),x===void 0&&(x=new Set,g.set(l,x));x.has(u)||(sw=!0,x.add(u),a=q5.bind(null,a,l,u),l.then(a,a))}function q5(a,l,u){var g=a.pingCache;g!==null&&g.delete(l),a.pingedLanes|=a.suspendedLanes&u,a.warmLanes&=~u,We===a&&(me&u)===u&&(ln===4||ln===3&&(me&62914560)===me&&300>It()-fm?(Te&2)===0&&ah(a,0):rw|=u,sh===me&&(sh=0)),ir(a)}function kM(a,l){l===0&&(l=wC()),a=el(a,l),a!==null&&(od(a,l),ir(a))}function Y5(a){var l=a.memoizedState,u=0;l!==null&&(u=l.retryLane),kM(a,u)}function X5(a,l){var u=0;switch(a.tag){case 31:case 13:var g=a.stateNode,x=a.memoizedState;x!==null&&(u=x.retryLane);break;case 19:g=a.stateNode;break;case 22:g=a.stateNode._retryCache;break;default:throw Error(n(314))}g!==null&&g.delete(l),kM(a,u)}function K5(a,l){return kt(a,l)}var xm=null,lh=null,fw=!1,wm=!1,pw=!1,no=0;function ir(a){a!==lh&&a.next===null&&(lh===null?xm=lh=a:lh=lh.next=a),wm=!0,fw||(fw=!0,Q5())}function Ud(a,l){if(!pw&&wm){pw=!0;do for(var u=!1,g=xm;g!==null;){if(a!==0){var x=g.pendingLanes;if(x===0)var S=0;else{var P=g.suspendedLanes,V=g.pingedLanes;S=(1<<31-Ot(42|a)+1)-1,S&=x&~(P&~V),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(u=!0,PM(g,S))}else S=me,S=Eg(g,g===We?S:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(S&3)===0||ad(g,S)||(u=!0,PM(g,S));g=g.next}while(u);pw=!1}}function Z5(){TM()}function TM(){wm=fw=!1;var a=0;no!==0&&l4()&&(a=no);for(var l=It(),u=null,g=xm;g!==null;){var x=g.next,S=MM(g,l);S===0?(g.next=null,u===null?xm=x:u.next=x,x===null&&(lh=u)):(u=g,(a!==0||(S&3)!==0)&&(wm=!0)),g=x}Cn!==0&&Cn!==5||Ud(a),no!==0&&(no=0)}function MM(a,l){for(var u=a.suspendedLanes,g=a.pingedLanes,x=a.expirationTimes,S=a.pendingLanes&-62914561;0<S;){var P=31-Ot(S),V=1<<P,it=x[P];it===-1?((V&u)===0||(V&g)!==0)&&(x[P]=_6(V,l)):it<=l&&(a.expiredLanes|=V),S&=~V}if(l=We,u=me,u=Eg(a,a===l?u:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),g=a.callbackNode,u===0||a===l&&(Le===2||Le===9)||a.cancelPendingCommit!==null)return g!==null&&g!==null&&Mt(g),a.callbackNode=null,a.callbackPriority=0;if((u&3)===0||ad(a,u)){if(l=u&-u,l===a.callbackPriority)return l;switch(g!==null&&Mt(g),M1(u)){case 2:case 8:u=Jt;break;case 32:u=Ht;break;case 268435456:u=C;break;default:u=Ht}return g=RM.bind(null,a),u=kt(u,g),a.callbackPriority=l,a.callbackNode=u,l}return g!==null&&g!==null&&Mt(g),a.callbackPriority=2,a.callbackNode=null,2}function RM(a,l){if(Cn!==0&&Cn!==5)return a.callbackNode=null,a.callbackPriority=0,null;var u=a.callbackNode;if(bm()&&a.callbackNode!==u)return null;var g=me;return g=Eg(a,a===We?g:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),g===0?null:(uM(a,g,l),MM(a,It()),a.callbackNode!=null&&a.callbackNode===u?RM.bind(null,a):null)}function PM(a,l){if(bm())return null;uM(a,l,!0)}function Q5(){h4(function(){(Te&6)!==0?kt(zt,Z5):TM()})}function gw(){if(no===0){var a=qc;a===0&&(a=_e,_e<<=1,(_e&261888)===0&&(_e=256)),no=a}return no}function LM(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Mg(""+a)}function DM(a,l){var u=l.ownerDocument.createElement("input");return u.name=l.name,u.value=l.value,a.id&&u.setAttribute("form",a.id),l.parentNode.insertBefore(u,l),a=new FormData(a),u.parentNode.removeChild(u),a}function J5(a,l,u,g,x){if(l==="submit"&&u&&u.stateNode===x){var S=LM((x[_i]||null).action),P=g.submitter;P&&(l=(l=P[_i]||null)?LM(l.formAction):P.getAttribute("formAction"),l!==null&&(S=l,P=null));var V=new Dg("action","action",null,g,x);a.push({event:V,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(no!==0){var it=P?DM(x,P):new FormData(x);Ox(u,{pending:!0,data:it,method:x.method,action:S},null,it)}}else typeof S=="function"&&(V.preventDefault(),it=P?DM(x,P):new FormData(x),Ox(u,{pending:!0,data:it,method:x.method,action:S},S,it))},currentTarget:x}]})}}for(var mw=0;mw<Q1.length;mw++){var yw=Q1[mw],t4=yw.toLowerCase(),e4=yw[0].toUpperCase()+yw.slice(1);Fs(t4,"on"+e4)}Fs(hk,"onAnimationEnd"),Fs(uk,"onAnimationIteration"),Fs(dk,"onAnimationStart"),Fs("dblclick","onDoubleClick"),Fs("focusin","onFocus"),Fs("focusout","onBlur"),Fs(y5,"onTransitionRun"),Fs(v5,"onTransitionStart"),Fs(b5,"onTransitionCancel"),Fs(fk,"onTransitionEnd"),Dc("onMouseEnter",["mouseout","mouseover"]),Dc("onMouseLeave",["mouseout","mouseover"]),Dc("onPointerEnter",["pointerout","pointerover"]),Dc("onPointerLeave",["pointerout","pointerover"]),Zo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Zo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Zo("onBeforeInput",["compositionend","keypress","textInput","paste"]),Zo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Zo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Zo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),n4=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Hd));function NM(a,l){l=(l&4)!==0;for(var u=0;u<a.length;u++){var g=a[u],x=g.event;g=g.listeners;t:{var S=void 0;if(l)for(var P=g.length-1;0<=P;P--){var V=g[P],it=V.instance,vt=V.currentTarget;if(V=V.listener,it!==S&&x.isPropagationStopped())break t;S=V,x.currentTarget=vt;try{S(x)}catch(Pt){Ig(Pt)}x.currentTarget=null,S=it}else for(P=0;P<g.length;P++){if(V=g[P],it=V.instance,vt=V.currentTarget,V=V.listener,it!==S&&x.isPropagationStopped())break t;S=V,x.currentTarget=vt;try{S(x)}catch(Pt){Ig(Pt)}x.currentTarget=null,S=it}}}}function pe(a,l){var u=l[R1];u===void 0&&(u=l[R1]=new Set);var g=a+"__bubble";u.has(g)||(OM(l,a,2,!1),u.add(g))}function vw(a,l,u){var g=0;l&&(g|=4),OM(u,a,g,l)}var Am="_reactListening"+Math.random().toString(36).slice(2);function bw(a){if(!a[Am]){a[Am]=!0,TC.forEach(function(u){u!=="selectionchange"&&(n4.has(u)||vw(u,!1,a),vw(u,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[Am]||(l[Am]=!0,vw("selectionchange",!1,l))}}function OM(a,l,u,g){switch(hR(l)){case 2:var x=R4;break;case 8:x=P4;break;default:x=Nw}u=x.bind(null,l,u,a),x=void 0,!F1||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(x=!0),g?x!==void 0?a.addEventListener(l,u,{capture:!0,passive:x}):a.addEventListener(l,u,!0):x!==void 0?a.addEventListener(l,u,{passive:x}):a.addEventListener(l,u,!1)}function xw(a,l,u,g,x){var S=g;if((l&1)===0&&(l&2)===0&&g!==null)t:for(;;){if(g===null)return;var P=g.tag;if(P===3||P===4){var V=g.stateNode.containerInfo;if(V===x)break;if(P===4)for(P=g.return;P!==null;){var it=P.tag;if((it===3||it===4)&&P.stateNode.containerInfo===x)return;P=P.return}for(;V!==null;){if(P=Rc(V),P===null)return;if(it=P.tag,it===5||it===6||it===26||it===27){g=S=P;continue t}V=V.parentNode}}g=g.return}zC(function(){var vt=S,Pt=j1(u),Nt=[];t:{var bt=pk.get(a);if(bt!==void 0){var wt=Dg,Vt=a;switch(a){case"keypress":if(Pg(u)===0)break t;case"keydown":case"keyup":wt=X6;break;case"focusin":Vt="focus",wt=W1;break;case"focusout":Vt="blur",wt=W1;break;case"beforeblur":case"afterblur":wt=W1;break;case"click":if(u.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":wt=WC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":wt=j6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":wt=Q6;break;case hk:case uk:case dk:wt=z6;break;case fk:wt=t5;break;case"scroll":case"scrollend":wt=O6;break;case"wheel":wt=n5;break;case"copy":case"cut":case"paste":wt=H6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":wt=VC;break;case"toggle":case"beforetoggle":wt=s5}var Kt=(l&4)!==0,Be=!Kt&&(a==="scroll"||a==="scrollend"),mt=Kt?bt!==null?bt+"Capture":null:bt;Kt=[];for(var ct=vt,yt;ct!==null;){var Dt=ct;if(yt=Dt.stateNode,Dt=Dt.tag,Dt!==5&&Dt!==26&&Dt!==27||yt===null||mt===null||(Dt=hd(ct,mt),Dt!=null&&Kt.push(Wd(ct,Dt,yt))),Be)break;ct=ct.return}0<Kt.length&&(bt=new wt(bt,Vt,null,u,Pt),Nt.push({event:bt,listeners:Kt}))}}if((l&7)===0){t:{if(bt=a==="mouseover"||a==="pointerover",wt=a==="mouseout"||a==="pointerout",bt&&u!==I1&&(Vt=u.relatedTarget||u.fromElement)&&(Rc(Vt)||Vt[Mc]))break t;if((wt||bt)&&(bt=Pt.window===Pt?Pt:(bt=Pt.ownerDocument)?bt.defaultView||bt.parentWindow:window,wt?(Vt=u.relatedTarget||u.toElement,wt=vt,Vt=Vt?Rc(Vt):null,Vt!==null&&(Be=r(Vt),Kt=Vt.tag,Vt!==Be||Kt!==5&&Kt!==27&&Kt!==6)&&(Vt=null)):(wt=null,Vt=vt),wt!==Vt)){if(Kt=WC,Dt="onMouseLeave",mt="onMouseEnter",ct="mouse",(a==="pointerout"||a==="pointerover")&&(Kt=VC,Dt="onPointerLeave",mt="onPointerEnter",ct="pointer"),Be=wt==null?bt:cd(wt),yt=Vt==null?bt:cd(Vt),bt=new Kt(Dt,ct+"leave",wt,u,Pt),bt.target=Be,bt.relatedTarget=yt,Dt=null,Rc(Pt)===vt&&(Kt=new Kt(mt,ct+"enter",Vt,u,Pt),Kt.target=yt,Kt.relatedTarget=Be,Dt=Kt),Be=Dt,wt&&Vt)e:{for(Kt=i4,mt=wt,ct=Vt,yt=0,Dt=mt;Dt;Dt=Kt(Dt))yt++;Dt=0;for(var Yt=ct;Yt;Yt=Kt(Yt))Dt++;for(;0<yt-Dt;)mt=Kt(mt),yt--;for(;0<Dt-yt;)ct=Kt(ct),Dt--;for(;yt--;){if(mt===ct||ct!==null&&mt===ct.alternate){Kt=mt;break e}mt=Kt(mt),ct=Kt(ct)}Kt=null}else Kt=null;wt!==null&&IM(Nt,bt,wt,Kt,!1),Vt!==null&&Be!==null&&IM(Nt,Be,Vt,Kt,!0)}}t:{if(bt=vt?cd(vt):window,wt=bt.nodeName&&bt.nodeName.toLowerCase(),wt==="select"||wt==="input"&&bt.type==="file")var Ce=JC;else if(ZC(bt))if(tk)Ce=p5;else{Ce=d5;var $t=u5}else wt=bt.nodeName,!wt||wt.toLowerCase()!=="input"||bt.type!=="checkbox"&&bt.type!=="radio"?vt&&O1(vt.elementType)&&(Ce=JC):Ce=f5;if(Ce&&(Ce=Ce(a,vt))){QC(Nt,Ce,u,Pt);break t}$t&&$t(a,bt,vt),a==="focusout"&&vt&&bt.type==="number"&&vt.memoizedProps.value!=null&&N1(bt,"number",bt.value)}switch($t=vt?cd(vt):window,a){case"focusin":(ZC($t)||$t.contentEditable==="true")&&(Fc=$t,X1=vt,vd=null);break;case"focusout":vd=X1=Fc=null;break;case"mousedown":K1=!0;break;case"contextmenu":case"mouseup":case"dragend":K1=!1,lk(Nt,u,Pt);break;case"selectionchange":if(m5)break;case"keydown":case"keyup":lk(Nt,u,Pt)}var le;if(V1)t:{switch(a){case"compositionstart":var ye="onCompositionStart";break t;case"compositionend":ye="onCompositionEnd";break t;case"compositionupdate":ye="onCompositionUpdate";break t}ye=void 0}else Bc?XC(a,u)&&(ye="onCompositionEnd"):a==="keydown"&&u.keyCode===229&&(ye="onCompositionStart");ye&&($C&&u.locale!=="ko"&&(Bc||ye!=="onCompositionStart"?ye==="onCompositionEnd"&&Bc&&(le=UC()):(za=Pt,z1="value"in za?za.value:za.textContent,Bc=!0)),$t=Sm(vt,ye),0<$t.length&&(ye=new GC(ye,a,null,u,Pt),Nt.push({event:ye,listeners:$t}),le?ye.data=le:(le=KC(u),le!==null&&(ye.data=le)))),(le=a5?o5(a,u):l5(a,u))&&(ye=Sm(vt,"onBeforeInput"),0<ye.length&&($t=new GC("onBeforeInput","beforeinput",null,u,Pt),Nt.push({event:$t,listeners:ye}),$t.data=le)),J5(Nt,a,vt,u,Pt)}NM(Nt,l)})}function Wd(a,l,u){return{instance:a,listener:l,currentTarget:u}}function Sm(a,l){for(var u=l+"Capture",g=[];a!==null;){var x=a,S=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||S===null||(x=hd(a,u),x!=null&&g.unshift(Wd(a,x,S)),x=hd(a,l),x!=null&&g.push(Wd(a,x,S))),a.tag===3)return g;a=a.return}return[]}function i4(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function IM(a,l,u,g,x){for(var S=l._reactName,P=[];u!==null&&u!==g;){var V=u,it=V.alternate,vt=V.stateNode;if(V=V.tag,it!==null&&it===g)break;V!==5&&V!==26&&V!==27||vt===null||(it=vt,x?(vt=hd(u,S),vt!=null&&P.unshift(Wd(u,vt,it))):x||(vt=hd(u,S),vt!=null&&P.push(Wd(u,vt,it)))),u=u.return}P.length!==0&&a.push({event:l,listeners:P})}var s4=/\r\n?/g,r4=/\u0000|\uFFFD/g;function jM(a){return(typeof a=="string"?a:""+a).replace(s4,`
`).replace(r4,"")}function BM(a,l){return l=jM(l),jM(a)===l}function je(a,l,u,g,x,S){switch(u){case"children":typeof g=="string"?l==="body"||l==="textarea"&&g===""||Oc(a,g):(typeof g=="number"||typeof g=="bigint")&&l!=="body"&&Oc(a,""+g);break;case"className":kg(a,"class",g);break;case"tabIndex":kg(a,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":kg(a,u,g);break;case"style":BC(a,g,S);break;case"data":if(l!=="object"){kg(a,"data",g);break}case"src":case"href":if(g===""&&(l!=="a"||u!=="href")){a.removeAttribute(u);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){a.removeAttribute(u);break}g=Mg(""+g),a.setAttribute(u,g);break;case"action":case"formAction":if(typeof g=="function"){a.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(u==="formAction"?(l!=="input"&&je(a,l,"name",x.name,x,null),je(a,l,"formEncType",x.formEncType,x,null),je(a,l,"formMethod",x.formMethod,x,null),je(a,l,"formTarget",x.formTarget,x,null)):(je(a,l,"encType",x.encType,x,null),je(a,l,"method",x.method,x,null),je(a,l,"target",x.target,x,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){a.removeAttribute(u);break}g=Mg(""+g),a.setAttribute(u,g);break;case"onClick":g!=null&&(a.onclick=Ir);break;case"onScroll":g!=null&&pe("scroll",a);break;case"onScrollEnd":g!=null&&pe("scrollend",a);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(u=g.__html,u!=null){if(x.children!=null)throw Error(n(60));a.innerHTML=u}}break;case"multiple":a.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":a.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){a.removeAttribute("xlink:href");break}u=Mg(""+g),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(u,""+g):a.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(u,""):a.removeAttribute(u);break;case"capture":case"download":g===!0?a.setAttribute(u,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(u,g):a.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?a.setAttribute(u,g):a.removeAttribute(u);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?a.removeAttribute(u):a.setAttribute(u,g);break;case"popover":pe("beforetoggle",a),pe("toggle",a),Cg(a,"popover",g);break;case"xlinkActuate":Or(a,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Or(a,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Or(a,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Or(a,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Or(a,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Or(a,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Or(a,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Or(a,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Or(a,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Cg(a,"is",g);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=D6.get(u)||u,Cg(a,u,g))}}function ww(a,l,u,g,x,S){switch(u){case"style":BC(a,g,S);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(u=g.__html,u!=null){if(x.children!=null)throw Error(n(60));a.innerHTML=u}}break;case"children":typeof g=="string"?Oc(a,g):(typeof g=="number"||typeof g=="bigint")&&Oc(a,""+g);break;case"onScroll":g!=null&&pe("scroll",a);break;case"onScrollEnd":g!=null&&pe("scrollend",a);break;case"onClick":g!=null&&(a.onclick=Ir);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!MC.hasOwnProperty(u))t:{if(u[0]==="o"&&u[1]==="n"&&(x=u.endsWith("Capture"),l=u.slice(2,x?u.length-7:void 0),S=a[_i]||null,S=S!=null?S[u]:null,typeof S=="function"&&a.removeEventListener(l,S,x),typeof g=="function")){typeof S!="function"&&S!==null&&(u in a?a[u]=null:a.hasAttribute(u)&&a.removeAttribute(u)),a.addEventListener(l,g,x);break t}u in a?a[u]=g:g===!0?a.setAttribute(u,""):Cg(a,u,g)}}}function qn(a,l,u){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":pe("error",a),pe("load",a);var g=!1,x=!1,S;for(S in u)if(u.hasOwnProperty(S)){var P=u[S];if(P!=null)switch(S){case"src":g=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:je(a,l,S,P,u,null)}}x&&je(a,l,"srcSet",u.srcSet,u,null),g&&je(a,l,"src",u.src,u,null);return;case"input":pe("invalid",a);var V=S=P=x=null,it=null,vt=null;for(g in u)if(u.hasOwnProperty(g)){var Pt=u[g];if(Pt!=null)switch(g){case"name":x=Pt;break;case"type":P=Pt;break;case"checked":it=Pt;break;case"defaultChecked":vt=Pt;break;case"value":S=Pt;break;case"defaultValue":V=Pt;break;case"children":case"dangerouslySetInnerHTML":if(Pt!=null)throw Error(n(137,l));break;default:je(a,l,g,Pt,u,null)}}NC(a,S,V,it,vt,P,x,!1);return;case"select":pe("invalid",a),g=P=S=null;for(x in u)if(u.hasOwnProperty(x)&&(V=u[x],V!=null))switch(x){case"value":S=V;break;case"defaultValue":P=V;break;case"multiple":g=V;default:je(a,l,x,V,u,null)}l=S,u=P,a.multiple=!!g,l!=null?Nc(a,!!g,l,!1):u!=null&&Nc(a,!!g,u,!0);return;case"textarea":pe("invalid",a),S=x=g=null;for(P in u)if(u.hasOwnProperty(P)&&(V=u[P],V!=null))switch(P){case"value":g=V;break;case"defaultValue":x=V;break;case"children":S=V;break;case"dangerouslySetInnerHTML":if(V!=null)throw Error(n(91));break;default:je(a,l,P,V,u,null)}IC(a,g,x,S);return;case"option":for(it in u)u.hasOwnProperty(it)&&(g=u[it],g!=null)&&(it==="selected"?a.selected=g&&typeof g!="function"&&typeof g!="symbol":je(a,l,it,g,u,null));return;case"dialog":pe("beforetoggle",a),pe("toggle",a),pe("cancel",a),pe("close",a);break;case"iframe":case"object":pe("load",a);break;case"video":case"audio":for(g=0;g<Hd.length;g++)pe(Hd[g],a);break;case"image":pe("error",a),pe("load",a);break;case"details":pe("toggle",a);break;case"embed":case"source":case"link":pe("error",a),pe("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(vt in u)if(u.hasOwnProperty(vt)&&(g=u[vt],g!=null))switch(vt){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:je(a,l,vt,g,u,null)}return;default:if(O1(l)){for(Pt in u)u.hasOwnProperty(Pt)&&(g=u[Pt],g!==void 0&&ww(a,l,Pt,g,u,void 0));return}}for(V in u)u.hasOwnProperty(V)&&(g=u[V],g!=null&&je(a,l,V,g,u,null))}function a4(a,l,u,g){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,S=null,P=null,V=null,it=null,vt=null,Pt=null;for(wt in u){var Nt=u[wt];if(u.hasOwnProperty(wt)&&Nt!=null)switch(wt){case"checked":break;case"value":break;case"defaultValue":it=Nt;default:g.hasOwnProperty(wt)||je(a,l,wt,null,g,Nt)}}for(var bt in g){var wt=g[bt];if(Nt=u[bt],g.hasOwnProperty(bt)&&(wt!=null||Nt!=null))switch(bt){case"type":S=wt;break;case"name":x=wt;break;case"checked":vt=wt;break;case"defaultChecked":Pt=wt;break;case"value":P=wt;break;case"defaultValue":V=wt;break;case"children":case"dangerouslySetInnerHTML":if(wt!=null)throw Error(n(137,l));break;default:wt!==Nt&&je(a,l,bt,wt,g,Nt)}}D1(a,P,V,it,vt,Pt,S,x);return;case"select":wt=P=V=bt=null;for(S in u)if(it=u[S],u.hasOwnProperty(S)&&it!=null)switch(S){case"value":break;case"multiple":wt=it;default:g.hasOwnProperty(S)||je(a,l,S,null,g,it)}for(x in g)if(S=g[x],it=u[x],g.hasOwnProperty(x)&&(S!=null||it!=null))switch(x){case"value":bt=S;break;case"defaultValue":V=S;break;case"multiple":P=S;default:S!==it&&je(a,l,x,S,g,it)}l=V,u=P,g=wt,bt!=null?Nc(a,!!u,bt,!1):!!g!=!!u&&(l!=null?Nc(a,!!u,l,!0):Nc(a,!!u,u?[]:"",!1));return;case"textarea":wt=bt=null;for(V in u)if(x=u[V],u.hasOwnProperty(V)&&x!=null&&!g.hasOwnProperty(V))switch(V){case"value":break;case"children":break;default:je(a,l,V,null,g,x)}for(P in g)if(x=g[P],S=u[P],g.hasOwnProperty(P)&&(x!=null||S!=null))switch(P){case"value":bt=x;break;case"defaultValue":wt=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(n(91));break;default:x!==S&&je(a,l,P,x,g,S)}OC(a,bt,wt);return;case"option":for(var Vt in u)bt=u[Vt],u.hasOwnProperty(Vt)&&bt!=null&&!g.hasOwnProperty(Vt)&&(Vt==="selected"?a.selected=!1:je(a,l,Vt,null,g,bt));for(it in g)bt=g[it],wt=u[it],g.hasOwnProperty(it)&&bt!==wt&&(bt!=null||wt!=null)&&(it==="selected"?a.selected=bt&&typeof bt!="function"&&typeof bt!="symbol":je(a,l,it,bt,g,wt));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Kt in u)bt=u[Kt],u.hasOwnProperty(Kt)&&bt!=null&&!g.hasOwnProperty(Kt)&&je(a,l,Kt,null,g,bt);for(vt in g)if(bt=g[vt],wt=u[vt],g.hasOwnProperty(vt)&&bt!==wt&&(bt!=null||wt!=null))switch(vt){case"children":case"dangerouslySetInnerHTML":if(bt!=null)throw Error(n(137,l));break;default:je(a,l,vt,bt,g,wt)}return;default:if(O1(l)){for(var Be in u)bt=u[Be],u.hasOwnProperty(Be)&&bt!==void 0&&!g.hasOwnProperty(Be)&&ww(a,l,Be,void 0,g,bt);for(Pt in g)bt=g[Pt],wt=u[Pt],!g.hasOwnProperty(Pt)||bt===wt||bt===void 0&&wt===void 0||ww(a,l,Pt,bt,g,wt);return}}for(var mt in u)bt=u[mt],u.hasOwnProperty(mt)&&bt!=null&&!g.hasOwnProperty(mt)&&je(a,l,mt,null,g,bt);for(Nt in g)bt=g[Nt],wt=u[Nt],!g.hasOwnProperty(Nt)||bt===wt||bt==null&&wt==null||je(a,l,Nt,bt,g,wt)}function FM(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function o4(){if(typeof performance.getEntriesByType=="function"){for(var a=0,l=0,u=performance.getEntriesByType("resource"),g=0;g<u.length;g++){var x=u[g],S=x.transferSize,P=x.initiatorType,V=x.duration;if(S&&V&&FM(P)){for(P=0,V=x.responseEnd,g+=1;g<u.length;g++){var it=u[g],vt=it.startTime;if(vt>V)break;var Pt=it.transferSize,Nt=it.initiatorType;Pt&&FM(Nt)&&(it=it.responseEnd,P+=Pt*(it<V?1:(V-vt)/(it-vt)))}if(--g,l+=8*(S+P)/(x.duration/1e3),a++,10<a)break}}if(0<a)return l/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var Aw=null,Sw=null;function _m(a){return a.nodeType===9?a:a.ownerDocument}function zM(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function UM(a,l){if(a===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&l==="foreignObject"?0:a}function _w(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Ew=null;function l4(){var a=window.event;return a&&a.type==="popstate"?a===Ew?!1:(Ew=a,!0):(Ew=null,!1)}var HM=typeof setTimeout=="function"?setTimeout:void 0,c4=typeof clearTimeout=="function"?clearTimeout:void 0,WM=typeof Promise=="function"?Promise:void 0,h4=typeof queueMicrotask=="function"?queueMicrotask:typeof WM<"u"?function(a){return WM.resolve(null).then(a).catch(u4)}:HM;function u4(a){setTimeout(function(){throw a})}function io(a){return a==="head"}function GM(a,l){var u=l,g=0;do{var x=u.nextSibling;if(a.removeChild(u),x&&x.nodeType===8)if(u=x.data,u==="/$"||u==="/&"){if(g===0){a.removeChild(x),dh(l);return}g--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")g++;else if(u==="html")Gd(a.ownerDocument.documentElement);else if(u==="head"){u=a.ownerDocument.head,Gd(u);for(var S=u.firstChild;S;){var P=S.nextSibling,V=S.nodeName;S[ld]||V==="SCRIPT"||V==="STYLE"||V==="LINK"&&S.rel.toLowerCase()==="stylesheet"||u.removeChild(S),S=P}}else u==="body"&&Gd(a.ownerDocument.body);u=x}while(u);dh(l)}function VM(a,l){var u=a;a=0;do{var g=u.nextSibling;if(u.nodeType===1?l?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(l?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(a===0)break;a--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||a++;u=g}while(u)}function Cw(a){var l=a.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var u=l;switch(l=l.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Cw(u),P1(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}a.removeChild(u)}}function d4(a,l,u,g){for(;a.nodeType===1;){var x=u;if(a.nodeName.toLowerCase()!==l.toLowerCase()){if(!g&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(g){if(!a[ld])switch(l){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(S=a.getAttribute("rel"),S==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(S!==x.rel||a.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||a.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||a.getAttribute("title")!==(x.title==null?null:x.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(S=a.getAttribute("src"),(S!==(x.src==null?null:x.src)||a.getAttribute("type")!==(x.type==null?null:x.type)||a.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&S&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(l==="input"&&a.type==="hidden"){var S=x.name==null?null:""+x.name;if(x.type==="hidden"&&a.getAttribute("name")===S)return a}else return a;if(a=bs(a.nextSibling),a===null)break}return null}function f4(a,l,u){if(l==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!u||(a=bs(a.nextSibling),a===null))return null;return a}function $M(a,l){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!l||(a=bs(a.nextSibling),a===null))return null;return a}function kw(a){return a.data==="$?"||a.data==="$~"}function Tw(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function p4(a,l){var u=a.ownerDocument;if(a.data==="$~")a._reactRetry=l;else if(a.data!=="$?"||u.readyState!=="loading")l();else{var g=function(){l(),u.removeEventListener("DOMContentLoaded",g)};u.addEventListener("DOMContentLoaded",g),a._reactRetry=g}}function bs(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return a}var Mw=null;function qM(a){a=a.nextSibling;for(var l=0;a;){if(a.nodeType===8){var u=a.data;if(u==="/$"||u==="/&"){if(l===0)return bs(a.nextSibling);l--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||l++}a=a.nextSibling}return null}function YM(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var u=a.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(l===0)return a;l--}else u!=="/$"&&u!=="/&"||l++}a=a.previousSibling}return null}function XM(a,l,u){switch(l=_m(u),a){case"html":if(a=l.documentElement,!a)throw Error(n(452));return a;case"head":if(a=l.head,!a)throw Error(n(453));return a;case"body":if(a=l.body,!a)throw Error(n(454));return a;default:throw Error(n(451))}}function Gd(a){for(var l=a.attributes;l.length;)a.removeAttributeNode(l[0]);P1(a)}var xs=new Map,KM=new Set;function Em(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Qr=G.d;G.d={f:g4,r:m4,D:y4,C:v4,L:b4,m:x4,X:A4,S:w4,M:S4};function g4(){var a=Qr.f(),l=mm();return a||l}function m4(a){var l=Pc(a);l!==null&&l.tag===5&&l.type==="form"?fT(l):Qr.r(a)}var ch=typeof document>"u"?null:document;function ZM(a,l,u){var g=ch;if(g&&typeof l=="string"&&l){var x=ds(l);x='link[rel="'+a+'"][href="'+x+'"]',typeof u=="string"&&(x+='[crossorigin="'+u+'"]'),KM.has(x)||(KM.add(x),a={rel:a,crossOrigin:u,href:l},g.querySelector(x)===null&&(l=g.createElement("link"),qn(l,"link",a),Ln(l),g.head.appendChild(l)))}}function y4(a){Qr.D(a),ZM("dns-prefetch",a,null)}function v4(a,l){Qr.C(a,l),ZM("preconnect",a,l)}function b4(a,l,u){Qr.L(a,l,u);var g=ch;if(g&&a&&l){var x='link[rel="preload"][as="'+ds(l)+'"]';l==="image"&&u&&u.imageSrcSet?(x+='[imagesrcset="'+ds(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(x+='[imagesizes="'+ds(u.imageSizes)+'"]')):x+='[href="'+ds(a)+'"]';var S=x;switch(l){case"style":S=hh(a);break;case"script":S=uh(a)}xs.has(S)||(a=p({rel:"preload",href:l==="image"&&u&&u.imageSrcSet?void 0:a,as:l},u),xs.set(S,a),g.querySelector(x)!==null||l==="style"&&g.querySelector(Vd(S))||l==="script"&&g.querySelector($d(S))||(l=g.createElement("link"),qn(l,"link",a),Ln(l),g.head.appendChild(l)))}}function x4(a,l){Qr.m(a,l);var u=ch;if(u&&a){var g=l&&typeof l.as=="string"?l.as:"script",x='link[rel="modulepreload"][as="'+ds(g)+'"][href="'+ds(a)+'"]',S=x;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=uh(a)}if(!xs.has(S)&&(a=p({rel:"modulepreload",href:a},l),xs.set(S,a),u.querySelector(x)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector($d(S)))return}g=u.createElement("link"),qn(g,"link",a),Ln(g),u.head.appendChild(g)}}}function w4(a,l,u){Qr.S(a,l,u);var g=ch;if(g&&a){var x=Lc(g).hoistableStyles,S=hh(a);l=l||"default";var P=x.get(S);if(!P){var V={loading:0,preload:null};if(P=g.querySelector(Vd(S)))V.loading=5;else{a=p({rel:"stylesheet",href:a,"data-precedence":l},u),(u=xs.get(S))&&Rw(a,u);var it=P=g.createElement("link");Ln(it),qn(it,"link",a),it._p=new Promise(function(vt,Pt){it.onload=vt,it.onerror=Pt}),it.addEventListener("load",function(){V.loading|=1}),it.addEventListener("error",function(){V.loading|=2}),V.loading|=4,Cm(P,l,g)}P={type:"stylesheet",instance:P,count:1,state:V},x.set(S,P)}}}function A4(a,l){Qr.X(a,l);var u=ch;if(u&&a){var g=Lc(u).hoistableScripts,x=uh(a),S=g.get(x);S||(S=u.querySelector($d(x)),S||(a=p({src:a,async:!0},l),(l=xs.get(x))&&Pw(a,l),S=u.createElement("script"),Ln(S),qn(S,"link",a),u.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},g.set(x,S))}}function S4(a,l){Qr.M(a,l);var u=ch;if(u&&a){var g=Lc(u).hoistableScripts,x=uh(a),S=g.get(x);S||(S=u.querySelector($d(x)),S||(a=p({src:a,async:!0,type:"module"},l),(l=xs.get(x))&&Pw(a,l),S=u.createElement("script"),Ln(S),qn(S,"link",a),u.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},g.set(x,S))}}function QM(a,l,u,g){var x=(x=Rt.current)?Em(x):null;if(!x)throw Error(n(446));switch(a){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(l=hh(u.href),u=Lc(x).hoistableStyles,g=u.get(l),g||(g={type:"style",instance:null,count:0,state:null},u.set(l,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){a=hh(u.href);var S=Lc(x).hoistableStyles,P=S.get(a);if(P||(x=x.ownerDocument||x,P={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(a,P),(S=x.querySelector(Vd(a)))&&!S._p&&(P.instance=S,P.state.loading=5),xs.has(a)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},xs.set(a,u),S||_4(x,a,u,P.state))),l&&g===null)throw Error(n(528,""));return P}if(l&&g!==null)throw Error(n(529,""));return null;case"script":return l=u.async,u=u.src,typeof u=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=uh(u),u=Lc(x).hoistableScripts,g=u.get(l),g||(g={type:"script",instance:null,count:0,state:null},u.set(l,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,a))}}function hh(a){return'href="'+ds(a)+'"'}function Vd(a){return'link[rel="stylesheet"]['+a+"]"}function JM(a){return p({},a,{"data-precedence":a.precedence,precedence:null})}function _4(a,l,u,g){a.querySelector('link[rel="preload"][as="style"]['+l+"]")?g.loading=1:(l=a.createElement("link"),g.preload=l,l.addEventListener("load",function(){return g.loading|=1}),l.addEventListener("error",function(){return g.loading|=2}),qn(l,"link",u),Ln(l),a.head.appendChild(l))}function uh(a){return'[src="'+ds(a)+'"]'}function $d(a){return"script[async]"+a}function tR(a,l,u){if(l.count++,l.instance===null)switch(l.type){case"style":var g=a.querySelector('style[data-href~="'+ds(u.href)+'"]');if(g)return l.instance=g,Ln(g),g;var x=p({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return g=(a.ownerDocument||a).createElement("style"),Ln(g),qn(g,"style",x),Cm(g,u.precedence,a),l.instance=g;case"stylesheet":x=hh(u.href);var S=a.querySelector(Vd(x));if(S)return l.state.loading|=4,l.instance=S,Ln(S),S;g=JM(u),(x=xs.get(x))&&Rw(g,x),S=(a.ownerDocument||a).createElement("link"),Ln(S);var P=S;return P._p=new Promise(function(V,it){P.onload=V,P.onerror=it}),qn(S,"link",g),l.state.loading|=4,Cm(S,u.precedence,a),l.instance=S;case"script":return S=uh(u.src),(x=a.querySelector($d(S)))?(l.instance=x,Ln(x),x):(g=u,(x=xs.get(S))&&(g=p({},u),Pw(g,x)),a=a.ownerDocument||a,x=a.createElement("script"),Ln(x),qn(x,"link",g),a.head.appendChild(x),l.instance=x);case"void":return null;default:throw Error(n(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(g=l.instance,l.state.loading|=4,Cm(g,u.precedence,a));return l.instance}function Cm(a,l,u){for(var g=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=g.length?g[g.length-1]:null,S=x,P=0;P<g.length;P++){var V=g[P];if(V.dataset.precedence===l)S=V;else if(S!==x)break}S?S.parentNode.insertBefore(a,S.nextSibling):(l=u.nodeType===9?u.head:u,l.insertBefore(a,l.firstChild))}function Rw(a,l){a.crossOrigin==null&&(a.crossOrigin=l.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=l.referrerPolicy),a.title==null&&(a.title=l.title)}function Pw(a,l){a.crossOrigin==null&&(a.crossOrigin=l.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=l.referrerPolicy),a.integrity==null&&(a.integrity=l.integrity)}var km=null;function eR(a,l,u){if(km===null){var g=new Map,x=km=new Map;x.set(u,g)}else x=km,g=x.get(u),g||(g=new Map,x.set(u,g));if(g.has(a))return g;for(g.set(a,null),u=u.getElementsByTagName(a),x=0;x<u.length;x++){var S=u[x];if(!(S[ld]||S[Wn]||a==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var P=S.getAttribute(l)||"";P=a+P;var V=g.get(P);V?V.push(S):g.set(P,[S])}}return g}function nR(a,l,u){a=a.ownerDocument||a,a.head.insertBefore(u,l==="title"?a.querySelector("head > title"):null)}function E4(a,l,u){if(u===1||l.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;return l.rel==="stylesheet"?(a=l.disabled,typeof l.precedence=="string"&&a==null):!0;case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function iR(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function C4(a,l,u,g){if(u.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var x=hh(g.href),S=l.querySelector(Vd(x));if(S){l=S._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(a.count++,a=Tm.bind(a),l.then(a,a)),u.state.loading|=4,u.instance=S,Ln(S);return}S=l.ownerDocument||l,g=JM(g),(x=xs.get(x))&&Rw(g,x),S=S.createElement("link"),Ln(S);var P=S;P._p=new Promise(function(V,it){P.onload=V,P.onerror=it}),qn(S,"link",g),u.instance=S}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(u,l),(l=u.state.preload)&&(u.state.loading&3)===0&&(a.count++,u=Tm.bind(a),l.addEventListener("load",u),l.addEventListener("error",u))}}var Lw=0;function k4(a,l){return a.stylesheets&&a.count===0&&Rm(a,a.stylesheets),0<a.count||0<a.imgCount?function(u){var g=setTimeout(function(){if(a.stylesheets&&Rm(a,a.stylesheets),a.unsuspend){var S=a.unsuspend;a.unsuspend=null,S()}},6e4+l);0<a.imgBytes&&Lw===0&&(Lw=62500*o4());var x=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&Rm(a,a.stylesheets),a.unsuspend)){var S=a.unsuspend;a.unsuspend=null,S()}},(a.imgBytes>Lw?50:800)+l);return a.unsuspend=u,function(){a.unsuspend=null,clearTimeout(g),clearTimeout(x)}}:null}function Tm(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Rm(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Mm=null;function Rm(a,l){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Mm=new Map,l.forEach(T4,a),Mm=null,Tm.call(a))}function T4(a,l){if(!(l.state.loading&4)){var u=Mm.get(a);if(u)var g=u.get(null);else{u=new Map,Mm.set(a,u);for(var x=a.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<x.length;S++){var P=x[S];(P.nodeName==="LINK"||P.getAttribute("media")!=="not all")&&(u.set(P.dataset.precedence,P),g=P)}g&&u.set(null,g)}x=l.instance,P=x.getAttribute("data-precedence"),S=u.get(P)||g,S===g&&u.set(null,x),u.set(P,x),this.count++,g=Tm.bind(this),x.addEventListener("load",g),x.addEventListener("error",g),S?S.parentNode.insertBefore(x,S.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(x,a.firstChild)),l.state.loading|=4}}var qd={$$typeof:T,Provider:null,Consumer:null,_currentValue:gt,_currentValue2:gt,_threadCount:0};function M4(a,l,u,g,x,S,P,V,it){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=k1(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=k1(0),this.hiddenUpdates=k1(null),this.identifierPrefix=g,this.onUncaughtError=x,this.onCaughtError=S,this.onRecoverableError=P,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=it,this.incompleteTransitions=new Map}function sR(a,l,u,g,x,S,P,V,it,vt,Pt,Nt){return a=new M4(a,l,u,P,it,vt,Pt,Nt,V),l=1,S===!0&&(l|=24),S=Vi(3,null,null,l),a.current=S,S.stateNode=a,l=ux(),l.refCount++,a.pooledCache=l,l.refCount++,S.memoizedState={element:g,isDehydrated:u,cache:l},gx(S),a}function rR(a){return a?(a=Hc,a):Hc}function aR(a,l,u,g,x,S){x=rR(x),g.context===null?g.context=x:g.pendingContext=x,g=$a(l),g.payload={element:u},S=S===void 0?null:S,S!==null&&(g.callback=S),u=qa(a,g,l),u!==null&&(Ri(u,a,l),Ed(u,a,l))}function oR(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var u=a.retryLane;a.retryLane=u!==0&&u<l?u:l}}function Dw(a,l){oR(a,l),(a=a.alternate)&&oR(a,l)}function lR(a){if(a.tag===13||a.tag===31){var l=el(a,67108864);l!==null&&Ri(l,a,67108864),Dw(a,67108864)}}function cR(a){if(a.tag===13||a.tag===31){var l=Ki();l=T1(l);var u=el(a,l);u!==null&&Ri(u,a,l),Dw(a,l)}}var Pm=!0;function R4(a,l,u,g){var x=$.T;$.T=null;var S=G.p;try{G.p=2,Nw(a,l,u,g)}finally{G.p=S,$.T=x}}function P4(a,l,u,g){var x=$.T;$.T=null;var S=G.p;try{G.p=8,Nw(a,l,u,g)}finally{G.p=S,$.T=x}}function Nw(a,l,u,g){if(Pm){var x=Ow(g);if(x===null)xw(a,l,g,Lm,u),uR(a,g);else if(D4(x,a,l,u,g))g.stopPropagation();else if(uR(a,g),l&4&&-1<L4.indexOf(a)){for(;x!==null;){var S=Pc(x);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var P=hs(S.pendingLanes);if(P!==0){var V=S;for(V.pendingLanes|=2,V.entangledLanes|=2;P;){var it=1<<31-Ot(P);V.entanglements[1]|=it,P&=~it}ir(S),(Te&6)===0&&(pm=It()+500,Ud(0))}}break;case 31:case 13:V=el(S,2),V!==null&&Ri(V,S,2),mm(),Dw(S,2)}if(S=Ow(g),S===null&&xw(a,l,g,Lm,u),S===x)break;x=S}x!==null&&g.stopPropagation()}else xw(a,l,g,null,u)}}function Ow(a){return a=j1(a),Iw(a)}var Lm=null;function Iw(a){if(Lm=null,a=Rc(a),a!==null){var l=r(a);if(l===null)a=null;else{var u=l.tag;if(u===13){if(a=o(l),a!==null)return a;a=null}else if(u===31){if(a=c(l),a!==null)return a;a=null}else if(u===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null)}}return Lm=a,null}function hR(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Et()){case zt:return 2;case Jt:return 8;case Ht:case we:return 32;case C:return 268435456;default:return 32}default:return 32}}var jw=!1,so=null,ro=null,ao=null,Yd=new Map,Xd=new Map,oo=[],L4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function uR(a,l){switch(a){case"focusin":case"focusout":so=null;break;case"dragenter":case"dragleave":ro=null;break;case"mouseover":case"mouseout":ao=null;break;case"pointerover":case"pointerout":Yd.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xd.delete(l.pointerId)}}function Kd(a,l,u,g,x,S){return a===null||a.nativeEvent!==S?(a={blockedOn:l,domEventName:u,eventSystemFlags:g,nativeEvent:S,targetContainers:[x]},l!==null&&(l=Pc(l),l!==null&&lR(l)),a):(a.eventSystemFlags|=g,l=a.targetContainers,x!==null&&l.indexOf(x)===-1&&l.push(x),a)}function D4(a,l,u,g,x){switch(l){case"focusin":return so=Kd(so,a,l,u,g,x),!0;case"dragenter":return ro=Kd(ro,a,l,u,g,x),!0;case"mouseover":return ao=Kd(ao,a,l,u,g,x),!0;case"pointerover":var S=x.pointerId;return Yd.set(S,Kd(Yd.get(S)||null,a,l,u,g,x)),!0;case"gotpointercapture":return S=x.pointerId,Xd.set(S,Kd(Xd.get(S)||null,a,l,u,g,x)),!0}return!1}function dR(a){var l=Rc(a.target);if(l!==null){var u=r(l);if(u!==null){if(l=u.tag,l===13){if(l=o(u),l!==null){a.blockedOn=l,CC(a.priority,function(){cR(u)});return}}else if(l===31){if(l=c(u),l!==null){a.blockedOn=l,CC(a.priority,function(){cR(u)});return}}else if(l===3&&u.stateNode.current.memoizedState.isDehydrated){a.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Dm(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var u=Ow(a.nativeEvent);if(u===null){u=a.nativeEvent;var g=new u.constructor(u.type,u);I1=g,u.target.dispatchEvent(g),I1=null}else return l=Pc(u),l!==null&&lR(l),a.blockedOn=u,!1;l.shift()}return!0}function fR(a,l,u){Dm(a)&&u.delete(l)}function N4(){jw=!1,so!==null&&Dm(so)&&(so=null),ro!==null&&Dm(ro)&&(ro=null),ao!==null&&Dm(ao)&&(ao=null),Yd.forEach(fR),Xd.forEach(fR)}function Nm(a,l){a.blockedOn===l&&(a.blockedOn=null,jw||(jw=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,N4)))}var Om=null;function pR(a){Om!==a&&(Om=a,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Om===a&&(Om=null);for(var l=0;l<a.length;l+=3){var u=a[l],g=a[l+1],x=a[l+2];if(typeof g!="function"){if(Iw(g||u)===null)continue;break}var S=Pc(u);S!==null&&(a.splice(l,3),l-=3,Ox(S,{pending:!0,data:x,method:u.method,action:g},g,x))}}))}function dh(a){function l(it){return Nm(it,a)}so!==null&&Nm(so,a),ro!==null&&Nm(ro,a),ao!==null&&Nm(ao,a),Yd.forEach(l),Xd.forEach(l);for(var u=0;u<oo.length;u++){var g=oo[u];g.blockedOn===a&&(g.blockedOn=null)}for(;0<oo.length&&(u=oo[0],u.blockedOn===null);)dR(u),u.blockedOn===null&&oo.shift();if(u=(a.ownerDocument||a).$$reactFormReplay,u!=null)for(g=0;g<u.length;g+=3){var x=u[g],S=u[g+1],P=x[_i]||null;if(typeof S=="function")P||pR(u);else if(P){var V=null;if(S&&S.hasAttribute("formAction")){if(x=S,P=S[_i]||null)V=P.formAction;else if(Iw(x)!==null)continue}else V=P.action;typeof V=="function"?u[g+1]=V:(u.splice(g,3),g-=3),pR(u)}}}function gR(){function a(S){S.canIntercept&&S.info==="react-transition"&&S.intercept({handler:function(){return new Promise(function(P){return x=P})},focusReset:"manual",scroll:"manual"})}function l(){x!==null&&(x(),x=null),g||setTimeout(u,20)}function u(){if(!g&&!navigation.transition){var S=navigation.currentEntry;S&&S.url!=null&&navigation.navigate(S.url,{state:S.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,x=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(u,100),function(){g=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),x!==null&&(x(),x=null)}}}function Bw(a){this._internalRoot=a}Im.prototype.render=Bw.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(n(409));var u=l.current,g=Ki();aR(u,g,a,l,null,null)},Im.prototype.unmount=Bw.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;aR(a.current,2,null,a,null,null),mm(),l[Mc]=null}};function Im(a){this._internalRoot=a}Im.prototype.unstable_scheduleHydration=function(a){if(a){var l=EC();a={blockedOn:null,target:a,priority:l};for(var u=0;u<oo.length&&l!==0&&l<oo[u].priority;u++);oo.splice(u,0,a),u===0&&dR(a)}};var mR=t.version;if(mR!=="19.2.4")throw Error(n(527,mR,"19.2.4"));G.findDOMNode=function(a){var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=d(l),a=a!==null?f(a):null,a=a===null?null:a.stateNode,a};var O4={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jm.isDisabled&&jm.supportsFiber)try{et=jm.inject(O4),dt=jm}catch{}}return Qd.createRoot=function(a,l){if(!i(a))throw Error(n(299));var u=!1,g="",x=ST,S=_T,P=ET;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(x=l.onUncaughtError),l.onCaughtError!==void 0&&(S=l.onCaughtError),l.onRecoverableError!==void 0&&(P=l.onRecoverableError)),l=sR(a,1,!1,null,null,u,g,null,x,S,P,gR),a[Mc]=l.current,bw(a),new Bw(l)},Qd.hydrateRoot=function(a,l,u){if(!i(a))throw Error(n(299));var g=!1,x="",S=ST,P=_T,V=ET,it=null;return u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(x=u.identifierPrefix),u.onUncaughtError!==void 0&&(S=u.onUncaughtError),u.onCaughtError!==void 0&&(P=u.onCaughtError),u.onRecoverableError!==void 0&&(V=u.onRecoverableError),u.formState!==void 0&&(it=u.formState)),l=sR(a,1,!0,l,u??null,g,x,it,S,P,V,gR),l.context=rR(null),u=l.current,g=Ki(),g=T1(g),x=$a(g),x.callback=null,qa(u,x,g),u=g,l.current.lanes=u,od(l,u),ir(l),a[Mc]=l.current,bw(a),new Im(l)},Qd.version="19.2.4",Qd}var TR;function V4(){if(TR)return Hw.exports;TR=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Hw.exports=G4(),Hw.exports}var $4=V4();const bD=(...s)=>s.filter((t,e,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===e).join(" ").trim();const q4=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const Y4=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,n)=>n?n.toUpperCase():e.toLowerCase());const MR=s=>{const t=Y4(s);return t.charAt(0).toUpperCase()+t.slice(1)};var X4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const K4=s=>{for(const t in s)if(t.startsWith("aria-")||t==="role"||t==="title")return!0;return!1};const Z4=at.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:n,className:i="",children:r,iconNode:o,...c},h)=>at.createElement("svg",{ref:h,...X4,width:t,height:t,stroke:s,strokeWidth:n?Number(e)*24/Number(t):e,className:bD("lucide",i),...!r&&!K4(c)&&{"aria-hidden":"true"},...c},[...o.map(([d,f])=>at.createElement(d,f)),...Array.isArray(r)?r:[r]]));const Me=(s,t)=>{const e=at.forwardRef(({className:n,...i},r)=>at.createElement(Z4,{ref:r,iconNode:t,className:bD(`lucide-${q4(MR(s))}`,`lucide-${s}`,n),...i}));return e.displayName=MR(s),e};const Q4=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],rs=Me("arrow-left",Q4);const J4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],xD=Me("arrow-right",J4);const tj=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],ej=Me("arrow-up-down",tj);const nj=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],ij=Me("camera",nj);const sj=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],wD=Me("chevron-down",sj);const rj=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],aj=Me("download",rj);const oj=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Ks=Me("ellipsis-vertical",oj);const lj=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],cj=Me("ellipsis",lj);const hj=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],uj=Me("file-text",hj);const dj=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],Fm=Me("file",dj);const fj=[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]],pj=Me("folder-kanban",fj);const gj=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],mj=Me("folder",gj);const yj=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Jd=Me("funnel",yj);const vj=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],bj=Me("grip-vertical",vj);const xj=[["path",{d:"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5",key:"1p9q5i"}],["path",{d:"M14 6a6 6 0 0 1 6 6v3",key:"1hnv84"}],["path",{d:"M4 15v-3a6 6 0 0 1 6-6",key:"9ciidu"}],["rect",{x:"2",y:"15",width:"20",height:"4",rx:"1",key:"g3x8cw"}]],wj=Me("hard-hat",xj);const Aj=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Sj=Me("history",Aj);const _j=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],Ej=Me("layout-grid",_j);const Cj=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ZA=Me("loader-circle",Cj);const kj=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],Tj=Me("megaphone",kj);const Mj=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],ho=Me("paperclip",Mj);const Rj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],AD=Me("plus",Rj);const Pj=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Eu=Me("search",Pj);const Lj=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Dj=Me("settings",Lj);const Nj=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],RR=Me("share-2",Nj);const Oj=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Ij=Me("shield-check",Oj);const jj=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Bj=Me("shopping-cart",jj);const Fj=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],zj=Me("star",Fj);const Uj=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],Hj=Me("truck",Uj);const Wj=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Gj=Me("upload",Wj);const Vj=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],$j=Me("user",Vj);const qj=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ov=Me("x",qj),$w=({title:s,hasMore:t,children:e,className:n})=>A.jsxs("div",{className:`section-container ${n||""}`,children:[A.jsxs("div",{className:"section-header",children:[A.jsx("h3",{children:s}),t&&A.jsx(cj,{size:20,className:"icon-more"})]}),A.jsx("div",{className:"section-body",children:e})]}),Yj=()=>A.jsx("button",{className:"add-kpi-btn",children:"Add KPI"}),Jr=({icon:s,title:t,desc:e,onClick:n,highlighted:i})=>A.jsxs("div",{className:"workspace-item",onClick:n,style:{cursor:n?"pointer":"default",backgroundColor:i?"#fee2e2":"transparent",borderRadius:i?"8px":"0",padding:i?"12px":"0",transition:"all 0.2s ease"},children:[A.jsx("div",{className:"workspace-icon",children:s}),A.jsxs("div",{className:"workspace-details",children:[A.jsx("h4",{style:{color:i?"#ef4444":"inherit",fontWeight:i?"600":"normal"},children:t}),A.jsx("p",{children:e})]})]}),Xj=({onNavigate:s,showApprovals:t,approvalsCount:e,isPurchasesEnabled:n})=>A.jsxs("div",{className:"dashboard-container",children:[A.jsx("div",{className:"sticky-header",children:A.jsx("h2",{className:"company-name",children:"QMAZ HOLDING INC"})}),A.jsx("div",{className:"sub-header",children:A.jsx("h2",{className:"company-name",children:"QMB EQUIPMENT"})}),A.jsxs("section",{className:"dashboard-content",children:[A.jsx("div",{className:"kpi-banner",children:A.jsx(Yj,{})}),A.jsx($w,{title:"Recently Visited",children:A.jsxs("div",{className:"horizontal-scroll",children:[A.jsxs("div",{className:"recent-card",children:[A.jsx("span",{className:"card-label",children:"Purchase Receipts"}),A.jsxs("p",{className:"card-title",children:["Return,PR00000",A.jsx("br",{}),"00004153"]})]}),A.jsxs("div",{className:"recent-card",children:[A.jsx("span",{className:"card-label",children:"Purchase Order"}),A.jsxs("p",{className:"card-title",children:["Normal,PO0000",A.jsx("br",{}),"000002718"]})]}),A.jsxs("div",{className:"recent-card",children:[A.jsx("span",{className:"card-label",children:"Expense Receipt"}),A.jsx("p",{className:"card-title",children:"N/A replenishmrnt"})]})]})}),A.jsx($w,{title:"Favorites",hasMore:!0,className:"favorites-section",children:A.jsxs("div",{className:"favorites-list",children:[A.jsx("div",{className:"favorite-item",children:"Expense Claims"}),t&&A.jsxs("div",{className:"favorite-item favorite-item-clickable",onClick:()=>s("approvals"),children:[A.jsx("span",{children:"Approvals"}),A.jsx("span",{className:"favorites-badge",children:e})]})]})}),A.jsx($w,{title:"Workspaces",hasMore:!0,children:A.jsxs("div",{className:"workspace-list",children:[A.jsx(Jr,{icon:A.jsx(Sj,{color:"#ef4444"}),title:"Time and Expenses",desc:"Expense Receipts, Expense Claims, Approvals, Events, Task, Employee, Time Cards, Equipment Time Cards"}),A.jsx(Jr,{icon:A.jsx(Tj,{color:"#ef4444"}),title:"CRM",desc:"Contacts, Sales Orders"}),A.jsx(Jr,{icon:A.jsx(pj,{color:"#ef4444"}),title:"Projects",desc:"Projects, Change Orders, Subcontracts, Progress Worksheets"}),A.jsx(Jr,{icon:A.jsx(wj,{color:"#ef4444"}),title:"Project Management",desc:"Daily Field Reports, Drawing Log, Submittals, Photo Logs, Requests For Information, Project Issues"}),A.jsx(Jr,{icon:A.jsx(uj,{color:"#ef4444"}),title:"Sales Orders",desc:"Sales Orders"}),A.jsx(Jr,{icon:A.jsx(Bj,{color:"#ef4444"}),title:"Purchases",desc:"Purchase Orders, Purchase Receipts, Request, Requisitions",onClick:n?()=>s("purchases"):void 0,highlighted:n}),A.jsx(Jr,{icon:A.jsx(Hj,{color:"#ef4444"}),title:"Inventory",desc:"Receipts, Issues, Storage Summary, Inventory Transaction History"}),A.jsx(Jr,{icon:A.jsx(Ij,{color:"#ef4444"}),title:"User Security",desc:"Location Tracking Distance"}),A.jsx(Jr,{icon:A.jsx(mj,{color:"#ef4444"}),title:"Other",desc:"Cash Transactions"})]})}),A.jsxs("div",{className:"edit-main-screen",children:[A.jsx(Dj,{className:"icon-settings"}),A.jsx("span",{children:"Edit Main Screen"})]})]})]}),Kj=({onNavigate:s,onEnableApprovals:t,onEnableBillApprovals:e,onEnablePrepaymentApprovals:n,onDisableBillApprovals:i,onDisablePrepaymentApprovals:r,onDisableApprovals:o,onEnablePurchases:c,onDisablePurchases:h,isApprovalsEnabled:d,isBillApprovalsEnabled:f,isPrepaymentApprovalsEnabled:p,isPurchasesEnabled:m})=>{const[y,w]=Ue.useState(null);return A.jsxs("div",{className:"dashboard-container",children:[A.jsx("div",{className:"sticky-header",children:A.jsx("h2",{className:"company-name",style:{textAlign:"center",fontSize:"18px"},children:"Functions"})}),A.jsx("div",{className:"dashboard-content",children:A.jsxs("div",{style:{padding:"16px 0",position:"relative"},children:[A.jsx("button",{className:"function-tab",type:"button",disabled:f||p,style:{opacity:f||p?.5:1,cursor:f||p?"not-allowed":"pointer"},onClick:()=>{!f&&!p&&w(y==="po"?null:"po")},children:"PO for approval"}),A.jsx("button",{className:"function-tab",type:"button",disabled:d||p,style:{marginTop:"8px",opacity:d||p?.5:1,cursor:d||p?"not-allowed":"pointer"},onClick:()=>{!d&&!p&&w(y==="bill"?null:"bill")},children:"Approval on bill"}),A.jsx("button",{className:"function-tab",type:"button",disabled:d||f,style:{marginTop:"8px",opacity:d||f?.5:1,cursor:d||f?"not-allowed":"pointer"},onClick:()=>{!d&&!f&&w(y==="prepayment"?null:"prepayment")},children:"Prepayment Approval"}),A.jsx("button",{className:"function-tab",type:"button",style:{marginTop:"8px",cursor:"pointer"},onClick:()=>{w(y==="purchases"?null:"purchases")},children:"Enabled Purchases for PO"}),y==="purchases"&&A.jsx("div",{style:{position:"absolute",top:"calc(100% + 138px)",left:0,right:0,zIndex:2e3,marginTop:"12px",animation:"fadeIn 0.2s ease-out"},children:A.jsx("div",{style:{backgroundColor:"#fff",borderRadius:"12px",padding:"16px",boxShadow:"0 4px 20px rgba(0,0,0,0.15)",border:"1px solid #e5e5e5"},children:m?A.jsxs(A.Fragment,{children:[A.jsx("p",{style:{fontSize:"14px",color:"#666",marginBottom:"16px",lineHeight:1.5},children:"Purchases is currently enabled. You can disable it to remove the highlighted workspace from your dashboard."}),A.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[A.jsx("button",{style:{width:"100%",padding:"10px",borderRadius:"8px",border:"none",backgroundColor:"#ef4444",color:"#fff",fontSize:"13px",fontWeight:600,cursor:"pointer"},onClick:()=>{h(),w(null)},children:"Disable"}),A.jsx("button",{style:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid #e5e5e5",backgroundColor:"#fff",color:"#666",fontSize:"13px",fontWeight:600,cursor:"pointer"},onClick:()=>w(null),children:"Close"})]})]}):A.jsxs(A.Fragment,{children:[A.jsx("p",{style:{fontSize:"14px",color:"#666",marginBottom:"16px",lineHeight:1.5},children:"Enable Purchases to access Purchase Orders, Purchase Receipts, Requests, and Requisitions from the Dashboard."}),A.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[A.jsx("button",{style:{width:"100%",padding:"10px",borderRadius:"8px",border:"none",backgroundColor:"#10b981",color:"#fff",fontSize:"13px",fontWeight:600,cursor:"pointer"},onClick:()=>{c(),w(null),s("dashboard")},children:"Enable"}),A.jsx("button",{style:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid #e5e5e5",backgroundColor:"#fff",color:"#666",fontSize:"13px",fontWeight:600,cursor:"pointer"},onClick:()=>w(null),children:"Cancel"})]})]})})}),y==="prepayment"&&A.jsx("div",{style:{position:"absolute",top:"calc(100% + 92px)",left:0,right:0,zIndex:2e3,marginTop:"12px",animation:"fadeIn 0.2s ease-out"},children:A.jsx("div",{style:{backgroundColor:"#fff",borderRadius:"12px",padding:"16px",boxShadow:"0 4px 20px rgba(0,0,0,0.15)",border:"1px solid #e5e5e5"},children:p?A.jsxs(A.Fragment,{children:[A.jsx("p",{style:{fontSize:"14px",color:"#666",marginBottom:"16px",lineHeight:1.5},children:"Prepayment Approval simulation is currently active. You can stop it to remove the approval from your dashboard."}),A.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[A.jsx("button",{style:{width:"100%",padding:"10px",borderRadius:"8px",border:"none",backgroundColor:"#ef4444",color:"#fff",fontSize:"13px",fontWeight:600,cursor:"pointer"},onClick:()=>{r(),w(null)},children:"Stop Simulation"}),A.jsx("button",{style:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid #e5e5e5",backgroundColor:"#fff",color:"#666",fontSize:"13px",fontWeight:600,cursor:"pointer"},onClick:()=>w(null),children:"Close"})]})]}):A.jsxs(A.Fragment,{children:[A.jsx("p",{style:{fontSize:"14px",color:"#666",marginBottom:"16px",lineHeight:1.5},children:"Enable Prepayment Approval simulation to test the approval workflow in the mobile interface."}),A.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[A.jsx("button",{style:{width:"100%",padding:"10px",borderRadius:"8px",border:"none",backgroundColor:"#10b981",color:"#fff",fontSize:"13px",fontWeight:600,cursor:"pointer"},onClick:()=>{n(),w(null)},children:"Start Simulation"}),A.jsx("button",{style:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid #e5e5e5",backgroundColor:"#fff",color:"#666",fontSize:"13px",fontWeight:600,cursor:"pointer"},onClick:()=>w(null),children:"Close"})]})]})})}),y==="bill"&&A.jsx("div",{style:{position:"absolute",top:"calc(100% + 46px)",left:0,right:0,zIndex:2e3,marginTop:"12px",animation:"fadeIn 0.2s ease-out"},children:A.jsx("div",{style:{backgroundColor:"#fff",borderRadius:"12px",padding:"16px",boxShadow:"0 4px 20px rgba(0,0,0,0.15)",border:"1px solid #e5e5e5"},children:f?A.jsxs(A.Fragment,{children:[A.jsx("p",{style:{fontSize:"14px",color:"#666",marginBottom:"16px",lineHeight:1.5},children:"Bill Approval simulation is currently active. You can stop it to remove the approval from your dashboard."}),A.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[A.jsx("button",{style:{width:"100%",padding:"10px",borderRadius:"8px",border:"none",backgroundColor:"#ef4444",color:"#fff",fontSize:"13px",fontWeight:600,cursor:"pointer"},onClick:()=>{i(),w(null)},children:"Stop Simulation"}),A.jsx("button",{style:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid #e5e5e5",backgroundColor:"#fff",color:"#666",fontSize:"13px",fontWeight:600,cursor:"pointer"},onClick:()=>w(null),children:"Close"})]})]}):A.jsxs(A.Fragment,{children:[A.jsx("p",{style:{fontSize:"14px",color:"#666",marginBottom:"16px",lineHeight:1.5},children:"Enable Bill Approval simulation to test the approval workflow in the mobile interface."}),A.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[A.jsx("button",{style:{width:"100%",padding:"10px",borderRadius:"8px",border:"none",backgroundColor:"#10b981",color:"#fff",fontSize:"13px",fontWeight:600,cursor:"pointer"},onClick:()=>{e(),w(null),s("dashboard")},children:"Start Simulation"}),A.jsx("button",{style:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid #e5e5e5",backgroundColor:"#fff",color:"#666",fontSize:"13px",fontWeight:600,cursor:"pointer"},onClick:()=>w(null),children:"Close"})]})]})})}),y==="po"&&A.jsx("div",{style:{position:"absolute",top:"calc(100% - 10px)",left:0,right:0,zIndex:2e3,marginTop:"12px",animation:"fadeIn 0.2s ease-out"},children:A.jsx("div",{style:{backgroundColor:"#fff",borderRadius:"12px",padding:"16px",boxShadow:"0 4px 20px rgba(0,0,0,0.15)",border:"1px solid #e5e5e5"},children:d?A.jsxs(A.Fragment,{children:[A.jsx("p",{style:{fontSize:"14px",color:"#666",marginBottom:"16px",lineHeight:1.5},children:"PO Approval simulation is currently active. You can stop it to remove the approval from your dashboard."}),A.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[A.jsx("button",{style:{width:"100%",padding:"10px",borderRadius:"8px",border:"none",backgroundColor:"#ef4444",color:"#fff",fontSize:"13px",fontWeight:600,cursor:"pointer"},onClick:()=>{o(),w(null)},children:"Stop Simulation"}),A.jsx("button",{style:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid #e5e5e5",backgroundColor:"#fff",color:"#666",fontSize:"13px",fontWeight:600,cursor:"pointer"},onClick:()=>w(null),children:"Close"})]})]}):A.jsxs(A.Fragment,{children:[A.jsx("p",{style:{fontSize:"14px",color:"#666",marginBottom:"16px",lineHeight:1.5},children:"Enable PO Approval simulation to test the approval workflow in the mobile interface."}),A.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[A.jsx("button",{style:{width:"100%",padding:"10px",borderRadius:"8px",border:"none",backgroundColor:"#10b981",color:"#fff",fontSize:"13px",fontWeight:600,cursor:"pointer"},onClick:()=>{t(),w(null),s("dashboard")},children:"Start Simulation"}),A.jsx("button",{style:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid #e5e5e5",backgroundColor:"#fff",color:"#666",fontSize:"13px",fontWeight:600,cursor:"pointer"},onClick:()=>w(null),children:"Close"})]})]})})})]})})]})},Zj=({onBack:s,onDetails:t,onNavigateToPO:e,poStatus:n,billStatus:i,prepaymentStatus:r="pending",approvalType:o})=>{const[c,h]=Ue.useState("my"),d=o==="bill"?i==="pending"?[LR]:[]:o==="prepayment"?r==="pending"?[DR]:[]:n==="pending"?[PR]:[],f=o==="po"&&n==="approved"?[PR]:o==="bill"&&i==="approved"?[{...LR}]:o==="prepayment"&&r==="approved"?[DR]:[],m={all:d,my:d,workgroup:[],reassigned:[],history:f}[c];return A.jsxs("div",{className:"dashboard-container",style:{backgroundColor:"#fff",minHeight:"100vh"},children:[A.jsxs("header",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",borderBottom:"1px solid #f0f0f0"},children:[A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[A.jsx(rs,{size:24,color:"#1a1a1a",onClick:s,style:{cursor:"pointer"}}),A.jsx("h2",{style:{fontSize:"18px",fontWeight:600,color:"#1a1a1a"},children:"Approvals"})]}),A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[A.jsx(Eu,{size:22,color:"#1a1a1a"}),A.jsx(Ks,{size:22,color:"#1a1a1a"})]})]}),A.jsxs("div",{style:{display:"flex",gap:"8px",padding:"12px 16px",overflowX:"auto",borderBottom:"1px solid #f0f0f0",scrollbarWidth:"none",msOverflowStyle:"none"},children:[A.jsxs("button",{style:c==="all"?tf:Ah,onClick:()=>h("all"),children:[A.jsx(Jd,{size:14,style:{marginRight:"4px"}})," All"]}),A.jsxs("button",{style:c==="my"?tf:Ah,onClick:()=>h("my"),children:[A.jsx(Jd,{size:14,style:{marginRight:"4px"}})," My Approvals"]}),A.jsxs("button",{style:c==="workgroup"?tf:Ah,onClick:()=>h("workgroup"),children:[A.jsx(Jd,{size:14,style:{marginRight:"4px"}})," My Workgroup's Approvals"]}),A.jsxs("button",{style:c==="reassigned"?tf:Ah,onClick:()=>h("reassigned"),children:[A.jsx(Jd,{size:14,style:{marginRight:"4px"}})," Reassigned"]}),A.jsxs("button",{style:c==="history"?tf:Ah,onClick:()=>h("history"),children:[A.jsx(Jd,{size:14,style:{marginRight:"4px"}})," Approval History"]})]}),A.jsxs("div",{style:{padding:"12px 16px",fontSize:"12px",color:"#888",display:"flex",alignItems:"center",borderBottom:"1px solid #f0f0f0"},children:["Document Date ",A.jsx(bj,{size:12,style:{marginLeft:"4px"}})]}),A.jsx("div",{className:"approval-list",children:m.length>0?m.map(y=>A.jsx("div",{className:"approval-item",onClick:()=>{y.type==="po"&&t({fromHistory:c==="history",recordType:"po"}),y.type==="bill"&&t({fromHistory:c==="history",recordType:"bill"}),y.type==="prepayment"&&t({fromHistory:c==="history",recordType:"prepayment"})},style:{padding:"16px",borderBottom:"1px solid #f0f0f0",cursor:"pointer",backgroundColor:y.type==="bill"?"#f3f4f6":"#fff"},children:y.type==="prepayment"?A.jsxs("div",{children:[A.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[A.jsx("h4",{style:{fontSize:"15px",fontWeight:600},children:"Prepayment"}),A.jsx("span",{style:{fontSize:"13px",color:"#666"},children:y.recordNumber})]}),A.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[A.jsx("span",{style:{fontSize:"13px",color:"#111",fontWeight:700},children:"PO Number"}),A.jsx("span",{style:{fontSize:"13px",color:"#2563eb",textDecoration:"underline",cursor:"pointer"},onClick:w=>{w.stopPropagation(),e?.()},children:y.purchaseOrderNumber})]}),A.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[A.jsx("span",{style:{fontSize:"13px",color:"#666"},children:y.documentDate}),A.jsx("span",{style:{fontSize:"13px",color:"#666"},children:y.vendor})]}),A.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[A.jsx("span",{style:{fontSize:"13px",color:"#666"},children:y.description}),A.jsx("span",{style:{fontSize:"13px",color:"#666"},children:y.vendorId})]}),A.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[A.jsx("span",{}),A.jsx("span",{style:{fontSize:"15px",fontWeight:500,color:"#555"},children:y.amount})]}),A.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[c!=="history"?A.jsx("span",{style:{fontSize:"12px",color:"#dc2626",fontWeight:700},children:"Pending for Approval: Allan Quirante"}):A.jsx("span",{style:{fontSize:"12px",color:"#059669",fontWeight:700},children:"Approved by: Allan Quirante"}),A.jsx("span",{style:{fontSize:"12px",color:"#888"},children:y.currency})]})]}):y.type==="bill"?A.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"14px",padding:"14px"},children:[A.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px"},children:[A.jsx("h4",{style:{fontSize:"15px",fontWeight:600},children:"Bill"}),A.jsx("span",{style:{fontSize:"13px",color:"#666"},children:y.recordNumber})]}),A.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px"},children:[A.jsx("span",{style:{fontSize:"13px",color:"#111",fontWeight:700},children:"Purchase Order"}),A.jsx("span",{style:{fontSize:"13px",color:"#2563eb",textDecoration:"underline",cursor:"pointer"},onClick:w=>{w.stopPropagation(),e?.()},children:y.purchaseOrderNumber})]}),A.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px"},children:[A.jsx("span",{style:{fontSize:"13px",color:"#666"},children:y.documentDate}),A.jsx("span",{style:{fontSize:"13px",color:"#666",textAlign:"right"},children:y.vendor})]}),A.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px"},children:[A.jsx("span",{style:{fontSize:"13px",color:"#666"},children:y.description}),A.jsx("span",{style:{fontSize:"13px",color:"#666"},children:y.vendorId})]}),A.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px"},children:[A.jsx("span",{}),A.jsx("span",{style:{fontSize:"15px",fontWeight:500,color:"#555"},children:y.amount})]}),A.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[A.jsx("span",{style:{fontSize:"12px",color:c==="history"?"#059669":"#dc2626",fontWeight:700},children:c==="history"?"Approved by: Allan Quirante":"Pending for Approval: Allan Quirante"}),A.jsx("span",{style:{fontSize:"12px",color:"#888"},children:y.currency})]})]}):A.jsxs("div",{children:[A.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[A.jsx("h4",{style:{fontSize:"15px",fontWeight:600},children:"Purchase Order"}),A.jsx("span",{style:{fontSize:"13px",color:"#666"},children:y.recordNumber})]}),A.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[A.jsx("span",{style:{fontSize:"13px",color:"#666"},children:y.documentDate}),A.jsx("span",{style:{fontSize:"13px",color:"#666"},children:y.vendor})]}),A.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[A.jsxs("div",{style:{maxWidth:"60%"},children:[A.jsx("p",{style:{fontSize:"13px",color:"#666"},children:y.description}),c!=="history"?A.jsx("span",{style:{fontSize:"12px",color:"#dc2626",fontWeight:700},children:"Pending for Approval: Allan Quirante"}):A.jsx("span",{style:{fontSize:"12px",color:"#059669",fontWeight:700},children:"Approved by: Allan Quirante"})]}),A.jsxs("div",{style:{textAlign:"right"},children:[A.jsx("span",{style:{fontSize:"13px",color:"#666",display:"block"},children:y.vendorId}),A.jsx("span",{style:{fontSize:"15px",fontWeight:500,marginTop:"4px",display:"block",color:"#555"},children:y.amount}),A.jsx("span",{style:{fontSize:"12px",fontWeight:400,color:"#888"},children:y.currency})]})]})]})},y.recordNumber)):A.jsx("div",{style:{padding:"28px 16px",color:"#888",fontSize:"13px",textAlign:"center"},children:"No records in this tab."})})]})},Ah={padding:"8px 12px",borderRadius:"16px",border:"1px solid #e5e5e5",backgroundColor:"#fff",fontSize:"13px",color:"#666",whiteSpace:"nowrap",display:"flex",alignItems:"center"},tf={...Ah,backgroundColor:"#dbeafe",color:"#1da1f2",border:"none"},PR={type:"po",recordNumber:"PO00000000008829",documentDate:"Feb 3, 2026",vendor:"TRUSALES CORPORATION",description:"for approval purpose to test in mobile ui",vendorId:"S00000000000740",amount:"5,980.00",currency:"PHP"},LR={type:"bill",recordNumber:"AP0000000020285",purchaseOrderNumber:"PO0000000008830",documentDate:"Feb 10, 2026",vendor:"CEBU SEALTRUST AUTO SUPPLY",description:"test",vendorId:"S0000000000023",amount:"535.72",currency:"PHP"},DR={type:"prepayment",recordNumber:"AP0000000020286",purchaseOrderNumber:"PO00000000008831",documentDate:"Feb 11, 2026",vendor:"TRUSALES CORPORATION",description:"test approval",vendorId:"S0000000000740",amount:"105,000.00",currency:"PHP"};function zm(s){throw new Error('Could not dynamically require "'+s+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var qw={exports:{}};var NR;function Qj(){return NR||(NR=1,(function(s,t){(function(e){s.exports=e()})(function(){return(function e(n,i,r){function o(d,f){if(!i[d]){if(!n[d]){var p=typeof zm=="function"&&zm;if(!f&&p)return p(d,!0);if(c)return c(d,!0);var m=new Error("Cannot find module '"+d+"'");throw m.code="MODULE_NOT_FOUND",m}var y=i[d]={exports:{}};n[d][0].call(y.exports,function(w){var b=n[d][1][w];return o(b||w)},y,y.exports,e,n,i,r)}return i[d].exports}for(var c=typeof zm=="function"&&zm,h=0;h<r.length;h++)o(r[h]);return o})({1:[function(e,n,i){var r=e("./utils"),o=e("./support"),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(h){for(var d,f,p,m,y,w,b,E=[],_=0,k=h.length,T=k,R=r.getTypeOf(h)!=="string";_<h.length;)T=k-_,p=R?(d=h[_++],f=_<k?h[_++]:0,_<k?h[_++]:0):(d=h.charCodeAt(_++),f=_<k?h.charCodeAt(_++):0,_<k?h.charCodeAt(_++):0),m=d>>2,y=(3&d)<<4|f>>4,w=1<T?(15&f)<<2|p>>6:64,b=2<T?63&p:64,E.push(c.charAt(m)+c.charAt(y)+c.charAt(w)+c.charAt(b));return E.join("")},i.decode=function(h){var d,f,p,m,y,w,b=0,E=0,_="data:";if(h.substr(0,_.length)===_)throw new Error("Invalid base64 input, it looks like a data url.");var k,T=3*(h=h.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(h.charAt(h.length-1)===c.charAt(64)&&T--,h.charAt(h.length-2)===c.charAt(64)&&T--,T%1!=0)throw new Error("Invalid base64 input, bad content length.");for(k=o.uint8array?new Uint8Array(0|T):new Array(0|T);b<h.length;)d=c.indexOf(h.charAt(b++))<<2|(m=c.indexOf(h.charAt(b++)))>>4,f=(15&m)<<4|(y=c.indexOf(h.charAt(b++)))>>2,p=(3&y)<<6|(w=c.indexOf(h.charAt(b++))),k[E++]=d,y!==64&&(k[E++]=f),w!==64&&(k[E++]=p);return k}},{"./support":30,"./utils":32}],2:[function(e,n,i){var r=e("./external"),o=e("./stream/DataWorker"),c=e("./stream/Crc32Probe"),h=e("./stream/DataLengthProbe");function d(f,p,m,y,w){this.compressedSize=f,this.uncompressedSize=p,this.crc32=m,this.compression=y,this.compressedContent=w}d.prototype={getContentWorker:function(){var f=new o(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new h("data_length")),p=this;return f.on("end",function(){if(this.streamInfo.data_length!==p.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),f},getCompressedWorker:function(){return new o(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},d.createWorkerFrom=function(f,p,m){return f.pipe(new c).pipe(new h("uncompressedSize")).pipe(p.compressWorker(m)).pipe(new h("compressedSize")).withStreamInfo("compression",p)},n.exports=d},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,n,i){var r=e("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},i.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,n,i){var r=e("./utils"),o=(function(){for(var c,h=[],d=0;d<256;d++){c=d;for(var f=0;f<8;f++)c=1&c?3988292384^c>>>1:c>>>1;h[d]=c}return h})();n.exports=function(c,h){return c!==void 0&&c.length?r.getTypeOf(c)!=="string"?(function(d,f,p,m){var y=o,w=m+p;d^=-1;for(var b=m;b<w;b++)d=d>>>8^y[255&(d^f[b])];return-1^d})(0|h,c,c.length,0):(function(d,f,p,m){var y=o,w=m+p;d^=-1;for(var b=m;b<w;b++)d=d>>>8^y[255&(d^f.charCodeAt(b))];return-1^d})(0|h,c,c.length,0):0}},{"./utils":32}],5:[function(e,n,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(e,n,i){var r=null;r=typeof Promise<"u"?Promise:e("lie"),n.exports={Promise:r}},{lie:37}],7:[function(e,n,i){var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=e("pako"),c=e("./utils"),h=e("./stream/GenericWorker"),d=r?"uint8array":"array";function f(p,m){h.call(this,"FlateWorker/"+p),this._pako=null,this._pakoAction=p,this._pakoOptions=m,this.meta={}}i.magic="\b\0",c.inherits(f,h),f.prototype.processChunk=function(p){this.meta=p.meta,this._pako===null&&this._createPako(),this._pako.push(c.transformTo(d,p.data),!1)},f.prototype.flush=function(){h.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},f.prototype.cleanUp=function(){h.prototype.cleanUp.call(this),this._pako=null},f.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var p=this;this._pako.onData=function(m){p.push({data:m,meta:p.meta})}},i.compressWorker=function(p){return new f("Deflate",p)},i.uncompressWorker=function(){return new f("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,n,i){function r(y,w){var b,E="";for(b=0;b<w;b++)E+=String.fromCharCode(255&y),y>>>=8;return E}function o(y,w,b,E,_,k){var T,R,D=y.file,F=y.compression,j=k!==d.utf8encode,I=c.transformTo("string",k(D.name)),O=c.transformTo("string",d.utf8encode(D.name)),X=D.comment,Q=c.transformTo("string",k(X)),H=c.transformTo("string",d.utf8encode(X)),J=O.length!==D.name.length,N=H.length!==X.length,tt="",$="",G="",gt=D.dir,nt=D.date,Tt={crc32:0,compressedSize:0,uncompressedSize:0};w&&!b||(Tt.crc32=y.crc32,Tt.compressedSize=y.compressedSize,Tt.uncompressedSize=y.uncompressedSize);var U=0;w&&(U|=8),j||!J&&!N||(U|=2048);var W=0,st=0;gt&&(W|=16),_==="UNIX"?(st=798,W|=(function(ut,Rt){var St=ut;return ut||(St=Rt?16893:33204),(65535&St)<<16})(D.unixPermissions,gt)):(st=20,W|=(function(ut){return 63&(ut||0)})(D.dosPermissions)),T=nt.getUTCHours(),T<<=6,T|=nt.getUTCMinutes(),T<<=5,T|=nt.getUTCSeconds()/2,R=nt.getUTCFullYear()-1980,R<<=4,R|=nt.getUTCMonth()+1,R<<=5,R|=nt.getUTCDate(),J&&($=r(1,1)+r(f(I),4)+O,tt+="up"+r($.length,2)+$),N&&(G=r(1,1)+r(f(Q),4)+H,tt+="uc"+r(G.length,2)+G);var lt="";return lt+=`
\0`,lt+=r(U,2),lt+=F.magic,lt+=r(T,2),lt+=r(R,2),lt+=r(Tt.crc32,4),lt+=r(Tt.compressedSize,4),lt+=r(Tt.uncompressedSize,4),lt+=r(I.length,2),lt+=r(tt.length,2),{fileRecord:p.LOCAL_FILE_HEADER+lt+I+tt,dirRecord:p.CENTRAL_FILE_HEADER+r(st,2)+lt+r(Q.length,2)+"\0\0\0\0"+r(W,4)+r(E,4)+I+tt+Q}}var c=e("../utils"),h=e("../stream/GenericWorker"),d=e("../utf8"),f=e("../crc32"),p=e("../signature");function m(y,w,b,E){h.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=w,this.zipPlatform=b,this.encodeFileName=E,this.streamFiles=y,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}c.inherits(m,h),m.prototype.push=function(y){var w=y.meta.percent||0,b=this.entriesCount,E=this._sources.length;this.accumulate?this.contentBuffer.push(y):(this.bytesWritten+=y.data.length,h.prototype.push.call(this,{data:y.data,meta:{currentFile:this.currentFile,percent:b?(w+100*(b-E-1))/b:100}}))},m.prototype.openedSource=function(y){this.currentSourceOffset=this.bytesWritten,this.currentFile=y.file.name;var w=this.streamFiles&&!y.file.dir;if(w){var b=o(y,w,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:b.fileRecord,meta:{percent:0}})}else this.accumulate=!0},m.prototype.closedSource=function(y){this.accumulate=!1;var w=this.streamFiles&&!y.file.dir,b=o(y,w,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(b.dirRecord),w)this.push({data:(function(E){return p.DATA_DESCRIPTOR+r(E.crc32,4)+r(E.compressedSize,4)+r(E.uncompressedSize,4)})(y),meta:{percent:100}});else for(this.push({data:b.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},m.prototype.flush=function(){for(var y=this.bytesWritten,w=0;w<this.dirRecords.length;w++)this.push({data:this.dirRecords[w],meta:{percent:100}});var b=this.bytesWritten-y,E=(function(_,k,T,R,D){var F=c.transformTo("string",D(R));return p.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(_,2)+r(_,2)+r(k,4)+r(T,4)+r(F.length,2)+F})(this.dirRecords.length,b,y,this.zipComment,this.encodeFileName);this.push({data:E,meta:{percent:100}})},m.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},m.prototype.registerPrevious=function(y){this._sources.push(y);var w=this;return y.on("data",function(b){w.processChunk(b)}),y.on("end",function(){w.closedSource(w.previous.streamInfo),w._sources.length?w.prepareNextSource():w.end()}),y.on("error",function(b){w.error(b)}),this},m.prototype.resume=function(){return!!h.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},m.prototype.error=function(y){var w=this._sources;if(!h.prototype.error.call(this,y))return!1;for(var b=0;b<w.length;b++)try{w[b].error(y)}catch{}return!0},m.prototype.lock=function(){h.prototype.lock.call(this);for(var y=this._sources,w=0;w<y.length;w++)y[w].lock()},n.exports=m},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,n,i){var r=e("../compressions"),o=e("./ZipFileWorker");i.generateWorker=function(c,h,d){var f=new o(h.streamFiles,d,h.platform,h.encodeFileName),p=0;try{c.forEach(function(m,y){p++;var w=(function(k,T){var R=k||T,D=r[R];if(!D)throw new Error(R+" is not a valid compression method !");return D})(y.options.compression,h.compression),b=y.options.compressionOptions||h.compressionOptions||{},E=y.dir,_=y.date;y._compressWorker(w,b).withStreamInfo("file",{name:m,dir:E,date:_,comment:y.comment||"",unixPermissions:y.unixPermissions,dosPermissions:y.dosPermissions}).pipe(f)}),f.entriesCount=p}catch(m){f.error(m)}return f}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,n,i){function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new r;for(var c in this)typeof this[c]!="function"&&(o[c]=this[c]);return o}}(r.prototype=e("./object")).loadAsync=e("./load"),r.support=e("./support"),r.defaults=e("./defaults"),r.version="3.10.1",r.loadAsync=function(o,c){return new r().loadAsync(o,c)},r.external=e("./external"),n.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,n,i){var r=e("./utils"),o=e("./external"),c=e("./utf8"),h=e("./zipEntries"),d=e("./stream/Crc32Probe"),f=e("./nodejsUtils");function p(m){return new o.Promise(function(y,w){var b=m.decompressed.getContentWorker().pipe(new d);b.on("error",function(E){w(E)}).on("end",function(){b.streamInfo.crc32!==m.decompressed.crc32?w(new Error("Corrupted zip : CRC32 mismatch")):y()}).resume()})}n.exports=function(m,y){var w=this;return y=r.extend(y||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:c.utf8decode}),f.isNode&&f.isStream(m)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",m,!0,y.optimizedBinaryString,y.base64).then(function(b){var E=new h(y);return E.load(b),E}).then(function(b){var E=[o.Promise.resolve(b)],_=b.files;if(y.checkCRC32)for(var k=0;k<_.length;k++)E.push(p(_[k]));return o.Promise.all(E)}).then(function(b){for(var E=b.shift(),_=E.files,k=0;k<_.length;k++){var T=_[k],R=T.fileNameStr,D=r.resolve(T.fileNameStr);w.file(D,T.decompressed,{binary:!0,optimizedBinaryString:!0,date:T.date,dir:T.dir,comment:T.fileCommentStr.length?T.fileCommentStr:null,unixPermissions:T.unixPermissions,dosPermissions:T.dosPermissions,createFolders:y.createFolders}),T.dir||(w.file(D).unsafeOriginalName=R)}return E.zipComment.length&&(w.comment=E.zipComment),w})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,n,i){var r=e("../utils"),o=e("../stream/GenericWorker");function c(h,d){o.call(this,"Nodejs stream input adapter for "+h),this._upstreamEnded=!1,this._bindStream(d)}r.inherits(c,o),c.prototype._bindStream=function(h){var d=this;(this._stream=h).pause(),h.on("data",function(f){d.push({data:f,meta:{percent:0}})}).on("error",function(f){d.isPaused?this.generatedError=f:d.error(f)}).on("end",function(){d.isPaused?d._upstreamEnded=!0:d.end()})},c.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},c.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=c},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,n,i){var r=e("readable-stream").Readable;function o(c,h,d){r.call(this,h),this._helper=c;var f=this;c.on("data",function(p,m){f.push(p)||f._helper.pause(),d&&d(m)}).on("error",function(p){f.emit("error",p)}).on("end",function(){f.push(null)})}e("../utils").inherits(o,r),o.prototype._read=function(){this._helper.resume()},n.exports=o},{"../utils":32,"readable-stream":16}],14:[function(e,n,i){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(r,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(r,o);if(typeof r=="number")throw new Error('The "data" argument must not be a number');return new Buffer(r,o)},allocBuffer:function(r){if(Buffer.alloc)return Buffer.alloc(r);var o=new Buffer(r);return o.fill(0),o},isBuffer:function(r){return Buffer.isBuffer(r)},isStream:function(r){return r&&typeof r.on=="function"&&typeof r.pause=="function"&&typeof r.resume=="function"}}},{}],15:[function(e,n,i){function r(D,F,j){var I,O=c.getTypeOf(F),X=c.extend(j||{},f);X.date=X.date||new Date,X.compression!==null&&(X.compression=X.compression.toUpperCase()),typeof X.unixPermissions=="string"&&(X.unixPermissions=parseInt(X.unixPermissions,8)),X.unixPermissions&&16384&X.unixPermissions&&(X.dir=!0),X.dosPermissions&&16&X.dosPermissions&&(X.dir=!0),X.dir&&(D=_(D)),X.createFolders&&(I=E(D))&&k.call(this,I,!0);var Q=O==="string"&&X.binary===!1&&X.base64===!1;j&&j.binary!==void 0||(X.binary=!Q),(F instanceof p&&F.uncompressedSize===0||X.dir||!F||F.length===0)&&(X.base64=!1,X.binary=!0,F="",X.compression="STORE",O="string");var H=null;H=F instanceof p||F instanceof h?F:w.isNode&&w.isStream(F)?new b(D,F):c.prepareContent(D,F,X.binary,X.optimizedBinaryString,X.base64);var J=new m(D,H,X);this.files[D]=J}var o=e("./utf8"),c=e("./utils"),h=e("./stream/GenericWorker"),d=e("./stream/StreamHelper"),f=e("./defaults"),p=e("./compressedObject"),m=e("./zipObject"),y=e("./generate"),w=e("./nodejsUtils"),b=e("./nodejs/NodejsStreamInputAdapter"),E=function(D){D.slice(-1)==="/"&&(D=D.substring(0,D.length-1));var F=D.lastIndexOf("/");return 0<F?D.substring(0,F):""},_=function(D){return D.slice(-1)!=="/"&&(D+="/"),D},k=function(D,F){return F=F!==void 0?F:f.createFolders,D=_(D),this.files[D]||r.call(this,D,null,{dir:!0,createFolders:F}),this.files[D]};function T(D){return Object.prototype.toString.call(D)==="[object RegExp]"}var R={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(D){var F,j,I;for(F in this.files)I=this.files[F],(j=F.slice(this.root.length,F.length))&&F.slice(0,this.root.length)===this.root&&D(j,I)},filter:function(D){var F=[];return this.forEach(function(j,I){D(j,I)&&F.push(I)}),F},file:function(D,F,j){if(arguments.length!==1)return D=this.root+D,r.call(this,D,F,j),this;if(T(D)){var I=D;return this.filter(function(X,Q){return!Q.dir&&I.test(X)})}var O=this.files[this.root+D];return O&&!O.dir?O:null},folder:function(D){if(!D)return this;if(T(D))return this.filter(function(O,X){return X.dir&&D.test(O)});var F=this.root+D,j=k.call(this,F),I=this.clone();return I.root=j.name,I},remove:function(D){D=this.root+D;var F=this.files[D];if(F||(D.slice(-1)!=="/"&&(D+="/"),F=this.files[D]),F&&!F.dir)delete this.files[D];else for(var j=this.filter(function(O,X){return X.name.slice(0,D.length)===D}),I=0;I<j.length;I++)delete this.files[j[I].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(D){var F,j={};try{if((j=c.extend(D||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=j.type.toLowerCase(),j.compression=j.compression.toUpperCase(),j.type==="binarystring"&&(j.type="string"),!j.type)throw new Error("No output type specified.");c.checkSupport(j.type),j.platform!=="darwin"&&j.platform!=="freebsd"&&j.platform!=="linux"&&j.platform!=="sunos"||(j.platform="UNIX"),j.platform==="win32"&&(j.platform="DOS");var I=j.comment||this.comment||"";F=y.generateWorker(this,j,I)}catch(O){(F=new h("error")).error(O)}return new d(F,j.type||"string",j.mimeType)},generateAsync:function(D,F){return this.generateInternalStream(D).accumulate(F)},generateNodeStream:function(D,F){return(D=D||{}).type||(D.type="nodebuffer"),this.generateInternalStream(D).toNodejsStream(F)}};n.exports=R},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,n,i){n.exports=e("stream")},{stream:void 0}],17:[function(e,n,i){var r=e("./DataReader");function o(c){r.call(this,c);for(var h=0;h<this.data.length;h++)c[h]=255&c[h]}e("../utils").inherits(o,r),o.prototype.byteAt=function(c){return this.data[this.zero+c]},o.prototype.lastIndexOfSignature=function(c){for(var h=c.charCodeAt(0),d=c.charCodeAt(1),f=c.charCodeAt(2),p=c.charCodeAt(3),m=this.length-4;0<=m;--m)if(this.data[m]===h&&this.data[m+1]===d&&this.data[m+2]===f&&this.data[m+3]===p)return m-this.zero;return-1},o.prototype.readAndCheckSignature=function(c){var h=c.charCodeAt(0),d=c.charCodeAt(1),f=c.charCodeAt(2),p=c.charCodeAt(3),m=this.readData(4);return h===m[0]&&d===m[1]&&f===m[2]&&p===m[3]},o.prototype.readData=function(c){if(this.checkOffset(c),c===0)return[];var h=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,h},n.exports=o},{"../utils":32,"./DataReader":18}],18:[function(e,n,i){var r=e("../utils");function o(c){this.data=c,this.length=c.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(c){this.checkIndex(this.index+c)},checkIndex:function(c){if(this.length<this.zero+c||c<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+c+"). Corrupted zip ?")},setIndex:function(c){this.checkIndex(c),this.index=c},skip:function(c){this.setIndex(this.index+c)},byteAt:function(){},readInt:function(c){var h,d=0;for(this.checkOffset(c),h=this.index+c-1;h>=this.index;h--)d=(d<<8)+this.byteAt(h);return this.index+=c,d},readString:function(c){return r.transformTo("string",this.readData(c))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var c=this.readInt(4);return new Date(Date.UTC(1980+(c>>25&127),(c>>21&15)-1,c>>16&31,c>>11&31,c>>5&63,(31&c)<<1))}},n.exports=o},{"../utils":32}],19:[function(e,n,i){var r=e("./Uint8ArrayReader");function o(c){r.call(this,c)}e("../utils").inherits(o,r),o.prototype.readData=function(c){this.checkOffset(c);var h=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,h},n.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,n,i){var r=e("./DataReader");function o(c){r.call(this,c)}e("../utils").inherits(o,r),o.prototype.byteAt=function(c){return this.data.charCodeAt(this.zero+c)},o.prototype.lastIndexOfSignature=function(c){return this.data.lastIndexOf(c)-this.zero},o.prototype.readAndCheckSignature=function(c){return c===this.readData(4)},o.prototype.readData=function(c){this.checkOffset(c);var h=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,h},n.exports=o},{"../utils":32,"./DataReader":18}],21:[function(e,n,i){var r=e("./ArrayReader");function o(c){r.call(this,c)}e("../utils").inherits(o,r),o.prototype.readData=function(c){if(this.checkOffset(c),c===0)return new Uint8Array(0);var h=this.data.subarray(this.zero+this.index,this.zero+this.index+c);return this.index+=c,h},n.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(e,n,i){var r=e("../utils"),o=e("../support"),c=e("./ArrayReader"),h=e("./StringReader"),d=e("./NodeBufferReader"),f=e("./Uint8ArrayReader");n.exports=function(p){var m=r.getTypeOf(p);return r.checkSupport(m),m!=="string"||o.uint8array?m==="nodebuffer"?new d(p):o.uint8array?new f(r.transformTo("uint8array",p)):new c(r.transformTo("array",p)):new h(p)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,n,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,n,i){var r=e("./GenericWorker"),o=e("../utils");function c(h){r.call(this,"ConvertWorker to "+h),this.destType=h}o.inherits(c,r),c.prototype.processChunk=function(h){this.push({data:o.transformTo(this.destType,h.data),meta:h.meta})},n.exports=c},{"../utils":32,"./GenericWorker":28}],25:[function(e,n,i){var r=e("./GenericWorker"),o=e("../crc32");function c(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(c,r),c.prototype.processChunk=function(h){this.streamInfo.crc32=o(h.data,this.streamInfo.crc32||0),this.push(h)},n.exports=c},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,n,i){var r=e("../utils"),o=e("./GenericWorker");function c(h){o.call(this,"DataLengthProbe for "+h),this.propName=h,this.withStreamInfo(h,0)}r.inherits(c,o),c.prototype.processChunk=function(h){if(h){var d=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=d+h.data.length}o.prototype.processChunk.call(this,h)},n.exports=c},{"../utils":32,"./GenericWorker":28}],27:[function(e,n,i){var r=e("../utils"),o=e("./GenericWorker");function c(h){o.call(this,"DataWorker");var d=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,h.then(function(f){d.dataIsReady=!0,d.data=f,d.max=f&&f.length||0,d.type=r.getTypeOf(f),d.isPaused||d._tickAndRepeat()},function(f){d.error(f)})}r.inherits(c,o),c.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},c.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},c.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},c.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var h=null,d=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":h=this.data.substring(this.index,d);break;case"uint8array":h=this.data.subarray(this.index,d);break;case"array":case"nodebuffer":h=this.data.slice(this.index,d)}return this.index=d,this.push({data:h,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=c},{"../utils":32,"./GenericWorker":28}],28:[function(e,n,i){function r(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,c){return this._listeners[o].push(c),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,c){if(this._listeners[o])for(var h=0;h<this._listeners[o].length;h++)this._listeners[o][h].call(this,c)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var c=this;return o.on("data",function(h){c.processChunk(h)}),o.on("end",function(){c.end()}),o.on("error",function(h){c.error(h)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,c){return this.extraStreamInfo[o]=c,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},n.exports=r},{}],29:[function(e,n,i){var r=e("../utils"),o=e("./ConvertWorker"),c=e("./GenericWorker"),h=e("../base64"),d=e("../support"),f=e("../external"),p=null;if(d.nodestream)try{p=e("../nodejs/NodejsStreamOutputAdapter")}catch{}function m(w,b){return new f.Promise(function(E,_){var k=[],T=w._internalType,R=w._outputType,D=w._mimeType;w.on("data",function(F,j){k.push(F),b&&b(j)}).on("error",function(F){k=[],_(F)}).on("end",function(){try{var F=(function(j,I,O){switch(j){case"blob":return r.newBlob(r.transformTo("arraybuffer",I),O);case"base64":return h.encode(I);default:return r.transformTo(j,I)}})(R,(function(j,I){var O,X=0,Q=null,H=0;for(O=0;O<I.length;O++)H+=I[O].length;switch(j){case"string":return I.join("");case"array":return Array.prototype.concat.apply([],I);case"uint8array":for(Q=new Uint8Array(H),O=0;O<I.length;O++)Q.set(I[O],X),X+=I[O].length;return Q;case"nodebuffer":return Buffer.concat(I);default:throw new Error("concat : unsupported type '"+j+"'")}})(T,k),D);E(F)}catch(j){_(j)}k=[]}).resume()})}function y(w,b,E){var _=b;switch(b){case"blob":case"arraybuffer":_="uint8array";break;case"base64":_="string"}try{this._internalType=_,this._outputType=b,this._mimeType=E,r.checkSupport(_),this._worker=w.pipe(new o(_)),w.lock()}catch(k){this._worker=new c("error"),this._worker.error(k)}}y.prototype={accumulate:function(w){return m(this,w)},on:function(w,b){var E=this;return w==="data"?this._worker.on(w,function(_){b.call(E,_.data,_.meta)}):this._worker.on(w,function(){r.delay(b,arguments,E)}),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(w){if(r.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new p(this,{objectMode:this._outputType!=="nodebuffer"},w)}},n.exports=y},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,n,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var r=new ArrayBuffer(0);try{i.blob=new Blob([r],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(r),i.blob=o.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!e("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(e,n,i){for(var r=e("./utils"),o=e("./support"),c=e("./nodejsUtils"),h=e("./stream/GenericWorker"),d=new Array(256),f=0;f<256;f++)d[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;d[254]=d[254]=1;function p(){h.call(this,"utf-8 decode"),this.leftOver=null}function m(){h.call(this,"utf-8 encode")}i.utf8encode=function(y){return o.nodebuffer?c.newBufferFrom(y,"utf-8"):(function(w){var b,E,_,k,T,R=w.length,D=0;for(k=0;k<R;k++)(64512&(E=w.charCodeAt(k)))==55296&&k+1<R&&(64512&(_=w.charCodeAt(k+1)))==56320&&(E=65536+(E-55296<<10)+(_-56320),k++),D+=E<128?1:E<2048?2:E<65536?3:4;for(b=o.uint8array?new Uint8Array(D):new Array(D),k=T=0;T<D;k++)(64512&(E=w.charCodeAt(k)))==55296&&k+1<R&&(64512&(_=w.charCodeAt(k+1)))==56320&&(E=65536+(E-55296<<10)+(_-56320),k++),E<128?b[T++]=E:(E<2048?b[T++]=192|E>>>6:(E<65536?b[T++]=224|E>>>12:(b[T++]=240|E>>>18,b[T++]=128|E>>>12&63),b[T++]=128|E>>>6&63),b[T++]=128|63&E);return b})(y)},i.utf8decode=function(y){return o.nodebuffer?r.transformTo("nodebuffer",y).toString("utf-8"):(function(w){var b,E,_,k,T=w.length,R=new Array(2*T);for(b=E=0;b<T;)if((_=w[b++])<128)R[E++]=_;else if(4<(k=d[_]))R[E++]=65533,b+=k-1;else{for(_&=k===2?31:k===3?15:7;1<k&&b<T;)_=_<<6|63&w[b++],k--;1<k?R[E++]=65533:_<65536?R[E++]=_:(_-=65536,R[E++]=55296|_>>10&1023,R[E++]=56320|1023&_)}return R.length!==E&&(R.subarray?R=R.subarray(0,E):R.length=E),r.applyFromCharCode(R)})(y=r.transformTo(o.uint8array?"uint8array":"array",y))},r.inherits(p,h),p.prototype.processChunk=function(y){var w=r.transformTo(o.uint8array?"uint8array":"array",y.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var b=w;(w=new Uint8Array(b.length+this.leftOver.length)).set(this.leftOver,0),w.set(b,this.leftOver.length)}else w=this.leftOver.concat(w);this.leftOver=null}var E=(function(k,T){var R;for((T=T||k.length)>k.length&&(T=k.length),R=T-1;0<=R&&(192&k[R])==128;)R--;return R<0||R===0?T:R+d[k[R]]>T?R:T})(w),_=w;E!==w.length&&(o.uint8array?(_=w.subarray(0,E),this.leftOver=w.subarray(E,w.length)):(_=w.slice(0,E),this.leftOver=w.slice(E,w.length))),this.push({data:i.utf8decode(_),meta:y.meta})},p.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=p,r.inherits(m,h),m.prototype.processChunk=function(y){this.push({data:i.utf8encode(y.data),meta:y.meta})},i.Utf8EncodeWorker=m},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,n,i){var r=e("./support"),o=e("./base64"),c=e("./nodejsUtils"),h=e("./external");function d(b){return b}function f(b,E){for(var _=0;_<b.length;++_)E[_]=255&b.charCodeAt(_);return E}e("setimmediate"),i.newBlob=function(b,E){i.checkSupport("blob");try{return new Blob([b],{type:E})}catch{try{var _=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return _.append(b),_.getBlob(E)}catch{throw new Error("Bug : can't construct the Blob.")}}};var p={stringifyByChunk:function(b,E,_){var k=[],T=0,R=b.length;if(R<=_)return String.fromCharCode.apply(null,b);for(;T<R;)E==="array"||E==="nodebuffer"?k.push(String.fromCharCode.apply(null,b.slice(T,Math.min(T+_,R)))):k.push(String.fromCharCode.apply(null,b.subarray(T,Math.min(T+_,R)))),T+=_;return k.join("")},stringifyByChar:function(b){for(var E="",_=0;_<b.length;_++)E+=String.fromCharCode(b[_]);return E},applyCanBeUsed:{uint8array:(function(){try{return r.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return r.nodebuffer&&String.fromCharCode.apply(null,c.allocBuffer(1)).length===1}catch{return!1}})()}};function m(b){var E=65536,_=i.getTypeOf(b),k=!0;if(_==="uint8array"?k=p.applyCanBeUsed.uint8array:_==="nodebuffer"&&(k=p.applyCanBeUsed.nodebuffer),k)for(;1<E;)try{return p.stringifyByChunk(b,_,E)}catch{E=Math.floor(E/2)}return p.stringifyByChar(b)}function y(b,E){for(var _=0;_<b.length;_++)E[_]=b[_];return E}i.applyFromCharCode=m;var w={};w.string={string:d,array:function(b){return f(b,new Array(b.length))},arraybuffer:function(b){return w.string.uint8array(b).buffer},uint8array:function(b){return f(b,new Uint8Array(b.length))},nodebuffer:function(b){return f(b,c.allocBuffer(b.length))}},w.array={string:m,array:d,arraybuffer:function(b){return new Uint8Array(b).buffer},uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return c.newBufferFrom(b)}},w.arraybuffer={string:function(b){return m(new Uint8Array(b))},array:function(b){return y(new Uint8Array(b),new Array(b.byteLength))},arraybuffer:d,uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return c.newBufferFrom(new Uint8Array(b))}},w.uint8array={string:m,array:function(b){return y(b,new Array(b.length))},arraybuffer:function(b){return b.buffer},uint8array:d,nodebuffer:function(b){return c.newBufferFrom(b)}},w.nodebuffer={string:m,array:function(b){return y(b,new Array(b.length))},arraybuffer:function(b){return w.nodebuffer.uint8array(b).buffer},uint8array:function(b){return y(b,new Uint8Array(b.length))},nodebuffer:d},i.transformTo=function(b,E){if(E=E||"",!b)return E;i.checkSupport(b);var _=i.getTypeOf(E);return w[_][b](E)},i.resolve=function(b){for(var E=b.split("/"),_=[],k=0;k<E.length;k++){var T=E[k];T==="."||T===""&&k!==0&&k!==E.length-1||(T===".."?_.pop():_.push(T))}return _.join("/")},i.getTypeOf=function(b){return typeof b=="string"?"string":Object.prototype.toString.call(b)==="[object Array]"?"array":r.nodebuffer&&c.isBuffer(b)?"nodebuffer":r.uint8array&&b instanceof Uint8Array?"uint8array":r.arraybuffer&&b instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(b){if(!r[b.toLowerCase()])throw new Error(b+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(b){var E,_,k="";for(_=0;_<(b||"").length;_++)k+="\\x"+((E=b.charCodeAt(_))<16?"0":"")+E.toString(16).toUpperCase();return k},i.delay=function(b,E,_){setImmediate(function(){b.apply(_||null,E||[])})},i.inherits=function(b,E){function _(){}_.prototype=E.prototype,b.prototype=new _},i.extend=function(){var b,E,_={};for(b=0;b<arguments.length;b++)for(E in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],E)&&_[E]===void 0&&(_[E]=arguments[b][E]);return _},i.prepareContent=function(b,E,_,k,T){return h.Promise.resolve(E).then(function(R){return r.blob&&(R instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(R))!==-1)&&typeof FileReader<"u"?new h.Promise(function(D,F){var j=new FileReader;j.onload=function(I){D(I.target.result)},j.onerror=function(I){F(I.target.error)},j.readAsArrayBuffer(R)}):R}).then(function(R){var D=i.getTypeOf(R);return D?(D==="arraybuffer"?R=i.transformTo("uint8array",R):D==="string"&&(T?R=o.decode(R):_&&k!==!0&&(R=(function(F){return f(F,r.uint8array?new Uint8Array(F.length):new Array(F.length))})(R))),R):h.Promise.reject(new Error("Can't read the data of '"+b+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,n,i){var r=e("./reader/readerFor"),o=e("./utils"),c=e("./signature"),h=e("./zipEntry"),d=e("./support");function f(p){this.files=[],this.loadOptions=p}f.prototype={checkSignature:function(p){if(!this.reader.readAndCheckSignature(p)){this.reader.index-=4;var m=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(m)+", expected "+o.pretty(p)+")")}},isSignature:function(p,m){var y=this.reader.index;this.reader.setIndex(p);var w=this.reader.readString(4)===m;return this.reader.setIndex(y),w},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var p=this.reader.readData(this.zipCommentLength),m=d.uint8array?"uint8array":"array",y=o.transformTo(m,p);this.zipComment=this.loadOptions.decodeFileName(y)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var p,m,y,w=this.zip64EndOfCentralSize-44;0<w;)p=this.reader.readInt(2),m=this.reader.readInt(4),y=this.reader.readData(m),this.zip64ExtensibleData[p]={id:p,length:m,value:y}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var p,m;for(p=0;p<this.files.length;p++)m=this.files[p],this.reader.setIndex(m.localHeaderOffset),this.checkSignature(c.LOCAL_FILE_HEADER),m.readLocalPart(this.reader),m.handleUTF8(),m.processAttributes()},readCentralDir:function(){var p;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(c.CENTRAL_FILE_HEADER);)(p=new h({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(p);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var p=this.reader.lastIndexOfSignature(c.CENTRAL_DIRECTORY_END);if(p<0)throw this.isSignature(0,c.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(p);var m=p;if(this.checkSignature(c.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(p=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(p),this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,c.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var y=this.centralDirOffset+this.centralDirSize;this.zip64&&(y+=20,y+=12+this.zip64EndOfCentralSize);var w=m-y;if(0<w)this.isSignature(m,c.CENTRAL_FILE_HEADER)||(this.reader.zero=w);else if(w<0)throw new Error("Corrupted zip: missing "+Math.abs(w)+" bytes.")},prepareReader:function(p){this.reader=r(p)},load:function(p){this.prepareReader(p),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=f},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,n,i){var r=e("./reader/readerFor"),o=e("./utils"),c=e("./compressedObject"),h=e("./crc32"),d=e("./utf8"),f=e("./compressions"),p=e("./support");function m(y,w){this.options=y,this.loadOptions=w}m.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(y){var w,b;if(y.skip(22),this.fileNameLength=y.readInt(2),b=y.readInt(2),this.fileName=y.readData(this.fileNameLength),y.skip(b),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((w=(function(E){for(var _ in f)if(Object.prototype.hasOwnProperty.call(f,_)&&f[_].magic===E)return f[_];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new c(this.compressedSize,this.uncompressedSize,this.crc32,w,y.readData(this.compressedSize))},readCentralPart:function(y){this.versionMadeBy=y.readInt(2),y.skip(2),this.bitFlag=y.readInt(2),this.compressionMethod=y.readString(2),this.date=y.readDate(),this.crc32=y.readInt(4),this.compressedSize=y.readInt(4),this.uncompressedSize=y.readInt(4);var w=y.readInt(2);if(this.extraFieldsLength=y.readInt(2),this.fileCommentLength=y.readInt(2),this.diskNumberStart=y.readInt(2),this.internalFileAttributes=y.readInt(2),this.externalFileAttributes=y.readInt(4),this.localHeaderOffset=y.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");y.skip(w),this.readExtraFields(y),this.parseZIP64ExtraField(y),this.fileComment=y.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var y=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),y==0&&(this.dosPermissions=63&this.externalFileAttributes),y==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var y=r(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=y.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=y.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=y.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=y.readInt(4))}},readExtraFields:function(y){var w,b,E,_=y.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});y.index+4<_;)w=y.readInt(2),b=y.readInt(2),E=y.readData(b),this.extraFields[w]={id:w,length:b,value:E};y.setIndex(_)},handleUTF8:function(){var y=p.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=d.utf8decode(this.fileName),this.fileCommentStr=d.utf8decode(this.fileComment);else{var w=this.findExtraFieldUnicodePath();if(w!==null)this.fileNameStr=w;else{var b=o.transformTo(y,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(b)}var E=this.findExtraFieldUnicodeComment();if(E!==null)this.fileCommentStr=E;else{var _=o.transformTo(y,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(_)}}},findExtraFieldUnicodePath:function(){var y=this.extraFields[28789];if(y){var w=r(y.value);return w.readInt(1)!==1||h(this.fileName)!==w.readInt(4)?null:d.utf8decode(w.readData(y.length-5))}return null},findExtraFieldUnicodeComment:function(){var y=this.extraFields[25461];if(y){var w=r(y.value);return w.readInt(1)!==1||h(this.fileComment)!==w.readInt(4)?null:d.utf8decode(w.readData(y.length-5))}return null}},n.exports=m},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,n,i){function r(w,b,E){this.name=w,this.dir=E.dir,this.date=E.date,this.comment=E.comment,this.unixPermissions=E.unixPermissions,this.dosPermissions=E.dosPermissions,this._data=b,this._dataBinary=E.binary,this.options={compression:E.compression,compressionOptions:E.compressionOptions}}var o=e("./stream/StreamHelper"),c=e("./stream/DataWorker"),h=e("./utf8"),d=e("./compressedObject"),f=e("./stream/GenericWorker");r.prototype={internalStream:function(w){var b=null,E="string";try{if(!w)throw new Error("No output type specified.");var _=(E=w.toLowerCase())==="string"||E==="text";E!=="binarystring"&&E!=="text"||(E="string"),b=this._decompressWorker();var k=!this._dataBinary;k&&!_&&(b=b.pipe(new h.Utf8EncodeWorker)),!k&&_&&(b=b.pipe(new h.Utf8DecodeWorker))}catch(T){(b=new f("error")).error(T)}return new o(b,E,"")},async:function(w,b){return this.internalStream(w).accumulate(b)},nodeStream:function(w,b){return this.internalStream(w||"nodebuffer").toNodejsStream(b)},_compressWorker:function(w,b){if(this._data instanceof d&&this._data.compression.magic===w.magic)return this._data.getCompressedWorker();var E=this._decompressWorker();return this._dataBinary||(E=E.pipe(new h.Utf8EncodeWorker)),d.createWorkerFrom(E,w,b)},_decompressWorker:function(){return this._data instanceof d?this._data.getContentWorker():this._data instanceof f?this._data:new c(this._data)}};for(var p=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],m=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},y=0;y<p.length;y++)r.prototype[p[y]]=m;n.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,n,i){(function(r){var o,c,h=r.MutationObserver||r.WebKitMutationObserver;if(h){var d=0,f=new h(w),p=r.document.createTextNode("");f.observe(p,{characterData:!0}),o=function(){p.data=d=++d%2}}else if(r.setImmediate||r.MessageChannel===void 0)o="document"in r&&"onreadystatechange"in r.document.createElement("script")?function(){var b=r.document.createElement("script");b.onreadystatechange=function(){w(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},r.document.documentElement.appendChild(b)}:function(){setTimeout(w,0)};else{var m=new r.MessageChannel;m.port1.onmessage=w,o=function(){m.port2.postMessage(0)}}var y=[];function w(){var b,E;c=!0;for(var _=y.length;_;){for(E=y,y=[],b=-1;++b<_;)E[b]();_=y.length}c=!1}n.exports=function(b){y.push(b)!==1||c||o()}}).call(this,typeof Bm<"u"?Bm:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(e,n,i){var r=e("immediate");function o(){}var c={},h=["REJECTED"],d=["FULFILLED"],f=["PENDING"];function p(_){if(typeof _!="function")throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,_!==o&&b(this,_)}function m(_,k,T){this.promise=_,typeof k=="function"&&(this.onFulfilled=k,this.callFulfilled=this.otherCallFulfilled),typeof T=="function"&&(this.onRejected=T,this.callRejected=this.otherCallRejected)}function y(_,k,T){r(function(){var R;try{R=k(T)}catch(D){return c.reject(_,D)}R===_?c.reject(_,new TypeError("Cannot resolve promise with itself")):c.resolve(_,R)})}function w(_){var k=_&&_.then;if(_&&(typeof _=="object"||typeof _=="function")&&typeof k=="function")return function(){k.apply(_,arguments)}}function b(_,k){var T=!1;function R(j){T||(T=!0,c.reject(_,j))}function D(j){T||(T=!0,c.resolve(_,j))}var F=E(function(){k(D,R)});F.status==="error"&&R(F.value)}function E(_,k){var T={};try{T.value=_(k),T.status="success"}catch(R){T.status="error",T.value=R}return T}(n.exports=p).prototype.finally=function(_){if(typeof _!="function")return this;var k=this.constructor;return this.then(function(T){return k.resolve(_()).then(function(){return T})},function(T){return k.resolve(_()).then(function(){throw T})})},p.prototype.catch=function(_){return this.then(null,_)},p.prototype.then=function(_,k){if(typeof _!="function"&&this.state===d||typeof k!="function"&&this.state===h)return this;var T=new this.constructor(o);return this.state!==f?y(T,this.state===d?_:k,this.outcome):this.queue.push(new m(T,_,k)),T},m.prototype.callFulfilled=function(_){c.resolve(this.promise,_)},m.prototype.otherCallFulfilled=function(_){y(this.promise,this.onFulfilled,_)},m.prototype.callRejected=function(_){c.reject(this.promise,_)},m.prototype.otherCallRejected=function(_){y(this.promise,this.onRejected,_)},c.resolve=function(_,k){var T=E(w,k);if(T.status==="error")return c.reject(_,T.value);var R=T.value;if(R)b(_,R);else{_.state=d,_.outcome=k;for(var D=-1,F=_.queue.length;++D<F;)_.queue[D].callFulfilled(k)}return _},c.reject=function(_,k){_.state=h,_.outcome=k;for(var T=-1,R=_.queue.length;++T<R;)_.queue[T].callRejected(k);return _},p.resolve=function(_){return _ instanceof this?_:c.resolve(new this(o),_)},p.reject=function(_){var k=new this(o);return c.reject(k,_)},p.all=function(_){var k=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=_.length,R=!1;if(!T)return this.resolve([]);for(var D=new Array(T),F=0,j=-1,I=new this(o);++j<T;)O(_[j],j);return I;function O(X,Q){k.resolve(X).then(function(H){D[Q]=H,++F!==T||R||(R=!0,c.resolve(I,D))},function(H){R||(R=!0,c.reject(I,H))})}},p.race=function(_){var k=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=_.length,R=!1;if(!T)return this.resolve([]);for(var D=-1,F=new this(o);++D<T;)j=_[D],k.resolve(j).then(function(I){R||(R=!0,c.resolve(F,I))},function(I){R||(R=!0,c.reject(F,I))});var j;return F}},{immediate:36}],38:[function(e,n,i){var r={};(0,e("./lib/utils/common").assign)(r,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),n.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,n,i){var r=e("./zlib/deflate"),o=e("./utils/common"),c=e("./utils/strings"),h=e("./zlib/messages"),d=e("./zlib/zstream"),f=Object.prototype.toString,p=0,m=-1,y=0,w=8;function b(_){if(!(this instanceof b))return new b(_);this.options=o.assign({level:m,method:w,chunkSize:16384,windowBits:15,memLevel:8,strategy:y,to:""},_||{});var k=this.options;k.raw&&0<k.windowBits?k.windowBits=-k.windowBits:k.gzip&&0<k.windowBits&&k.windowBits<16&&(k.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var T=r.deflateInit2(this.strm,k.level,k.method,k.windowBits,k.memLevel,k.strategy);if(T!==p)throw new Error(h[T]);if(k.header&&r.deflateSetHeader(this.strm,k.header),k.dictionary){var R;if(R=typeof k.dictionary=="string"?c.string2buf(k.dictionary):f.call(k.dictionary)==="[object ArrayBuffer]"?new Uint8Array(k.dictionary):k.dictionary,(T=r.deflateSetDictionary(this.strm,R))!==p)throw new Error(h[T]);this._dict_set=!0}}function E(_,k){var T=new b(k);if(T.push(_,!0),T.err)throw T.msg||h[T.err];return T.result}b.prototype.push=function(_,k){var T,R,D=this.strm,F=this.options.chunkSize;if(this.ended)return!1;R=k===~~k?k:k===!0?4:0,typeof _=="string"?D.input=c.string2buf(_):f.call(_)==="[object ArrayBuffer]"?D.input=new Uint8Array(_):D.input=_,D.next_in=0,D.avail_in=D.input.length;do{if(D.avail_out===0&&(D.output=new o.Buf8(F),D.next_out=0,D.avail_out=F),(T=r.deflate(D,R))!==1&&T!==p)return this.onEnd(T),!(this.ended=!0);D.avail_out!==0&&(D.avail_in!==0||R!==4&&R!==2)||(this.options.to==="string"?this.onData(c.buf2binstring(o.shrinkBuf(D.output,D.next_out))):this.onData(o.shrinkBuf(D.output,D.next_out)))}while((0<D.avail_in||D.avail_out===0)&&T!==1);return R===4?(T=r.deflateEnd(this.strm),this.onEnd(T),this.ended=!0,T===p):R!==2||(this.onEnd(p),!(D.avail_out=0))},b.prototype.onData=function(_){this.chunks.push(_)},b.prototype.onEnd=function(_){_===p&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg},i.Deflate=b,i.deflate=E,i.deflateRaw=function(_,k){return(k=k||{}).raw=!0,E(_,k)},i.gzip=function(_,k){return(k=k||{}).gzip=!0,E(_,k)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,n,i){var r=e("./zlib/inflate"),o=e("./utils/common"),c=e("./utils/strings"),h=e("./zlib/constants"),d=e("./zlib/messages"),f=e("./zlib/zstream"),p=e("./zlib/gzheader"),m=Object.prototype.toString;function y(b){if(!(this instanceof y))return new y(b);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},b||{});var E=this.options;E.raw&&0<=E.windowBits&&E.windowBits<16&&(E.windowBits=-E.windowBits,E.windowBits===0&&(E.windowBits=-15)),!(0<=E.windowBits&&E.windowBits<16)||b&&b.windowBits||(E.windowBits+=32),15<E.windowBits&&E.windowBits<48&&(15&E.windowBits)==0&&(E.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var _=r.inflateInit2(this.strm,E.windowBits);if(_!==h.Z_OK)throw new Error(d[_]);this.header=new p,r.inflateGetHeader(this.strm,this.header)}function w(b,E){var _=new y(E);if(_.push(b,!0),_.err)throw _.msg||d[_.err];return _.result}y.prototype.push=function(b,E){var _,k,T,R,D,F,j=this.strm,I=this.options.chunkSize,O=this.options.dictionary,X=!1;if(this.ended)return!1;k=E===~~E?E:E===!0?h.Z_FINISH:h.Z_NO_FLUSH,typeof b=="string"?j.input=c.binstring2buf(b):m.call(b)==="[object ArrayBuffer]"?j.input=new Uint8Array(b):j.input=b,j.next_in=0,j.avail_in=j.input.length;do{if(j.avail_out===0&&(j.output=new o.Buf8(I),j.next_out=0,j.avail_out=I),(_=r.inflate(j,h.Z_NO_FLUSH))===h.Z_NEED_DICT&&O&&(F=typeof O=="string"?c.string2buf(O):m.call(O)==="[object ArrayBuffer]"?new Uint8Array(O):O,_=r.inflateSetDictionary(this.strm,F)),_===h.Z_BUF_ERROR&&X===!0&&(_=h.Z_OK,X=!1),_!==h.Z_STREAM_END&&_!==h.Z_OK)return this.onEnd(_),!(this.ended=!0);j.next_out&&(j.avail_out!==0&&_!==h.Z_STREAM_END&&(j.avail_in!==0||k!==h.Z_FINISH&&k!==h.Z_SYNC_FLUSH)||(this.options.to==="string"?(T=c.utf8border(j.output,j.next_out),R=j.next_out-T,D=c.buf2string(j.output,T),j.next_out=R,j.avail_out=I-R,R&&o.arraySet(j.output,j.output,T,R,0),this.onData(D)):this.onData(o.shrinkBuf(j.output,j.next_out)))),j.avail_in===0&&j.avail_out===0&&(X=!0)}while((0<j.avail_in||j.avail_out===0)&&_!==h.Z_STREAM_END);return _===h.Z_STREAM_END&&(k=h.Z_FINISH),k===h.Z_FINISH?(_=r.inflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===h.Z_OK):k!==h.Z_SYNC_FLUSH||(this.onEnd(h.Z_OK),!(j.avail_out=0))},y.prototype.onData=function(b){this.chunks.push(b)},y.prototype.onEnd=function(b){b===h.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},i.Inflate=y,i.inflate=w,i.inflateRaw=function(b,E){return(E=E||{}).raw=!0,w(b,E)},i.ungzip=w},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,n,i){var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(h){for(var d=Array.prototype.slice.call(arguments,1);d.length;){var f=d.shift();if(f){if(typeof f!="object")throw new TypeError(f+"must be non-object");for(var p in f)f.hasOwnProperty(p)&&(h[p]=f[p])}}return h},i.shrinkBuf=function(h,d){return h.length===d?h:h.subarray?h.subarray(0,d):(h.length=d,h)};var o={arraySet:function(h,d,f,p,m){if(d.subarray&&h.subarray)h.set(d.subarray(f,f+p),m);else for(var y=0;y<p;y++)h[m+y]=d[f+y]},flattenChunks:function(h){var d,f,p,m,y,w;for(d=p=0,f=h.length;d<f;d++)p+=h[d].length;for(w=new Uint8Array(p),d=m=0,f=h.length;d<f;d++)y=h[d],w.set(y,m),m+=y.length;return w}},c={arraySet:function(h,d,f,p,m){for(var y=0;y<p;y++)h[m+y]=d[f+y]},flattenChunks:function(h){return[].concat.apply([],h)}};i.setTyped=function(h){h?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,o)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,c))},i.setTyped(r)},{}],42:[function(e,n,i){var r=e("./common"),o=!0,c=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{c=!1}for(var h=new r.Buf8(256),d=0;d<256;d++)h[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;function f(p,m){if(m<65537&&(p.subarray&&c||!p.subarray&&o))return String.fromCharCode.apply(null,r.shrinkBuf(p,m));for(var y="",w=0;w<m;w++)y+=String.fromCharCode(p[w]);return y}h[254]=h[254]=1,i.string2buf=function(p){var m,y,w,b,E,_=p.length,k=0;for(b=0;b<_;b++)(64512&(y=p.charCodeAt(b)))==55296&&b+1<_&&(64512&(w=p.charCodeAt(b+1)))==56320&&(y=65536+(y-55296<<10)+(w-56320),b++),k+=y<128?1:y<2048?2:y<65536?3:4;for(m=new r.Buf8(k),b=E=0;E<k;b++)(64512&(y=p.charCodeAt(b)))==55296&&b+1<_&&(64512&(w=p.charCodeAt(b+1)))==56320&&(y=65536+(y-55296<<10)+(w-56320),b++),y<128?m[E++]=y:(y<2048?m[E++]=192|y>>>6:(y<65536?m[E++]=224|y>>>12:(m[E++]=240|y>>>18,m[E++]=128|y>>>12&63),m[E++]=128|y>>>6&63),m[E++]=128|63&y);return m},i.buf2binstring=function(p){return f(p,p.length)},i.binstring2buf=function(p){for(var m=new r.Buf8(p.length),y=0,w=m.length;y<w;y++)m[y]=p.charCodeAt(y);return m},i.buf2string=function(p,m){var y,w,b,E,_=m||p.length,k=new Array(2*_);for(y=w=0;y<_;)if((b=p[y++])<128)k[w++]=b;else if(4<(E=h[b]))k[w++]=65533,y+=E-1;else{for(b&=E===2?31:E===3?15:7;1<E&&y<_;)b=b<<6|63&p[y++],E--;1<E?k[w++]=65533:b<65536?k[w++]=b:(b-=65536,k[w++]=55296|b>>10&1023,k[w++]=56320|1023&b)}return f(k,w)},i.utf8border=function(p,m){var y;for((m=m||p.length)>p.length&&(m=p.length),y=m-1;0<=y&&(192&p[y])==128;)y--;return y<0||y===0?m:y+h[p[y]]>m?y:m}},{"./common":41}],43:[function(e,n,i){n.exports=function(r,o,c,h){for(var d=65535&r|0,f=r>>>16&65535|0,p=0;c!==0;){for(c-=p=2e3<c?2e3:c;f=f+(d=d+o[h++]|0)|0,--p;);d%=65521,f%=65521}return d|f<<16|0}},{}],44:[function(e,n,i){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,n,i){var r=(function(){for(var o,c=[],h=0;h<256;h++){o=h;for(var d=0;d<8;d++)o=1&o?3988292384^o>>>1:o>>>1;c[h]=o}return c})();n.exports=function(o,c,h,d){var f=r,p=d+h;o^=-1;for(var m=d;m<p;m++)o=o>>>8^f[255&(o^c[m])];return-1^o}},{}],46:[function(e,n,i){var r,o=e("../utils/common"),c=e("./trees"),h=e("./adler32"),d=e("./crc32"),f=e("./messages"),p=0,m=4,y=0,w=-2,b=-1,E=4,_=2,k=8,T=9,R=286,D=30,F=19,j=2*R+1,I=15,O=3,X=258,Q=X+O+1,H=42,J=113,N=1,tt=2,$=3,G=4;function gt(L,ft){return L.msg=f[ft],ft}function nt(L){return(L<<1)-(4<L?9:0)}function Tt(L){for(var ft=L.length;0<=--ft;)L[ft]=0}function U(L){var ft=L.state,rt=ft.pending;rt>L.avail_out&&(rt=L.avail_out),rt!==0&&(o.arraySet(L.output,ft.pending_buf,ft.pending_out,rt,L.next_out),L.next_out+=rt,ft.pending_out+=rt,L.total_out+=rt,L.avail_out-=rt,ft.pending-=rt,ft.pending===0&&(ft.pending_out=0))}function W(L,ft){c._tr_flush_block(L,0<=L.block_start?L.block_start:-1,L.strstart-L.block_start,ft),L.block_start=L.strstart,U(L.strm)}function st(L,ft){L.pending_buf[L.pending++]=ft}function lt(L,ft){L.pending_buf[L.pending++]=ft>>>8&255,L.pending_buf[L.pending++]=255&ft}function ut(L,ft){var rt,K,Z=L.max_chain_length,ot=L.strstart,kt=L.prev_length,Mt=L.nice_match,pt=L.strstart>L.w_size-Q?L.strstart-(L.w_size-Q):0,Lt=L.window,It=L.w_mask,Et=L.prev,zt=L.strstart+X,Jt=Lt[ot+kt-1],Ht=Lt[ot+kt];L.prev_length>=L.good_match&&(Z>>=2),Mt>L.lookahead&&(Mt=L.lookahead);do if(Lt[(rt=ft)+kt]===Ht&&Lt[rt+kt-1]===Jt&&Lt[rt]===Lt[ot]&&Lt[++rt]===Lt[ot+1]){ot+=2,rt++;do;while(Lt[++ot]===Lt[++rt]&&Lt[++ot]===Lt[++rt]&&Lt[++ot]===Lt[++rt]&&Lt[++ot]===Lt[++rt]&&Lt[++ot]===Lt[++rt]&&Lt[++ot]===Lt[++rt]&&Lt[++ot]===Lt[++rt]&&Lt[++ot]===Lt[++rt]&&ot<zt);if(K=X-(zt-ot),ot=zt-X,kt<K){if(L.match_start=ft,Mt<=(kt=K))break;Jt=Lt[ot+kt-1],Ht=Lt[ot+kt]}}while((ft=Et[ft&It])>pt&&--Z!=0);return kt<=L.lookahead?kt:L.lookahead}function Rt(L){var ft,rt,K,Z,ot,kt,Mt,pt,Lt,It,Et=L.w_size;do{if(Z=L.window_size-L.lookahead-L.strstart,L.strstart>=Et+(Et-Q)){for(o.arraySet(L.window,L.window,Et,Et,0),L.match_start-=Et,L.strstart-=Et,L.block_start-=Et,ft=rt=L.hash_size;K=L.head[--ft],L.head[ft]=Et<=K?K-Et:0,--rt;);for(ft=rt=Et;K=L.prev[--ft],L.prev[ft]=Et<=K?K-Et:0,--rt;);Z+=Et}if(L.strm.avail_in===0)break;if(kt=L.strm,Mt=L.window,pt=L.strstart+L.lookahead,Lt=Z,It=void 0,It=kt.avail_in,Lt<It&&(It=Lt),rt=It===0?0:(kt.avail_in-=It,o.arraySet(Mt,kt.input,kt.next_in,It,pt),kt.state.wrap===1?kt.adler=h(kt.adler,Mt,It,pt):kt.state.wrap===2&&(kt.adler=d(kt.adler,Mt,It,pt)),kt.next_in+=It,kt.total_in+=It,It),L.lookahead+=rt,L.lookahead+L.insert>=O)for(ot=L.strstart-L.insert,L.ins_h=L.window[ot],L.ins_h=(L.ins_h<<L.hash_shift^L.window[ot+1])&L.hash_mask;L.insert&&(L.ins_h=(L.ins_h<<L.hash_shift^L.window[ot+O-1])&L.hash_mask,L.prev[ot&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=ot,ot++,L.insert--,!(L.lookahead+L.insert<O)););}while(L.lookahead<Q&&L.strm.avail_in!==0)}function St(L,ft){for(var rt,K;;){if(L.lookahead<Q){if(Rt(L),L.lookahead<Q&&ft===p)return N;if(L.lookahead===0)break}if(rt=0,L.lookahead>=O&&(L.ins_h=(L.ins_h<<L.hash_shift^L.window[L.strstart+O-1])&L.hash_mask,rt=L.prev[L.strstart&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=L.strstart),rt!==0&&L.strstart-rt<=L.w_size-Q&&(L.match_length=ut(L,rt)),L.match_length>=O)if(K=c._tr_tally(L,L.strstart-L.match_start,L.match_length-O),L.lookahead-=L.match_length,L.match_length<=L.max_lazy_match&&L.lookahead>=O){for(L.match_length--;L.strstart++,L.ins_h=(L.ins_h<<L.hash_shift^L.window[L.strstart+O-1])&L.hash_mask,rt=L.prev[L.strstart&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=L.strstart,--L.match_length!=0;);L.strstart++}else L.strstart+=L.match_length,L.match_length=0,L.ins_h=L.window[L.strstart],L.ins_h=(L.ins_h<<L.hash_shift^L.window[L.strstart+1])&L.hash_mask;else K=c._tr_tally(L,0,L.window[L.strstart]),L.lookahead--,L.strstart++;if(K&&(W(L,!1),L.strm.avail_out===0))return N}return L.insert=L.strstart<O-1?L.strstart:O-1,ft===m?(W(L,!0),L.strm.avail_out===0?$:G):L.last_lit&&(W(L,!1),L.strm.avail_out===0)?N:tt}function Ct(L,ft){for(var rt,K,Z;;){if(L.lookahead<Q){if(Rt(L),L.lookahead<Q&&ft===p)return N;if(L.lookahead===0)break}if(rt=0,L.lookahead>=O&&(L.ins_h=(L.ins_h<<L.hash_shift^L.window[L.strstart+O-1])&L.hash_mask,rt=L.prev[L.strstart&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=L.strstart),L.prev_length=L.match_length,L.prev_match=L.match_start,L.match_length=O-1,rt!==0&&L.prev_length<L.max_lazy_match&&L.strstart-rt<=L.w_size-Q&&(L.match_length=ut(L,rt),L.match_length<=5&&(L.strategy===1||L.match_length===O&&4096<L.strstart-L.match_start)&&(L.match_length=O-1)),L.prev_length>=O&&L.match_length<=L.prev_length){for(Z=L.strstart+L.lookahead-O,K=c._tr_tally(L,L.strstart-1-L.prev_match,L.prev_length-O),L.lookahead-=L.prev_length-1,L.prev_length-=2;++L.strstart<=Z&&(L.ins_h=(L.ins_h<<L.hash_shift^L.window[L.strstart+O-1])&L.hash_mask,rt=L.prev[L.strstart&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=L.strstart),--L.prev_length!=0;);if(L.match_available=0,L.match_length=O-1,L.strstart++,K&&(W(L,!1),L.strm.avail_out===0))return N}else if(L.match_available){if((K=c._tr_tally(L,0,L.window[L.strstart-1]))&&W(L,!1),L.strstart++,L.lookahead--,L.strm.avail_out===0)return N}else L.match_available=1,L.strstart++,L.lookahead--}return L.match_available&&(K=c._tr_tally(L,0,L.window[L.strstart-1]),L.match_available=0),L.insert=L.strstart<O-1?L.strstart:O-1,ft===m?(W(L,!0),L.strm.avail_out===0?$:G):L.last_lit&&(W(L,!1),L.strm.avail_out===0)?N:tt}function xt(L,ft,rt,K,Z){this.good_length=L,this.max_lazy=ft,this.nice_length=rt,this.max_chain=K,this.func=Z}function Bt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=k,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*j),this.dyn_dtree=new o.Buf16(2*(2*D+1)),this.bl_tree=new o.Buf16(2*(2*F+1)),Tt(this.dyn_ltree),Tt(this.dyn_dtree),Tt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(I+1),this.heap=new o.Buf16(2*R+1),Tt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*R+1),Tt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function jt(L){var ft;return L&&L.state?(L.total_in=L.total_out=0,L.data_type=_,(ft=L.state).pending=0,ft.pending_out=0,ft.wrap<0&&(ft.wrap=-ft.wrap),ft.status=ft.wrap?H:J,L.adler=ft.wrap===2?0:1,ft.last_flush=p,c._tr_init(ft),y):gt(L,w)}function Ut(L){var ft=jt(L);return ft===y&&(function(rt){rt.window_size=2*rt.w_size,Tt(rt.head),rt.max_lazy_match=r[rt.level].max_lazy,rt.good_match=r[rt.level].good_length,rt.nice_match=r[rt.level].nice_length,rt.max_chain_length=r[rt.level].max_chain,rt.strstart=0,rt.block_start=0,rt.lookahead=0,rt.insert=0,rt.match_length=rt.prev_length=O-1,rt.match_available=0,rt.ins_h=0})(L.state),ft}function Ft(L,ft,rt,K,Z,ot){if(!L)return w;var kt=1;if(ft===b&&(ft=6),K<0?(kt=0,K=-K):15<K&&(kt=2,K-=16),Z<1||T<Z||rt!==k||K<8||15<K||ft<0||9<ft||ot<0||E<ot)return gt(L,w);K===8&&(K=9);var Mt=new Bt;return(L.state=Mt).strm=L,Mt.wrap=kt,Mt.gzhead=null,Mt.w_bits=K,Mt.w_size=1<<Mt.w_bits,Mt.w_mask=Mt.w_size-1,Mt.hash_bits=Z+7,Mt.hash_size=1<<Mt.hash_bits,Mt.hash_mask=Mt.hash_size-1,Mt.hash_shift=~~((Mt.hash_bits+O-1)/O),Mt.window=new o.Buf8(2*Mt.w_size),Mt.head=new o.Buf16(Mt.hash_size),Mt.prev=new o.Buf16(Mt.w_size),Mt.lit_bufsize=1<<Z+6,Mt.pending_buf_size=4*Mt.lit_bufsize,Mt.pending_buf=new o.Buf8(Mt.pending_buf_size),Mt.d_buf=1*Mt.lit_bufsize,Mt.l_buf=3*Mt.lit_bufsize,Mt.level=ft,Mt.strategy=ot,Mt.method=rt,Ut(L)}r=[new xt(0,0,0,0,function(L,ft){var rt=65535;for(rt>L.pending_buf_size-5&&(rt=L.pending_buf_size-5);;){if(L.lookahead<=1){if(Rt(L),L.lookahead===0&&ft===p)return N;if(L.lookahead===0)break}L.strstart+=L.lookahead,L.lookahead=0;var K=L.block_start+rt;if((L.strstart===0||L.strstart>=K)&&(L.lookahead=L.strstart-K,L.strstart=K,W(L,!1),L.strm.avail_out===0)||L.strstart-L.block_start>=L.w_size-Q&&(W(L,!1),L.strm.avail_out===0))return N}return L.insert=0,ft===m?(W(L,!0),L.strm.avail_out===0?$:G):(L.strstart>L.block_start&&(W(L,!1),L.strm.avail_out),N)}),new xt(4,4,8,4,St),new xt(4,5,16,8,St),new xt(4,6,32,32,St),new xt(4,4,16,16,Ct),new xt(8,16,32,32,Ct),new xt(8,16,128,128,Ct),new xt(8,32,128,256,Ct),new xt(32,128,258,1024,Ct),new xt(32,258,258,4096,Ct)],i.deflateInit=function(L,ft){return Ft(L,ft,k,15,8,0)},i.deflateInit2=Ft,i.deflateReset=Ut,i.deflateResetKeep=jt,i.deflateSetHeader=function(L,ft){return L&&L.state?L.state.wrap!==2?w:(L.state.gzhead=ft,y):w},i.deflate=function(L,ft){var rt,K,Z,ot;if(!L||!L.state||5<ft||ft<0)return L?gt(L,w):w;if(K=L.state,!L.output||!L.input&&L.avail_in!==0||K.status===666&&ft!==m)return gt(L,L.avail_out===0?-5:w);if(K.strm=L,rt=K.last_flush,K.last_flush=ft,K.status===H)if(K.wrap===2)L.adler=0,st(K,31),st(K,139),st(K,8),K.gzhead?(st(K,(K.gzhead.text?1:0)+(K.gzhead.hcrc?2:0)+(K.gzhead.extra?4:0)+(K.gzhead.name?8:0)+(K.gzhead.comment?16:0)),st(K,255&K.gzhead.time),st(K,K.gzhead.time>>8&255),st(K,K.gzhead.time>>16&255),st(K,K.gzhead.time>>24&255),st(K,K.level===9?2:2<=K.strategy||K.level<2?4:0),st(K,255&K.gzhead.os),K.gzhead.extra&&K.gzhead.extra.length&&(st(K,255&K.gzhead.extra.length),st(K,K.gzhead.extra.length>>8&255)),K.gzhead.hcrc&&(L.adler=d(L.adler,K.pending_buf,K.pending,0)),K.gzindex=0,K.status=69):(st(K,0),st(K,0),st(K,0),st(K,0),st(K,0),st(K,K.level===9?2:2<=K.strategy||K.level<2?4:0),st(K,3),K.status=J);else{var kt=k+(K.w_bits-8<<4)<<8;kt|=(2<=K.strategy||K.level<2?0:K.level<6?1:K.level===6?2:3)<<6,K.strstart!==0&&(kt|=32),kt+=31-kt%31,K.status=J,lt(K,kt),K.strstart!==0&&(lt(K,L.adler>>>16),lt(K,65535&L.adler)),L.adler=1}if(K.status===69)if(K.gzhead.extra){for(Z=K.pending;K.gzindex<(65535&K.gzhead.extra.length)&&(K.pending!==K.pending_buf_size||(K.gzhead.hcrc&&K.pending>Z&&(L.adler=d(L.adler,K.pending_buf,K.pending-Z,Z)),U(L),Z=K.pending,K.pending!==K.pending_buf_size));)st(K,255&K.gzhead.extra[K.gzindex]),K.gzindex++;K.gzhead.hcrc&&K.pending>Z&&(L.adler=d(L.adler,K.pending_buf,K.pending-Z,Z)),K.gzindex===K.gzhead.extra.length&&(K.gzindex=0,K.status=73)}else K.status=73;if(K.status===73)if(K.gzhead.name){Z=K.pending;do{if(K.pending===K.pending_buf_size&&(K.gzhead.hcrc&&K.pending>Z&&(L.adler=d(L.adler,K.pending_buf,K.pending-Z,Z)),U(L),Z=K.pending,K.pending===K.pending_buf_size)){ot=1;break}ot=K.gzindex<K.gzhead.name.length?255&K.gzhead.name.charCodeAt(K.gzindex++):0,st(K,ot)}while(ot!==0);K.gzhead.hcrc&&K.pending>Z&&(L.adler=d(L.adler,K.pending_buf,K.pending-Z,Z)),ot===0&&(K.gzindex=0,K.status=91)}else K.status=91;if(K.status===91)if(K.gzhead.comment){Z=K.pending;do{if(K.pending===K.pending_buf_size&&(K.gzhead.hcrc&&K.pending>Z&&(L.adler=d(L.adler,K.pending_buf,K.pending-Z,Z)),U(L),Z=K.pending,K.pending===K.pending_buf_size)){ot=1;break}ot=K.gzindex<K.gzhead.comment.length?255&K.gzhead.comment.charCodeAt(K.gzindex++):0,st(K,ot)}while(ot!==0);K.gzhead.hcrc&&K.pending>Z&&(L.adler=d(L.adler,K.pending_buf,K.pending-Z,Z)),ot===0&&(K.status=103)}else K.status=103;if(K.status===103&&(K.gzhead.hcrc?(K.pending+2>K.pending_buf_size&&U(L),K.pending+2<=K.pending_buf_size&&(st(K,255&L.adler),st(K,L.adler>>8&255),L.adler=0,K.status=J)):K.status=J),K.pending!==0){if(U(L),L.avail_out===0)return K.last_flush=-1,y}else if(L.avail_in===0&&nt(ft)<=nt(rt)&&ft!==m)return gt(L,-5);if(K.status===666&&L.avail_in!==0)return gt(L,-5);if(L.avail_in!==0||K.lookahead!==0||ft!==p&&K.status!==666){var Mt=K.strategy===2?(function(pt,Lt){for(var It;;){if(pt.lookahead===0&&(Rt(pt),pt.lookahead===0)){if(Lt===p)return N;break}if(pt.match_length=0,It=c._tr_tally(pt,0,pt.window[pt.strstart]),pt.lookahead--,pt.strstart++,It&&(W(pt,!1),pt.strm.avail_out===0))return N}return pt.insert=0,Lt===m?(W(pt,!0),pt.strm.avail_out===0?$:G):pt.last_lit&&(W(pt,!1),pt.strm.avail_out===0)?N:tt})(K,ft):K.strategy===3?(function(pt,Lt){for(var It,Et,zt,Jt,Ht=pt.window;;){if(pt.lookahead<=X){if(Rt(pt),pt.lookahead<=X&&Lt===p)return N;if(pt.lookahead===0)break}if(pt.match_length=0,pt.lookahead>=O&&0<pt.strstart&&(Et=Ht[zt=pt.strstart-1])===Ht[++zt]&&Et===Ht[++zt]&&Et===Ht[++zt]){Jt=pt.strstart+X;do;while(Et===Ht[++zt]&&Et===Ht[++zt]&&Et===Ht[++zt]&&Et===Ht[++zt]&&Et===Ht[++zt]&&Et===Ht[++zt]&&Et===Ht[++zt]&&Et===Ht[++zt]&&zt<Jt);pt.match_length=X-(Jt-zt),pt.match_length>pt.lookahead&&(pt.match_length=pt.lookahead)}if(pt.match_length>=O?(It=c._tr_tally(pt,1,pt.match_length-O),pt.lookahead-=pt.match_length,pt.strstart+=pt.match_length,pt.match_length=0):(It=c._tr_tally(pt,0,pt.window[pt.strstart]),pt.lookahead--,pt.strstart++),It&&(W(pt,!1),pt.strm.avail_out===0))return N}return pt.insert=0,Lt===m?(W(pt,!0),pt.strm.avail_out===0?$:G):pt.last_lit&&(W(pt,!1),pt.strm.avail_out===0)?N:tt})(K,ft):r[K.level].func(K,ft);if(Mt!==$&&Mt!==G||(K.status=666),Mt===N||Mt===$)return L.avail_out===0&&(K.last_flush=-1),y;if(Mt===tt&&(ft===1?c._tr_align(K):ft!==5&&(c._tr_stored_block(K,0,0,!1),ft===3&&(Tt(K.head),K.lookahead===0&&(K.strstart=0,K.block_start=0,K.insert=0))),U(L),L.avail_out===0))return K.last_flush=-1,y}return ft!==m?y:K.wrap<=0?1:(K.wrap===2?(st(K,255&L.adler),st(K,L.adler>>8&255),st(K,L.adler>>16&255),st(K,L.adler>>24&255),st(K,255&L.total_in),st(K,L.total_in>>8&255),st(K,L.total_in>>16&255),st(K,L.total_in>>24&255)):(lt(K,L.adler>>>16),lt(K,65535&L.adler)),U(L),0<K.wrap&&(K.wrap=-K.wrap),K.pending!==0?y:1)},i.deflateEnd=function(L){var ft;return L&&L.state?(ft=L.state.status)!==H&&ft!==69&&ft!==73&&ft!==91&&ft!==103&&ft!==J&&ft!==666?gt(L,w):(L.state=null,ft===J?gt(L,-3):y):w},i.deflateSetDictionary=function(L,ft){var rt,K,Z,ot,kt,Mt,pt,Lt,It=ft.length;if(!L||!L.state||(ot=(rt=L.state).wrap)===2||ot===1&&rt.status!==H||rt.lookahead)return w;for(ot===1&&(L.adler=h(L.adler,ft,It,0)),rt.wrap=0,It>=rt.w_size&&(ot===0&&(Tt(rt.head),rt.strstart=0,rt.block_start=0,rt.insert=0),Lt=new o.Buf8(rt.w_size),o.arraySet(Lt,ft,It-rt.w_size,rt.w_size,0),ft=Lt,It=rt.w_size),kt=L.avail_in,Mt=L.next_in,pt=L.input,L.avail_in=It,L.next_in=0,L.input=ft,Rt(rt);rt.lookahead>=O;){for(K=rt.strstart,Z=rt.lookahead-(O-1);rt.ins_h=(rt.ins_h<<rt.hash_shift^rt.window[K+O-1])&rt.hash_mask,rt.prev[K&rt.w_mask]=rt.head[rt.ins_h],rt.head[rt.ins_h]=K,K++,--Z;);rt.strstart=K,rt.lookahead=O-1,Rt(rt)}return rt.strstart+=rt.lookahead,rt.block_start=rt.strstart,rt.insert=rt.lookahead,rt.lookahead=0,rt.match_length=rt.prev_length=O-1,rt.match_available=0,L.next_in=Mt,L.input=pt,L.avail_in=kt,rt.wrap=ot,y},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,n,i){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,n,i){n.exports=function(r,o){var c,h,d,f,p,m,y,w,b,E,_,k,T,R,D,F,j,I,O,X,Q,H,J,N,tt;c=r.state,h=r.next_in,N=r.input,d=h+(r.avail_in-5),f=r.next_out,tt=r.output,p=f-(o-r.avail_out),m=f+(r.avail_out-257),y=c.dmax,w=c.wsize,b=c.whave,E=c.wnext,_=c.window,k=c.hold,T=c.bits,R=c.lencode,D=c.distcode,F=(1<<c.lenbits)-1,j=(1<<c.distbits)-1;t:do{T<15&&(k+=N[h++]<<T,T+=8,k+=N[h++]<<T,T+=8),I=R[k&F];e:for(;;){if(k>>>=O=I>>>24,T-=O,(O=I>>>16&255)===0)tt[f++]=65535&I;else{if(!(16&O)){if((64&O)==0){I=R[(65535&I)+(k&(1<<O)-1)];continue e}if(32&O){c.mode=12;break t}r.msg="invalid literal/length code",c.mode=30;break t}X=65535&I,(O&=15)&&(T<O&&(k+=N[h++]<<T,T+=8),X+=k&(1<<O)-1,k>>>=O,T-=O),T<15&&(k+=N[h++]<<T,T+=8,k+=N[h++]<<T,T+=8),I=D[k&j];n:for(;;){if(k>>>=O=I>>>24,T-=O,!(16&(O=I>>>16&255))){if((64&O)==0){I=D[(65535&I)+(k&(1<<O)-1)];continue n}r.msg="invalid distance code",c.mode=30;break t}if(Q=65535&I,T<(O&=15)&&(k+=N[h++]<<T,(T+=8)<O&&(k+=N[h++]<<T,T+=8)),y<(Q+=k&(1<<O)-1)){r.msg="invalid distance too far back",c.mode=30;break t}if(k>>>=O,T-=O,(O=f-p)<Q){if(b<(O=Q-O)&&c.sane){r.msg="invalid distance too far back",c.mode=30;break t}if(J=_,(H=0)===E){if(H+=w-O,O<X){for(X-=O;tt[f++]=_[H++],--O;);H=f-Q,J=tt}}else if(E<O){if(H+=w+E-O,(O-=E)<X){for(X-=O;tt[f++]=_[H++],--O;);if(H=0,E<X){for(X-=O=E;tt[f++]=_[H++],--O;);H=f-Q,J=tt}}}else if(H+=E-O,O<X){for(X-=O;tt[f++]=_[H++],--O;);H=f-Q,J=tt}for(;2<X;)tt[f++]=J[H++],tt[f++]=J[H++],tt[f++]=J[H++],X-=3;X&&(tt[f++]=J[H++],1<X&&(tt[f++]=J[H++]))}else{for(H=f-Q;tt[f++]=tt[H++],tt[f++]=tt[H++],tt[f++]=tt[H++],2<(X-=3););X&&(tt[f++]=tt[H++],1<X&&(tt[f++]=tt[H++]))}break}}break}}while(h<d&&f<m);h-=X=T>>3,k&=(1<<(T-=X<<3))-1,r.next_in=h,r.next_out=f,r.avail_in=h<d?d-h+5:5-(h-d),r.avail_out=f<m?m-f+257:257-(f-m),c.hold=k,c.bits=T}},{}],49:[function(e,n,i){var r=e("../utils/common"),o=e("./adler32"),c=e("./crc32"),h=e("./inffast"),d=e("./inftrees"),f=1,p=2,m=0,y=-2,w=1,b=852,E=592;function _(H){return(H>>>24&255)+(H>>>8&65280)+((65280&H)<<8)+((255&H)<<24)}function k(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function T(H){var J;return H&&H.state?(J=H.state,H.total_in=H.total_out=J.total=0,H.msg="",J.wrap&&(H.adler=1&J.wrap),J.mode=w,J.last=0,J.havedict=0,J.dmax=32768,J.head=null,J.hold=0,J.bits=0,J.lencode=J.lendyn=new r.Buf32(b),J.distcode=J.distdyn=new r.Buf32(E),J.sane=1,J.back=-1,m):y}function R(H){var J;return H&&H.state?((J=H.state).wsize=0,J.whave=0,J.wnext=0,T(H)):y}function D(H,J){var N,tt;return H&&H.state?(tt=H.state,J<0?(N=0,J=-J):(N=1+(J>>4),J<48&&(J&=15)),J&&(J<8||15<J)?y:(tt.window!==null&&tt.wbits!==J&&(tt.window=null),tt.wrap=N,tt.wbits=J,R(H))):y}function F(H,J){var N,tt;return H?(tt=new k,(H.state=tt).window=null,(N=D(H,J))!==m&&(H.state=null),N):y}var j,I,O=!0;function X(H){if(O){var J;for(j=new r.Buf32(512),I=new r.Buf32(32),J=0;J<144;)H.lens[J++]=8;for(;J<256;)H.lens[J++]=9;for(;J<280;)H.lens[J++]=7;for(;J<288;)H.lens[J++]=8;for(d(f,H.lens,0,288,j,0,H.work,{bits:9}),J=0;J<32;)H.lens[J++]=5;d(p,H.lens,0,32,I,0,H.work,{bits:5}),O=!1}H.lencode=j,H.lenbits=9,H.distcode=I,H.distbits=5}function Q(H,J,N,tt){var $,G=H.state;return G.window===null&&(G.wsize=1<<G.wbits,G.wnext=0,G.whave=0,G.window=new r.Buf8(G.wsize)),tt>=G.wsize?(r.arraySet(G.window,J,N-G.wsize,G.wsize,0),G.wnext=0,G.whave=G.wsize):(tt<($=G.wsize-G.wnext)&&($=tt),r.arraySet(G.window,J,N-tt,$,G.wnext),(tt-=$)?(r.arraySet(G.window,J,N-tt,tt,0),G.wnext=tt,G.whave=G.wsize):(G.wnext+=$,G.wnext===G.wsize&&(G.wnext=0),G.whave<G.wsize&&(G.whave+=$))),0}i.inflateReset=R,i.inflateReset2=D,i.inflateResetKeep=T,i.inflateInit=function(H){return F(H,15)},i.inflateInit2=F,i.inflate=function(H,J){var N,tt,$,G,gt,nt,Tt,U,W,st,lt,ut,Rt,St,Ct,xt,Bt,jt,Ut,Ft,L,ft,rt,K,Z=0,ot=new r.Buf8(4),kt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!H||!H.state||!H.output||!H.input&&H.avail_in!==0)return y;(N=H.state).mode===12&&(N.mode=13),gt=H.next_out,$=H.output,Tt=H.avail_out,G=H.next_in,tt=H.input,nt=H.avail_in,U=N.hold,W=N.bits,st=nt,lt=Tt,ft=m;t:for(;;)switch(N.mode){case w:if(N.wrap===0){N.mode=13;break}for(;W<16;){if(nt===0)break t;nt--,U+=tt[G++]<<W,W+=8}if(2&N.wrap&&U===35615){ot[N.check=0]=255&U,ot[1]=U>>>8&255,N.check=c(N.check,ot,2,0),W=U=0,N.mode=2;break}if(N.flags=0,N.head&&(N.head.done=!1),!(1&N.wrap)||(((255&U)<<8)+(U>>8))%31){H.msg="incorrect header check",N.mode=30;break}if((15&U)!=8){H.msg="unknown compression method",N.mode=30;break}if(W-=4,L=8+(15&(U>>>=4)),N.wbits===0)N.wbits=L;else if(L>N.wbits){H.msg="invalid window size",N.mode=30;break}N.dmax=1<<L,H.adler=N.check=1,N.mode=512&U?10:12,W=U=0;break;case 2:for(;W<16;){if(nt===0)break t;nt--,U+=tt[G++]<<W,W+=8}if(N.flags=U,(255&N.flags)!=8){H.msg="unknown compression method",N.mode=30;break}if(57344&N.flags){H.msg="unknown header flags set",N.mode=30;break}N.head&&(N.head.text=U>>8&1),512&N.flags&&(ot[0]=255&U,ot[1]=U>>>8&255,N.check=c(N.check,ot,2,0)),W=U=0,N.mode=3;case 3:for(;W<32;){if(nt===0)break t;nt--,U+=tt[G++]<<W,W+=8}N.head&&(N.head.time=U),512&N.flags&&(ot[0]=255&U,ot[1]=U>>>8&255,ot[2]=U>>>16&255,ot[3]=U>>>24&255,N.check=c(N.check,ot,4,0)),W=U=0,N.mode=4;case 4:for(;W<16;){if(nt===0)break t;nt--,U+=tt[G++]<<W,W+=8}N.head&&(N.head.xflags=255&U,N.head.os=U>>8),512&N.flags&&(ot[0]=255&U,ot[1]=U>>>8&255,N.check=c(N.check,ot,2,0)),W=U=0,N.mode=5;case 5:if(1024&N.flags){for(;W<16;){if(nt===0)break t;nt--,U+=tt[G++]<<W,W+=8}N.length=U,N.head&&(N.head.extra_len=U),512&N.flags&&(ot[0]=255&U,ot[1]=U>>>8&255,N.check=c(N.check,ot,2,0)),W=U=0}else N.head&&(N.head.extra=null);N.mode=6;case 6:if(1024&N.flags&&(nt<(ut=N.length)&&(ut=nt),ut&&(N.head&&(L=N.head.extra_len-N.length,N.head.extra||(N.head.extra=new Array(N.head.extra_len)),r.arraySet(N.head.extra,tt,G,ut,L)),512&N.flags&&(N.check=c(N.check,tt,ut,G)),nt-=ut,G+=ut,N.length-=ut),N.length))break t;N.length=0,N.mode=7;case 7:if(2048&N.flags){if(nt===0)break t;for(ut=0;L=tt[G+ut++],N.head&&L&&N.length<65536&&(N.head.name+=String.fromCharCode(L)),L&&ut<nt;);if(512&N.flags&&(N.check=c(N.check,tt,ut,G)),nt-=ut,G+=ut,L)break t}else N.head&&(N.head.name=null);N.length=0,N.mode=8;case 8:if(4096&N.flags){if(nt===0)break t;for(ut=0;L=tt[G+ut++],N.head&&L&&N.length<65536&&(N.head.comment+=String.fromCharCode(L)),L&&ut<nt;);if(512&N.flags&&(N.check=c(N.check,tt,ut,G)),nt-=ut,G+=ut,L)break t}else N.head&&(N.head.comment=null);N.mode=9;case 9:if(512&N.flags){for(;W<16;){if(nt===0)break t;nt--,U+=tt[G++]<<W,W+=8}if(U!==(65535&N.check)){H.msg="header crc mismatch",N.mode=30;break}W=U=0}N.head&&(N.head.hcrc=N.flags>>9&1,N.head.done=!0),H.adler=N.check=0,N.mode=12;break;case 10:for(;W<32;){if(nt===0)break t;nt--,U+=tt[G++]<<W,W+=8}H.adler=N.check=_(U),W=U=0,N.mode=11;case 11:if(N.havedict===0)return H.next_out=gt,H.avail_out=Tt,H.next_in=G,H.avail_in=nt,N.hold=U,N.bits=W,2;H.adler=N.check=1,N.mode=12;case 12:if(J===5||J===6)break t;case 13:if(N.last){U>>>=7&W,W-=7&W,N.mode=27;break}for(;W<3;){if(nt===0)break t;nt--,U+=tt[G++]<<W,W+=8}switch(N.last=1&U,W-=1,3&(U>>>=1)){case 0:N.mode=14;break;case 1:if(X(N),N.mode=20,J!==6)break;U>>>=2,W-=2;break t;case 2:N.mode=17;break;case 3:H.msg="invalid block type",N.mode=30}U>>>=2,W-=2;break;case 14:for(U>>>=7&W,W-=7&W;W<32;){if(nt===0)break t;nt--,U+=tt[G++]<<W,W+=8}if((65535&U)!=(U>>>16^65535)){H.msg="invalid stored block lengths",N.mode=30;break}if(N.length=65535&U,W=U=0,N.mode=15,J===6)break t;case 15:N.mode=16;case 16:if(ut=N.length){if(nt<ut&&(ut=nt),Tt<ut&&(ut=Tt),ut===0)break t;r.arraySet($,tt,G,ut,gt),nt-=ut,G+=ut,Tt-=ut,gt+=ut,N.length-=ut;break}N.mode=12;break;case 17:for(;W<14;){if(nt===0)break t;nt--,U+=tt[G++]<<W,W+=8}if(N.nlen=257+(31&U),U>>>=5,W-=5,N.ndist=1+(31&U),U>>>=5,W-=5,N.ncode=4+(15&U),U>>>=4,W-=4,286<N.nlen||30<N.ndist){H.msg="too many length or distance symbols",N.mode=30;break}N.have=0,N.mode=18;case 18:for(;N.have<N.ncode;){for(;W<3;){if(nt===0)break t;nt--,U+=tt[G++]<<W,W+=8}N.lens[kt[N.have++]]=7&U,U>>>=3,W-=3}for(;N.have<19;)N.lens[kt[N.have++]]=0;if(N.lencode=N.lendyn,N.lenbits=7,rt={bits:N.lenbits},ft=d(0,N.lens,0,19,N.lencode,0,N.work,rt),N.lenbits=rt.bits,ft){H.msg="invalid code lengths set",N.mode=30;break}N.have=0,N.mode=19;case 19:for(;N.have<N.nlen+N.ndist;){for(;xt=(Z=N.lencode[U&(1<<N.lenbits)-1])>>>16&255,Bt=65535&Z,!((Ct=Z>>>24)<=W);){if(nt===0)break t;nt--,U+=tt[G++]<<W,W+=8}if(Bt<16)U>>>=Ct,W-=Ct,N.lens[N.have++]=Bt;else{if(Bt===16){for(K=Ct+2;W<K;){if(nt===0)break t;nt--,U+=tt[G++]<<W,W+=8}if(U>>>=Ct,W-=Ct,N.have===0){H.msg="invalid bit length repeat",N.mode=30;break}L=N.lens[N.have-1],ut=3+(3&U),U>>>=2,W-=2}else if(Bt===17){for(K=Ct+3;W<K;){if(nt===0)break t;nt--,U+=tt[G++]<<W,W+=8}W-=Ct,L=0,ut=3+(7&(U>>>=Ct)),U>>>=3,W-=3}else{for(K=Ct+7;W<K;){if(nt===0)break t;nt--,U+=tt[G++]<<W,W+=8}W-=Ct,L=0,ut=11+(127&(U>>>=Ct)),U>>>=7,W-=7}if(N.have+ut>N.nlen+N.ndist){H.msg="invalid bit length repeat",N.mode=30;break}for(;ut--;)N.lens[N.have++]=L}}if(N.mode===30)break;if(N.lens[256]===0){H.msg="invalid code -- missing end-of-block",N.mode=30;break}if(N.lenbits=9,rt={bits:N.lenbits},ft=d(f,N.lens,0,N.nlen,N.lencode,0,N.work,rt),N.lenbits=rt.bits,ft){H.msg="invalid literal/lengths set",N.mode=30;break}if(N.distbits=6,N.distcode=N.distdyn,rt={bits:N.distbits},ft=d(p,N.lens,N.nlen,N.ndist,N.distcode,0,N.work,rt),N.distbits=rt.bits,ft){H.msg="invalid distances set",N.mode=30;break}if(N.mode=20,J===6)break t;case 20:N.mode=21;case 21:if(6<=nt&&258<=Tt){H.next_out=gt,H.avail_out=Tt,H.next_in=G,H.avail_in=nt,N.hold=U,N.bits=W,h(H,lt),gt=H.next_out,$=H.output,Tt=H.avail_out,G=H.next_in,tt=H.input,nt=H.avail_in,U=N.hold,W=N.bits,N.mode===12&&(N.back=-1);break}for(N.back=0;xt=(Z=N.lencode[U&(1<<N.lenbits)-1])>>>16&255,Bt=65535&Z,!((Ct=Z>>>24)<=W);){if(nt===0)break t;nt--,U+=tt[G++]<<W,W+=8}if(xt&&(240&xt)==0){for(jt=Ct,Ut=xt,Ft=Bt;xt=(Z=N.lencode[Ft+((U&(1<<jt+Ut)-1)>>jt)])>>>16&255,Bt=65535&Z,!(jt+(Ct=Z>>>24)<=W);){if(nt===0)break t;nt--,U+=tt[G++]<<W,W+=8}U>>>=jt,W-=jt,N.back+=jt}if(U>>>=Ct,W-=Ct,N.back+=Ct,N.length=Bt,xt===0){N.mode=26;break}if(32&xt){N.back=-1,N.mode=12;break}if(64&xt){H.msg="invalid literal/length code",N.mode=30;break}N.extra=15&xt,N.mode=22;case 22:if(N.extra){for(K=N.extra;W<K;){if(nt===0)break t;nt--,U+=tt[G++]<<W,W+=8}N.length+=U&(1<<N.extra)-1,U>>>=N.extra,W-=N.extra,N.back+=N.extra}N.was=N.length,N.mode=23;case 23:for(;xt=(Z=N.distcode[U&(1<<N.distbits)-1])>>>16&255,Bt=65535&Z,!((Ct=Z>>>24)<=W);){if(nt===0)break t;nt--,U+=tt[G++]<<W,W+=8}if((240&xt)==0){for(jt=Ct,Ut=xt,Ft=Bt;xt=(Z=N.distcode[Ft+((U&(1<<jt+Ut)-1)>>jt)])>>>16&255,Bt=65535&Z,!(jt+(Ct=Z>>>24)<=W);){if(nt===0)break t;nt--,U+=tt[G++]<<W,W+=8}U>>>=jt,W-=jt,N.back+=jt}if(U>>>=Ct,W-=Ct,N.back+=Ct,64&xt){H.msg="invalid distance code",N.mode=30;break}N.offset=Bt,N.extra=15&xt,N.mode=24;case 24:if(N.extra){for(K=N.extra;W<K;){if(nt===0)break t;nt--,U+=tt[G++]<<W,W+=8}N.offset+=U&(1<<N.extra)-1,U>>>=N.extra,W-=N.extra,N.back+=N.extra}if(N.offset>N.dmax){H.msg="invalid distance too far back",N.mode=30;break}N.mode=25;case 25:if(Tt===0)break t;if(ut=lt-Tt,N.offset>ut){if((ut=N.offset-ut)>N.whave&&N.sane){H.msg="invalid distance too far back",N.mode=30;break}Rt=ut>N.wnext?(ut-=N.wnext,N.wsize-ut):N.wnext-ut,ut>N.length&&(ut=N.length),St=N.window}else St=$,Rt=gt-N.offset,ut=N.length;for(Tt<ut&&(ut=Tt),Tt-=ut,N.length-=ut;$[gt++]=St[Rt++],--ut;);N.length===0&&(N.mode=21);break;case 26:if(Tt===0)break t;$[gt++]=N.length,Tt--,N.mode=21;break;case 27:if(N.wrap){for(;W<32;){if(nt===0)break t;nt--,U|=tt[G++]<<W,W+=8}if(lt-=Tt,H.total_out+=lt,N.total+=lt,lt&&(H.adler=N.check=N.flags?c(N.check,$,lt,gt-lt):o(N.check,$,lt,gt-lt)),lt=Tt,(N.flags?U:_(U))!==N.check){H.msg="incorrect data check",N.mode=30;break}W=U=0}N.mode=28;case 28:if(N.wrap&&N.flags){for(;W<32;){if(nt===0)break t;nt--,U+=tt[G++]<<W,W+=8}if(U!==(4294967295&N.total)){H.msg="incorrect length check",N.mode=30;break}W=U=0}N.mode=29;case 29:ft=1;break t;case 30:ft=-3;break t;case 31:return-4;default:return y}return H.next_out=gt,H.avail_out=Tt,H.next_in=G,H.avail_in=nt,N.hold=U,N.bits=W,(N.wsize||lt!==H.avail_out&&N.mode<30&&(N.mode<27||J!==4))&&Q(H,H.output,H.next_out,lt-H.avail_out)?(N.mode=31,-4):(st-=H.avail_in,lt-=H.avail_out,H.total_in+=st,H.total_out+=lt,N.total+=lt,N.wrap&&lt&&(H.adler=N.check=N.flags?c(N.check,$,lt,H.next_out-lt):o(N.check,$,lt,H.next_out-lt)),H.data_type=N.bits+(N.last?64:0)+(N.mode===12?128:0)+(N.mode===20||N.mode===15?256:0),(st==0&&lt===0||J===4)&&ft===m&&(ft=-5),ft)},i.inflateEnd=function(H){if(!H||!H.state)return y;var J=H.state;return J.window&&(J.window=null),H.state=null,m},i.inflateGetHeader=function(H,J){var N;return H&&H.state?(2&(N=H.state).wrap)==0?y:((N.head=J).done=!1,m):y},i.inflateSetDictionary=function(H,J){var N,tt=J.length;return H&&H.state?(N=H.state).wrap!==0&&N.mode!==11?y:N.mode===11&&o(1,J,tt,0)!==N.check?-3:Q(H,J,tt,tt)?(N.mode=31,-4):(N.havedict=1,m):y},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,n,i){var r=e("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],h=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(f,p,m,y,w,b,E,_){var k,T,R,D,F,j,I,O,X,Q=_.bits,H=0,J=0,N=0,tt=0,$=0,G=0,gt=0,nt=0,Tt=0,U=0,W=null,st=0,lt=new r.Buf16(16),ut=new r.Buf16(16),Rt=null,St=0;for(H=0;H<=15;H++)lt[H]=0;for(J=0;J<y;J++)lt[p[m+J]]++;for($=Q,tt=15;1<=tt&&lt[tt]===0;tt--);if(tt<$&&($=tt),tt===0)return w[b++]=20971520,w[b++]=20971520,_.bits=1,0;for(N=1;N<tt&&lt[N]===0;N++);for($<N&&($=N),H=nt=1;H<=15;H++)if(nt<<=1,(nt-=lt[H])<0)return-1;if(0<nt&&(f===0||tt!==1))return-1;for(ut[1]=0,H=1;H<15;H++)ut[H+1]=ut[H]+lt[H];for(J=0;J<y;J++)p[m+J]!==0&&(E[ut[p[m+J]]++]=J);if(j=f===0?(W=Rt=E,19):f===1?(W=o,st-=257,Rt=c,St-=257,256):(W=h,Rt=d,-1),H=N,F=b,gt=J=U=0,R=-1,D=(Tt=1<<(G=$))-1,f===1&&852<Tt||f===2&&592<Tt)return 1;for(;;){for(I=H-gt,X=E[J]<j?(O=0,E[J]):E[J]>j?(O=Rt[St+E[J]],W[st+E[J]]):(O=96,0),k=1<<H-gt,N=T=1<<G;w[F+(U>>gt)+(T-=k)]=I<<24|O<<16|X|0,T!==0;);for(k=1<<H-1;U&k;)k>>=1;if(k!==0?(U&=k-1,U+=k):U=0,J++,--lt[H]==0){if(H===tt)break;H=p[m+E[J]]}if($<H&&(U&D)!==R){for(gt===0&&(gt=$),F+=N,nt=1<<(G=H-gt);G+gt<tt&&!((nt-=lt[G+gt])<=0);)G++,nt<<=1;if(Tt+=1<<G,f===1&&852<Tt||f===2&&592<Tt)return 1;w[R=U&D]=$<<24|G<<16|F-b|0}}return U!==0&&(w[F+U]=H-gt<<24|64<<16|0),_.bits=$,0}},{"../utils/common":41}],51:[function(e,n,i){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,n,i){var r=e("../utils/common"),o=0,c=1;function h(Z){for(var ot=Z.length;0<=--ot;)Z[ot]=0}var d=0,f=29,p=256,m=p+1+f,y=30,w=19,b=2*m+1,E=15,_=16,k=7,T=256,R=16,D=17,F=18,j=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],I=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],X=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Q=new Array(2*(m+2));h(Q);var H=new Array(2*y);h(H);var J=new Array(512);h(J);var N=new Array(256);h(N);var tt=new Array(f);h(tt);var $,G,gt,nt=new Array(y);function Tt(Z,ot,kt,Mt,pt){this.static_tree=Z,this.extra_bits=ot,this.extra_base=kt,this.elems=Mt,this.max_length=pt,this.has_stree=Z&&Z.length}function U(Z,ot){this.dyn_tree=Z,this.max_code=0,this.stat_desc=ot}function W(Z){return Z<256?J[Z]:J[256+(Z>>>7)]}function st(Z,ot){Z.pending_buf[Z.pending++]=255&ot,Z.pending_buf[Z.pending++]=ot>>>8&255}function lt(Z,ot,kt){Z.bi_valid>_-kt?(Z.bi_buf|=ot<<Z.bi_valid&65535,st(Z,Z.bi_buf),Z.bi_buf=ot>>_-Z.bi_valid,Z.bi_valid+=kt-_):(Z.bi_buf|=ot<<Z.bi_valid&65535,Z.bi_valid+=kt)}function ut(Z,ot,kt){lt(Z,kt[2*ot],kt[2*ot+1])}function Rt(Z,ot){for(var kt=0;kt|=1&Z,Z>>>=1,kt<<=1,0<--ot;);return kt>>>1}function St(Z,ot,kt){var Mt,pt,Lt=new Array(E+1),It=0;for(Mt=1;Mt<=E;Mt++)Lt[Mt]=It=It+kt[Mt-1]<<1;for(pt=0;pt<=ot;pt++){var Et=Z[2*pt+1];Et!==0&&(Z[2*pt]=Rt(Lt[Et]++,Et))}}function Ct(Z){var ot;for(ot=0;ot<m;ot++)Z.dyn_ltree[2*ot]=0;for(ot=0;ot<y;ot++)Z.dyn_dtree[2*ot]=0;for(ot=0;ot<w;ot++)Z.bl_tree[2*ot]=0;Z.dyn_ltree[2*T]=1,Z.opt_len=Z.static_len=0,Z.last_lit=Z.matches=0}function xt(Z){8<Z.bi_valid?st(Z,Z.bi_buf):0<Z.bi_valid&&(Z.pending_buf[Z.pending++]=Z.bi_buf),Z.bi_buf=0,Z.bi_valid=0}function Bt(Z,ot,kt,Mt){var pt=2*ot,Lt=2*kt;return Z[pt]<Z[Lt]||Z[pt]===Z[Lt]&&Mt[ot]<=Mt[kt]}function jt(Z,ot,kt){for(var Mt=Z.heap[kt],pt=kt<<1;pt<=Z.heap_len&&(pt<Z.heap_len&&Bt(ot,Z.heap[pt+1],Z.heap[pt],Z.depth)&&pt++,!Bt(ot,Mt,Z.heap[pt],Z.depth));)Z.heap[kt]=Z.heap[pt],kt=pt,pt<<=1;Z.heap[kt]=Mt}function Ut(Z,ot,kt){var Mt,pt,Lt,It,Et=0;if(Z.last_lit!==0)for(;Mt=Z.pending_buf[Z.d_buf+2*Et]<<8|Z.pending_buf[Z.d_buf+2*Et+1],pt=Z.pending_buf[Z.l_buf+Et],Et++,Mt===0?ut(Z,pt,ot):(ut(Z,(Lt=N[pt])+p+1,ot),(It=j[Lt])!==0&&lt(Z,pt-=tt[Lt],It),ut(Z,Lt=W(--Mt),kt),(It=I[Lt])!==0&&lt(Z,Mt-=nt[Lt],It)),Et<Z.last_lit;);ut(Z,T,ot)}function Ft(Z,ot){var kt,Mt,pt,Lt=ot.dyn_tree,It=ot.stat_desc.static_tree,Et=ot.stat_desc.has_stree,zt=ot.stat_desc.elems,Jt=-1;for(Z.heap_len=0,Z.heap_max=b,kt=0;kt<zt;kt++)Lt[2*kt]!==0?(Z.heap[++Z.heap_len]=Jt=kt,Z.depth[kt]=0):Lt[2*kt+1]=0;for(;Z.heap_len<2;)Lt[2*(pt=Z.heap[++Z.heap_len]=Jt<2?++Jt:0)]=1,Z.depth[pt]=0,Z.opt_len--,Et&&(Z.static_len-=It[2*pt+1]);for(ot.max_code=Jt,kt=Z.heap_len>>1;1<=kt;kt--)jt(Z,Lt,kt);for(pt=zt;kt=Z.heap[1],Z.heap[1]=Z.heap[Z.heap_len--],jt(Z,Lt,1),Mt=Z.heap[1],Z.heap[--Z.heap_max]=kt,Z.heap[--Z.heap_max]=Mt,Lt[2*pt]=Lt[2*kt]+Lt[2*Mt],Z.depth[pt]=(Z.depth[kt]>=Z.depth[Mt]?Z.depth[kt]:Z.depth[Mt])+1,Lt[2*kt+1]=Lt[2*Mt+1]=pt,Z.heap[1]=pt++,jt(Z,Lt,1),2<=Z.heap_len;);Z.heap[--Z.heap_max]=Z.heap[1],(function(Ht,we){var C,M,z,et,dt,_t,Ot=we.dyn_tree,Re=we.max_code,cn=we.stat_desc.static_tree,Ne=we.stat_desc.has_stree,_e=we.stat_desc.extra_bits,Oe=we.stat_desc.extra_base,Js=we.stat_desc.max_length,hs=0;for(et=0;et<=E;et++)Ht.bl_count[et]=0;for(Ot[2*Ht.heap[Ht.heap_max]+1]=0,C=Ht.heap_max+1;C<b;C++)Js<(et=Ot[2*Ot[2*(M=Ht.heap[C])+1]+1]+1)&&(et=Js,hs++),Ot[2*M+1]=et,Re<M||(Ht.bl_count[et]++,dt=0,Oe<=M&&(dt=_e[M-Oe]),_t=Ot[2*M],Ht.opt_len+=_t*(et+dt),Ne&&(Ht.static_len+=_t*(cn[2*M+1]+dt)));if(hs!==0){do{for(et=Js-1;Ht.bl_count[et]===0;)et--;Ht.bl_count[et]--,Ht.bl_count[et+1]+=2,Ht.bl_count[Js]--,hs-=2}while(0<hs);for(et=Js;et!==0;et--)for(M=Ht.bl_count[et];M!==0;)Re<(z=Ht.heap[--C])||(Ot[2*z+1]!==et&&(Ht.opt_len+=(et-Ot[2*z+1])*Ot[2*z],Ot[2*z+1]=et),M--)}})(Z,ot),St(Lt,Jt,Z.bl_count)}function L(Z,ot,kt){var Mt,pt,Lt=-1,It=ot[1],Et=0,zt=7,Jt=4;for(It===0&&(zt=138,Jt=3),ot[2*(kt+1)+1]=65535,Mt=0;Mt<=kt;Mt++)pt=It,It=ot[2*(Mt+1)+1],++Et<zt&&pt===It||(Et<Jt?Z.bl_tree[2*pt]+=Et:pt!==0?(pt!==Lt&&Z.bl_tree[2*pt]++,Z.bl_tree[2*R]++):Et<=10?Z.bl_tree[2*D]++:Z.bl_tree[2*F]++,Lt=pt,Jt=(Et=0)===It?(zt=138,3):pt===It?(zt=6,3):(zt=7,4))}function ft(Z,ot,kt){var Mt,pt,Lt=-1,It=ot[1],Et=0,zt=7,Jt=4;for(It===0&&(zt=138,Jt=3),Mt=0;Mt<=kt;Mt++)if(pt=It,It=ot[2*(Mt+1)+1],!(++Et<zt&&pt===It)){if(Et<Jt)for(;ut(Z,pt,Z.bl_tree),--Et!=0;);else pt!==0?(pt!==Lt&&(ut(Z,pt,Z.bl_tree),Et--),ut(Z,R,Z.bl_tree),lt(Z,Et-3,2)):Et<=10?(ut(Z,D,Z.bl_tree),lt(Z,Et-3,3)):(ut(Z,F,Z.bl_tree),lt(Z,Et-11,7));Lt=pt,Jt=(Et=0)===It?(zt=138,3):pt===It?(zt=6,3):(zt=7,4)}}h(nt);var rt=!1;function K(Z,ot,kt,Mt){lt(Z,(d<<1)+(Mt?1:0),3),(function(pt,Lt,It,Et){xt(pt),st(pt,It),st(pt,~It),r.arraySet(pt.pending_buf,pt.window,Lt,It,pt.pending),pt.pending+=It})(Z,ot,kt)}i._tr_init=function(Z){rt||((function(){var ot,kt,Mt,pt,Lt,It=new Array(E+1);for(pt=Mt=0;pt<f-1;pt++)for(tt[pt]=Mt,ot=0;ot<1<<j[pt];ot++)N[Mt++]=pt;for(N[Mt-1]=pt,pt=Lt=0;pt<16;pt++)for(nt[pt]=Lt,ot=0;ot<1<<I[pt];ot++)J[Lt++]=pt;for(Lt>>=7;pt<y;pt++)for(nt[pt]=Lt<<7,ot=0;ot<1<<I[pt]-7;ot++)J[256+Lt++]=pt;for(kt=0;kt<=E;kt++)It[kt]=0;for(ot=0;ot<=143;)Q[2*ot+1]=8,ot++,It[8]++;for(;ot<=255;)Q[2*ot+1]=9,ot++,It[9]++;for(;ot<=279;)Q[2*ot+1]=7,ot++,It[7]++;for(;ot<=287;)Q[2*ot+1]=8,ot++,It[8]++;for(St(Q,m+1,It),ot=0;ot<y;ot++)H[2*ot+1]=5,H[2*ot]=Rt(ot,5);$=new Tt(Q,j,p+1,m,E),G=new Tt(H,I,0,y,E),gt=new Tt(new Array(0),O,0,w,k)})(),rt=!0),Z.l_desc=new U(Z.dyn_ltree,$),Z.d_desc=new U(Z.dyn_dtree,G),Z.bl_desc=new U(Z.bl_tree,gt),Z.bi_buf=0,Z.bi_valid=0,Ct(Z)},i._tr_stored_block=K,i._tr_flush_block=function(Z,ot,kt,Mt){var pt,Lt,It=0;0<Z.level?(Z.strm.data_type===2&&(Z.strm.data_type=(function(Et){var zt,Jt=4093624447;for(zt=0;zt<=31;zt++,Jt>>>=1)if(1&Jt&&Et.dyn_ltree[2*zt]!==0)return o;if(Et.dyn_ltree[18]!==0||Et.dyn_ltree[20]!==0||Et.dyn_ltree[26]!==0)return c;for(zt=32;zt<p;zt++)if(Et.dyn_ltree[2*zt]!==0)return c;return o})(Z)),Ft(Z,Z.l_desc),Ft(Z,Z.d_desc),It=(function(Et){var zt;for(L(Et,Et.dyn_ltree,Et.l_desc.max_code),L(Et,Et.dyn_dtree,Et.d_desc.max_code),Ft(Et,Et.bl_desc),zt=w-1;3<=zt&&Et.bl_tree[2*X[zt]+1]===0;zt--);return Et.opt_len+=3*(zt+1)+5+5+4,zt})(Z),pt=Z.opt_len+3+7>>>3,(Lt=Z.static_len+3+7>>>3)<=pt&&(pt=Lt)):pt=Lt=kt+5,kt+4<=pt&&ot!==-1?K(Z,ot,kt,Mt):Z.strategy===4||Lt===pt?(lt(Z,2+(Mt?1:0),3),Ut(Z,Q,H)):(lt(Z,4+(Mt?1:0),3),(function(Et,zt,Jt,Ht){var we;for(lt(Et,zt-257,5),lt(Et,Jt-1,5),lt(Et,Ht-4,4),we=0;we<Ht;we++)lt(Et,Et.bl_tree[2*X[we]+1],3);ft(Et,Et.dyn_ltree,zt-1),ft(Et,Et.dyn_dtree,Jt-1)})(Z,Z.l_desc.max_code+1,Z.d_desc.max_code+1,It+1),Ut(Z,Z.dyn_ltree,Z.dyn_dtree)),Ct(Z),Mt&&xt(Z)},i._tr_tally=function(Z,ot,kt){return Z.pending_buf[Z.d_buf+2*Z.last_lit]=ot>>>8&255,Z.pending_buf[Z.d_buf+2*Z.last_lit+1]=255&ot,Z.pending_buf[Z.l_buf+Z.last_lit]=255&kt,Z.last_lit++,ot===0?Z.dyn_ltree[2*kt]++:(Z.matches++,ot--,Z.dyn_ltree[2*(N[kt]+p+1)]++,Z.dyn_dtree[2*W(ot)]++),Z.last_lit===Z.lit_bufsize-1},i._tr_align=function(Z){lt(Z,2,3),ut(Z,T,Q),(function(ot){ot.bi_valid===16?(st(ot,ot.bi_buf),ot.bi_buf=0,ot.bi_valid=0):8<=ot.bi_valid&&(ot.pending_buf[ot.pending++]=255&ot.bi_buf,ot.bi_buf>>=8,ot.bi_valid-=8)})(Z)}},{"../utils/common":41}],53:[function(e,n,i){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,n,i){(function(r){(function(o,c){if(!o.setImmediate){var h,d,f,p,m=1,y={},w=!1,b=o.document,E=Object.getPrototypeOf&&Object.getPrototypeOf(o);E=E&&E.setTimeout?E:o,h={}.toString.call(o.process)==="[object process]"?function(R){process.nextTick(function(){k(R)})}:(function(){if(o.postMessage&&!o.importScripts){var R=!0,D=o.onmessage;return o.onmessage=function(){R=!1},o.postMessage("","*"),o.onmessage=D,R}})()?(p="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",T,!1):o.attachEvent("onmessage",T),function(R){o.postMessage(p+R,"*")}):o.MessageChannel?((f=new MessageChannel).port1.onmessage=function(R){k(R.data)},function(R){f.port2.postMessage(R)}):b&&"onreadystatechange"in b.createElement("script")?(d=b.documentElement,function(R){var D=b.createElement("script");D.onreadystatechange=function(){k(R),D.onreadystatechange=null,d.removeChild(D),D=null},d.appendChild(D)}):function(R){setTimeout(k,0,R)},E.setImmediate=function(R){typeof R!="function"&&(R=new Function(""+R));for(var D=new Array(arguments.length-1),F=0;F<D.length;F++)D[F]=arguments[F+1];var j={callback:R,args:D};return y[m]=j,h(m),m++},E.clearImmediate=_}function _(R){delete y[R]}function k(R){if(w)setTimeout(k,0,R);else{var D=y[R];if(D){w=!0;try{(function(F){var j=F.callback,I=F.args;switch(I.length){case 0:j();break;case 1:j(I[0]);break;case 2:j(I[0],I[1]);break;case 3:j(I[0],I[1],I[2]);break;default:j.apply(c,I)}})(D)}finally{_(R),w=!1}}}}function T(R){R.source===o&&typeof R.data=="string"&&R.data.indexOf(p)===0&&k(+R.data.slice(p.length))}})(typeof self>"u"?r===void 0?this:r:self)}).call(this,typeof Bm<"u"?Bm:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(qw)),qw.exports}var Jj=Qj();const tB=u2(Jj);var pn;(function(s){s.OfficeDocument="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",s.FontTable="http://schemas.openxmlformats.org/officeDocument/2006/relationships/fontTable",s.Image="http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",s.Numbering="http://schemas.openxmlformats.org/officeDocument/2006/relationships/numbering",s.Styles="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",s.StylesWithEffects="http://schemas.microsoft.com/office/2007/relationships/stylesWithEffects",s.Theme="http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",s.Settings="http://schemas.openxmlformats.org/officeDocument/2006/relationships/settings",s.WebSettings="http://schemas.openxmlformats.org/officeDocument/2006/relationships/webSettings",s.Hyperlink="http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",s.Footnotes="http://schemas.openxmlformats.org/officeDocument/2006/relationships/footnotes",s.Endnotes="http://schemas.openxmlformats.org/officeDocument/2006/relationships/endnotes",s.Footer="http://schemas.openxmlformats.org/officeDocument/2006/relationships/footer",s.Header="http://schemas.openxmlformats.org/officeDocument/2006/relationships/header",s.ExtendedProperties="http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",s.CoreProperties="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",s.CustomProperties="http://schemas.openxmlformats.org/package/2006/relationships/metadata/custom-properties",s.Comments="http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",s.CommentsExtended="http://schemas.microsoft.com/office/2011/relationships/commentsExtended",s.AltChunk="http://schemas.openxmlformats.org/officeDocument/2006/relationships/aFChunk"})(pn||(pn={}));function eB(s,t){return t.elements(s).map(e=>({id:t.attr(e,"Id"),type:t.attr(e,"Type"),target:t.attr(e,"Target"),targetMode:t.attr(e,"TargetMode")}))}function nB(s){return s?.replace(/[ .]+/g,"-").replace(/[&]+/g,"and").toLowerCase()}function QA(s){return/^[^"'].*\s.*[^"']$/.test(s)?`'${s}'`:s}function T0(s){let t=s.lastIndexOf("/")+1,e=t==0?"":s.substring(0,t),n=t==0?s:s.substring(t);return[e,n]}function Yw(s,t){try{const e="http://docx/";return new URL(s,e+t).toString().substring(e.length)}catch{return`${t}${s}`}}function Co(s,t){return s.reduce((e,n)=>(e[t(n)]=n,e),{})}function iB(s){return new Promise((t,e)=>{const n=new FileReader;n.onloadend=()=>t(n.result),n.onerror=()=>e(),n.readAsDataURL(s)})}function Xw(s){return s&&typeof s=="object"&&!Array.isArray(s)}function sB(s){return typeof s=="string"||s instanceof String}function Iv(s,...t){if(!t.length)return s;const e=t.shift();if(Xw(s)&&Xw(e))for(const n in e)if(Xw(e[n])){const i=s[n]??(s[n]={});Iv(i,e[n])}else s[n]=e[n];return Iv(s,...t)}function ef(s){return Array.isArray(s)?s:[s]}function rB(s,t,e){return t>s?t:e<s?e:s}const SD={wordml:"http://schemas.openxmlformats.org/wordprocessingml/2006/main"},_n={Dxa:{mul:.05,unit:"pt"},Emu:{mul:1/12700,unit:"pt"},FontSize:{mul:.5,unit:"pt"},Border:{mul:.125,unit:"pt",min:.25,max:12},Point:{mul:1,unit:"pt"},Percent:{mul:.02,unit:"%"}};function _D(s,t=_n.Dxa){if(s==null||/.+(p[xt]|[%])$/.test(s))return s;var e=parseInt(s)*t.mul;return t.min&&t.max&&(e=rB(e,t.min,t.max)),`${e.toFixed(2)}${t.unit}`}function aB(s,t=!1){switch(s){case"1":return!0;case"0":return!1;case"on":return!0;case"off":return!1;case"true":return!0;case"false":return!1;default:return t}}function ED(s,t,e){if(s.namespaceURI!=SD.wordml)return!1;switch(s.localName){case"color":t.color=e.attr(s,"val");break;case"sz":t.fontSize=e.lengthAttr(s,"val",_n.FontSize);break;default:return!1}return!0}function oB(s,t=!1){t&&(s=s.replace(/<[?].*[?]>/,"")),s=cB(s);const e=new DOMParser().parseFromString(s,"application/xml"),n=lB(e);if(n)throw new Error(n);return e}function lB(s){return s.getElementsByTagName("parsererror")[0]?.textContent}function cB(s){return s.charCodeAt(0)===65279?s.substring(1):s}function hB(s){return new XMLSerializer().serializeToString(s)}class CD{elements(t,e=null){const n=[];for(let i=0,r=t.childNodes.length;i<r;i++){let o=t.childNodes.item(i);o.nodeType==Node.ELEMENT_NODE&&(e==null||o.localName==e)&&n.push(o)}return n}element(t,e){for(let n=0,i=t.childNodes.length;n<i;n++){let r=t.childNodes.item(n);if(r.nodeType==1&&r.localName==e)return r}return null}elementAttr(t,e,n){var i=this.element(t,e);return i?this.attr(i,n):void 0}attrs(t){return Array.from(t.attributes)}attr(t,e){for(let n=0,i=t.attributes.length;n<i;n++){let r=t.attributes.item(n);if(r.localName==e)return r.value}return null}intAttr(t,e,n=null){var i=this.attr(t,e);return i?parseInt(i):n}hexAttr(t,e,n=null){var i=this.attr(t,e);return i?parseInt(i,16):n}floatAttr(t,e,n=null){var i=this.attr(t,e);return i?parseFloat(i):n}boolAttr(t,e,n=null){return aB(this.attr(t,e),n)}lengthAttr(t,e,n=_n.Dxa){return _D(this.attr(t,e),n)}}const ht=new CD;class cs{constructor(t,e){this._package=t,this.path=e}async load(){this.rels=await this._package.loadRelationships(this.path);const t=await this._package.load(this.path),e=this._package.parseXmlDocument(t);this._package.options.keepOrigin&&(this._xmlDocument=e),this.parseXml(e.firstElementChild)}save(){this._package.update(this.path,hB(this._xmlDocument))}parseXml(t){}}const uB={embedRegular:"regular",embedBold:"bold",embedItalic:"italic",embedBoldItalic:"boldItalic"};function dB(s,t){return t.elements(s).map(e=>fB(e,t))}function fB(s,t){let e={name:t.attr(s,"name"),embedFontRefs:[]};for(let n of t.elements(s))switch(n.localName){case"family":e.family=t.attr(n,"val");break;case"altName":e.altName=t.attr(n,"val");break;case"embedRegular":case"embedBold":case"embedItalic":case"embedBoldItalic":e.embedFontRefs.push(pB(n,t));break}return e}function pB(s,t){return{id:t.attr(s,"id"),key:t.attr(s,"fontKey"),type:uB[s.localName]}}class gB extends cs{parseXml(t){this.fonts=dB(t,this._package.xmlParser)}}class f2{constructor(t,e){this._zip=t,this.options=e,this.xmlParser=new CD}get(t){const e=mB(t);return this._zip.files[e]??this._zip.files[e.replace(/\//g,"\\")]}update(t,e){this._zip.file(t,e)}static async load(t,e){const n=await tB.loadAsync(t);return new f2(n,e)}save(t="blob"){return this._zip.generateAsync({type:t})}load(t,e="string"){return this.get(t)?.async(e)??Promise.resolve(null)}async loadRelationships(t=null){let e="_rels/.rels";if(t!=null){const[i,r]=T0(t);e=`${i}_rels/${r}.rels`}const n=await this.load(e);return n?eB(this.parseXmlDocument(n).firstElementChild,this.xmlParser):null}parseXmlDocument(t){return oB(t,this.options.trimXmlDeclaration)}}function mB(s){return s.startsWith("/")?s.substr(1):s}class yB extends cs{constructor(t,e,n){super(t,e),this._documentParser=n}parseXml(t){this.body=this._documentParser.parseDocumentFile(t)}}function Um(s,t){return{type:t.attr(s,"val"),color:t.attr(s,"color"),size:t.lengthAttr(s,"sz",_n.Border),offset:t.lengthAttr(s,"space",_n.Point),frame:t.boolAttr(s,"frame"),shadow:t.boolAttr(s,"shadow")}}function vB(s,t){var e={};for(let n of t.elements(s))switch(n.localName){case"left":e.left=Um(n,t);break;case"top":e.top=Um(n,t);break;case"right":e.right=Um(n,t);break;case"bottom":e.bottom=Um(n,t);break}return e}var OR;(function(s){s.Continuous="continuous",s.NextPage="nextPage",s.NextColumn="nextColumn",s.EvenPage="evenPage",s.OddPage="oddPage"})(OR||(OR={}));function kD(s,t=ht){var e={};for(let n of t.elements(s))switch(n.localName){case"pgSz":e.pageSize={width:t.lengthAttr(n,"w"),height:t.lengthAttr(n,"h"),orientation:t.attr(n,"orient")};break;case"type":e.type=t.attr(n,"val");break;case"pgMar":e.pageMargins={left:t.lengthAttr(n,"left"),right:t.lengthAttr(n,"right"),top:t.lengthAttr(n,"top"),bottom:t.lengthAttr(n,"bottom"),header:t.lengthAttr(n,"header"),footer:t.lengthAttr(n,"footer"),gutter:t.lengthAttr(n,"gutter")};break;case"cols":e.columns=bB(n,t);break;case"headerReference":(e.headerRefs??(e.headerRefs=[])).push(IR(n,t));break;case"footerReference":(e.footerRefs??(e.footerRefs=[])).push(IR(n,t));break;case"titlePg":e.titlePage=t.boolAttr(n,"val",!0);break;case"pgBorders":e.pageBorders=vB(n,t);break;case"pgNumType":e.pageNumber=xB(n,t);break}return e}function bB(s,t){return{numberOfColumns:t.intAttr(s,"num"),space:t.lengthAttr(s,"space"),separator:t.boolAttr(s,"sep"),equalWidth:t.boolAttr(s,"equalWidth",!0),columns:t.elements(s,"col").map(e=>({width:t.lengthAttr(e,"w"),space:t.lengthAttr(e,"space")}))}}function xB(s,t){return{chapSep:t.attr(s,"chapSep"),chapStyle:t.attr(s,"chapStyle"),format:t.attr(s,"fmt"),start:t.intAttr(s,"start")}}function IR(s,t){return{id:t.attr(s,"id"),type:t.attr(s,"type")}}function wB(s,t){return{before:t.lengthAttr(s,"before"),after:t.lengthAttr(s,"after"),line:t.intAttr(s,"line"),lineRule:t.attr(s,"lineRule")}}function p2(s,t){let e={};for(let n of t.elements(s))AB(n,e,t);return e}function AB(s,t,e){return!!ED(s,t,e)}function TD(s,t){let e={};for(let n of t.elements(s))MD(n,e,t);return e}function MD(s,t,e){if(s.namespaceURI!=SD.wordml)return!1;if(ED(s,t,e))return!0;switch(s.localName){case"tabs":t.tabs=SB(s,e);break;case"sectPr":t.sectionProps=kD(s,e);break;case"numPr":t.numbering=_B(s,e);break;case"spacing":return t.lineSpacing=wB(s,e),!1;case"textAlignment":return t.textAlignment=e.attr(s,"val"),!1;case"keepLines":t.keepLines=e.boolAttr(s,"val",!0);break;case"keepNext":t.keepNext=e.boolAttr(s,"val",!0);break;case"pageBreakBefore":t.pageBreakBefore=e.boolAttr(s,"val",!0);break;case"outlineLvl":t.outlineLevel=e.intAttr(s,"val");break;case"pStyle":t.styleName=e.attr(s,"val");break;case"rPr":t.runProps=p2(s,e);break;default:return!1}return!0}function SB(s,t){return t.elements(s,"tab").map(e=>({position:t.lengthAttr(e,"pos"),leader:t.attr(e,"leader"),style:t.attr(e,"val")}))}function _B(s,t){var e={};for(let n of t.elements(s))switch(n.localName){case"numId":e.id=t.attr(n,"val");break;case"ilvl":e.level=t.intAttr(n,"val");break}return e}function EB(s,t){let e={numberings:[],abstractNumberings:[],bulletPictures:[]};for(let n of t.elements(s))switch(n.localName){case"num":e.numberings.push(CB(n,t));break;case"abstractNum":e.abstractNumberings.push(kB(n,t));break;case"numPicBullet":e.bulletPictures.push(MB(n,t));break}return e}function CB(s,t){let e={id:t.attr(s,"numId"),overrides:[]};for(let n of t.elements(s))switch(n.localName){case"abstractNumId":e.abstractId=t.attr(n,"val");break;case"lvlOverride":e.overrides.push(TB(n,t));break}return e}function kB(s,t){let e={id:t.attr(s,"abstractNumId"),levels:[]};for(let n of t.elements(s))switch(n.localName){case"name":e.name=t.attr(n,"val");break;case"multiLevelType":e.multiLevelType=t.attr(n,"val");break;case"numStyleLink":e.numberingStyleLink=t.attr(n,"val");break;case"styleLink":e.styleLink=t.attr(n,"val");break;case"lvl":e.levels.push(RD(n,t));break}return e}function RD(s,t){let e={level:t.intAttr(s,"ilvl")};for(let n of t.elements(s))switch(n.localName){case"start":e.start=t.attr(n,"val");break;case"lvlRestart":e.restart=t.intAttr(n,"val");break;case"numFmt":e.format=t.attr(n,"val");break;case"lvlText":e.text=t.attr(n,"val");break;case"lvlJc":e.justification=t.attr(n,"val");break;case"lvlPicBulletId":e.bulletPictureId=t.attr(n,"val");break;case"pStyle":e.paragraphStyle=t.attr(n,"val");break;case"pPr":e.paragraphProps=TD(n,t);break;case"rPr":e.runProps=p2(n,t);break}return e}function TB(s,t){let e={level:t.intAttr(s,"ilvl")};for(let n of t.elements(s))switch(n.localName){case"startOverride":e.start=t.intAttr(n,"val");break;case"lvl":e.numberingLevel=RD(n,t);break}return e}function MB(s,t){var e=t.element(s,"pict"),n=e&&t.element(e,"shape"),i=n&&t.element(n,"imagedata");return i?{id:t.attr(s,"numPicBulletId"),referenceId:t.attr(i,"id"),style:t.attr(n,"style")}:null}class RB extends cs{constructor(t,e,n){super(t,e),this._documentParser=n}parseXml(t){Object.assign(this,EB(t,this._package.xmlParser)),this.domNumberings=this._documentParser.parseNumberingFile(t)}}class PB extends cs{constructor(t,e,n){super(t,e),this._documentParser=n}parseXml(t){this.styles=this._documentParser.parseStylesFile(t)}}var At;(function(s){s.Document="document",s.Paragraph="paragraph",s.Run="run",s.Break="break",s.NoBreakHyphen="noBreakHyphen",s.Table="table",s.Row="row",s.Cell="cell",s.Hyperlink="hyperlink",s.SmartTag="smartTag",s.Drawing="drawing",s.Image="image",s.Text="text",s.Tab="tab",s.Symbol="symbol",s.BookmarkStart="bookmarkStart",s.BookmarkEnd="bookmarkEnd",s.Footer="footer",s.Header="header",s.FootnoteReference="footnoteReference",s.EndnoteReference="endnoteReference",s.Footnote="footnote",s.Endnote="endnote",s.SimpleField="simpleField",s.ComplexField="complexField",s.Instruction="instruction",s.VmlPicture="vmlPicture",s.MmlMath="mmlMath",s.MmlMathParagraph="mmlMathParagraph",s.MmlFraction="mmlFraction",s.MmlFunction="mmlFunction",s.MmlFunctionName="mmlFunctionName",s.MmlNumerator="mmlNumerator",s.MmlDenominator="mmlDenominator",s.MmlRadical="mmlRadical",s.MmlBase="mmlBase",s.MmlDegree="mmlDegree",s.MmlSuperscript="mmlSuperscript",s.MmlSubscript="mmlSubscript",s.MmlPreSubSuper="mmlPreSubSuper",s.MmlSubArgument="mmlSubArgument",s.MmlSuperArgument="mmlSuperArgument",s.MmlNary="mmlNary",s.MmlDelimiter="mmlDelimiter",s.MmlRun="mmlRun",s.MmlEquationArray="mmlEquationArray",s.MmlLimit="mmlLimit",s.MmlLimitLower="mmlLimitLower",s.MmlMatrix="mmlMatrix",s.MmlMatrixRow="mmlMatrixRow",s.MmlBox="mmlBox",s.MmlBar="mmlBar",s.MmlGroupChar="mmlGroupChar",s.VmlElement="vmlElement",s.Inserted="inserted",s.Deleted="deleted",s.DeletedText="deletedText",s.Comment="comment",s.CommentReference="commentReference",s.CommentRangeStart="commentRangeStart",s.CommentRangeEnd="commentRangeEnd",s.AltChunk="altChunk"})(At||(At={}));class xc{constructor(){this.children=[],this.cssStyle={}}}class LB extends xc{constructor(){super(...arguments),this.type=At.Header}}class DB extends xc{constructor(){super(...arguments),this.type=At.Footer}}class PD extends cs{constructor(t,e,n){super(t,e),this._documentParser=n}parseXml(t){this.rootElement=this.createRootElement(),this.rootElement.children=this._documentParser.parseBodyElements(t)}}class NB extends PD{createRootElement(){return new LB}}class OB extends PD{createRootElement(){return new DB}}function IB(s,t){const e={};for(let n of t.elements(s))switch(n.localName){case"Template":e.template=n.textContent;break;case"Pages":e.pages=nf(n.textContent);break;case"Words":e.words=nf(n.textContent);break;case"Characters":e.characters=nf(n.textContent);break;case"Application":e.application=n.textContent;break;case"Lines":e.lines=nf(n.textContent);break;case"Paragraphs":e.paragraphs=nf(n.textContent);break;case"Company":e.company=n.textContent;break;case"AppVersion":e.appVersion=n.textContent;break}return e}function nf(s){if(!(typeof s>"u"))return parseInt(s)}class jB extends cs{parseXml(t){this.props=IB(t,this._package.xmlParser)}}function BB(s,t){const e={};for(let n of t.elements(s))switch(n.localName){case"title":e.title=n.textContent;break;case"description":e.description=n.textContent;break;case"subject":e.subject=n.textContent;break;case"creator":e.creator=n.textContent;break;case"keywords":e.keywords=n.textContent;break;case"language":e.language=n.textContent;break;case"lastModifiedBy":e.lastModifiedBy=n.textContent;break;case"revision":n.textContent&&(e.revision=parseInt(n.textContent));break}return e}class FB extends cs{parseXml(t){this.props=BB(t,this._package.xmlParser)}}class zB{}function UB(s,t){var e=new zB,n=t.element(s,"themeElements");for(let i of t.elements(n))switch(i.localName){case"clrScheme":e.colorScheme=HB(i,t);break;case"fontScheme":e.fontScheme=WB(i,t);break}return e}function HB(s,t){var e={name:t.attr(s,"name"),colors:{}};for(let r of t.elements(s)){var n=t.element(r,"srgbClr"),i=t.element(r,"sysClr");n?e.colors[r.localName]=t.attr(n,"val"):i&&(e.colors[r.localName]=t.attr(i,"lastClr"))}return e}function WB(s,t){var e={name:t.attr(s,"name")};for(let n of t.elements(s))switch(n.localName){case"majorFont":e.majorFont=jR(n,t);break;case"minorFont":e.minorFont=jR(n,t);break}return e}function jR(s,t){return{latinTypeface:t.elementAttr(s,"latin","typeface"),eaTypeface:t.elementAttr(s,"ea","typeface"),csTypeface:t.elementAttr(s,"cs","typeface")}}class GB extends cs{constructor(t,e){super(t,e)}parseXml(t){this.theme=UB(t,this._package.xmlParser)}}class LD{}class VB extends LD{constructor(){super(...arguments),this.type=At.Footnote}}class $B extends LD{constructor(){super(...arguments),this.type=At.Endnote}}class DD extends cs{constructor(t,e,n){super(t,e),this._documentParser=n}}class qB extends DD{constructor(t,e,n){super(t,e,n)}parseXml(t){this.notes=this._documentParser.parseNotes(t,"footnote",VB)}}class YB extends DD{constructor(t,e,n){super(t,e,n)}parseXml(t){this.notes=this._documentParser.parseNotes(t,"endnote",$B)}}function XB(s,t){var e={};for(let n of t.elements(s))switch(n.localName){case"defaultTabStop":e.defaultTabStop=t.lengthAttr(n,"val");break;case"footnotePr":e.footnoteProps=BR(n,t);break;case"endnotePr":e.endnoteProps=BR(n,t);break;case"autoHyphenation":e.autoHyphenation=t.boolAttr(n,"val");break}return e}function BR(s,t){var e={defaultNoteIds:[]};for(let n of t.elements(s))switch(n.localName){case"numFmt":e.nummeringFormat=t.attr(n,"val");break;case"footnote":case"endnote":e.defaultNoteIds.push(t.attr(n,"id"));break}return e}class KB extends cs{constructor(t,e){super(t,e)}parseXml(t){this.settings=XB(t,this._package.xmlParser)}}function ZB(s,t){return t.elements(s,"property").map(e=>{const n=e.firstChild;return{formatId:t.attr(e,"fmtid"),name:t.attr(e,"name"),type:n.nodeName,value:n.textContent}})}class QB extends cs{parseXml(t){this.props=ZB(t,this._package.xmlParser)}}class JB extends cs{constructor(t,e,n){super(t,e),this._documentParser=n}parseXml(t){this.comments=this._documentParser.parseComments(t),this.commentMap=Co(this.comments,e=>e.id)}}class tF extends cs{constructor(t,e){super(t,e),this.comments=[]}parseXml(t){const e=this._package.xmlParser;for(let n of e.elements(t,"commentEx"))this.comments.push({paraId:e.attr(n,"paraId"),paraIdParent:e.attr(n,"paraIdParent"),done:e.boolAttr(n,"done")});this.commentMap=Co(this.comments,n=>n.paraId)}}const eF=[{type:pn.OfficeDocument,target:"word/document.xml"},{type:pn.ExtendedProperties,target:"docProps/app.xml"},{type:pn.CoreProperties,target:"docProps/core.xml"},{type:pn.CustomProperties,target:"docProps/custom.xml"}];class g2{constructor(){this.parts=[],this.partsMap={}}static async load(t,e,n){var i=new g2;return i._options=n,i._parser=e,i._package=await f2.load(t,n),i.rels=await i._package.loadRelationships(),await Promise.all(eF.map(r=>{const o=i.rels.find(c=>c.type===r.type)??r;return i.loadRelationshipPart(o.target,o.type)})),i}save(t="blob"){return this._package.save(t)}async loadRelationshipPart(t,e){if(this.partsMap[t])return this.partsMap[t];if(!this._package.get(t))return null;let n=null;switch(e){case pn.OfficeDocument:this.documentPart=n=new yB(this._package,t,this._parser);break;case pn.FontTable:this.fontTablePart=n=new gB(this._package,t);break;case pn.Numbering:this.numberingPart=n=new RB(this._package,t,this._parser);break;case pn.Styles:this.stylesPart=n=new PB(this._package,t,this._parser);break;case pn.Theme:this.themePart=n=new GB(this._package,t);break;case pn.Footnotes:this.footnotesPart=n=new qB(this._package,t,this._parser);break;case pn.Endnotes:this.endnotesPart=n=new YB(this._package,t,this._parser);break;case pn.Footer:n=new OB(this._package,t,this._parser);break;case pn.Header:n=new NB(this._package,t,this._parser);break;case pn.CoreProperties:this.corePropsPart=n=new FB(this._package,t);break;case pn.ExtendedProperties:this.extendedPropsPart=n=new jB(this._package,t);break;case pn.CustomProperties:n=new QB(this._package,t);break;case pn.Settings:this.settingsPart=n=new KB(this._package,t);break;case pn.Comments:this.commentsPart=n=new JB(this._package,t,this._parser);break;case pn.CommentsExtended:this.commentsExtendedPart=n=new tF(this._package,t);break}if(n==null)return Promise.resolve(null);if(this.partsMap[t]=n,this.parts.push(n),await n.load(),n.rels?.length>0){const[i]=T0(n.path);await Promise.all(n.rels.map(r=>this.loadRelationshipPart(Yw(r.target,i),r.type)))}return n}async loadDocumentImage(t,e){const n=await this.loadResource(e??this.documentPart,t,"blob");return this.blobToURL(n)}async loadNumberingImage(t){const e=await this.loadResource(this.numberingPart,t,"blob");return this.blobToURL(e)}async loadFont(t,e){const n=await this.loadResource(this.fontTablePart,t,"uint8array");return n&&this.blobToURL(new Blob([nF(n,e)]))}async loadAltChunk(t,e){return await this.loadResource(e??this.documentPart,t,"string")}blobToURL(t){return t?this._options.useBase64URL?iB(t):URL.createObjectURL(t):null}findPartByRelId(t,e=null){var n=(e.rels??this.rels).find(r=>r.id==t);const i=e?T0(e.path)[0]:"";return n?this.partsMap[Yw(n.target,i)]:null}getPathById(t,e){const n=t.rels.find(r=>r.id==e),[i]=T0(t.path);return n?Yw(n.target,i):null}loadResource(t,e,n){const i=this.getPathById(t,e);return i?this._package.load(i,n):Promise.resolve(null)}}function nF(s,t){const n=t.replace(/{|}|-/g,""),i=new Array(16);for(let r=0;r<16;r++)i[16-r-1]=parseInt(n.substring(r*2,r*2+2),16);for(let r=0;r<32;r++)s[r]=s[r]^i[r%16];return s}function iF(s,t){return{type:At.BookmarkStart,id:t.attr(s,"id"),name:t.attr(s,"name"),colFirst:t.intAttr(s,"colFirst"),colLast:t.intAttr(s,"colLast")}}function sF(s,t){return{type:At.BookmarkEnd,id:t.attr(s,"id")}}class rF extends xc{constructor(){super(...arguments),this.type=At.VmlElement,this.attrs={}}}function ND(s,t){var e=new rF;switch(s.localName){case"rect":e.tagName="rect",Object.assign(e.attrs,{width:"100%",height:"100%"});break;case"oval":e.tagName="ellipse",Object.assign(e.attrs,{cx:"50%",cy:"50%",rx:"50%",ry:"50%"});break;case"line":e.tagName="line";break;case"shape":e.tagName="g";break;case"textbox":e.tagName="foreignObject",Object.assign(e.attrs,{width:"100%",height:"100%"});break;default:return null}for(const n of ht.attrs(s))switch(n.localName){case"style":e.cssStyleText=n.value;break;case"fillcolor":e.attrs.fill=n.value;break;case"from":const[i,r]=FR(n.value);Object.assign(e.attrs,{x1:i,y1:r});break;case"to":const[o,c]=FR(n.value);Object.assign(e.attrs,{x2:o,y2:c});break}for(const n of ht.elements(s))switch(n.localName){case"stroke":Object.assign(e.attrs,aF(n));break;case"fill":Object.assign(e.attrs,oF());break;case"imagedata":e.tagName="image",Object.assign(e.attrs,{width:"100%",height:"100%"}),e.imageHref={id:ht.attr(n,"id"),title:ht.attr(n,"title")};break;case"txbxContent":e.children.push(...t.parseBodyElements(n));break;default:const i=ND(n,t);i&&e.children.push(i);break}return e}function aF(s){return{stroke:ht.attr(s,"color"),"stroke-width":ht.lengthAttr(s,"weight",_n.Emu)??"1px"}}function oF(s){return{}}function FR(s){return s.split(",")}class lF extends xc{constructor(){super(...arguments),this.type=At.Comment}}class cF extends xc{constructor(t){super(),this.id=t,this.type=At.CommentReference}}class hF extends xc{constructor(t){super(),this.id=t,this.type=At.CommentRangeStart}}class uF extends xc{constructor(t){super(),this.id=t,this.type=At.CommentRangeEnd}}var M0={shd:"inherit",color:"black",borderColor:"black",highlight:"transparent"};const dF=[],zR={oMath:At.MmlMath,oMathPara:At.MmlMathParagraph,f:At.MmlFraction,func:At.MmlFunction,fName:At.MmlFunctionName,num:At.MmlNumerator,den:At.MmlDenominator,rad:At.MmlRadical,deg:At.MmlDegree,e:At.MmlBase,sSup:At.MmlSuperscript,sSub:At.MmlSubscript,sPre:At.MmlPreSubSuper,sup:At.MmlSuperArgument,sub:At.MmlSubArgument,d:At.MmlDelimiter,nary:At.MmlNary,eqArr:At.MmlEquationArray,lim:At.MmlLimit,limLow:At.MmlLimitLower,m:At.MmlMatrix,mr:At.MmlMatrixRow,box:At.MmlBox,bar:At.MmlBar,groupChr:At.MmlGroupChar};class fF{constructor(t){this.options={ignoreWidth:!1,debug:!1,...t}}parseNotes(t,e,n){var i=[];for(let r of ht.elements(t,e)){const o=new n;o.id=ht.attr(r,"id"),o.noteType=ht.attr(r,"type"),o.children=this.parseBodyElements(r),i.push(o)}return i}parseComments(t){var e=[];for(let n of ht.elements(t,"comment")){const i=new lF;i.id=ht.attr(n,"id"),i.author=ht.attr(n,"author"),i.initials=ht.attr(n,"initials"),i.date=ht.attr(n,"date"),i.children=this.parseBodyElements(n),e.push(i)}return e}parseDocumentFile(t){var e=ht.element(t,"body"),n=ht.element(t,"background"),i=ht.element(e,"sectPr");return{type:At.Document,children:this.parseBodyElements(e),props:i?kD(i,ht):{},cssStyle:n?this.parseBackground(n):{}}}parseBackground(t){var e={},n=Sh.colorAttr(t,"color");return n&&(e["background-color"]=n),e}parseBodyElements(t){var e=[];for(const n of ht.elements(t))switch(n.localName){case"p":e.push(this.parseParagraph(n));break;case"altChunk":e.push(this.parseAltChunk(n));break;case"tbl":e.push(this.parseTable(n));break;case"sdt":e.push(...this.parseSdt(n,i=>this.parseBodyElements(i)));break}return e}parseStylesFile(t){var e=[];for(const n of ht.elements(t))switch(n.localName){case"style":e.push(this.parseStyle(n));break;case"docDefaults":e.push(this.parseDefaultStyles(n));break}return e}parseDefaultStyles(t){var e={id:null,name:null,target:null,basedOn:null,styles:[]};for(const r of ht.elements(t))switch(r.localName){case"rPrDefault":var n=ht.element(r,"rPr");n&&e.styles.push({target:"span",values:this.parseDefaultProperties(n,{})});break;case"pPrDefault":var i=ht.element(r,"pPr");i&&e.styles.push({target:"p",values:this.parseDefaultProperties(i,{})});break}return e}parseStyle(t){var e={id:ht.attr(t,"styleId"),isDefault:ht.boolAttr(t,"default"),name:null,target:null,basedOn:null,styles:[],linked:null};switch(ht.attr(t,"type")){case"paragraph":e.target="p";break;case"table":e.target="table";break;case"character":e.target="span";break}for(const n of ht.elements(t))switch(n.localName){case"basedOn":e.basedOn=ht.attr(n,"val");break;case"name":e.name=ht.attr(n,"val");break;case"link":e.linked=ht.attr(n,"val");break;case"next":e.next=ht.attr(n,"val");break;case"aliases":e.aliases=ht.attr(n,"val").split(",");break;case"pPr":e.styles.push({target:"p",values:this.parseDefaultProperties(n,{})}),e.paragraphProps=TD(n,ht);break;case"rPr":e.styles.push({target:"span",values:this.parseDefaultProperties(n,{})}),e.runProps=p2(n,ht);break;case"tblPr":case"tcPr":e.styles.push({target:"td",values:this.parseDefaultProperties(n,{})});break;case"tblStylePr":for(let i of this.parseTableStyle(n))e.styles.push(i);break;case"rsid":case"qFormat":case"hidden":case"semiHidden":case"unhideWhenUsed":case"autoRedefine":case"uiPriority":break;default:this.options.debug&&console.warn(`DOCX: Unknown style element: ${n.localName}`)}return e}parseTableStyle(t){var e=[],n=ht.attr(t,"type"),i="",r="";switch(n){case"firstRow":r=".first-row",i="tr.first-row td";break;case"lastRow":r=".last-row",i="tr.last-row td";break;case"firstCol":r=".first-col",i="td.first-col";break;case"lastCol":r=".last-col",i="td.last-col";break;case"band1Vert":r=":not(.no-vband)",i="td.odd-col";break;case"band2Vert":r=":not(.no-vband)",i="td.even-col";break;case"band1Horz":r=":not(.no-hband)",i="tr.odd-row";break;case"band2Horz":r=":not(.no-hband)",i="tr.even-row";break;default:return[]}for(const o of ht.elements(t))switch(o.localName){case"pPr":e.push({target:`${i} p`,mod:r,values:this.parseDefaultProperties(o,{})});break;case"rPr":e.push({target:`${i} span`,mod:r,values:this.parseDefaultProperties(o,{})});break;case"tblPr":case"tcPr":e.push({target:i,mod:r,values:this.parseDefaultProperties(o,{})});break}return e}parseNumberingFile(t){var e=[],n={},i=[];for(const c of ht.elements(t))switch(c.localName){case"abstractNum":this.parseAbstractNumbering(c,i).forEach(h=>e.push(h));break;case"numPicBullet":i.push(this.parseNumberingPicBullet(c));break;case"num":var r=ht.attr(c,"numId"),o=ht.elementAttr(c,"abstractNumId","val");n[o]=r;break}return e.forEach(c=>c.id=n[c.id]),e}parseNumberingPicBullet(t){var e=ht.element(t,"pict"),n=e&&ht.element(e,"shape"),i=n&&ht.element(n,"imagedata");return i?{id:ht.intAttr(t,"numPicBulletId"),src:ht.attr(i,"id"),style:ht.attr(n,"style")}:null}parseAbstractNumbering(t,e){var n=[],i=ht.attr(t,"abstractNumId");for(const r of ht.elements(t))r.localName==="lvl"&&n.push(this.parseNumberingLevel(i,r,e));return n}parseNumberingLevel(t,e,n){var i={id:t,level:ht.intAttr(e,"ilvl"),start:1,pStyleName:void 0,pStyle:{},rStyle:{},suff:"tab"};for(const o of ht.elements(e))switch(o.localName){case"start":i.start=ht.intAttr(o,"val");break;case"pPr":this.parseDefaultProperties(o,i.pStyle);break;case"rPr":this.parseDefaultProperties(o,i.rStyle);break;case"lvlPicBulletId":var r=ht.intAttr(o,"val");i.bullet=n.find(c=>c?.id==r);break;case"lvlText":i.levelText=ht.attr(o,"val");break;case"pStyle":i.pStyleName=ht.attr(o,"val");break;case"numFmt":i.format=ht.attr(o,"val");break;case"suff":i.suff=ht.attr(o,"val");break}return i}parseSdt(t,e){const n=ht.element(t,"sdtContent");return n?e(n):[]}parseInserted(t,e){return{type:At.Inserted,children:e(t)?.children??[]}}parseDeleted(t,e){return{type:At.Deleted,children:e(t)?.children??[]}}parseAltChunk(t){return{type:At.AltChunk,children:[],id:ht.attr(t,"id")}}parseParagraph(t){var e={type:At.Paragraph,children:[]};for(let n of ht.elements(t))switch(n.localName){case"pPr":this.parseParagraphProperties(n,e);break;case"r":e.children.push(this.parseRun(n,e));break;case"hyperlink":e.children.push(this.parseHyperlink(n,e));break;case"smartTag":e.children.push(this.parseSmartTag(n,e));break;case"bookmarkStart":e.children.push(iF(n,ht));break;case"bookmarkEnd":e.children.push(sF(n,ht));break;case"commentRangeStart":e.children.push(new hF(ht.attr(n,"id")));break;case"commentRangeEnd":e.children.push(new uF(ht.attr(n,"id")));break;case"oMath":case"oMathPara":e.children.push(this.parseMathElement(n));break;case"sdt":e.children.push(...this.parseSdt(n,i=>this.parseParagraph(i).children));break;case"ins":e.children.push(this.parseInserted(n,i=>this.parseParagraph(i)));break;case"del":e.children.push(this.parseDeleted(n,i=>this.parseParagraph(i)));break}return e}parseParagraphProperties(t,e){this.parseDefaultProperties(t,e.cssStyle={},null,n=>{if(MD(n,e,ht))return!0;switch(n.localName){case"pStyle":e.styleName=ht.attr(n,"val");break;case"cnfStyle":e.className=Ge.classNameOfCnfStyle(n);break;case"framePr":this.parseFrame(n,e);break;case"rPr":break;default:return!1}return!0})}parseFrame(t,e){var n=ht.attr(t,"dropCap");n=="drop"&&(e.cssStyle.float="left")}parseHyperlink(t,e){var n={type:At.Hyperlink,parent:e,children:[]};n.anchor=ht.attr(t,"anchor"),n.id=ht.attr(t,"id");for(const i of ht.elements(t))i.localName==="r"&&n.children.push(this.parseRun(i,n));return n}parseSmartTag(t,e){var n={type:At.SmartTag,parent:e,children:[]},i=ht.attr(t,"uri"),r=ht.attr(t,"element");i&&(n.uri=i),r&&(n.element=r);for(const o of ht.elements(t))o.localName==="r"&&n.children.push(this.parseRun(o,n));return n}parseRun(t,e){var n={type:At.Run,parent:e,children:[]};for(let i of ht.elements(t))switch(i=this.checkAlternateContent(i),i.localName){case"t":n.children.push({type:At.Text,text:i.textContent});break;case"delText":n.children.push({type:At.DeletedText,text:i.textContent});break;case"commentReference":n.children.push(new cF(ht.attr(i,"id")));break;case"fldSimple":n.children.push({type:At.SimpleField,instruction:ht.attr(i,"instr"),lock:ht.boolAttr(i,"lock",!1),dirty:ht.boolAttr(i,"dirty",!1)});break;case"instrText":n.fieldRun=!0,n.children.push({type:At.Instruction,text:i.textContent});break;case"fldChar":n.fieldRun=!0,n.children.push({type:At.ComplexField,charType:ht.attr(i,"fldCharType"),lock:ht.boolAttr(i,"lock",!1),dirty:ht.boolAttr(i,"dirty",!1)});break;case"noBreakHyphen":n.children.push({type:At.NoBreakHyphen});break;case"br":n.children.push({type:At.Break,break:ht.attr(i,"type")||"textWrapping"});break;case"lastRenderedPageBreak":n.children.push({type:At.Break,break:"lastRenderedPageBreak"});break;case"sym":n.children.push({type:At.Symbol,font:QA(ht.attr(i,"font")),char:ht.attr(i,"char")});break;case"tab":n.children.push({type:At.Tab});break;case"footnoteReference":n.children.push({type:At.FootnoteReference,id:ht.attr(i,"id")});break;case"endnoteReference":n.children.push({type:At.EndnoteReference,id:ht.attr(i,"id")});break;case"drawing":let r=this.parseDrawing(i);r&&(n.children=[r]);break;case"pict":n.children.push(this.parseVmlPicture(i));break;case"rPr":this.parseRunProperties(i,n);break}return n}parseMathElement(t){const e=`${t.localName}Pr`,n={type:zR[t.localName],children:[]};for(const r of ht.elements(t))if(zR[r.localName])n.children.push(this.parseMathElement(r));else if(r.localName=="r"){var i=this.parseRun(r);i.type=At.MmlRun,n.children.push(i)}else r.localName==e&&(n.props=this.parseMathProperies(r));return n}parseMathProperies(t){const e={};for(const n of ht.elements(t))switch(n.localName){case"chr":e.char=ht.attr(n,"val");break;case"vertJc":e.verticalJustification=ht.attr(n,"val");break;case"pos":e.position=ht.attr(n,"val");break;case"degHide":e.hideDegree=ht.boolAttr(n,"val");break;case"begChr":e.beginChar=ht.attr(n,"val");break;case"endChr":e.endChar=ht.attr(n,"val");break}return e}parseRunProperties(t,e){this.parseDefaultProperties(t,e.cssStyle={},null,n=>{switch(n.localName){case"rStyle":e.styleName=ht.attr(n,"val");break;case"vertAlign":e.verticalAlign=Ge.valueOfVertAlign(n,!0);break;default:return!1}return!0})}parseVmlPicture(t){const e={type:At.VmlPicture,children:[]};for(const n of ht.elements(t)){const i=ND(n,this);i&&e.children.push(i)}return e}checkAlternateContent(t){if(t.localName!="AlternateContent")return t;var e=ht.element(t,"Choice");if(e){var n=ht.attr(e,"Requires"),i=t.lookupNamespaceURI(n);if(dF.includes(i))return e.firstElementChild}return ht.element(t,"Fallback")?.firstElementChild}parseDrawing(t){for(var e of ht.elements(t))switch(e.localName){case"inline":case"anchor":return this.parseDrawingWrapper(e)}}parseDrawingWrapper(t){var e={type:At.Drawing,children:[],cssStyle:{}},n=t.localName=="anchor";let i=null,r=ht.boolAttr(t,"simplePos");ht.boolAttr(t,"behindDoc");let o={relative:"page",align:"left",offset:"0"},c={relative:"page",align:"top",offset:"0"};for(var h of ht.elements(t))switch(h.localName){case"simplePos":r&&(o.offset=ht.lengthAttr(h,"x",_n.Emu),c.offset=ht.lengthAttr(h,"y",_n.Emu));break;case"extent":e.cssStyle.width=ht.lengthAttr(h,"cx",_n.Emu),e.cssStyle.height=ht.lengthAttr(h,"cy",_n.Emu);break;case"positionH":case"positionV":if(!r){let m=h.localName=="positionH"?o:c;var d=ht.element(h,"align"),f=ht.element(h,"posOffset");m.relative=ht.attr(h,"relativeFrom")??m.relative,d&&(m.align=d.textContent),f&&(m.offset=_D(f.textContent,_n.Emu))}break;case"wrapTopAndBottom":i="wrapTopAndBottom";break;case"wrapNone":i="wrapNone";break;case"graphic":var p=this.parseGraphic(h);p&&e.children.push(p);break}return i=="wrapTopAndBottom"?(e.cssStyle.display="block",o.align&&(e.cssStyle["text-align"]=o.align,e.cssStyle.width="100%")):i=="wrapNone"?(e.cssStyle.display="block",e.cssStyle.position="relative",e.cssStyle.width="0px",e.cssStyle.height="0px",o.offset&&(e.cssStyle.left=o.offset),c.offset&&(e.cssStyle.top=c.offset)):n&&(o.align=="left"||o.align=="right")&&(e.cssStyle.float=o.align),e}parseGraphic(t){var e=ht.element(t,"graphicData");for(let n of ht.elements(e))if(n.localName==="pic")return this.parsePicture(n);return null}parsePicture(t){var e={type:At.Image,src:"",cssStyle:{}},n=ht.element(t,"blipFill"),i=ht.element(n,"blip"),r=ht.element(n,"srcRect");e.src=ht.attr(i,"embed"),r&&(e.srcRect=[ht.intAttr(r,"l",0)/1e5,ht.intAttr(r,"t",0)/1e5,ht.intAttr(r,"r",0)/1e5,ht.intAttr(r,"b",0)/1e5]);var o=ht.element(t,"spPr"),c=ht.element(o,"xfrm");if(e.cssStyle.position="relative",c){e.rotation=ht.intAttr(c,"rot",0)/6e4;for(var h of ht.elements(c))switch(h.localName){case"ext":e.cssStyle.width=ht.lengthAttr(h,"cx",_n.Emu),e.cssStyle.height=ht.lengthAttr(h,"cy",_n.Emu);break;case"off":e.cssStyle.left=ht.lengthAttr(h,"x",_n.Emu),e.cssStyle.top=ht.lengthAttr(h,"y",_n.Emu);break}}return e}parseTable(t){var e={type:At.Table,children:[]};for(const n of ht.elements(t))switch(n.localName){case"tr":e.children.push(this.parseTableRow(n));break;case"tblGrid":e.columns=this.parseTableColumns(n);break;case"tblPr":this.parseTableProperties(n,e);break}return e}parseTableColumns(t){var e=[];for(const n of ht.elements(t))n.localName==="gridCol"&&e.push({width:ht.lengthAttr(n,"w")});return e}parseTableProperties(t,e){switch(e.cssStyle={},e.cellStyle={},this.parseDefaultProperties(t,e.cssStyle,e.cellStyle,n=>{switch(n.localName){case"tblStyle":e.styleName=ht.attr(n,"val");break;case"tblLook":e.className=Ge.classNameOftblLook(n);break;case"tblpPr":this.parseTablePosition(n,e);break;case"tblStyleColBandSize":e.colBandSize=ht.intAttr(n,"val");break;case"tblStyleRowBandSize":e.rowBandSize=ht.intAttr(n,"val");break;case"hidden":e.cssStyle.display="none";break;default:return!1}return!0}),e.cssStyle["text-align"]){case"center":delete e.cssStyle["text-align"],e.cssStyle["margin-left"]="auto",e.cssStyle["margin-right"]="auto";break;case"right":delete e.cssStyle["text-align"],e.cssStyle["margin-left"]="auto";break}}parseTablePosition(t,e){var n=ht.lengthAttr(t,"topFromText"),i=ht.lengthAttr(t,"bottomFromText"),r=ht.lengthAttr(t,"rightFromText"),o=ht.lengthAttr(t,"leftFromText");e.cssStyle.float="left",e.cssStyle["margin-bottom"]=Ge.addSize(e.cssStyle["margin-bottom"],i),e.cssStyle["margin-left"]=Ge.addSize(e.cssStyle["margin-left"],o),e.cssStyle["margin-right"]=Ge.addSize(e.cssStyle["margin-right"],r),e.cssStyle["margin-top"]=Ge.addSize(e.cssStyle["margin-top"],n)}parseTableRow(t){var e={type:At.Row,children:[]};for(const n of ht.elements(t))switch(n.localName){case"tc":e.children.push(this.parseTableCell(n));break;case"trPr":case"tblPrEx":this.parseTableRowProperties(n,e);break}return e}parseTableRowProperties(t,e){e.cssStyle=this.parseDefaultProperties(t,{},null,n=>{switch(n.localName){case"cnfStyle":e.className=Ge.classNameOfCnfStyle(n);break;case"tblHeader":e.isHeader=ht.boolAttr(n,"val");break;case"gridBefore":e.gridBefore=ht.intAttr(n,"val");break;case"gridAfter":e.gridAfter=ht.intAttr(n,"val");break;default:return!1}return!0})}parseTableCell(t){var e={type:At.Cell,children:[]};for(const n of ht.elements(t))switch(n.localName){case"tbl":e.children.push(this.parseTable(n));break;case"p":e.children.push(this.parseParagraph(n));break;case"tcPr":this.parseTableCellProperties(n,e);break}return e}parseTableCellProperties(t,e){e.cssStyle=this.parseDefaultProperties(t,{},null,n=>{switch(n.localName){case"gridSpan":e.span=ht.intAttr(n,"val",null);break;case"vMerge":e.verticalMerge=ht.attr(n,"val")??"continue";break;case"cnfStyle":e.className=Ge.classNameOfCnfStyle(n);break;default:return!1}return!0}),this.parseTableCellVerticalText(t,e)}parseTableCellVerticalText(t,e){const n={btLr:{writingMode:"vertical-rl",transform:"rotate(180deg)"},lrTb:{writingMode:"vertical-lr",transform:"none"},tbRl:{writingMode:"vertical-rl",transform:"none"}};for(const i of ht.elements(t))if(i.localName==="textDirection"){const r=ht.attr(i,"val"),o=n[r]||{writingMode:"horizontal-tb"};e.cssStyle["writing-mode"]=o.writingMode,e.cssStyle.transform=o.transform}}parseDefaultProperties(t,e=null,n=null,i=null){e=e||{};for(const r of ht.elements(t))if(!i?.(r))switch(r.localName){case"jc":e["text-align"]=Ge.valueOfJc(r);break;case"textAlignment":e["vertical-align"]=Ge.valueOfTextAlignment(r);break;case"color":e.color=Sh.colorAttr(r,"val",null,M0.color);break;case"sz":e["font-size"]=e["min-height"]=ht.lengthAttr(r,"val",_n.FontSize);break;case"shd":e["background-color"]=Sh.colorAttr(r,"fill",null,M0.shd);break;case"highlight":e["background-color"]=Sh.colorAttr(r,"val",null,M0.highlight);break;case"vertAlign":break;case"position":e.verticalAlign=ht.lengthAttr(r,"val",_n.FontSize);break;case"tcW":if(this.options.ignoreWidth)break;case"tblW":e.width=Ge.valueOfSize(r,"w");break;case"trHeight":this.parseTrHeight(r,e);break;case"strike":e["text-decoration"]=ht.boolAttr(r,"val",!0)?"line-through":"none";break;case"b":e["font-weight"]=ht.boolAttr(r,"val",!0)?"bold":"normal";break;case"i":e["font-style"]=ht.boolAttr(r,"val",!0)?"italic":"normal";break;case"caps":e["text-transform"]=ht.boolAttr(r,"val",!0)?"uppercase":"none";break;case"smallCaps":e["font-variant"]=ht.boolAttr(r,"val",!0)?"small-caps":"none";break;case"u":this.parseUnderline(r,e);break;case"ind":case"tblInd":this.parseIndentation(r,e);break;case"rFonts":this.parseFont(r,e);break;case"tblBorders":this.parseBorderProperties(r,n||e);break;case"tblCellSpacing":e["border-spacing"]=Ge.valueOfMargin(r),e["border-collapse"]="separate";break;case"pBdr":this.parseBorderProperties(r,e);break;case"bdr":e.border=Ge.valueOfBorder(r);break;case"tcBorders":this.parseBorderProperties(r,e);break;case"vanish":ht.boolAttr(r,"val",!0)&&(e.display="none");break;case"kern":break;case"noWrap":break;case"tblCellMar":case"tcMar":this.parseMarginProperties(r,n||e);break;case"tblLayout":e["table-layout"]=Ge.valueOfTblLayout(r);break;case"vAlign":e["vertical-align"]=Ge.valueOfTextAlignment(r);break;case"spacing":t.localName=="pPr"&&this.parseSpacing(r,e);break;case"wordWrap":ht.boolAttr(r,"val")&&(e["overflow-wrap"]="break-word");break;case"suppressAutoHyphens":e.hyphens=ht.boolAttr(r,"val",!0)?"none":"auto";break;case"lang":e.$lang=ht.attr(r,"val");break;case"rtl":case"bidi":ht.boolAttr(r,"val",!0)&&(e.direction="rtl");break;case"bCs":case"iCs":case"szCs":case"tabs":case"outlineLvl":case"contextualSpacing":case"tblStyleColBandSize":case"tblStyleRowBandSize":case"webHidden":case"pageBreakBefore":case"suppressLineNumbers":case"keepLines":case"keepNext":case"widowControl":case"bidi":case"rtl":case"noProof":break;default:this.options.debug&&console.warn(`DOCX: Unknown document element: ${t.localName}.${r.localName}`);break}return e}parseUnderline(t,e){var n=ht.attr(t,"val");if(n!=null){switch(n){case"dash":case"dashDotDotHeavy":case"dashDotHeavy":case"dashedHeavy":case"dashLong":case"dashLongHeavy":case"dotDash":case"dotDotDash":e["text-decoration"]="underline dashed";break;case"dotted":case"dottedHeavy":e["text-decoration"]="underline dotted";break;case"double":e["text-decoration"]="underline double";break;case"single":case"thick":e["text-decoration"]="underline";break;case"wave":case"wavyDouble":case"wavyHeavy":e["text-decoration"]="underline wavy";break;case"words":e["text-decoration"]="underline";break;case"none":e["text-decoration"]="none";break}var i=Sh.colorAttr(t,"color");i&&(e["text-decoration-color"]=i)}}parseFont(t,e){var n=ht.attr(t,"ascii"),i=Ge.themeValue(t,"asciiTheme"),r=ht.attr(t,"eastAsia"),o=[n,i,r].filter(c=>c).map(c=>QA(c));o.length>0&&(e["font-family"]=[...new Set(o)].join(", "))}parseIndentation(t,e){var n=ht.lengthAttr(t,"firstLine"),i=ht.lengthAttr(t,"hanging"),r=ht.lengthAttr(t,"left"),o=ht.lengthAttr(t,"start"),c=ht.lengthAttr(t,"right"),h=ht.lengthAttr(t,"end");n&&(e["text-indent"]=n),i&&(e["text-indent"]=`-${i}`),(r||o)&&(e["margin-inline-start"]=r||o),(c||h)&&(e["margin-inline-end"]=c||h)}parseSpacing(t,e){var n=ht.lengthAttr(t,"before"),i=ht.lengthAttr(t,"after"),r=ht.intAttr(t,"line",null),o=ht.attr(t,"lineRule");if(n&&(e["margin-top"]=n),i&&(e["margin-bottom"]=i),r!==null)switch(o){case"auto":e["line-height"]=`${(r/240).toFixed(2)}`;break;case"atLeast":e["line-height"]=`calc(100% + ${r/20}pt)`;break;default:e["line-height"]=e["min-height"]=`${r/20}pt`;break}}parseMarginProperties(t,e){for(const n of ht.elements(t))switch(n.localName){case"left":e["padding-left"]=Ge.valueOfMargin(n);break;case"right":e["padding-right"]=Ge.valueOfMargin(n);break;case"top":e["padding-top"]=Ge.valueOfMargin(n);break;case"bottom":e["padding-bottom"]=Ge.valueOfMargin(n);break}}parseTrHeight(t,e){ht.attr(t,"hRule"),e.height=ht.lengthAttr(t,"val")}parseBorderProperties(t,e){for(const n of ht.elements(t))switch(n.localName){case"start":case"left":e["border-left"]=Ge.valueOfBorder(n);break;case"end":case"right":e["border-right"]=Ge.valueOfBorder(n);break;case"top":e["border-top"]=Ge.valueOfBorder(n);break;case"bottom":e["border-bottom"]=Ge.valueOfBorder(n);break}}}const pF=["black","blue","cyan","darkBlue","darkCyan","darkGray","darkGreen","darkMagenta","darkRed","darkYellow","green","lightGray","magenta","none","red","white","yellow"];class Sh{static colorAttr(t,e,n=null,i="black"){var r=ht.attr(t,e);if(r)return r=="auto"?i:pF.includes(r)?r:`#${r}`;var o=ht.attr(t,"themeColor");return o?`var(--docx-${o}-color)`:n}}class Ge{static themeValue(t,e){var n=ht.attr(t,e);return n?`var(--docx-${n}-font)`:null}static valueOfSize(t,e){var n=_n.Dxa;switch(ht.attr(t,"type")){case"dxa":break;case"pct":n=_n.Percent;break;case"auto":return"auto"}return ht.lengthAttr(t,e,n)}static valueOfMargin(t){return ht.lengthAttr(t,"w")}static valueOfBorder(t){var e=Ge.parseBorderType(ht.attr(t,"val"));if(e=="none")return"none";var n=Sh.colorAttr(t,"color"),i=ht.lengthAttr(t,"sz",_n.Border);return`${i} ${e} ${n=="auto"?M0.borderColor:n}`}static parseBorderType(t){switch(t){case"single":return"solid";case"dashDotStroked":return"solid";case"dashed":return"dashed";case"dashSmallGap":return"dashed";case"dotDash":return"dotted";case"dotDotDash":return"dotted";case"dotted":return"dotted";case"double":return"double";case"doubleWave":return"double";case"inset":return"inset";case"nil":return"none";case"none":return"none";case"outset":return"outset";case"thick":return"solid";case"thickThinLargeGap":return"solid";case"thickThinMediumGap":return"solid";case"thickThinSmallGap":return"solid";case"thinThickLargeGap":return"solid";case"thinThickMediumGap":return"solid";case"thinThickSmallGap":return"solid";case"thinThickThinLargeGap":return"solid";case"thinThickThinMediumGap":return"solid";case"thinThickThinSmallGap":return"solid";case"threeDEmboss":return"solid";case"threeDEngrave":return"solid";case"triple":return"double";case"wave":return"solid"}return"solid"}static valueOfTblLayout(t){var e=ht.attr(t,"val");return e=="fixed"?"fixed":"auto"}static classNameOfCnfStyle(t){const e=ht.attr(t,"val");return["first-row","last-row","first-col","last-col","odd-col","even-col","odd-row","even-row","ne-cell","nw-cell","se-cell","sw-cell"].filter((i,r)=>e[r]=="1").join(" ")}static valueOfJc(t){var e=ht.attr(t,"val");switch(e){case"start":case"left":return"left";case"center":return"center";case"end":case"right":return"right";case"both":return"justify"}return e}static valueOfVertAlign(t,e=!1){var n=ht.attr(t,"val");switch(n){case"subscript":return"sub";case"superscript":return e?"sup":"super"}return e?null:n}static valueOfTextAlignment(t){var e=ht.attr(t,"val");switch(e){case"auto":case"baseline":return"baseline";case"top":return"top";case"center":return"middle";case"bottom":return"bottom"}return e}static addSize(t,e){return t==null?e:e==null?t:`calc(${t} + ${e})`}static classNameOftblLook(t){const e=ht.hexAttr(t,"val",0);let n="";return(ht.boolAttr(t,"firstRow")||e&32)&&(n+=" first-row"),(ht.boolAttr(t,"lastRow")||e&64)&&(n+=" last-row"),(ht.boolAttr(t,"firstColumn")||e&128)&&(n+=" first-col"),(ht.boolAttr(t,"lastColumn")||e&256)&&(n+=" last-col"),(ht.boolAttr(t,"noHBand")||e&512)&&(n+=" no-hband"),(ht.boolAttr(t,"noVBand")||e&1024)&&(n+=" no-vband"),n.trim()}}const UR={pos:0,leader:"none",style:"left"},gF=50;function mF(s=document.body){const t=document.createElement("div");t.style.width="100pt",s.appendChild(t);const e=100/t.offsetWidth;return s.removeChild(t),e}function yF(s,t,e,n=72/96){const i=s.closest("p"),r=s.getBoundingClientRect(),o=i.getBoundingClientRect(),c=getComputedStyle(i),h=t?.length>0?t.map(k=>({pos:HR(k.position),leader:k.leader,style:k.style})).sort((k,T)=>k.pos-T.pos):[UR],d=h[h.length-1],f=o.width*n,p=HR(e);let m=d.pos+p;if(m<f)for(;m<f&&h.length<gF;m+=p)h.push({...UR,pos:m});const y=parseFloat(c.marginLeft),w=o.left+y,b=(r.left-w)*n,E=h.find(k=>k.style!="clear"&&k.pos>b);if(E==null)return;let _=1;if(E.style=="right"||E.style=="center"){const k=Array.from(i.querySelectorAll(`.${s.className}`)),T=k.indexOf(s)+1,R=document.createRange();R.setStart(s,1),T<k.length?R.setEndBefore(k[T]):R.setEndAfter(i);const D=E.style=="center"?.5:1,F=R.getBoundingClientRect(),j=F.left+D*F.width-(o.left-y);_=E.pos-j*n}else _=E.pos-b;switch(s.innerHTML="&nbsp;",s.style.textDecoration="inherit",s.style.wordSpacing=`${_.toFixed(0)}pt`,E.leader){case"dot":case"middleDot":s.style.textDecoration="underline",s.style.textDecorationStyle="dotted";break;case"hyphen":case"heavy":case"underscore":s.style.textDecoration="underline";break}}function HR(s){return parseFloat(s)}const ge={svg:"http://www.w3.org/2000/svg",mathML:"http://www.w3.org/1998/Math/MathML"};class vF{constructor(t){this.htmlDocument=t,this.className="docx",this.styleMap={},this.currentPart=null,this.tableVerticalMerges=[],this.currentVerticalMerge=null,this.tableCellPositions=[],this.currentCellPosition=null,this.footnoteMap={},this.endnoteMap={},this.currentEndnoteIds=[],this.usedHederFooterParts=[],this.currentTabs=[],this.commentMap={},this.tasks=[],this.postRenderTasks=[]}async render(t,e,n=null,i){this.document=t,this.options=i,this.className=i.className,this.rootSelector=i.inWrapper?`.${this.className}-wrapper`:":root",this.styleMap=null,this.tasks=[],this.options.renderComments&&globalThis.Highlight&&(this.commentHighlight=new Highlight),n=n||e,WR(n),WR(e),n.appendChild(this.createComment("docxjs library predefined styles")),n.appendChild(this.renderDefaultStyle()),t.themePart&&(n.appendChild(this.createComment("docxjs document theme values")),this.renderTheme(t.themePart,n)),t.stylesPart!=null&&(this.styleMap=this.processStyles(t.stylesPart.styles),n.appendChild(this.createComment("docxjs document styles")),n.appendChild(this.renderStyles(t.stylesPart.styles))),t.numberingPart&&(this.prodessNumberings(t.numberingPart.domNumberings),n.appendChild(this.createComment("docxjs document numbering styles")),n.appendChild(this.renderNumbering(t.numberingPart.domNumberings,n))),t.footnotesPart&&(this.footnoteMap=Co(t.footnotesPart.notes,o=>o.id)),t.endnotesPart&&(this.endnoteMap=Co(t.endnotesPart.notes,o=>o.id)),t.settingsPart&&(this.defaultTabSize=t.settingsPart.settings?.defaultTabStop),!i.ignoreFonts&&t.fontTablePart&&this.renderFontTable(t.fontTablePart,n);var r=this.renderSections(t.documentPart.body);this.options.inWrapper?e.appendChild(this.renderWrapper(r)):Kw(e,r),this.commentHighlight&&i.renderComments&&CSS.highlights.set(`${this.className}-comments`,this.commentHighlight),this.postRenderTasks.forEach(o=>o()),await Promise.allSettled(this.tasks),this.refreshTabStops()}renderTheme(t,e){const n={},i=t.theme?.fontScheme;i&&(i.majorFont&&(n["--docx-majorHAnsi-font"]=i.majorFont.latinTypeface),i.minorFont&&(n["--docx-minorHAnsi-font"]=i.minorFont.latinTypeface));const r=t.theme?.colorScheme;if(r)for(let[c,h]of Object.entries(r.colors))n[`--docx-${c}-color`]=`#${h}`;const o=this.styleToString(`.${this.className}`,n);e.appendChild(this.createStyleElement(o))}renderFontTable(t,e){for(let n of t.fonts)for(let i of n.embedFontRefs)this.tasks.push(this.document.loadFont(i.id,i.key).then(r=>{const o={"font-family":QA(n.name),src:`url(${r})`};(i.type=="bold"||i.type=="boldItalic")&&(o["font-weight"]="bold"),(i.type=="italic"||i.type=="boldItalic")&&(o["font-style"]="italic");const c=this.styleToString("@font-face",o);e.appendChild(this.createComment(`docxjs ${n.name} font`)),e.appendChild(this.createStyleElement(c))}))}processStyleName(t){return t?`${this.className}_${nB(t)}`:this.className}processStyles(t){const e=Co(t.filter(i=>i.id!=null),i=>i.id);for(const i of t.filter(r=>r.basedOn)){var n=e[i.basedOn];if(n){i.paragraphProps=Iv(i.paragraphProps,n.paragraphProps),i.runProps=Iv(i.runProps,n.runProps);for(const r of n.styles){const o=i.styles.find(c=>c.target==r.target);o?this.copyStyleProperties(r.values,o.values):i.styles.push({...r,values:{...r.values}})}}else this.options.debug&&console.warn(`Can't find base style ${i.basedOn}`)}for(let i of t)i.cssName=this.processStyleName(i.id);return e}prodessNumberings(t){for(let e of t.filter(n=>n.pStyleName)){const n=this.findStyle(e.pStyleName);n?.paragraphProps?.numbering&&(n.paragraphProps.numbering.level=e.level)}}processElement(t){if(t.children)for(var e of t.children)e.parent=t,e.type==At.Table?this.processTable(e):this.processElement(e)}processTable(t){for(var e of t.children)for(var n of e.children)n.cssStyle=this.copyStyleProperties(t.cellStyle,n.cssStyle,["border-left","border-right","border-top","border-bottom","padding-left","padding-right","padding-top","padding-bottom"]),this.processElement(n)}copyStyleProperties(t,e,n=null){if(!t)return e;e==null&&(e={}),n==null&&(n=Object.getOwnPropertyNames(t));for(var i of n)t.hasOwnProperty(i)&&!e.hasOwnProperty(i)&&(e[i]=t[i]);return e}createPageElement(t,e){var n=this.createElement("section",{className:t});return e&&(e.pageMargins&&(n.style.paddingLeft=e.pageMargins.left,n.style.paddingRight=e.pageMargins.right,n.style.paddingTop=e.pageMargins.top,n.style.paddingBottom=e.pageMargins.bottom),e.pageSize&&(this.options.ignoreWidth||(n.style.width=e.pageSize.width),this.options.ignoreHeight||(n.style.minHeight=e.pageSize.height))),n}createSectionContent(t){var e=this.createElement("article");return t.columns&&t.columns.numberOfColumns&&(e.style.columnCount=`${t.columns.numberOfColumns}`,e.style.columnGap=t.columns.space,t.columns.separator&&(e.style.columnRule="1px solid black")),e}renderSections(t){const e=[];this.processElement(t);const n=this.splitBySection(t.children,t.props),i=this.groupByPageBreaks(n);let r=null;for(let c=0,h=i.length;c<h;c++){this.currentFootnoteIds=[];let f=i[c][0].sectProps;const p=this.createPageElement(this.className,f);this.renderStyleValues(t.cssStyle,p),this.options.renderHeaders&&this.renderHeaderFooter(f.headerRefs,f,e.length,r!=f,p);for(const m of i[c]){var o=this.createSectionContent(m.sectProps);this.renderElements(m.elements,o),p.appendChild(o),f=m.sectProps}this.options.renderFootnotes&&this.renderNotes(this.currentFootnoteIds,this.footnoteMap,p),this.options.renderEndnotes&&c==h-1&&this.renderNotes(this.currentEndnoteIds,this.endnoteMap,p),this.options.renderFooters&&this.renderHeaderFooter(f.footerRefs,f,e.length,r!=f,p),e.push(p),r=f}return e}renderHeaderFooter(t,e,n,i,r){if(t){var o=(e.titlePage&&i?t.find(h=>h.type=="first"):null)??(n%2==1?t.find(h=>h.type=="even"):null)??t.find(h=>h.type=="default"),c=o&&this.document.findPartByRelId(o.id,this.document.documentPart);if(c){this.currentPart=c,this.usedHederFooterParts.includes(c.path)||(this.processElement(c.rootElement),this.usedHederFooterParts.push(c.path));const[h]=this.renderElements([c.rootElement],r);e?.pageMargins&&(c.rootElement.type===At.Header?(h.style.marginTop=`calc(${e.pageMargins.header} - ${e.pageMargins.top})`,h.style.minHeight=`calc(${e.pageMargins.top} - ${e.pageMargins.header})`):c.rootElement.type===At.Footer&&(h.style.marginBottom=`calc(${e.pageMargins.footer} - ${e.pageMargins.bottom})`,h.style.minHeight=`calc(${e.pageMargins.bottom} - ${e.pageMargins.footer})`)),this.currentPart=null}}}isPageBreakElement(t){return t.type!=At.Break?!1:t.break=="lastRenderedPageBreak"?!this.options.ignoreLastRenderedPageBreak:t.break=="page"}isPageBreakSection(t,e){return!t||!e?!1:t.pageSize?.orientation!=e.pageSize?.orientation||t.pageSize?.width!=e.pageSize?.width||t.pageSize?.height!=e.pageSize?.height}splitBySection(t,e){var n={sectProps:null,elements:[],pageBreak:!1},i=[n];for(let p of t)if(p.type==At.Paragraph&&this.findStyle(p.styleName)?.paragraphProps?.pageBreakBefore&&(n.sectProps=r,n.pageBreak=!0,n={sectProps:null,elements:[],pageBreak:!1},i.push(n)),n.elements.push(p),p.type==At.Paragraph){const m=p;var r=m.sectionProps,o=-1,c=-1;if(this.options.breakPages&&m.children&&(o=m.children.findIndex(y=>(c=y.children?.findIndex(this.isPageBreakElement.bind(this))??-1,c!=-1))),(r||o!=-1)&&(n.sectProps=r,n.pageBreak=o!=-1,n={sectProps:null,elements:[],pageBreak:!1},i.push(n)),o!=-1){let y=m.children[o],w=c<y.children.length-1;if(o<m.children.length-1||w){var h=p.children,d={...p,children:h.slice(o)};if(p.children=h.slice(0,o),n.elements.push(d),w){let b=y.children,E={...y,children:b.slice(0,c)};p.children.push(E),y.children=b.slice(c)}}}}let f=null;for(let p=i.length-1;p>=0;p--)i[p].sectProps==null?i[p].sectProps=f??e:f=i[p].sectProps;return i}groupByPageBreaks(t){let e=[],n;const i=[e];for(let r of t)e.push(r),(this.options.ignoreLastRenderedPageBreak||r.pageBreak||this.isPageBreakSection(n,r.sectProps))&&i.push(e=[]),n=r.sectProps;return i.filter(r=>r.length>0)}renderWrapper(t){return this.createElement("div",{className:`${this.className}-wrapper`},t)}renderDefaultStyle(){var t=this.className,e=`
.${t}-wrapper { background: gray; padding: 30px; padding-bottom: 0px; display: flex; flex-flow: column; align-items: center; } 
.${t}-wrapper>section.${t} { background: white; box-shadow: 0 0 10px rgba(0, 0, 0, 0.5); margin-bottom: 30px; }`;this.options.hideWrapperOnPrint&&(e=`@media not print { ${e} }`);var n=`${e}
.${t} { color: black; hyphens: auto; text-underline-position: from-font; }
section.${t} { box-sizing: border-box; display: flex; flex-flow: column nowrap; position: relative; overflow: hidden; }
section.${t}>article { margin-bottom: auto; z-index: 1; }
section.${t}>footer { z-index: 1; }
.${t} table { border-collapse: collapse; }
.${t} table td, .${t} table th { vertical-align: top; }
.${t} p { margin: 0pt; min-height: 1em; }
.${t} span { white-space: pre-wrap; overflow-wrap: break-word; }
.${t} a { color: inherit; text-decoration: inherit; }
.${t} svg { fill: transparent; }
`;return this.options.renderComments&&(n+=`
.${t}-comment-ref { cursor: default; }
.${t}-comment-popover { display: none; z-index: 1000; padding: 0.5rem; background: white; position: absolute; box-shadow: 0 0 0.25rem rgba(0, 0, 0, 0.25); width: 30ch; }
.${t}-comment-ref:hover~.${t}-comment-popover { display: block; }
.${t}-comment-author,.${t}-comment-date { font-size: 0.875rem; color: #888; }
`),this.createStyleElement(n)}renderNumbering(t,e){var n="",i=[];for(var r of t){var o=`p.${this.numberingClass(r.id,r.level)}`,c="none";if(r.bullet){let h=`--${this.className}-${r.bullet.src}`.toLowerCase();n+=this.styleToString(`${o}:before`,{content:"' '",display:"inline-block",background:`var(${h})`},r.bullet.style),this.tasks.push(this.document.loadNumberingImage(r.bullet.src).then(d=>{var f=`${this.rootSelector} { ${h}: url(${d}) }`;e.appendChild(this.createStyleElement(f))}))}else if(r.levelText){let h=this.numberingCounter(r.id,r.level);const d=h+" "+(r.start-1);r.level>0&&(n+=this.styleToString(`p.${this.numberingClass(r.id,r.level-1)}`,{"counter-set":d})),i.push(d),n+=this.styleToString(`${o}:before`,{content:this.levelTextToContent(r.levelText,r.suff,r.id,this.numFormatToCssValue(r.format)),"counter-increment":h,...r.rStyle})}else c=this.numFormatToCssValue(r.format);n+=this.styleToString(o,{display:"list-item","list-style-position":"inside","list-style-type":c,...r.pStyle})}return i.length>0&&(n+=this.styleToString(this.rootSelector,{"counter-reset":i.join(" ")})),this.createStyleElement(n)}renderStyles(t){var e="";const n=this.styleMap,i=Co(t.filter(h=>h.isDefault),h=>h.target);for(const h of t){var r=h.styles;if(h.linked){var o=h.linked&&n[h.linked];o?r=r.concat(o.styles):this.options.debug&&console.warn(`Can't find linked style ${h.linked}`)}for(const d of r){var c=`${h.target??""}.${h.cssName}`;h.target!=d.target&&(c+=` ${d.target}`),i[h.target]==h&&(c=`.${this.className} ${h.target}, `+c),e+=this.styleToString(c,d.values)}}return this.createStyleElement(e)}renderNotes(t,e,n){var i=t.map(o=>e[o]).filter(o=>o);if(i.length>0){var r=this.createElement("ol",null,this.renderElements(i));n.appendChild(r)}}renderElement(t){switch(t.type){case At.Paragraph:return this.renderParagraph(t);case At.BookmarkStart:return this.renderBookmarkStart(t);case At.BookmarkEnd:return null;case At.Run:return this.renderRun(t);case At.Table:return this.renderTable(t);case At.Row:return this.renderTableRow(t);case At.Cell:return this.renderTableCell(t);case At.Hyperlink:return this.renderHyperlink(t);case At.SmartTag:return this.renderSmartTag(t);case At.Drawing:return this.renderDrawing(t);case At.Image:return this.renderImage(t);case At.Text:return this.renderText(t);case At.Text:return this.renderText(t);case At.DeletedText:return this.renderDeletedText(t);case At.Tab:return this.renderTab(t);case At.Symbol:return this.renderSymbol(t);case At.Break:return this.renderBreak(t);case At.Footer:return this.renderContainer(t,"footer");case At.Header:return this.renderContainer(t,"header");case At.Footnote:case At.Endnote:return this.renderContainer(t,"li");case At.FootnoteReference:return this.renderFootnoteReference(t);case At.EndnoteReference:return this.renderEndnoteReference(t);case At.NoBreakHyphen:return this.createElement("wbr");case At.VmlPicture:return this.renderVmlPicture(t);case At.VmlElement:return this.renderVmlElement(t);case At.MmlMath:return this.renderContainerNS(t,ge.mathML,"math",{xmlns:ge.mathML});case At.MmlMathParagraph:return this.renderContainer(t,"span");case At.MmlFraction:return this.renderContainerNS(t,ge.mathML,"mfrac");case At.MmlBase:return this.renderContainerNS(t,ge.mathML,t.parent.type==At.MmlMatrixRow?"mtd":"mrow");case At.MmlNumerator:case At.MmlDenominator:case At.MmlFunction:case At.MmlLimit:case At.MmlBox:return this.renderContainerNS(t,ge.mathML,"mrow");case At.MmlGroupChar:return this.renderMmlGroupChar(t);case At.MmlLimitLower:return this.renderContainerNS(t,ge.mathML,"munder");case At.MmlMatrix:return this.renderContainerNS(t,ge.mathML,"mtable");case At.MmlMatrixRow:return this.renderContainerNS(t,ge.mathML,"mtr");case At.MmlRadical:return this.renderMmlRadical(t);case At.MmlSuperscript:return this.renderContainerNS(t,ge.mathML,"msup");case At.MmlSubscript:return this.renderContainerNS(t,ge.mathML,"msub");case At.MmlDegree:case At.MmlSuperArgument:case At.MmlSubArgument:return this.renderContainerNS(t,ge.mathML,"mn");case At.MmlFunctionName:return this.renderContainerNS(t,ge.mathML,"ms");case At.MmlDelimiter:return this.renderMmlDelimiter(t);case At.MmlRun:return this.renderMmlRun(t);case At.MmlNary:return this.renderMmlNary(t);case At.MmlPreSubSuper:return this.renderMmlPreSubSuper(t);case At.MmlBar:return this.renderMmlBar(t);case At.MmlEquationArray:return this.renderMllList(t);case At.Inserted:return this.renderInserted(t);case At.Deleted:return this.renderDeleted(t);case At.CommentRangeStart:return this.renderCommentRangeStart(t);case At.CommentRangeEnd:return this.renderCommentRangeEnd(t);case At.CommentReference:return this.renderCommentReference(t);case At.AltChunk:return this.renderAltChunk(t)}return null}renderElements(t,e){if(t==null)return null;var n=t.flatMap(i=>this.renderElement(i)).filter(i=>i!=null);return e&&Kw(e,n),n}renderContainer(t,e,n){return this.createElement(e,n,this.renderElements(t.children))}renderContainerNS(t,e,n,i){return this.createElementNS(e,n,i,this.renderElements(t.children))}renderParagraph(t){var e=this.renderContainer(t,"p");const n=this.findStyle(t.styleName);t.tabs??(t.tabs=n?.paragraphProps?.tabs),this.renderClass(t,e),this.renderStyleValues(t.cssStyle,e),this.renderCommonProperties(e.style,t);const i=t.numbering??n?.paragraphProps?.numbering;return i&&e.classList.add(this.numberingClass(i.id,i.level)),e}renderRunProperties(t,e){this.renderCommonProperties(t,e)}renderCommonProperties(t,e){e!=null&&(e.color&&(t.color=e.color),e.fontSize&&(t["font-size"]=e.fontSize))}renderHyperlink(t){var e=this.renderContainer(t,"a");this.renderStyleValues(t.cssStyle,e);let n="";return t.id&&(n=this.document.documentPart.rels.find(r=>r.id==t.id&&r.targetMode==="External")?.target??n),t.anchor&&(n+=`#${t.anchor}`),e.href=n,e}renderSmartTag(t){return this.renderContainer(t,"span")}renderCommentRangeStart(t){if(!this.options.renderComments)return null;const e=new Range;this.commentHighlight?.add(e);const n=this.createComment(`start of comment #${t.id}`);return this.later(()=>e.setStart(n,0)),this.commentMap[t.id]=e,n}renderCommentRangeEnd(t){if(!this.options.renderComments)return null;const e=this.commentMap[t.id],n=this.createComment(`end of comment #${t.id}`);return this.later(()=>e?.setEnd(n,0)),n}renderCommentReference(t){if(!this.options.renderComments)return null;var e=this.document.commentsPart?.commentMap[t.id];if(!e)return null;const n=new DocumentFragment,i=this.createElement("span",{className:`${this.className}-comment-ref`},[""]),r=this.createElement("div",{className:`${this.className}-comment-popover`});return this.renderCommentContent(e,r),n.appendChild(this.createComment(`comment #${e.id} by ${e.author} on ${e.date}`)),n.appendChild(i),n.appendChild(r),n}renderAltChunk(t){if(!this.options.renderAltChunks)return null;var e=this.createElement("iframe");return this.tasks.push(this.document.loadAltChunk(t.id,this.currentPart).then(n=>{e.srcdoc=n})),e}renderCommentContent(t,e){e.appendChild(this.createElement("div",{className:`${this.className}-comment-author`},[t.author])),e.appendChild(this.createElement("div",{className:`${this.className}-comment-date`},[new Date(t.date).toLocaleString()])),this.renderElements(t.children,e)}renderDrawing(t){var e=this.renderContainer(t,"div");return e.style.display="inline-block",e.style.position="relative",e.style.textIndent="0px",this.renderStyleValues(t.cssStyle,e),e}renderImage(t){let e=this.createElement("img"),n=t.cssStyle?.transform;if(this.renderStyleValues(t.cssStyle,e),t.srcRect&&t.srcRect.some(h=>h!=0)){var[i,r,o,c]=t.srcRect;n=`scale(${1/(1-i-o)}, ${1/(1-r-c)})`,e.style["clip-path"]=`rect(${(100*r).toFixed(2)}% ${(100*(1-o)).toFixed(2)}% ${(100*(1-c)).toFixed(2)}% ${(100*i).toFixed(2)}%)`}return t.rotation&&(n=`rotate(${t.rotation}deg) ${n??""}`),e.style.transform=n?.trim(),this.document&&this.tasks.push(this.document.loadDocumentImage(t.src,this.currentPart).then(h=>{e.src=h})),e}renderText(t){return this.htmlDocument.createTextNode(t.text)}renderDeletedText(t){return this.options.renderChanges?this.renderText(t):null}renderBreak(t){return t.break=="textWrapping"?this.createElement("br"):null}renderInserted(t){return this.options.renderChanges?this.renderContainer(t,"ins"):this.renderElements(t.children)}renderDeleted(t){return this.options.renderChanges?this.renderContainer(t,"del"):null}renderSymbol(t){var e=this.createElement("span");return e.style.fontFamily=t.font,e.innerHTML=`&#x${t.char};`,e}renderFootnoteReference(t){var e=this.createElement("sup");return this.currentFootnoteIds.push(t.id),e.textContent=`${this.currentFootnoteIds.length}`,e}renderEndnoteReference(t){var e=this.createElement("sup");return this.currentEndnoteIds.push(t.id),e.textContent=`${this.currentEndnoteIds.length}`,e}renderTab(t){var e=this.createElement("span");if(e.innerHTML="&emsp;",this.options.experimental){e.className=this.tabStopClass();var n=bF(t,At.Paragraph)?.tabs;this.currentTabs.push({stops:n,span:e})}return e}renderBookmarkStart(t){return this.createElement("span",{id:t.name})}renderRun(t){if(t.fieldRun)return null;const e=this.createElement("span");if(t.id&&(e.id=t.id),this.renderClass(t,e),this.renderStyleValues(t.cssStyle,e),t.verticalAlign){const n=this.createElement(t.verticalAlign);this.renderElements(t.children,n),e.appendChild(n)}else this.renderElements(t.children,e);return e}renderTable(t){let e=this.createElement("table");return this.tableCellPositions.push(this.currentCellPosition),this.tableVerticalMerges.push(this.currentVerticalMerge),this.currentVerticalMerge={},this.currentCellPosition={col:0,row:0},t.columns&&e.appendChild(this.renderTableColumns(t.columns)),this.renderClass(t,e),this.renderElements(t.children,e),this.renderStyleValues(t.cssStyle,e),this.currentVerticalMerge=this.tableVerticalMerges.pop(),this.currentCellPosition=this.tableCellPositions.pop(),e}renderTableColumns(t){let e=this.createElement("colgroup");for(let n of t){let i=this.createElement("col");n.width&&(i.style.width=n.width),e.appendChild(i)}return e}renderTableRow(t){let e=this.createElement("tr");return this.currentCellPosition.col=0,t.gridBefore&&e.appendChild(this.renderTableCellPlaceholder(t.gridBefore)),this.renderClass(t,e),this.renderElements(t.children,e),this.renderStyleValues(t.cssStyle,e),t.gridAfter&&e.appendChild(this.renderTableCellPlaceholder(t.gridAfter)),this.currentCellPosition.row++,e}renderTableCellPlaceholder(t){const e=this.createElement("td",{colSpan:t});return e.style.border="none",e}renderTableCell(t){let e=this.renderContainer(t,"td");const n=this.currentCellPosition.col;return t.verticalMerge?t.verticalMerge=="restart"?(this.currentVerticalMerge[n]=e,e.rowSpan=1):this.currentVerticalMerge[n]&&(this.currentVerticalMerge[n].rowSpan+=1,e.style.display="none"):this.currentVerticalMerge[n]=null,this.renderClass(t,e),this.renderStyleValues(t.cssStyle,e),t.span&&(e.colSpan=t.span),this.currentCellPosition.col+=e.colSpan,e}renderVmlPicture(t){return this.renderContainer(t,"div")}renderVmlElement(t){var e=this.createSvgElement("svg");e.setAttribute("style",t.cssStyleText);const n=this.renderVmlChildElement(t);return t.imageHref?.id&&this.tasks.push(this.document?.loadDocumentImage(t.imageHref.id,this.currentPart).then(i=>n.setAttribute("href",i))),e.appendChild(n),requestAnimationFrame(()=>{const i=e.firstElementChild.getBBox();e.setAttribute("width",`${Math.ceil(i.x+i.width)}`),e.setAttribute("height",`${Math.ceil(i.y+i.height)}`)}),e}renderVmlChildElement(t){const e=this.createSvgElement(t.tagName);Object.entries(t.attrs).forEach(([n,i])=>e.setAttribute(n,i));for(let n of t.children)n.type==At.VmlElement?e.appendChild(this.renderVmlChildElement(n)):e.appendChild(...ef(this.renderElement(n)));return e}renderMmlRadical(t){const e=t.children.find(i=>i.type==At.MmlBase);if(t.props?.hideDegree)return this.createElementNS(ge.mathML,"msqrt",null,this.renderElements([e]));const n=t.children.find(i=>i.type==At.MmlDegree);return this.createElementNS(ge.mathML,"mroot",null,this.renderElements([e,n]))}renderMmlDelimiter(t){const e=[];return e.push(this.createElementNS(ge.mathML,"mo",null,[t.props.beginChar??"("])),e.push(...this.renderElements(t.children)),e.push(this.createElementNS(ge.mathML,"mo",null,[t.props.endChar??")"])),this.createElementNS(ge.mathML,"mrow",null,e)}renderMmlNary(t){const e=[],n=Co(t.children,d=>d.type),i=n[At.MmlSuperArgument],r=n[At.MmlSubArgument],o=i?this.createElementNS(ge.mathML,"mo",null,ef(this.renderElement(i))):null,c=r?this.createElementNS(ge.mathML,"mo",null,ef(this.renderElement(r))):null,h=this.createElementNS(ge.mathML,"mo",null,[t.props?.char??""]);return o||c?e.push(this.createElementNS(ge.mathML,"munderover",null,[h,c,o])):o?e.push(this.createElementNS(ge.mathML,"mover",null,[h,o])):c?e.push(this.createElementNS(ge.mathML,"munder",null,[h,c])):e.push(h),e.push(...this.renderElements(n[At.MmlBase].children)),this.createElementNS(ge.mathML,"mrow",null,e)}renderMmlPreSubSuper(t){const e=[],n=Co(t.children,d=>d.type),i=n[At.MmlSuperArgument],r=n[At.MmlSubArgument],o=i?this.createElementNS(ge.mathML,"mo",null,ef(this.renderElement(i))):null,c=r?this.createElementNS(ge.mathML,"mo",null,ef(this.renderElement(r))):null,h=this.createElementNS(ge.mathML,"mo",null);return e.push(this.createElementNS(ge.mathML,"msubsup",null,[h,c,o])),e.push(...this.renderElements(n[At.MmlBase].children)),this.createElementNS(ge.mathML,"mrow",null,e)}renderMmlGroupChar(t){const e=t.props.verticalJustification==="bot"?"mover":"munder",n=this.renderContainerNS(t,ge.mathML,e);return t.props.char&&n.appendChild(this.createElementNS(ge.mathML,"mo",null,[t.props.char])),n}renderMmlBar(t){const e=this.renderContainerNS(t,ge.mathML,"mrow");switch(t.props.position){case"top":e.style.textDecoration="overline";break;case"bottom":e.style.textDecoration="underline";break}return e}renderMmlRun(t){const e=this.createElementNS(ge.mathML,"ms",null,this.renderElements(t.children));return this.renderClass(t,e),this.renderStyleValues(t.cssStyle,e),e}renderMllList(t){const e=this.createElementNS(ge.mathML,"mtable");this.renderClass(t,e),this.renderStyleValues(t.cssStyle,e);for(let n of this.renderElements(t.children))e.appendChild(this.createElementNS(ge.mathML,"mtr",null,[this.createElementNS(ge.mathML,"mtd",null,[n])]));return e}renderStyleValues(t,e){for(let n in t)n.startsWith("$")?e.setAttribute(n.slice(1),t[n]):e.style[n]=t[n]}renderClass(t,e){t.className&&(e.className=t.className),t.styleName&&e.classList.add(this.processStyleName(t.styleName))}findStyle(t){return t&&this.styleMap?.[t]}numberingClass(t,e){return`${this.className}-num-${t}-${e}`}tabStopClass(){return`${this.className}-tab-stop`}styleToString(t,e,n=null){let i=`${t} {\r
`;for(const r in e)r.startsWith("$")||(i+=`  ${r}: ${e[r]};\r
`);return n&&(i+=n),i+`}\r
`}numberingCounter(t,e){return`${this.className}-num-${t}-${e}`}levelTextToContent(t,e,n,i){const r={tab:"\\9",space:"\\a0"};var o=t.replace(/%\d*/g,c=>{let h=parseInt(c.substring(1),10)-1;return`"counter(${this.numberingCounter(n,h)}, ${i})"`});return`"${o}${r[e]??""}"`}numFormatToCssValue(t){var e={none:"none",bullet:"disc",decimal:"decimal",lowerLetter:"lower-alpha",upperLetter:"upper-alpha",lowerRoman:"lower-roman",upperRoman:"upper-roman",decimalZero:"decimal-leading-zero",aiueo:"katakana",aiueoFullWidth:"katakana",chineseCounting:"simp-chinese-informal",chineseCountingThousand:"simp-chinese-informal",chineseLegalSimplified:"simp-chinese-formal",chosung:"hangul-consonant",ideographDigital:"cjk-ideographic",ideographTraditional:"cjk-heavenly-stem",ideographLegalTraditional:"trad-chinese-formal",ideographZodiac:"cjk-earthly-branch",iroha:"katakana-iroha",irohaFullWidth:"katakana-iroha",japaneseCounting:"japanese-informal",japaneseDigitalTenThousand:"cjk-decimal",japaneseLegal:"japanese-formal",thaiNumbers:"thai",koreanCounting:"korean-hangul-formal",koreanDigital:"korean-hangul-formal",koreanDigital2:"korean-hanja-informal",hebrew1:"hebrew",hebrew2:"hebrew",hindiNumbers:"devanagari",ganada:"hangul",taiwaneseCounting:"cjk-ideographic",taiwaneseCountingThousand:"cjk-ideographic",taiwaneseDigital:"cjk-decimal"};return e[t]??t}refreshTabStops(){this.options.experimental&&setTimeout(()=>{const t=mF();for(let e of this.currentTabs)yF(e.span,e.stops,this.defaultTabSize,t)},500)}createElementNS(t,e,n,i){var r=t?this.htmlDocument.createElementNS(t,e):this.htmlDocument.createElement(e);return Object.assign(r,n),i&&Kw(r,i),r}createElement(t,e,n){return this.createElementNS(void 0,t,e,n)}createSvgElement(t,e,n){return this.createElementNS(ge.svg,t,e,n)}createStyleElement(t){return this.createElement("style",{innerHTML:t})}createComment(t){return this.htmlDocument.createComment(t)}later(t){this.postRenderTasks.push(t)}}function WR(s){s.innerHTML=""}function Kw(s,t){t.forEach(e=>s.appendChild(sB(e)?document.createTextNode(e):e))}function bF(s,t){for(var e=s.parent;e!=null&&e.type!=t;)e=e.parent;return e}const OD={ignoreHeight:!1,ignoreWidth:!1,ignoreFonts:!1,breakPages:!0,debug:!1,experimental:!1,className:"docx",inWrapper:!0,hideWrapperOnPrint:!1,trimXmlDeclaration:!0,ignoreLastRenderedPageBreak:!0,renderHeaders:!0,renderFooters:!0,renderFootnotes:!0,renderEndnotes:!0,useBase64URL:!1,renderChanges:!1,renderComments:!1,renderAltChunks:!0};function xF(s,t){const e={...OD,...t};return g2.load(s,new fF(e),e)}async function wF(s,t,e,n){const i={...OD,...n};return await new vF(window.document).render(s,t,e,i)}async function AF(s,t,e,n){const i=await xF(s,n);return await wF(i,t,e,n),i}const bi=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),JA=[.001,0,0,.001,0,0],Zw=1.35,ns={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Mr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},tg="pdfjs_internal_editor_",ie={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},ve={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},ID={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Yn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Ep={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},dn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},_h={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},cg={ERRORS:0,WARNINGS:1,INFOS:5},Vu={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Hm={moveTo:0,lineTo:1,curveTo:2,closePath:3},jD={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let zb=cg.WARNINGS;function SF(s){Number.isInteger(s)&&(zb=s)}function _F(){return zb}function Ub(s){zb>=cg.INFOS&&console.info(`Info: ${s}`)}function re(s){zb>=cg.WARNINGS&&console.warn(`Warning: ${s}`)}function Xe(s){throw new Error(s)}function xe(s,t){s||Xe(t)}function EF(s){switch(s?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function m2(s,t=null,e=null){if(!s)return null;if(e&&typeof s=="string"&&(e.addDefaultProtocol&&s.startsWith("www.")&&s.match(/\./g)?.length>=2&&(s=`http://${s}`),e.tryConvertEncoding))try{s=RF(s)}catch{}const n=t?URL.parse(s,t):URL.parse(s);return EF(n)?n:null}function y2(s,t,e=!1){const n=URL.parse(s);return n?(n.hash=t,n.href):e&&m2(s,"http://example.com")?s.split("#",1)[0]+`${t?`#${t}`:""}`:""}function ce(s,t,e,n=!1){return Object.defineProperty(s,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const wc=(function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t})();class GR extends wc{constructor(t,e){super(t,"PasswordException"),this.code=e}}class Qw extends wc{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class jv extends wc{constructor(t){super(t,"InvalidPDFException")}}class eg extends wc{constructor(t,e,n){super(t,"ResponseException"),this.status=e,this.missing=n}}class CF extends wc{constructor(t){super(t,"FormatError")}}class Da extends wc{constructor(t){super(t,"AbortException")}}function BD(s){(typeof s!="object"||s?.length===void 0)&&Xe("Invalid argument for bytesToString");const t=s.length,e=8192;if(t<e)return String.fromCharCode.apply(null,s);const n=[];for(let i=0;i<t;i+=e){const r=Math.min(i+e,t),o=s.subarray(i,r);n.push(String.fromCharCode.apply(null,o))}return n.join("")}function hg(s){typeof s!="string"&&Xe("Invalid argument for stringToBytes");const t=s.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=s.charCodeAt(n)&255;return e}function kF(s){return String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255)}function TF(){const s=new Uint8Array(4);return s[0]=1,new Uint32Array(s.buffer,0,1)[0]===1}function MF(){try{return new Function(""),!0}catch{return!1}}class Hn{static get isLittleEndian(){return ce(this,"isLittleEndian",TF())}static get isEvalSupported(){return ce(this,"isEvalSupported",MF())}static get isOffscreenCanvasSupported(){return ce(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return ce(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return ce(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return ce(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Jw=Array.from(Array(256).keys(),s=>s.toString(16).padStart(2,"0"));class Gt{static makeHexColor(t,e,n){return`#${Jw[t]}${Jw[e]}${Jw[n]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,n=0){const i=t[n],r=t[n+1];t[n]=i*e[0]+r*e[2]+e[4],t[n+1]=i*e[1]+r*e[3]+e[5]}static applyTransformToBezier(t,e,n=0){const i=e[0],r=e[1],o=e[2],c=e[3],h=e[4],d=e[5];for(let f=0;f<6;f+=2){const p=t[n+f],m=t[n+f+1];t[n+f]=p*i+m*o+h,t[n+f+1]=p*r+m*c+d}}static applyInverseTransform(t,e){const n=t[0],i=t[1],r=e[0]*e[3]-e[1]*e[2];t[0]=(n*e[3]-i*e[2]+e[2]*e[5]-e[4]*e[3])/r,t[1]=(-n*e[1]+i*e[0]+e[4]*e[1]-e[5]*e[0])/r}static axialAlignedBoundingBox(t,e,n){const i=e[0],r=e[1],o=e[2],c=e[3],h=e[4],d=e[5],f=t[0],p=t[1],m=t[2],y=t[3];let w=i*f+h,b=w,E=i*m+h,_=E,k=c*p+d,T=k,R=c*y+d,D=R;if(r!==0||o!==0){const F=r*f,j=r*m,I=o*p,O=o*y;w+=I,_+=I,E+=O,b+=O,k+=F,D+=F,R+=j,T+=j}n[0]=Math.min(n[0],w,E,b,_),n[1]=Math.min(n[1],k,R,T,D),n[2]=Math.max(n[2],w,E,b,_),n[3]=Math.max(n[3],k,R,T,D)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const n=t[0],i=t[1],r=t[2],o=t[3],c=n**2+i**2,h=n*r+i*o,d=r**2+o**2,f=(c+d)/2,p=Math.sqrt(f**2-(c*d-h**2));e[0]=Math.sqrt(f+p||1),e[1]=Math.sqrt(f-p||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),i=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>i)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>o?null:[n,r,i,o]}static pointBoundingBox(t,e,n){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}static rectBoundingBox(t,e,n,i,r){r[0]=Math.min(r[0],t,n),r[1]=Math.min(r[1],e,i),r[2]=Math.max(r[2],t,n),r[3]=Math.max(r[3],e,i)}static#t(t,e,n,i,r,o,c,h,d,f){if(d<=0||d>=1)return;const p=1-d,m=d*d,y=m*d,w=p*(p*(p*t+3*d*e)+3*m*n)+y*i,b=p*(p*(p*r+3*d*o)+3*m*c)+y*h;f[0]=Math.min(f[0],w),f[1]=Math.min(f[1],b),f[2]=Math.max(f[2],w),f[3]=Math.max(f[3],b)}static#e(t,e,n,i,r,o,c,h,d,f,p,m){if(Math.abs(d)<1e-12){Math.abs(f)>=1e-12&&this.#t(t,e,n,i,r,o,c,h,-p/f,m);return}const y=f**2-4*p*d;if(y<0)return;const w=Math.sqrt(y),b=2*d;this.#t(t,e,n,i,r,o,c,h,(-f+w)/b,m),this.#t(t,e,n,i,r,o,c,h,(-f-w)/b,m)}static bezierBoundingBox(t,e,n,i,r,o,c,h,d){d[0]=Math.min(d[0],t,c),d[1]=Math.min(d[1],e,h),d[2]=Math.max(d[2],t,c),d[3]=Math.max(d[3],e,h),this.#e(t,n,r,c,e,i,o,h,3*(-t+3*(n-r)+c),6*(t-2*n+r),3*(n-t),d),this.#e(t,n,r,c,e,i,o,h,3*(-e+3*(i-o)+h),6*(e-2*i+o),3*(i-e),d)}}function RF(s){return decodeURIComponent(escape(s))}let tA=null,VR=null;function FD(s){return tA||(tA=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,VR=new Map([["","t"]])),s.replaceAll(tA,(t,e,n)=>e?e.normalize("NFKC"):VR.get(n))}function v2(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const s=new Uint8Array(32);return crypto.getRandomValues(s),BD(s)}const b2="pdfjs_internal_id_";function PF(s,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[n,i,...r]=e;if(!s(n)&&!Number.isInteger(n)||!t(i))return!1;const o=r.length;let c=!0;switch(i.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;c=!1;break;default:return!1}for(const h of r)if(!(typeof h=="number"||c&&h===null))return!1;return!0}function hi(s,t,e){return Math.min(Math.max(s,t),e)}function zD(s){return Uint8Array.prototype.toBase64?s.toBase64():btoa(BD(s))}function LF(s){return Uint8Array.fromBase64?Uint8Array.fromBase64(s):hg(atob(s))}typeof Promise.try!="function"&&(Promise.try=function(s,...t){return new Promise(e=>{e(s(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(s){return s.reduce((t,e)=>t+e,0)});class ng{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function i(r){if(!r)return;let o=null;const c=r.name;if(c==="#text")o=r.value;else if(ng.shouldBuildText(c))r?.attributes?.textContent?o=r.attributes.textContent:r.value&&(o=r.value);else return;if(o!==null&&e.push({str:o}),!!r.children)for(const h of r.children)i(h)}return i(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class x2{static setupStorage(t,e,n,i,r){const o=i.getValue(e,{value:null});switch(n.name){case"textarea":if(o.value!==null&&(t.textContent=o.value),r==="print")break;t.addEventListener("input",c=>{i.setValue(e,{value:c.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(o.value===n.attributes.xfaOn?t.setAttribute("checked",!0):o.value===n.attributes.xfaOff&&t.removeAttribute("checked"),r==="print")break;t.addEventListener("change",c=>{i.setValue(e,{value:c.target.checked?c.target.getAttribute("xfaOn"):c.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&t.setAttribute("value",o.value),r==="print")break;t.addEventListener("input",c=>{i.setValue(e,{value:c.target.value})})}break;case"select":if(o.value!==null){t.setAttribute("value",o.value);for(const c of n.children)c.attributes.value===o.value?c.attributes.selected=!0:c.attributes.hasOwnProperty("selected")&&delete c.attributes.selected}t.addEventListener("input",c=>{const h=c.target.options,d=h.selectedIndex===-1?"":h[h.selectedIndex].value;i.setValue(e,{value:d})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:i,linkService:r}){const{attributes:o}=e,c=t instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${i}`);for(const[h,d]of Object.entries(o))if(d!=null)switch(h){case"class":d.length&&t.setAttribute(h,d.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",d);break;case"style":Object.assign(t.style,d);break;case"textContent":t.textContent=d;break;default:(!c||h!=="href"&&h!=="newWindow")&&t.setAttribute(h,d)}c&&r.addLinkAttributes(t,o.href,o.newWindow),n&&o.dataId&&this.setupStorage(t,o.dataId,e,n)}static render(t){const e=t.annotationStorage,n=t.linkService,i=t.xfaHtml,r=t.intent||"display",o=document.createElement(i.name);i.attributes&&this.setAttributes({html:o,element:i,intent:r,linkService:n});const c=r!=="richText",h=t.div;if(h.append(o),t.viewport){const p=`matrix(${t.viewport.transform.join(",")})`;h.style.transform=p}c&&h.setAttribute("class","xfaLayer xfaFont");const d=[];if(i.children.length===0){if(i.value){const p=document.createTextNode(i.value);o.append(p),c&&ng.shouldBuildText(i.name)&&d.push(p)}return{textDivs:d}}const f=[[i,-1,o]];for(;f.length>0;){const[p,m,y]=f.at(-1);if(m+1===p.children.length){f.pop();continue}const w=p.children[++f.at(-1)[1]];if(w===null)continue;const{name:b}=w;if(b==="#text"){const _=document.createTextNode(w.value);d.push(_),y.append(_);continue}const E=w?.attributes?.xmlns?document.createElementNS(w.attributes.xmlns,b):document.createElement(b);if(y.append(E),w.attributes&&this.setAttributes({html:E,element:w,storage:e,intent:r,linkService:n}),w.children?.length>0)f.push([w,-1,E]);else if(w.value){const _=document.createTextNode(w.value);c&&ng.shouldBuildText(b)&&d.push(_),E.append(_)}}for(const p of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:d}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const ia="http://www.w3.org/2000/svg";class uc{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function ed(s,t="text"){if(Sf(s,document.baseURI)){const e=await fetch(s);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const i=new XMLHttpRequest;i.open("GET",s,!0),i.responseType=t,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(i.response);return}e(i.responseText);return}n(new Error(i.statusText))}},i.send(null)})}class ug{constructor({viewBox:t,userUnit:e,scale:n,rotation:i,offsetX:r=0,offsetY:o=0,dontFlip:c=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=i,this.offsetX=r,this.offsetY=o,n*=e;const h=(t[2]+t[0])/2,d=(t[3]+t[1])/2;let f,p,m,y;switch(i%=360,i<0&&(i+=360),i){case 180:f=-1,p=0,m=0,y=1;break;case 90:f=0,p=1,m=1,y=0;break;case 270:f=0,p=-1,m=-1,y=0;break;case 0:f=1,p=0,m=0,y=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(m=-m,y=-y);let w,b,E,_;f===0?(w=Math.abs(d-t[1])*n+r,b=Math.abs(h-t[0])*n+o,E=(t[3]-t[1])*n,_=(t[2]-t[0])*n):(w=Math.abs(h-t[0])*n+r,b=Math.abs(d-t[1])*n+o,E=(t[2]-t[0])*n,_=(t[3]-t[1])*n),this.transform=[f*n,p*n,m*n,y*n,w-f*n*h-m*n*d,b-p*n*h-y*n*d],this.width=E,this.height=_}get rawDims(){const t=this.viewBox;return ce(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:r=!1}={}){return new ug({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:r})}convertToViewportPoint(t,e){const n=[t,e];return Gt.applyTransform(n,this.transform),n}convertToViewportRectangle(t){const e=[t[0],t[1]];Gt.applyTransform(e,this.transform);const n=[t[2],t[3]];return Gt.applyTransform(n,this.transform),[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){const n=[t,e];return Gt.applyInverseTransform(n,this.transform),n}}class Hb extends wc{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function dg(s){const t=s.length;let e=0;for(;e<t&&s[e].trim()==="";)e++;return s.substring(e,e+5).toLowerCase()==="data:"}function Wb(s){return typeof s=="string"&&/\.pdf$/i.test(s)}function UD(s){return[s]=s.split(/[#?]/,1),s.substring(s.lastIndexOf("/")+1)}function HD(s,t="document.pdf"){if(typeof s!="string")return t;if(dg(s))return re('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=(c=>{try{return new URL(c)}catch{try{return new URL(decodeURIComponent(c))}catch{try{return new URL(c,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(c),"https://foo.bar")}catch{return null}}}}})(s);if(!n)return t;const i=c=>{try{let h=decodeURIComponent(c);return h.includes("/")?(h=h.split("/").at(-1),h.test(/^\.pdf$/i)?h:c):h}catch{return c}},r=/\.pdf$/i,o=n.pathname.split("/").at(-1);if(r.test(o))return i(o);if(n.searchParams.size>0){const c=Array.from(n.searchParams.values()).reverse();for(const d of c)if(r.test(d))return i(d);const h=Array.from(n.searchParams.keys()).reverse();for(const d of h)if(r.test(d))return i(d)}if(n.hash){const h=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(h)return i(h[0])}return t}class $R{started=Object.create(null);times=[];time(t){t in this.started&&re(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||re(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:i,end:r}of this.times)t.push(`${n.padEnd(e)} ${r-i}ms
`);return t.join("")}}function Sf(s,t){const e=t?URL.parse(s,t):URL.parse(s);return e?.protocol==="http:"||e?.protocol==="https:"}function os(s){s.preventDefault()}function rn(s){s.preventDefault(),s.stopPropagation()}function DF(s){console.log("Deprecated API usage: "+s)}class Bv{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=this.#t.exec(t);if(!e)return null;const n=parseInt(e[1],10);let i=parseInt(e[2],10);i=i>=1&&i<=12?i-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let c=parseInt(e[5],10);c=c>=0&&c<=59?c:0;let h=parseInt(e[6],10);h=h>=0&&h<=59?h:0;const d=e[7]||"Z";let f=parseInt(e[8],10);f=f>=0&&f<=23?f:0;let p=parseInt(e[9],10)||0;return p=p>=0&&p<=59?p:0,d==="-"?(o+=f,c+=p):d==="+"&&(o-=f,c-=p),new Date(Date.UTC(n,i,r,o,c,h))}}function WD(s,{scale:t=1,rotation:e=0}){const{width:n,height:i}=s.attributes.style,r=[0,0,parseInt(n),parseInt(i)];return new ug({viewBox:r,userUnit:1,scale:t,rotation:e})}function nd(s){if(s.startsWith("#")){const t=parseInt(s.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return s.startsWith("rgb(")?s.slice(4,-1).split(",").map(t=>parseInt(t)):s.startsWith("rgba(")?s.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(re(`Not a valid color format: "${s}"`),[0,0,0])}function NF(s){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of s.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;s.set(e,nd(n))}t.remove()}function nn(s){const{a:t,b:e,c:n,d:i,e:r,f:o}=s.getTransform();return[t,e,n,i,r,o]}function ar(s){const{a:t,b:e,c:n,d:i,e:r,f:o}=s.getTransform().invertSelf();return[t,e,n,i,r,o]}function $o(s,t,e=!1,n=!0){if(t instanceof ug){const{pageWidth:i,pageHeight:r}=t.rawDims,{style:o}=s,c=Hn.isCSSRoundSupported,h=`var(--total-scale-factor) * ${i}px`,d=`var(--total-scale-factor) * ${r}px`,f=c?`round(down, ${h}, var(--scale-round-x))`:`calc(${h})`,p=c?`round(down, ${d}, var(--scale-round-y))`:`calc(${d})`;!e||t.rotation%180===0?(o.width=f,o.height=p):(o.width=p,o.height=f)}n&&s.setAttribute("data-main-rotation",t.rotation)}class Qs{constructor(){const{pixelRatio:t}=Qs;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,n,i,r=-1){let o=1/0,c=1/0,h=1/0;n=Qs.capPixels(n,r),n>0&&(o=Math.sqrt(n/(t*e))),i!==-1&&(c=i/t,h=i/e);const d=Math.min(o,c,h);return this.sx>d||this.sy>d?(this.sx=d,this.sy=d,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,n):n}return t}}const Fv=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class OF{static get isDarkMode(){return ce(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class GD{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:n}=window.getComputedStyle(t);return t.remove(),ce(this,"commentForegroundColor",nd(n))}}function VD(s,t,e,n){n=Math.min(Math.max(n??1,0),1);const i=255*(1-n);return s=Math.round(s*n+i),t=Math.round(t*n+i),e=Math.round(e*n+i),[s,t,e]}function qR(s,t){const e=s[0]/255,n=s[1]/255,i=s[2]/255,r=Math.max(e,n,i),o=Math.min(e,n,i),c=(r+o)/2;if(r===o)t[0]=t[1]=0;else{const h=r-o;switch(t[1]=c<.5?h/(r+o):h/(2-r-o),r){case e:t[0]=((n-i)/h+(n<i?6:0))*60;break;case n:t[0]=((i-e)/h+2)*60;break;case i:t[0]=((e-n)/h+4)*60;break}}t[2]=c}function tS(s,t){const e=s[0],n=s[1],i=s[2],r=(1-Math.abs(2*i-1))*n,o=r*(1-Math.abs(e/60%2-1)),c=i-r/2;switch(Math.floor(e/60)){case 0:t[0]=r+c,t[1]=o+c,t[2]=c;break;case 1:t[0]=o+c,t[1]=r+c,t[2]=c;break;case 2:t[0]=c,t[1]=r+c,t[2]=o+c;break;case 3:t[0]=c,t[1]=o+c,t[2]=r+c;break;case 4:t[0]=o+c,t[1]=c,t[2]=r+c;break;case 5:case 6:t[0]=r+c,t[1]=c,t[2]=o+c;break}}function YR(s){return s<=.03928?s/12.92:((s+.055)/1.055)**2.4}function XR(s,t,e){tS(s,e),e.map(YR);const n=.2126*e[0]+.7152*e[1]+.0722*e[2];tS(t,e),e.map(YR);const i=.2126*e[0]+.7152*e[1]+.0722*e[2];return n>i?(n+.05)/(i+.05):(i+.05)/(n+.05)}const KR=new Map;function $D(s,t){const e=s[0]+s[1]*256+s[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let n=KR.get(e);if(n)return n;const i=new Float32Array(9),r=i.subarray(0,3),o=i.subarray(3,6);qR(s,o);const c=i.subarray(6,9);qR(t,c);const h=c[2]<.5,d=h?12:4.5;if(o[2]=h?Math.sqrt(o[2]):1-Math.sqrt(1-o[2]),XR(o,c,r)<d){let f,p;h?(f=o[2],p=1):(f=0,p=o[2]);const m=.005;for(;p-f>m;){const y=o[2]=(f+p)/2;h===XR(o,c,r)<d?f=y:p=y}o[2]=h?p:f}return tS(o,r),n=Gt.makeHexColor(Math.round(r[0]*255),Math.round(r[1]*255),Math.round(r[2]*255)),KR.set(e,n),n}function w2({html:s,dir:t,className:e},n){const i=document.createDocumentFragment();if(typeof s=="string"){const r=document.createElement("p");r.dir=t||"auto";const o=s.split(/(?:\r\n?|\n)/);for(let c=0,h=o.length;c<h;++c){const d=o[c];r.append(document.createTextNode(d)),c<h-1&&r.append(document.createElement("br"))}i.append(r)}else x2.render({xfaHtml:s,div:i,intent:"richText"});i.firstChild.classList.add("richText",e),n.append(i)}class Cp{#t=null;#e=null;#i;#n=null;#a=null;#s=null;#r=null;#o=null;static#c=null;constructor(t){this.#i=t,Cp.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=this.#i._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",os,{signal:e}),t.addEventListener("pointerdown",Cp.#l,{signal:e}));const n=this.#n=document.createElement("div");n.className="buttons",t.append(n);const i=this.#i.toolbarPosition;if(i){const{style:r}=t,o=this.#i._uiManager.direction==="ltr"?1-i[0]:i[0];r.insetInlineEnd=`${100*o}%`,r.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#l(t){t.stopPropagation()}#d(t){this.#i._focusEventsAllowed=!1,rn(t)}#u(t){this.#i._focusEventsAllowed=!0,rn(t)}#f(t){const e=this.#i._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",this.#d.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#u.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",os,{signal:e}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#a?.shown(),this.#s?.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=this.#i,n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",Cp.#c[t]),this.#f(n)&&n.addEventListener("click",i=>{e.delete()},{signal:e._signal}),this.#n.append(n)}get#m(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#f(e),this.#n.append(e,this.#m),this.#a=t}addComment(t,e=null){if(this.#s)return;const n=t.renderForToolbar();if(!n)return;this.#f(n);const i=this.#r=this.#m;e?(this.#n.insertBefore(n,e),this.#n.insertBefore(i,e)):this.#n.append(n,i),this.#s=t,t.toolbar=this}addColorPicker(t){if(this.#e)return;this.#e=t;const e=t.renderButton();this.#f(e),this.#n.append(e,this.#m)}async addEditSignatureButton(t){const e=this.#o=await t.renderEditButton(this.#i);this.#f(e),this.#n.append(e,this.#m)}removeButton(t){t==="comment"&&(this.#s?.removeToolbarCommentButton(),this.#s=null,this.#r?.remove(),this.#r=null)}async addButton(t,e){switch(t){case"colorPicker":this.addColorPicker(e);break;case"altText":await this.addAltText(e);break;case"editSignature":await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(e);break}}async addButtonBefore(t,e,n){const i=this.#n.querySelector(n);i&&t==="comment"&&this.addComment(e,i)}updateEditSignatureButton(t){this.#o&&(this.#o.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class IF{#t=null;#e=null;#i;constructor(t){this.#i=t}#n(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const e=this.#i._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",os,{signal:e});const n=this.#t=document.createElement("div");return n.className="buttons",t.append(n),this.#i.hasCommentManager()&&this.#s("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#i.commentSelection("floating_button")}),this.#s("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#i.highlightSelection("floating_button")}),t}#a(t,e){let n=0,i=0;for(const r of t){const o=r.y+r.height;if(o<n)continue;const c=r.x+(e?r.width:0);if(o>n){i=c,n=o;continue}e?c>i&&(i=c):c<i&&(i=c)}return[e?1-i:i,n]}show(t,e,n){const[i,r]=this.#a(e,n),{style:o}=this.#e||=this.#n();t.append(this.#e),o.insetInlineEnd=`${100*i}%`,o.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#s(t,e,n,i){const r=document.createElement("button");r.classList.add("basic",t),r.tabIndex=0,r.setAttribute("data-l10n-id",e);const o=document.createElement("span");r.append(o),o.className="visuallyHidden",o.setAttribute("data-l10n-id",n);const c=this.#i._signal;c instanceof AbortSignal&&!c.aborted&&(r.addEventListener("contextmenu",os,{signal:c}),r.addEventListener("click",i,{signal:c})),this.#t.append(r)}}function qD(s,t,e){for(const n of e)t.addEventListener(n,s[n].bind(s))}class jF{#t=0;get id(){return`${tg}${this.#t++}`}}class A2{#t=v2();#e=0;#i=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=t;const r=i.decode().then(()=>(n.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return ce(this,"_isSVGFittingCanvas",r)}async#n(t,e){this.#i||=new Map;let n=this.#i.get(t);if(n===null)return null;if(n?.bitmap)return n.refCounter+=1,n;try{n||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let i;if(typeof e=="string"?(n.url=e,i=await ed(e,"blob")):e instanceof File?i=n.file=e:e instanceof Blob&&(i=e),i.type==="image/svg+xml"){const r=A2._isSVGFittingCanvas,o=new FileReader,c=new Image,h=new Promise((d,f)=>{c.onload=()=>{n.bitmap=c,n.isSvg=!0,d()},o.onload=async()=>{const p=n.svgUrl=o.result;c.src=await r?`${p}#svgView(preserveAspectRatio(none))`:p},c.onerror=o.onerror=f});o.readAsDataURL(i),await h}else n.bitmap=await createImageBitmap(i);n.refCounter=1}catch(i){re(i),n=null}return this.#i.set(t,n),n&&this.#i.set(n.id,n),n}async getFromFile(t){const{lastModified:e,name:n,size:i,type:r}=t;return this.#n(`${e}_${n}_${i}_${r}`,t)}async getFromUrl(t){return this.#n(t,t)}async getFromBlob(t,e){const n=await e;return this.#n(t,n)}async getFromId(t){this.#i||=new Map;const e=this.#i.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#i||=new Map;let n=this.#i.get(t);if(n?.bitmap)return n.refCounter+=1,n;const i=new OffscreenCanvas(e.width,e.height);return i.getContext("2d").drawImage(e,0,0),n={bitmap:i.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#i.set(t,n),this.#i.set(n.id,n),n}getSvgUrl(t){const e=this.#i.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#i||=new Map;const e=this.#i.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const i=new OffscreenCanvas(n.width,n.height);i.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=i.convertToBlob()}n.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class BF{#t=[];#e=!1;#i;#n=-1;constructor(t=128){this.#i=t}add({cmd:t,undo:e,post:n,mustExec:i,type:r=NaN,overwriteIfSameType:o=!1,keepUndo:c=!1}){if(i&&t(),this.#e)return;const h={cmd:t,undo:e,post:n,type:r};if(this.#n===-1){this.#t.length>0&&(this.#t.length=0),this.#n=0,this.#t.push(h);return}if(o&&this.#t[this.#n].type===r){c&&(h.undo=this.#t[this.#n].undo),this.#t[this.#n]=h;return}const d=this.#n+1;d===this.#i?this.#t.splice(0,1):(this.#n=d,d<this.#t.length&&this.#t.splice(d)),this.#t.push(h)}undo(){if(this.#n===-1)return;this.#e=!0;const{undo:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1,this.#n-=1}redo(){if(this.#n<this.#t.length-1){this.#n+=1,this.#e=!0;const{cmd:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#t.length-1}cleanType(t){if(this.#n!==-1){for(let e=this.#n;e>=0;e--)if(this.#t[e].type!==t){this.#t.splice(e+1,this.#n-e),this.#n=e;return}this.#t.length=0,this.#n=-1}}destroy(){this.#t=null}}class fg{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Hn.platform;for(const[n,i,r={}]of t)for(const o of n){const c=o.startsWith("mac+");e&&c?(this.callbacks.set(o.slice(4),{callback:i,options:r}),this.allKeys.add(o.split("+").at(-1))):!e&&!c&&(this.callbacks.set(o,{callback:i,options:r}),this.allKeys.add(o.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(this.#t(e));if(!n)return;const{callback:i,options:{bubbles:r=!1,args:o=[],checker:c=null}}=n;c&&!c(t,e)||(i.bind(t,...o,e)(),r||rn(e))}}class S2{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return NF(t),ce(this,"_colors",t)}convert(t){const e=nd(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,i]of this._colors)if(i.every((r,o)=>r===e[o]))return S2._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?Gt.makeHexColor(...e):t}}class Na{#t=new AbortController;#e=null;#i=null;#n=new Map;#a=new Map;#s=null;#r=null;#o=null;#c=new BF;#l=null;#d=null;#u=null;#f=0;#m=new Set;#p=null;#h=null;#g=new Set;_editorUndoBar=null;#y=!1;#b=!1;#v=!1;#E=null;#S=null;#x=null;#k=null;#A=!1;#_=null;#R=new jF;#T=!1;#M=!1;#j=!1;#L=null;#N=null;#B=null;#O=null;#G=null;#C=ie.NONE;#w=new Set;#D=null;#F=null;#U=null;#q=null;#$=null;#Y={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#H=[0,0];#I=null;#V=null;#Q=null;#J=null;#z=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=Na.prototype,e=o=>o.#V.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),n=(o,{target:c})=>{if(c instanceof HTMLInputElement){const{type:h}=c;return h!=="text"&&h!=="number"}return!0},i=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return ce(this,"_keyboardManager",new fg([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(o,{target:c})=>!(c instanceof HTMLButtonElement)&&o.#V.contains(c)&&!o.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(o,{target:c})=>!(c instanceof HTMLButtonElement)&&o.#V.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}constructor(t,e,n,i,r,o,c,h,d,f,p,m,y,w,b,E){const _=this._signal=this.#t.signal;this.#V=t,this.#Q=e,this.#J=n,this.#s=i,this.#l=r,this.#F=o,this.#$=h,this._eventBus=c,c._on("editingaction",this.onEditingAction.bind(this),{signal:_}),c._on("pagechanging",this.onPageChanging.bind(this),{signal:_}),c._on("scalechanging",this.onScaleChanging.bind(this),{signal:_}),c._on("rotationchanging",this.onRotationChanging.bind(this),{signal:_}),c._on("setpreference",this.onSetPreference.bind(this),{signal:_}),c._on("switchannotationeditorparams",k=>this.updateParams(k.type,k.value),{signal:_}),window.addEventListener("pointerdown",()=>{this.#M=!0},{capture:!0,signal:_}),window.addEventListener("pointerup",()=>{this.#M=!1},{capture:!0,signal:_}),this.#lt(),this.#dt(),this.#et(),this.#r=h.annotationStorage,this.#E=h.filterFactory,this.#U=d,this.#k=f||null,this.#y=p,this.#b=m,this.#v=y,this.#G=w||null,this.viewParameters={realScale:uc.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=b||null,this._supportsPinchToZoom=E!==!1,r?.setSidebarUiManager(this)}destroy(){this.#z?.resolve(),this.#z=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#a.values())t.destroy();this.#a.clear(),this.#n.clear(),this.#g.clear(),this.#O?.clear(),this.#e=null,this.#w.clear(),this.#c.destroy(),this.#s?.destroy(),this.#l?.destroy(),this.#F?.destroy(),this.#_?.hide(),this.#_=null,this.#B?.destroy(),this.#B=null,this.#i=null,this.#S&&(clearTimeout(this.#S),this.#S=null),this.#I&&(clearTimeout(this.#I),this.#I=null),this._editorUndoBar?.destroy(),this.#$=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#G}get useNewAltTextFlow(){return this.#b}get useNewAltTextWhenAddingImage(){return this.#v}get hcmFilter(){return ce(this,"hcmFilter",this.#U?this.#E.addHCMFilter(this.#U.foreground,this.#U.background):"none")}get direction(){return ce(this,"direction",getComputedStyle(this.#V).direction)}get _highlightColors(){return ce(this,"_highlightColors",this.#k?new Map(this.#k.split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return ce(this,"highlightColors",null);const e=new Map,n=!!this.#U;for(const[i,r]of t){const o=i.endsWith("_HCM");if(n&&o){e.set(i.replace("_HCM",""),r);continue}!n&&!o&&e.set(i,r)}return ce(this,"highlightColors",e)}get highlightColorNames(){return ce(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#u=t}setMainHighlightColorPicker(t){this.#B=t}editAltText(t,e=!1){this.#s?.editAltText(this,t,e)}hasCommentManager(){return!!this.#l}editComment(t,e,n,i){this.#l?.showDialog(this,t,e,n,i)}selectComment(t,e){this.#a.get(t)?.getEditorByUID(e)?.toggleComment(!0,!0)}updateComment(t){this.#l?.updateComment(t.getData())}updatePopupColor(t){this.#l?.updatePopupColor(t)}removeComment(t){this.#l?.removeComments([t.uid])}toggleComment(t,e,n=void 0){this.#l?.toggleCommentPopup(t,e,n)}makeCommentColor(t,e){return t&&this.#l?.makeCommentColor(t,e)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(t){if(this.#a.has(t-1))return;const{resolve:e,promise:n}=Promise.withResolvers(),i=r=>{r.pageNumber===t&&(this._eventBus._off("editorsrendered",i),e())};this._eventBus.on("editorsrendered",i),await n}getSignature(t){this.#F?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#F}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){t==="enableNewAltTextWhenAddingImage"&&(this.#v=e)}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#V.focus()}findParent(t,e){for(const n of this.#a.values()){const{x:i,y:r,width:o,height:c}=n.div.getBoundingClientRect();if(t>=i&&t<=i+o&&e>=r&&e<=r+c)return n}return null}disableUserSelect(t=!1){this.#Q.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#g.add(t)}removeShouldRescale(t){this.#g.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*uc.PDF_TO_CSS_UNITS;for(const e of this.#g)e.onScaleChanging();this.#u?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#Z({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of this.#a.values())if(n.hasTextLayer(t))return n;return null}highlightSelection(t="",e=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:i,anchorOffset:r,focusNode:o,focusOffset:c}=n,h=n.toString(),f=this.#Z(n).closest(".textLayer"),p=this.getSelectionBoxes(f);if(!p)return;n.empty();const m=this.#tt(f),y=this.#C===ie.NONE,w=()=>{const b=m?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:p,anchorNode:i,anchorOffset:r,focusNode:o,focusOffset:c,text:h});y&&this.showAllEditors("highlight",!0,!0),e&&b?.editComment()};if(y){this.switchToMode(ie.HIGHLIGHT,w);return}w()}commentSelection(t=""){this.highlightSelection(t,!0)}#at(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=this.#Z(t).closest(".textLayer"),i=this.getSelectionBoxes(n);i&&(this.#_||=new IF(this),this.#_.show(n,i,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(t){if(!this.#r)return null;const e=`${tg}${t}`,n=this.#r.getRawValue(e);return n&&this.#r.remove(e),n}addToAnnotationStorage(t){!t.isEmpty()&&this.#r&&!this.#r.has(t.id)&&this.#r.setValue(t.id,t)}a11yAlert(t,e=null){const n=this.#J;n&&(n.setAttribute("data-l10n-id",t),e?n.setAttribute("data-l10n-args",JSON.stringify(e)):n.removeAttribute("data-l10n-args"))}#ot(){const t=document.getSelection();if(!t||t.isCollapsed){this.#D&&(this.#_?.hide(),this.#D=null,this.#P({hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===this.#D)return;const i=this.#Z(t).closest(".textLayer");if(!i){this.#D&&(this.#_?.hide(),this.#D=null,this.#P({hasSelectedText:!1}));return}if(this.#_?.hide(),this.#D=e,this.#P({hasSelectedText:!0}),!(this.#C!==ie.HIGHLIGHT&&this.#C!==ie.NONE)&&(this.#C===ie.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#A=this.isShiftKeyDown,!this.isShiftKeyDown)){const r=this.#C===ie.HIGHLIGHT?this.#tt(i):null;if(r?.toggleDrawing(),this.#M){const o=new AbortController,c=this.combinedSignal(o),h=d=>{d.type==="pointerup"&&d.button!==0||(o.abort(),r?.toggleDrawing(!0),d.type==="pointerup"&&this.#X("main_toolbar"))};window.addEventListener("pointerup",h,{signal:c}),window.addEventListener("blur",h,{signal:c})}else r?.toggleDrawing(!0),this.#X("main_toolbar")}}#X(t=""){this.#C===ie.HIGHLIGHT?this.highlightSelection(t):this.#y&&this.#at()}#lt(){document.addEventListener("selectionchange",this.#ot.bind(this),{signal:this._signal})}#ct(){if(this.#x)return;this.#x=new AbortController;const t=this.combinedSignal(this.#x);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#ht(){this.#x?.abort(),this.#x=null}blur(){if(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#X("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#w)if(e.div.contains(t)){this.#N=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#N)return;const[t,e]=this.#N;this.#N=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#et(){if(this.#L)return;this.#L=new AbortController;const t=this.combinedSignal(this.#L);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ut(){this.#L?.abort(),this.#L=null}#nt(){if(this.#d)return;this.#d=new AbortController;const t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#it(){this.#d?.abort(),this.#d=null}#dt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.#nt()}removeEditListeners(){this.#ut(),this.#it()}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of this.#h)if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of this.#h)if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const n of this.#w){const i=n.serialize(!0);i&&e.push(i)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const o of this.#h)if(o.isHandlingMimeForPasting(r.type)){o.paste(r,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(r){re(`paste: "${r.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const r=[];for(const h of n){const d=await i.deserialize(h);if(!d)return;r.push(d)}const o=()=>{for(const h of r)this.#st(h);this.#rt(r)},c=()=>{for(const h of r)h.remove()};this.addCommands({cmd:o,undo:c,mustExec:!0})}catch(r){re(`paste: "${r.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#C!==ie.NONE&&!this.isEditorHandlingKeyboard&&Na._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#X("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#P(t){Object.entries(t).some(([n,i])=>this.#Y[n]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#Y,t)}),this.#C===ie.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#W([[ve.HIGHLIGHT_FREE,!0]]))}#W(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ct(),this.#nt(),this.#P({isEditing:this.#C!==ie.NONE,isEmpty:this.#K(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ht(),this.#it(),this.#P({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#h){this.#h=t;for(const e of this.#h)this.#W(e.defaultPropertiesToUpdate)}}getId(){return this.#R.id}get currentLayer(){return this.#a.get(this.#f)}getLayer(t){return this.#a.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#a.set(t.pageIndex,t),this.#T?t.enable():t.disable()}removeLayer(t){this.#a.delete(t.pageIndex)}async updateMode(t,e=null,n=!1,i=!1,r=!1){if(this.#C!==t&&!(this.#z&&(await this.#z.promise,!this.#z))){if(this.#z=Promise.withResolvers(),this.#u?.commitOrRemove(),this.#C===ie.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#C=t,t===ie.NONE){this.setEditingState(!1),this.#pt();for(const o of this.#n.values())o.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#z.resolve();return}for(const o of this.#n.values())o.addStandaloneCommentButton();t===ie.SIGNATURE&&await this.#F?.loadSignatures(),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(const o of this.#a.values())o.updateMode(t);if(t===ie.POPUP){this.#i||=await this.#$.getAnnotationsByType(new Set(this.#h.map(h=>h._editorType)));const o=new Set,c=[];for(const h of this.#n.values()){const{annotationElementId:d,hasComment:f,deleted:p}=h;d&&o.add(d),f&&!p&&c.push(h.getData())}for(const h of this.#i){const{id:d,popupRef:f,contentsObj:p}=h;f&&p?.str&&!o.has(d)&&!this.#m.has(d)&&c.push(h)}this.#l?.showSidebar(c)}if(!e){n&&this.addNewEditorFromKeyboard(),this.#z.resolve();return}for(const o of this.#n.values())o.uid===e?(this.setSelected(o),r?o.editComment():i?o.enterInEditMode():o.focus()):o.unselect();this.#z.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#C&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(this.#h){switch(t){case ve.CREATE:this.currentLayer.addNewEditor(e);return;case ve.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#q||=new Map).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const n of this.#w)n.updateParams(t,e);else for(const n of this.#h)n.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){for(const r of this.#n.values())r.editorType===t&&r.show(e);(this.#q?.get(ve.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#W([[ve.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#j!==t){this.#j=t;for(const e of this.#a.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#ft(){if(!this.#T){this.#T=!0;const t=[];for(const e of this.#a.values())t.push(e.enable());await Promise.all(t);for(const e of this.#n.values())e.enable()}}#pt(){if(this.unselectAll(),this.#T){this.#T=!1;for(const t of this.#a.values())t.disable();for(const t of this.#n.values())t.disable()}}*getEditors(t){for(const e of this.#n.values())e.pageIndex===t&&(yield e)}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#S&&clearTimeout(this.#S),this.#S=setTimeout(()=>{this.focusMainContainer(),this.#S=null},0)),this.#n.delete(t.id),t.annotationElementId&&this.#O?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#m.has(t.annotationElementId))&&this.#r?.remove(t.id)}addDeletedAnnotationElement(t){this.#m.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#m.has(t)}removeDeletedAnnotationElement(t){this.#m.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#st(t){const e=this.#a.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#W(t.propertiesToUpdate))}get#gt(){let t=null;for(t of this.#w);return t}updateUI(t){this.#gt===t&&this.#W(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#W(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#w.has(t)){this.#w.delete(t),t.unselect(),this.#P({hasSelectedEditor:this.hasSelection});return}this.#w.add(t),t.select(),this.#W(t.propertiesToUpdate),this.#P({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.id}),this.#u?.commitOrRemove();for(const e of this.#w)e!==t&&e.unselect();this.#w.clear(),this.#w.add(t),t.select(),this.#W(t.propertiesToUpdate),this.#P({hasSelectedEditor:!0})}isSelected(t){return this.#w.has(t)}get firstSelectedEditor(){return this.#w.values().next().value}unselect(t){t.unselect(),this.#w.delete(t),this.#P({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#w.size!==0}get isEnterHandled(){return this.#w.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#P({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#K()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#P({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#K()})}addCommands(t){this.#c.add(t),this.#P({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#K()})}cleanUndoStack(t){this.#c.cleanType(t)}#K(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const t of this.#n.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...this.#w],n=()=>{this._editorUndoBar?.show(i,e.length===1?e[0].editorType:e.length);for(const r of e)r.remove()},i=()=>{for(const r of e)this.#st(r)};this.addCommands({cmd:n,undo:i,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#rt(t){for(const e of this.#w)e.unselect();this.#w.clear();for(const e of t)e.isEmpty()||(this.#w.add(e),e.select());this.#P({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#w)t.commit();this.#rt(this.#n.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#C!==ie.NONE))&&!this.#u?.commitOrRemove()&&this.hasSelection){for(const t of this.#w)t.unselect();this.#w.clear(),this.#P({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;this.#H[0]+=t,this.#H[1]+=e;const[i,r]=this.#H,o=[...this.#w],c=1e3;this.#I&&clearTimeout(this.#I),this.#I=setTimeout(()=>{this.#I=null,this.#H[0]=this.#H[1]=0,this.addCommands({cmd:()=>{for(const h of o)this.#n.has(h.id)&&(h.translateInPage(i,r),h.translationDone())},undo:()=>{for(const h of o)this.#n.has(h.id)&&(h.translateInPage(-i,-r),h.translationDone())},mustExec:!1})},c);for(const h of o)h.translateInPage(t,e),h.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#p=new Map;for(const t of this.#w)this.#p.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#p)return!1;this.disableUserSelect(!1);const t=this.#p;this.#p=null;let e=!1;for(const[{x:i,y:r,pageIndex:o},c]of t)c.newX=i,c.newY=r,c.newPageIndex=o,e||=i!==c.savedX||r!==c.savedY||o!==c.savedPageIndex;if(!e)return!1;const n=(i,r,o,c)=>{if(this.#n.has(i.id)){const h=this.#a.get(c);h?i._setParentAndPosition(h,r,o):(i.pageIndex=c,i.x=r,i.y=o)}};return this.addCommands({cmd:()=>{for(const[i,{newX:r,newY:o,newPageIndex:c}]of t)n(i,r,o,c)},undo:()=>{for(const[i,{savedX:r,savedY:o,savedPageIndex:c}]of t)n(i,r,o,c)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#p)for(const n of this.#p.keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#w.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#C}isEditingMode(){return this.#C!==ie.NONE}get imageManager(){return ce(this,"imageManager",new A2)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let d=0,f=e.rangeCount;d<f;d++)if(!t.contains(e.getRangeAt(d).commonAncestorContainer))return null;const{x:n,y:i,width:r,height:o}=t.getBoundingClientRect();let c;switch(t.getAttribute("data-main-rotation")){case"90":c=(d,f,p,m)=>({x:(f-i)/o,y:1-(d+p-n)/r,width:m/o,height:p/r});break;case"180":c=(d,f,p,m)=>({x:1-(d+p-n)/r,y:1-(f+m-i)/o,width:p/r,height:m/o});break;case"270":c=(d,f,p,m)=>({x:1-(f+m-i)/o,y:(d-n)/r,width:m/o,height:p/r});break;default:c=(d,f,p,m)=>({x:(d-n)/r,y:(f-i)/o,width:p/r,height:m/o});break}const h=[];for(let d=0,f=e.rangeCount;d<f;d++){const p=e.getRangeAt(d);if(!p.collapsed)for(const{x:m,y,width:w,height:b}of p.getClientRects())w===0||b===0||h.push(c(m,y,w,b))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#o||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const e=this.#o?.get(t.data.id);if(!e)return;const n=this.#r.getRawValue(e);n&&(this.#C===ie.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}setMissingCanvas(t,e,n){const i=this.#O?.get(t);i&&(i.setCanvas(e,n),this.#O.delete(t))}addMissingCanvas(t,e){(this.#O||=new Map).set(t,e)}}class xr{#t=null;#e=!1;#i=null;#n=null;#a=null;#s=null;#r=!1;#o=null;#c=null;#l=null;#d=null;#u=!1;static#f=null;static _l10n=null;constructor(t){this.#c=t,this.#u=t._uiManager.useNewAltTextFlow,xr.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){xr._l10n??=t}async render(){const t=this.#i=document.createElement("button");t.className="altText",t.tabIndex="0";const e=this.#n=document.createElement("span");t.append(e),this.#u?(t.classList.add("new"),t.setAttribute("data-l10n-id",xr.#f.missing),e.setAttribute("data-l10n-id",xr.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=this.#c._uiManager._signal;t.addEventListener("contextmenu",os,{signal:n}),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:n});const i=r=>{r.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#u&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#m}})};return t.addEventListener("click",i,{capture:!0,signal:n}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(this.#r=!0,i(r))},{signal:n}),await this.#p(),t}get#m(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#i&&(this.#i.focus({focusVisible:this.#r}),this.#r=!1)}isEmpty(){return this.#u?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#u?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#d=await xr._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#p())}toggleAltTextBadge(t=!1){if(!this.#u||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const e=this.#o=document.createElement("div");e.className="noAltTextBadge",this.#c.div.append(e)}this.#o.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#l===e&&(e=this.#d),{altText:e,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:i,cancel:r=!1}){n&&(this.#l=n,this.#d=i),!(this.#t===t&&this.#e===e)&&(r||(this.#t=t,this.#e=e),this.#p())}toggle(t=!1){this.#i&&(!t&&this.#s&&(clearTimeout(this.#s),this.#s=null),this.#i.disabled=!t)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#m}})}destroy(){this.#i?.remove(),this.#i=null,this.#n=null,this.#a=null,this.#o?.remove(),this.#o=null}async#p(){const t=this.#i;if(!t)return;if(this.#u){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",xr.#f[this.#m]),this.#n?.setAttribute("data-l10n-id",xr.#f[`${this.#m}-label`]),!this.#t){this.#a?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#a?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#a;if(!e){this.#a=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#c.id}`;const i=100,r=this.#c._uiManager._signal;r.addEventListener("abort",()=>{clearTimeout(this.#s),this.#s=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#s=setTimeout(()=>{this.#s=null,this.#a.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},i)},{signal:r}),t.addEventListener("mouseleave",()=>{this.#s&&(clearTimeout(this.#s),this.#s=null),this.#a?.classList.remove("show")},{signal:r})}this.#e?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#t),e.parentNode||t.append(e),this.#c.getElementForAltText()?.setAttribute("aria-describedby",e.id)}}class Wm{#t=null;#e=null;#i=!1;#n=null;#a=null;#s=null;#r=null;#o=null;#c=!1;#l=null;constructor(t){this.#n=t}renderForToolbar(){const t=this.#e=document.createElement("button");return t.className="comment",this.#d(t,!1)}renderForStandalone(){const t=this.#t=document.createElement("button");t.className="annotationCommentButton";const e=this.#n.commentButtonPosition;if(e){const{style:n}=t;n.insetInlineEnd=`calc(${100*(this.#n._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const i=this.#n.commentButtonColor;i&&(n.backgroundColor=i)}return this.#d(t,!0)}focusButton(){setTimeout(()=>{(this.#t??this.#e)?.focus()},0)}onUpdatedColor(){if(!this.#t)return;const t=this.#n.commentButtonColor;t&&(this.#t.style.backgroundColor=t),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#t?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#t)return null;const{x:t,y:e,height:n}=this.#t.getBoundingClientRect(),{x:i,y:r,width:o,height:c}=this.#n.parent.boundingClientRect;return[(t-i)/o,(e+n-r)/c]}set commentPopupPositionInLayer(t){this.#l=t}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#t?.remove(),this.#t=null}removeToolbarCommentButton(){this.#e?.remove(),this.#e=null}setCommentButtonStates({selected:t,hasPopup:e}){this.#t&&(this.#t.classList.toggle("selected",t),this.#t.ariaExpanded=e)}#d(t,e){if(!this.#n._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const n=this.#n._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return t;t.addEventListener("contextmenu",os,{signal:n}),e&&(t.addEventListener("focusin",r=>{this.#n._focusEventsAllowed=!1,rn(r)},{capture:!0,signal:n}),t.addEventListener("focusout",r=>{this.#n._focusEventsAllowed=!0,rn(r)},{capture:!0,signal:n})),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:n});const i=r=>{r.preventDefault(),t===this.#e?this.edit():this.#n.toggleComment(!0)};return t.addEventListener("click",i,{capture:!0,signal:n}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(this.#i=!0,i(r))},{signal:n}),t.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:n}),t.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:n}),t}edit(t){const e=this.commentPopupPositionInLayer;let n,i;if(e)[n,i]=e;else{[n,i]=this.#n.commentButtonPosition;const{width:f,height:p,x:m,y}=this.#n;n=m+n*f,i=y+i*p}const r=this.#n.parent.boundingClientRect,{x:o,y:c,width:h,height:d}=r;this.#n._uiManager.editComment(this.#n,o+n*h,c+i*d,{...t,parentDimensions:r})}finish(){this.#e&&(this.#e.focus({focusVisible:this.#i}),this.#i=!1)}isDeleted(){return this.#c||this.#r===""}isEmpty(){return this.#r===null}hasBeenEdited(){return this.isDeleted()||this.#r!==this.#a}serialize(){return this.data}get data(){return{text:this.#r,richText:this.#s,date:this.#o,deleted:this.isDeleted()}}set data(t){if(t!==this.#r&&(this.#s=null),t===null){this.#r="",this.#c=!0;return}this.#r=t,this.#o=new Date,this.#c=!1}setInitialText(t,e=null){this.#a=t,this.data=t,this.#o=null,this.#s=e}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#t?.remove(),this.#t=null,this.#r="",this.#s=null,this.#o=null,this.#n=null,this.#i=!1,this.#c=!1}}class pg{#t;#e=!1;#i=null;#n;#a;#s;#r;#o=null;#c;#l=null;#d;#u=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:i=null,onPinching:r=null,onPinchEnd:o=null,signal:c}){this.#t=t,this.#i=n,this.#n=e,this.#a=i,this.#s=r,this.#r=o,this.#d=new AbortController,this.#c=AbortSignal.any([c,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Qs.pixelRatio}#f(t){if(this.#n?.())return;if(t.touches.length===1){if(this.#o)return;const i=this.#o=new AbortController,r=AbortSignal.any([this.#c,i.signal]),o=this.#t,c={capture:!0,signal:r,passive:!1},h=d=>{d.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};o.addEventListener("pointerdown",d=>{d.pointerType==="touch"&&(rn(d),h(d))},c),o.addEventListener("pointerup",h,c),o.addEventListener("pointercancel",h,c);return}if(!this.#u){this.#u=new AbortController;const i=AbortSignal.any([this.#c,this.#u.signal]),r=this.#t,o={signal:i,capture:!1,passive:!1};r.addEventListener("touchmove",this.#m.bind(this),o);const c=this.#p.bind(this);r.addEventListener("touchend",c,o),r.addEventListener("touchcancel",c,o),o.capture=!0,r.addEventListener("pointerdown",rn,o),r.addEventListener("pointermove",rn,o),r.addEventListener("pointercancel",rn,o),r.addEventListener("pointerup",rn,o),this.#a?.()}if(rn(t),t.touches.length!==2||this.#i?.()){this.#l=null;return}let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]),this.#l={touch0X:e.screenX,touch0Y:e.screenY,touch1X:n.screenX,touch1Y:n.screenY}}#m(t){if(!this.#l||t.touches.length!==2)return;rn(t);let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]);const{screenX:i,screenY:r}=e,{screenX:o,screenY:c}=n,h=this.#l,{touch0X:d,touch0Y:f,touch1X:p,touch1Y:m}=h,y=p-d,w=m-f,b=o-i,E=c-r,_=Math.hypot(b,E)||1,k=Math.hypot(y,w)||1;if(!this.#e&&Math.abs(k-_)<=pg.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(h.touch0X=i,h.touch0Y=r,h.touch1X=o,h.touch1Y=c,!this.#e){this.#e=!0;return}const T=[(i+o)/2,(r+c)/2];this.#s?.(T,k,_)}#p(t){t.touches.length>=2||(this.#u&&(this.#u.abort(),this.#u=null,this.#r?.()),this.#l&&(rn(t),this.#l=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#o?.abort(),this.#o=null}}class Xt{#t=null;#e=null;#i=null;#n=null;#a=null;#s=!1;#r=null;#o="";#c=null;#l=null;#d=null;#u=null;#f=null;#m="";#p=!1;#h=null;#g=!1;#y=!1;#b=!1;#v=null;#E=0;#S=0;#x=null;#k=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#A=!1;#_=Xt._zIndex++;static _borderLineWidth=-1;static _colorManager=new S2;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=Xt.prototype._resizeWithKeyboard,e=Na.TRANSLATE_SMALL,n=Na.TRANSLATE_BIG;return ce(this,"_resizerKeyboardManager",new fg([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],Xt.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null;const{rotation:e,rawDims:{pageWidth:n,pageHeight:i,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[r,o];const[c,h]=this.parentDimensions;this.x=t.x/c,this.y=t.y/h,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return ce(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new FF({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(Xt._l10n??=t,Xt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),Xt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Xt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Xe("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#A}set _isDraggable(t){this.#A=t,this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#_}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(this.#I(),this.#u?.remove(),this.#u=null),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#p?this.#p=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,i){const[r,o]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(t+n)/r,this.y=(e+i)/o,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[n,i]=this.parentDimensions;this.setAt(t*n,e*i,this.width*n,this.height*i),this._onTranslated()}#R([t,e],n,i){[n,i]=this.screenToPageTranslation(n,i),this.x+=n/t,this.y+=i/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#R(this.parentDimensions,t,e)}translateInPage(t,e){this.#h||=[this.x,this.y,this.width,this.height],this.#R(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){this.#h||=[this.x,this.y,this.width,this.height];const{div:n,parentDimensions:[i,r]}=this;if(this.x+=t/i,this.y+=e/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:p,y:m}=this.div.getBoundingClientRect();this.parent.findNewParent(this,p,m)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:c}=this;const[h,d]=this.getBaseTranslation();o+=h,c+=d;const{style:f}=n;f.left=`${(100*o).toFixed(2)}%`,f.top=`${(100*c).toFixed(2)}%`,this._onTranslating(o,c),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#h&&(this.#h[0]!==this.x||this.#h[1]!==this.y)}get _hasBeenResized(){return!!this.#h&&(this.#h[2]!==this.width||this.#h[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=Xt,i=n/t,r=n/e;switch(this.rotation){case 90:return[-i,r];case 180:return[i,r];case 270:return[i,-r];default:return[-i,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[n,i]}=this;let{x:r,y:o,width:c,height:h}=this;if(c*=n,h*=i,r*=n,o*=i,this._mustFixPosition)switch(t){case 0:r=hi(r,0,n-c),o=hi(o,0,i-h);break;case 90:r=hi(r,0,n-h),o=hi(o,c,i);break;case 180:r=hi(r,c,n),o=hi(o,h,i);break;case 270:r=hi(r,h,n),o=hi(o,0,i-c);break}this.x=r/=n,this.y=o/=i;const[d,f]=this.getBaseTranslation();r+=d,o+=f,e.left=`${(100*r).toFixed(2)}%`,e.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}static#T(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return Xt.#T(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return Xt.#T(t,e,360-this.parentRotation)}#M(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(){const{div:{style:t},width:e,height:n}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#j(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const i=document.createElement("div");this.#c.append(i),i.classList.add("resizer",n),i.setAttribute("data-resizer-name",n),i.addEventListener("pointerdown",this.#L.bind(this,n),{signal:e}),i.addEventListener("contextmenu",os,{signal:e}),i.tabIndex=-1}this.div.prepend(this.#c)}#L(t,e){e.preventDefault();const{isMac:n}=Hn.platform;if(e.button!==0||e.ctrlKey&&n)return;this.#i?.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,this.#l=[e.screenX,e.screenY];const r=new AbortController,o=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#O.bind(this,t),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",rn,{passive:!1,signal:o}),window.addEventListener("contextmenu",os,{signal:o}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const c=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const d=()=>{r.abort(),this.parent.togglePointerEvents(!0),this.#i?.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=c,this.div.style.cursor=h,this.#B()};window.addEventListener("pointerup",d,{signal:o}),window.addEventListener("blur",d,{signal:o})}#N(t,e,n,i){this.width=n,this.height=i,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#B(){if(!this.#d)return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:i}=this.#d;this.#d=null;const r=this.x,o=this.y,c=this.width,h=this.height;r===t&&o===e&&c===n&&h===i||this.addCommands({cmd:this.#N.bind(this,r,o,c,h),undo:this.#N.bind(this,t,e,n,i),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#O(t,e){const[n,i]=this.parentDimensions,r=this.x,o=this.y,c=this.width,h=this.height,d=Xt.MIN_SIZE/n,f=Xt.MIN_SIZE/i,p=this.#M(this.rotation),m=($,G)=>[p[0]*$+p[2]*G,p[1]*$+p[3]*G],y=this.#M(360-this.rotation),w=($,G)=>[y[0]*$+y[2]*G,y[1]*$+y[3]*G];let b,E,_=!1,k=!1;switch(t){case"topLeft":_=!0,b=($,G)=>[0,0],E=($,G)=>[$,G];break;case"topMiddle":b=($,G)=>[$/2,0],E=($,G)=>[$/2,G];break;case"topRight":_=!0,b=($,G)=>[$,0],E=($,G)=>[0,G];break;case"middleRight":k=!0,b=($,G)=>[$,G/2],E=($,G)=>[0,G/2];break;case"bottomRight":_=!0,b=($,G)=>[$,G],E=($,G)=>[0,0];break;case"bottomMiddle":b=($,G)=>[$/2,G],E=($,G)=>[$/2,0];break;case"bottomLeft":_=!0,b=($,G)=>[0,G],E=($,G)=>[$,0];break;case"middleLeft":k=!0,b=($,G)=>[0,G/2],E=($,G)=>[$,G/2];break}const T=b(c,h),R=E(c,h);let D=m(...R);const F=Xt._round(r+D[0]),j=Xt._round(o+D[1]);let I=1,O=1,X,Q;if(e.fromKeyboard)({deltaX:X,deltaY:Q}=e);else{const{screenX:$,screenY:G}=e,[gt,nt]=this.#l;[X,Q]=this.screenToPageTranslation($-gt,G-nt),this.#l[0]=$,this.#l[1]=G}if([X,Q]=w(X/n,Q/i),_){const $=Math.hypot(c,h);I=O=Math.max(Math.min(Math.hypot(R[0]-T[0]-X,R[1]-T[1]-Q)/$,1/c,1/h),d/c,f/h)}else k?I=hi(Math.abs(R[0]-T[0]-X),d,1)/c:O=hi(Math.abs(R[1]-T[1]-Q),f,1)/h;const H=Xt._round(c*I),J=Xt._round(h*O);D=m(...E(H,J));const N=F-D[0],tt=j-D[1];this.#h||=[this.x,this.y,this.width,this.height],this.width=H,this.height=J,this.x=N,this.y=tt,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#i?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#y)return this._editToolbar;this._editToolbar=new Cp(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,n]of t)await this._editToolbar.addButton(e,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#i?.destroy()}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#i||(xr.initialize(Xt._l10n),this.#i=new xr(this),this.#t&&(this.#i.data=this.#t,this.#t=null)),this.#i}get altTextData(){return this.#i?.data}set altTextData(t){this.#i&&(this.#i.data=t)}get guessedAltText(){return this.#i?.guessedText}async setGuessedAltText(t){await this.#i?.setGuessedText(t)}serializeAltText(t){return this.#i?.serialize(t)}hasAltText(){return!!this.#i&&!this.#i.isEmpty()}hasAltTextData(){return this.#i?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.#n||=new Wm(this)}addStandaloneCommentButton(){if(this.#a){this._uiManager.isEditingMode()&&this.#a.classList.remove("hidden");return}this.hasComment&&(this.#a=this.#n.renderForStandalone(),this.div.append(this.#a))}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#a=null}hideStandaloneCommentButton(){this.#a?.classList.add("hidden")}get comment(){const{data:{richText:t,text:e,date:n,deleted:i}}=this.#n;return{text:e,richText:t,date:n,deleted:i,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){this.#n||=new Wm(this),this.#n.data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:n}){if(!e||(this.#n||=new Wm(this),this.#n.setInitialText(t,n),!this.annotationElementId))return;const i=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);i&&this.updateFromAnnotationLayer(i)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}async editComment(t){this.#n||=new Wm(this),this.#n.edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){this.#n.setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,i]=t.rect,[r]=this.pageDimensions,[o]=this.pageTranslation,c=o+r+1,h=i-100,d=c+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[c,h,d,i]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){this.#n.data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#s?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#U();const[e,n]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*n/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/n).toFixed(2)}%`);const[i,r]=this.getInitialTranslation();return this.translate(i,r),qD(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#k||=new pg({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#G.bind(this),onPinching:this.#C.bind(this),onPinchEnd:this.#w.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}#G(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#i?.toggle(!1),this.parent.togglePointerEvents(!1)}#C(t,e,n){let r=.7*(n/e)+1-.7;if(r===1)return;const o=this.#M(this.rotation),c=(F,j)=>[o[0]*F+o[2]*j,o[1]*F+o[3]*j],[h,d]=this.parentDimensions,f=this.x,p=this.y,m=this.width,y=this.height,w=Xt.MIN_SIZE/h,b=Xt.MIN_SIZE/d;r=Math.max(Math.min(r,1/m,1/y),w/m,b/y);const E=Xt._round(m*r),_=Xt._round(y*r);if(E===m&&_===y)return;this.#h||=[f,p,m,y];const k=c(m/2,y/2),T=Xt._round(f+k[0]),R=Xt._round(p+k[1]),D=c(E/2,_/2);this.x=T-D[0],this.y=R-D[1],this.width=E,this.height=_,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#w(){this.#i?.toggle(!0),this.parent.togglePointerEvents(!0),this.#B()}pointerdown(t){const{isMac:e}=Hn.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#p=!0,this._isDraggable){this.#F(t);return}this.#D(t)}#D(t){const{isMac:e}=Hn.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#F(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const i=new AbortController,r=this._uiManager.combinedSignal(i),o={capture:!0,passive:!1,signal:r},c=d=>{i.abort(),this.#r=null,this.#p=!1,this._uiManager.endDragSession()||this.#D(d),n&&this._onStopDragging()};e&&(this.#E=t.clientX,this.#S=t.clientY,this.#r=t.pointerId,this.#o=t.pointerType,window.addEventListener("pointermove",d=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:f,clientY:p,pointerId:m}=d;if(m!==this.#r){rn(d);return}const[y,w]=this.screenToPageTranslation(f-this.#E,p-this.#S);this.#E=f,this.#S=p,this._uiManager.dragSelectedEditors(y,w)},o),window.addEventListener("touchmove",rn,o),window.addEventListener("pointerdown",d=>{d.pointerType===this.#o&&(this.#k||d.isPrimary)&&c(d),rn(d)},o));const h=d=>{if(!this.#r||this.#r===d.pointerId){c(d);return}rn(d)};window.addEventListener("pointerup",h,{signal:r}),window.addEventListener("blur",h,{signal:r})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.#v=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){const i=this.parentScale,[r,o]=this.pageDimensions,[c,h]=this.pageTranslation,d=t/i,f=e/i,p=this.x*r,m=this.y*o,y=this.width*r,w=this.height*o;switch(n){case 0:return[p+d+c,o-m-f-w+h,p+d+y+c,o-m-f+h];case 90:return[p+f+c,o-m+d+h,p+f+w+c,o-m+d+y+h];case 180:return[p-d-y+c,o-m+f+h,p-d+c,o-m+f+w+h];case 270:return[p-f-w+c,o-m-d-y+h,p-f+c,o-m-d+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,i,r,o]=t,c=r-n,h=o-i;switch(this.rotation){case 0:return[n,e-o,c,h];case 90:return[n,e-i,h,c];case 180:return[r,e-i,c,h];case 270:return[r,e-o,h,c];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Xt._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:n,opacity:i,deleted:r,richText:o},uid:c,pageIndex:h,creationDate:d,modificationDate:f}=this;return{id:c,pageIndex:h,rect:this.getPDFRect(),richText:o,contentsObj:{str:t},creationDate:d,modificationDate:n||f,popupRef:!r,color:e,opacity:i}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#y=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#y=!1,!0):!1}isInEditMode(){return this.#y}shouldGetKeyboardEvents(){return this.#b}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:i}=this.getClientDimensions(),{innerHeight:r,innerWidth:o}=window;return e<o&&i>0&&t<r&&n>0}#U(){if(this.#f||!this.div)return;this.#f=new AbortController;const t=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#U()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,e,n){const i=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});i.rotation=t.rotation,i.#t=t.accessibilityData,i._isCopy=t.isCopy||!1;const[r,o]=i.pageDimensions,[c,h,d,f]=i.getRectInCurrentCoords(t.rect,o);return i.x=c/r,i.y=h/o,i.width=d/r,i.height=f/o,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#v&&(clearTimeout(this.#v),this.#v=null),this.#I(),this.removeEditToolbar(),this.#x){for(const t of this.#x.values())clearTimeout(t);this.#x=null}this.parent=null,this.#k?.destroy(),this.#k=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#j(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[n,i,r,o]=this.getPDFRect();return[Xt._round(n+(r-n)*t),Xt._round(i+(o-i)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(t){this.#n.commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){this.#n.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#c.children;if(!this.#e){this.#e=Array.from(e);const o=this.#q.bind(this),c=this.#$.bind(this),h=this._uiManager._signal;for(const d of this.#e){const f=d.getAttribute("data-resizer-name");d.setAttribute("role","spinbutton"),d.addEventListener("keydown",o,{signal:h}),d.addEventListener("blur",c,{signal:h}),d.addEventListener("focus",this.#Y.bind(this,f),{signal:h}),d.setAttribute("data-l10n-id",Xt._l10nResizer[f])}}const n=this.#e[0];let i=0;for(const o of e){if(o===n)break;i++}const r=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(r!==i){if(r<i)for(let c=0;c<i-r;c++)this.#c.append(this.#c.firstChild);else if(r>i)for(let c=0;c<r-i;c++)this.#c.firstChild.before(this.#c.lastChild);let o=0;for(const c of e){const d=this.#e[o++].getAttribute("data-resizer-name");c.setAttribute("data-l10n-id",Xt._l10nResizer[d])}}this.#H(0),this.#b=!0,this.#c.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#q(t){Xt._resizerKeyboardManager.exec(this,t)}#$(t){this.#b&&t.relatedTarget?.parentNode!==this.#c&&this.#I()}#Y(t){this.#m=this.#b?t:""}#H(t){if(this.#e)for(const e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#b&&this.#O(this.#m,{deltaX:t,deltaY:e,fromKeyboard:!0})}#I(){this.#b=!1,this.#H(-1),this.#B()}_stopResizingWithKeyboard(){this.#I(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#i?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#i?.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#g}set isEditing(t){this.#g=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#x||=new Map;const{action:n}=t;let i=this.#x.get(n);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(t),this.#x.delete(n),this.#x.size===0&&(this.#x=null)},Xt._telemetryTimeout),this.#x.set(n,i);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#s=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#s=!0}updateFakeAnnotationElement(t){if(!this.#u&&!this.deleted){this.#u=t.addFakeAnnotation(this);return}if(this.deleted){this.#u.remove(),this.#u=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#u.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}}class FF extends Xt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const ZR=3285377520,ws=4294901760,or=65535;class YD{constructor(t){this.h1=t?t&4294967295:ZR,this.h2=t?t&4294967295:ZR}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let b=0,E=t.length;b<E;b++){const _=t.charCodeAt(b);_<=255?e[n++]=_:(e[n++]=_>>>8,e[n++]=_&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=n>>2,r=n-i*4,o=new Uint32Array(e.buffer,0,i);let c=0,h=0,d=this.h1,f=this.h2;const p=3432918353,m=461845907,y=p&or,w=m&or;for(let b=0;b<i;b++)b&1?(c=o[b],c=c*p&ws|c*y&or,c=c<<15|c>>>17,c=c*m&ws|c*w&or,d^=c,d=d<<13|d>>>19,d=d*5+3864292196):(h=o[b],h=h*p&ws|h*y&or,h=h<<15|h>>>17,h=h*m&ws|h*w&or,f^=h,f=f<<13|f>>>19,f=f*5+3864292196);switch(c=0,r){case 3:c^=e[i*4+2]<<16;case 2:c^=e[i*4+1]<<8;case 1:c^=e[i*4],c=c*p&ws|c*y&or,c=c<<15|c>>>17,c=c*m&ws|c*w&or,i&1?d^=c:f^=c}this.h1=d,this.h2=f}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&ws|t*36045&or,e=e*4283543511&ws|((e<<16|t>>>16)*2950163797&ws)>>>16,t^=e>>>1,t=t*444984403&ws|t*60499&or,e=e*3301882366&ws|((e<<16|t>>>16)*3120437893&ws)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const eS=Object.freeze({map:null,hash:"",transfer:void 0});class _2{#t=!1;#e=null;#i=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=this.#n.get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return this.#n.get(t)}remove(t){const e=this.#n.get(t);if(e!==void 0&&(e instanceof Xt&&this.#i.delete(e.annotationElementId),this.#n.delete(t),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of this.#n.values())if(n instanceof Xt)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=this.#n.get(t);let i=!1;if(n!==void 0)for(const[r,o]of Object.entries(e))n[r]!==o&&(i=!0,n[r]=o);else i=!0,this.#n.set(t,e);i&&this.#a(),e instanceof Xt&&((this.#i||=new Map).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return this.#n.has(t)}get size(){return this.#n.size}#a(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new XD(this)}get serializable(){if(this.#n.size===0)return eS;const t=new Map,e=new YD,n=[],i=Object.create(null);let r=!1;for(const[o,c]of this.#n){const h=c instanceof Xt?c.serialize(!1,i):c;h&&(t.set(o,h),e.update(`${o}:${JSON.stringify(h)}`),r||=!!h.bitmap)}if(r)for(const o of t.values())o.bitmap&&n.push(o.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:eS}get editorStats(){let t=null;const e=new Map;let n=0,i=0;for(const r of this.#n.values()){if(!(r instanceof Xt)){r.popup&&(r.popup.deleted?i+=1:n+=1);continue}r.isCommentDeleted?i+=1:r.hasEditedComment&&(n+=1);const o=r.telemetryFinalData;if(!o)continue;const{type:c}=o;e.has(c)||e.set(c,Object.getPrototypeOf(r).constructor),t||=Object.create(null);const h=t[c]||=new Map;for(const[d,f]of Object.entries(o)){if(d==="type")continue;let p=h.get(d);p||(p=new Map,h.set(d,p));const m=p.get(f)??0;p.set(f,m+1)}}if((i>0||n>0)&&(t||=Object.create(null),t.comments={deleted:i,edited:n}),!t)return null;for(const[r,o]of e)t[r]=o.computeTelemetryFinalData(t[r]);return t}resetModifiedIds(){this.#e=null}updateEditor(t,e){const n=this.#i?.get(t);return n?(n.updateFromAnnotationLayer(e),!0):!1}getEditor(t){return this.#i?.get(t)||null}get modifiedIds(){if(this.#e)return this.#e;const t=[];if(this.#i)for(const e of this.#i.values())e.serialize()&&t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class XD extends _2{#t;constructor(t){super();const{map:e,hash:n,transfer:i}=t.serializable,r=structuredClone(e,i?{transfer:i}:null);this.#t={map:r,hash:n,transfer:i}}get print(){Xe("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return ce(this,"modifiedIds",{ids:new Set,hash:""})}}class zF{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:n}){if(!(!t||this.#t.has(t.loadedName))){if(xe(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:r,style:o}=t,c=new FontFace(i,r,o);this.addNativeFontFace(c);try{await c.load(),this.#t.add(i),n?.(t)}catch{re(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(c)}return}Xe("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(i){throw re(`Failed to load font '${n.family}': '${i}'.`),t.disableFontFace=!0,i}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const i=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,i)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return ce(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return ce(this,"isSyncFontLoadingSupported",bi||Hn.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(xe(!i.done,"completeRequest() cannot be called twice."),i.done=!0;n.length>0&&n[0].done;){const r=n.shift();setTimeout(r.callback,0)}}const{loadingRequests:n}=this,i={done:!1,complete:e,callback:t};return n.push(i),i}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return ce(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(R,D){return R.charCodeAt(D)<<24|R.charCodeAt(D+1)<<16|R.charCodeAt(D+2)<<8|R.charCodeAt(D+3)&255}function i(R,D,F,j){const I=R.substring(0,D),O=R.substring(D+F);return I+j+O}let r,o;const c=this._document.createElement("canvas");c.width=1,c.height=1;const h=c.getContext("2d");let d=0;function f(R,D){if(++d>30){re("Load test font never loaded."),D();return}if(h.font="30px "+R,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){D();return}setTimeout(f.bind(null,R,D))}const p=`lt${Date.now()}${this.loadTestFontId++}`;let m=this._loadTestFont;m=i(m,976,p.length,p);const w=16,b=1482184792;let E=n(m,w);for(r=0,o=p.length-3;r<o;r+=4)E=E-b+n(p,r)|0;r<p.length&&(E=E-b+n(p+"XXX",r)|0),m=i(m,w,4,kF(E));const _=`url(data:font/opentype;base64,${btoa(m)});`,k=`@font-face {font-family:"${p}";src:${_}}`;this.insertRule(k);const T=this._document.createElement("div");T.style.visibility="hidden",T.style.width=T.style.height="10px",T.style.position="absolute",T.style.top=T.style.left="0px";for(const R of[t.loadedName,p]){const D=this._document.createElement("span");D.textContent="Hi",D.style.fontFamily=R,T.append(D)}this._document.body.append(T),f(p,()=>{T.remove(),e.complete()})}}class UF{#t;constructor(t,e=null,n,i){this.compiledGlyphs=Object.create(null),this.#t=t,this._inspectFont=e,n&&Object.assign(this,n),i&&(this.charProcOperatorList=i)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${zD(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let i;try{i=t.get(n)}catch(o){re(`getPathGenerator - ignoring character: "${o}".`)}const r=new Path2D(i||"");return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=r}get black(){return this.#t.black}get bold(){return this.#t.bold}get disableFontFace(){return this.#t.disableFontFace??!1}get fontExtraProperties(){return this.#t.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#t.isInvalidPDFjsFont}get isType3Font(){return this.#t.isType3Font}get italic(){return this.#t.italic}get missingFile(){return this.#t.missingFile}get remeasure(){return this.#t.remeasure}get vertical(){return this.#t.vertical}get ascent(){return this.#t.ascent}get defaultWidth(){return this.#t.defaultWidth}get descent(){return this.#t.descent}get bbox(){return this.#t.bbox}get fontMatrix(){return this.#t.fontMatrix}get fallbackName(){return this.#t.fallbackName}get loadedName(){return this.#t.loadedName}get mimetype(){return this.#t.mimetype}get name(){return this.#t.name}get data(){return this.#t.data}clearData(){this.#t.clearData()}get cssFontInfo(){return this.#t.cssFontInfo}get systemFontInfo(){return this.#t.systemFontInfo}get defaultVMetrics(){return this.#t.defaultVMetrics}}function HF(s){if(s instanceof URL)return s.href;if(typeof s=="string"){if(bi)return s;const t=URL.parse(s,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function WF(s){if(bi&&typeof Buffer<"u"&&s instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength)return s;if(typeof s=="string")return hg(s);if(s instanceof ArrayBuffer||ArrayBuffer.isView(s)||typeof s=="object"&&!isNaN(s?.length))return new Uint8Array(s);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Gm(s){if(typeof s!="string")return null;if(s.endsWith("/"))return s;throw new Error(`Invalid factory url: "${s}" must include trailing slash.`)}const nS=s=>typeof s=="object"&&Number.isInteger(s?.num)&&s.num>=0&&Number.isInteger(s?.gen)&&s.gen>=0,GF=s=>typeof s=="object"&&typeof s?.name=="string",KD=PF.bind(null,nS,GF);class VF{#t=new Map;#e=Promise.resolve();postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(const[i]of this.#t)i.call(this,n)})}addEventListener(t,e,n=null){let i=null;if(n?.signal instanceof AbortSignal){const{signal:r}=n;if(r.aborted){re("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(t,e);i=()=>r.removeEventListener("abort",o),r.addEventListener("abort",o)}this.#t.set(e,i)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const Vm={DATA:1,ERROR:2},wn={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function QR(){}function Ni(s){if(s instanceof Da||s instanceof jv||s instanceof GR||s instanceof eg||s instanceof Qw)return s;switch(s instanceof Error||typeof s=="object"&&s!==null||Xe('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),s.name){case"AbortException":return new Da(s.message);case"InvalidPDFException":return new jv(s.message);case"PasswordException":return new GR(s.message,s.code);case"ResponseException":return new eg(s.message,s.status,s.missing);case"UnknownErrorException":return new Qw(s.message,s.details)}return new Qw(s.message,s.toString())}class _f{#t=new AbortController;constructor(t,e,n){this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#n(t);return}if(t.callback){const n=t.callbackId,i=this.callbackCapabilities[n];if(!i)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===Vm.DATA)i.resolve(t.data);else if(t.callback===Vm.ERROR)i.reject(Ni(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,i=t.sourceName,r=this.comObj;Promise.try(e,t.data).then(function(o){r.postMessage({sourceName:n,targetName:i,callback:Vm.DATA,callbackId:t.callbackId,data:o})},function(o){r.postMessage({sourceName:n,targetName:i,callback:Vm.ERROR,callbackId:t.callbackId,reason:Ni(o)})});return}if(t.streamId){this.#i(t);return}e(t.data)}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const i=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[i]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:i,data:e},n)}catch(o){r.reject(o)}return r.promise}sendWithStream(t,e,n,i){const r=this.streamId++,o=this.sourceName,c=this.targetName,h=this.comObj;return new ReadableStream({start:d=>{const f=Promise.withResolvers();return this.streamControllers[r]={controller:d,startCall:f,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:o,targetName:c,action:t,streamId:r,data:e,desiredSize:d.desiredSize},i),f.promise},pull:d=>{const f=Promise.withResolvers();return this.streamControllers[r].pullCall=f,h.postMessage({sourceName:o,targetName:c,stream:wn.PULL,streamId:r,desiredSize:d.desiredSize}),f.promise},cancel:d=>{xe(d instanceof Error,"cancel must have a valid reason");const f=Promise.withResolvers();return this.streamControllers[r].cancelCall=f,this.streamControllers[r].isClosed=!0,h.postMessage({sourceName:o,targetName:c,stream:wn.CANCEL,streamId:r,reason:Ni(d)}),f.promise}},n)}#i(t){const e=t.streamId,n=this.sourceName,i=t.sourceName,r=this.comObj,o=this,c=this.actionHandler[t.action],h={enqueue(d,f=1,p){if(this.isCancelled)return;const m=this.desiredSize;this.desiredSize-=f,m>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:n,targetName:i,stream:wn.ENQUEUE,streamId:e,chunk:d},p)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:i,stream:wn.CLOSE,streamId:e}),delete o.streamSinks[e])},error(d){xe(d instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:i,stream:wn.ERROR,streamId:e,reason:Ni(d)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[e]=h,Promise.try(c,t.data,h).then(function(){r.postMessage({sourceName:n,targetName:i,stream:wn.START_COMPLETE,streamId:e,success:!0})},function(d){r.postMessage({sourceName:n,targetName:i,stream:wn.START_COMPLETE,streamId:e,reason:Ni(d)})})}#n(t){const e=t.streamId,n=this.sourceName,i=t.sourceName,r=this.comObj,o=this.streamControllers[e],c=this.streamSinks[e];switch(t.stream){case wn.START_COMPLETE:t.success?o.startCall.resolve():o.startCall.reject(Ni(t.reason));break;case wn.PULL_COMPLETE:t.success?o.pullCall.resolve():o.pullCall.reject(Ni(t.reason));break;case wn.PULL:if(!c){r.postMessage({sourceName:n,targetName:i,stream:wn.PULL_COMPLETE,streamId:e,success:!0});break}c.desiredSize<=0&&t.desiredSize>0&&c.sinkCapability.resolve(),c.desiredSize=t.desiredSize,Promise.try(c.onPull||QR).then(function(){r.postMessage({sourceName:n,targetName:i,stream:wn.PULL_COMPLETE,streamId:e,success:!0})},function(d){r.postMessage({sourceName:n,targetName:i,stream:wn.PULL_COMPLETE,streamId:e,reason:Ni(d)})});break;case wn.ENQUEUE:if(xe(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(t.chunk);break;case wn.CLOSE:if(xe(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),this.#a(o,e);break;case wn.ERROR:xe(o,"error should have stream controller"),o.controller.error(Ni(t.reason)),this.#a(o,e);break;case wn.CANCEL_COMPLETE:t.success?o.cancelCall.resolve():o.cancelCall.reject(Ni(t.reason)),this.#a(o,e);break;case wn.CANCEL:if(!c)break;const h=Ni(t.reason);Promise.try(c.onCancel||QR,h).then(function(){r.postMessage({sourceName:n,targetName:i,stream:wn.CANCEL_COMPLETE,streamId:e,success:!0})},function(d){r.postMessage({sourceName:n,targetName:i,stream:wn.CANCEL_COMPLETE,streamId:e,reason:Ni(d)})}),c.sinkCapability.reject(h),c.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#a(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#t?.abort(),this.#t=null}}class ZD{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Xe("Abstract method `_createCanvas` called.")}}class $F extends ZD{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class QD{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Xe("Abstract method `_fetch` called.")}}class JR extends QD{async _fetch(t){const e=await ed(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):hg(e)}}class JD{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,i,r){return"none"}destroy(t=!1){}}class qF extends JD{#t;#e;#i;#n;#a;#s;#r=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#n=t,this.#a=e}get#o(){return this.#e||=new Map}get#c(){return this.#s||=new Map}get#l(){if(!this.#i){const t=this.#a.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const n=this.#a.createElementNS(ia,"svg");n.setAttribute("width",0),n.setAttribute("height",0),this.#i=this.#a.createElementNS(ia,"defs"),t.append(n),n.append(this.#i),this.#a.body.append(t)}return this.#i}#d(t){if(t.length===1){const h=t[0],d=new Array(256);for(let p=0;p<256;p++)d[p]=h[p]/255;const f=d.join(",");return[f,f,f]}const[e,n,i]=t,r=new Array(256),o=new Array(256),c=new Array(256);for(let h=0;h<256;h++)r[h]=e[h]/255,o[h]=n[h]/255,c[h]=i[h]/255;return[r.join(","),o.join(","),c.join(",")]}#u(t){if(this.#t===void 0){this.#t="";const e=this.#a.URL;e!==this.#a.baseURI&&(dg(e)?re('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=y2(e,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#o.get(t);if(e)return e;const[n,i,r]=this.#d(t),o=t.length===1?n:`${n}${i}${r}`;if(e=this.#o.get(o),e)return this.#o.set(t,e),e;const c=`g_${this.#n}_transfer_map_${this.#r++}`,h=this.#u(c);this.#o.set(t,h),this.#o.set(o,h);const d=this.#p(c);return this.#g(n,i,r,d),h}addHCMFilter(t,e){const n=`${t}-${e}`,i="base";let r=this.#c.get(i);if(r?.key===n||(r?(r.filter?.remove(),r.key=n,r.url="none",r.filter=null):(r={key:n,url:"none",filter:null},this.#c.set(i,r)),!t||!e))return r.url;const o=this.#b(t);t=Gt.makeHexColor(...o);const c=this.#b(e);if(e=Gt.makeHexColor(...c),this.#l.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return r.url;const h=new Array(256);for(let y=0;y<=255;y++){const w=y/255;h[y]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const d=h.join(","),f=`g_${this.#n}_hcm_filter`,p=r.filter=this.#p(f);this.#g(d,d,d,p),this.#m(p);const m=(y,w)=>{const b=o[y]/255,E=c[y]/255,_=new Array(w+1);for(let k=0;k<=w;k++)_[k]=b+k/w*(E-b);return _.join(",")};return this.#g(m(0,5),m(1,5),m(2,5),p),r.url=this.#u(f),r.url}addAlphaFilter(t){let e=this.#o.get(t);if(e)return e;const[n]=this.#d([t]),i=`alpha_${n}`;if(e=this.#o.get(i),e)return this.#o.set(t,e),e;const r=`g_${this.#n}_alpha_map_${this.#r++}`,o=this.#u(r);this.#o.set(t,o),this.#o.set(i,o);const c=this.#p(r);return this.#y(n,c),o}addLuminosityFilter(t){let e=this.#o.get(t||"luminosity");if(e)return e;let n,i;if(t?([n]=this.#d([t]),i=`luminosity_${n}`):i="luminosity",e=this.#o.get(i),e)return this.#o.set(t,e),e;const r=`g_${this.#n}_luminosity_map_${this.#r++}`,o=this.#u(r);this.#o.set(t,o),this.#o.set(i,o);const c=this.#p(r);return this.#f(c),t&&this.#y(n,c),o}addHighlightHCMFilter(t,e,n,i,r){const o=`${e}-${n}-${i}-${r}`;let c=this.#c.get(t);if(c?.key===o||(c?(c.filter?.remove(),c.key=o,c.url="none",c.filter=null):(c={key:o,url:"none",filter:null},this.#c.set(t,c)),!e||!n))return c.url;const[h,d]=[e,n].map(this.#b.bind(this));let f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),p=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[m,y]=[i,r].map(this.#b.bind(this));p<f&&([f,p,m,y]=[p,f,y,m]),this.#l.style.color="";const w=(_,k,T)=>{const R=new Array(256),D=(p-f)/T,F=_/255,j=(k-_)/(255*T);let I=0;for(let O=0;O<=T;O++){const X=Math.round(f+O*D),Q=F+O*j;for(let H=I;H<=X;H++)R[H]=Q;I=X+1}for(let O=I;O<256;O++)R[O]=R[I-1];return R.join(",")},b=`g_${this.#n}_hcm_${t}_filter`,E=c.filter=this.#p(b);return this.#m(E),this.#g(w(m[0],y[0],5),w(m[1],y[1],5),w(m[2],y[2],5),E),c.url=this.#u(b),c.url}destroy(t=!1){t&&this.#s?.size||(this.#i?.parentNode.parentNode.remove(),this.#i=null,this.#e?.clear(),this.#e=null,this.#s?.clear(),this.#s=null,this.#r=0)}#f(t){const e=this.#a.createElementNS(ia,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#m(t){const e=this.#a.createElementNS(ia,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#p(t){const e=this.#a.createElementNS(ia,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#l.append(e),e}#h(t,e,n){const i=this.#a.createElementNS(ia,e);i.setAttribute("type","discrete"),i.setAttribute("tableValues",n),t.append(i)}#g(t,e,n,i){const r=this.#a.createElementNS(ia,"feComponentTransfer");i.append(r),this.#h(r,"feFuncR",t),this.#h(r,"feFuncG",e),this.#h(r,"feFuncB",n)}#y(t,e){const n=this.#a.createElementNS(ia,"feComponentTransfer");e.append(n),this.#h(n,"feFuncA",t)}#b(t){return this.#l.style.color=t,nd(getComputedStyle(this.#l).getPropertyValue("color"))}}class tN{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Xe("Abstract method `_fetch` called.")}}class tP extends tN{async _fetch(t){const e=await ed(t,"arraybuffer");return new Uint8Array(e)}}class eN{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){Xe("Abstract method `_fetch` called.")}}class eP extends eN{async _fetch(t){const e=await ed(t,"arraybuffer");return new Uint8Array(e)}}bi&&re("Please use the `legacy` build in Node.js environments.");async function E2(s){const e=await process.getBuiltinModule("fs").promises.readFile(s);return new Uint8Array(e)}class YF extends JD{}class XF extends ZD{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class KF extends QD{async _fetch(t){return E2(t)}}class ZF extends tN{async _fetch(t){return E2(t)}}class QF extends eN{async _fetch(t){return E2(t)}}const fh="__forcedDependency",{floor:nP,ceil:iP}=Math;function $m(s,t,e,n,i,r){s[t*4+0]=Math.min(s[t*4+0],e),s[t*4+1]=Math.min(s[t*4+1],n),s[t*4+2]=Math.max(s[t*4+2],i),s[t*4+3]=Math.max(s[t*4+3],r)}const iS=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class JF{#t;#e;constructor(t,e){this.#t=t,this.#e=e}get length(){return this.#t.length}isEmpty(t){return this.#t[t]===iS}minX(t){return this.#e[t*4+0]/256}minY(t){return this.#e[t*4+1]/256}maxX(t){return(this.#e[t*4+2]+1)/256}maxY(t){return(this.#e[t*4+3]+1)/256}}const qm=(s,t)=>{if(!s)return;let e=s.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},s.set(t,e)),e};class tz{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[fh]:[]};#i=new Map;#n=[];#a=[];#s=[[1,0,0,1,0,0]];#r=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#d=new Map;#u=new Map;#f;#m;#p;#h;#g;constructor(t,e,n=!1){this.#f=t.width,this.#m=t.height,this.#y(e),n&&(this.#g=new Map)}growOperationsCount(t){t>=this.#h.length&&this.#y(t,this.#h)}#y(t,e){const n=new ArrayBuffer(t*4);this.#p=new Uint8ClampedArray(n),this.#h=new Uint32Array(n),e&&e.length>0?(this.#h.set(e),this.#h.fill(iS,e.length)):this.#h.fill(iS)}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[fh]:{__proto__:this.#e[fh]}},this.#r={__proto__:this.#r},this.#n.push(t),this}restore(t){const e=Object.getPrototypeOf(this.#t);if(e===null)return this;this.#t=e,this.#e=Object.getPrototypeOf(this.#e),this.#r=Object.getPrototypeOf(this.#r);const n=this.#n.pop();return n!==void 0&&(qm(this.#g,t)?.dependencies.add(n),this.#h[t]=this.#h[n]),this}recordOpenMarker(t){return this.#n.push(t),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)}recordCloseMarker(t){const e=this.#n.pop();return e!==void 0&&(qm(this.#g,t)?.dependencies.add(e),this.#h[t]=this.#h[e]),this}beginMarkedContent(t){return this.#a.push(t),this}endMarkedContent(t){const e=this.#a.pop();return e!==void 0&&(qm(this.#g,t)?.dependencies.add(e),this.#h[t]=this.#h[e]),this}pushBaseTransform(t){return this.#s.push(Gt.multiplyByDOMMatrix(this.#s.at(-1),t.getTransform())),this}popBaseTransform(){return this.#s.length>1&&this.#s.pop(),this}recordSimpleData(t,e){return this.#t[t]=e,this}recordIncrementalData(t,e){return this.#e[t].push(e),this}resetIncrementalData(t,e){return this.#e[t].length=0,this}recordNamedData(t,e){return this.#i.set(t,e),this}recordSimpleDataFromNamed(t,e,n){this.#t[t]=this.#i.get(e)??n}recordFutureForcedDependency(t,e){return this.recordIncrementalData(fh,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in this.#t&&this.recordFutureForcedDependency(e,this.#t[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#l)this.recordFutureForcedDependency(fh,t);return this}resetBBox(t){return this.#c!==t&&(this.#c=t,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(t,e,n,i,r,o){const c=Gt.multiplyByDOMMatrix(this.#s.at(-1),e.getTransform()),h=[1/0,1/0,-1/0,-1/0];Gt.axialAlignedBoundingBox([n,r,i,o],c,h);const d=Gt.intersect(this.#r,h);return d?(this.#r[0]=d[0],this.#r[1]=d[1],this.#r[2]=d[2],this.#r[3]=d[3]):(this.#r[0]=this.#r[1]=1/0,this.#r[2]=this.#r[3]=-1/0),this}recordBBox(t,e,n,i,r,o){const c=this.#r;if(c[0]===1/0)return this;const h=Gt.multiplyByDOMMatrix(this.#s.at(-1),e.getTransform());if(c[0]===-1/0)return Gt.axialAlignedBoundingBox([n,r,i,o],h,this.#o),this;const d=[1/0,1/0,-1/0,-1/0];return Gt.axialAlignedBoundingBox([n,r,i,o],h,d),this.#o[0]=Math.min(this.#o[0],Math.max(d[0],c[0])),this.#o[1]=Math.min(this.#o[1],Math.max(d[1],c[1])),this.#o[2]=Math.max(this.#o[2],Math.min(d[2],c[2])),this.#o[3]=Math.max(this.#o[3],Math.min(d[3],c[3])),this}recordCharacterBBox(t,e,n,i=1,r=0,o=0,c){const h=n.bbox;let d,f;if(h&&(d=h[2]!==h[0]&&h[3]!==h[1]&&this.#u.get(n),d!==!1&&(f=[0,0,0,0],Gt.axialAlignedBoundingBox(h,n.fontMatrix,f),(i!==1||r!==0||o!==0)&&Gt.scaleMinMax([i,0,0,-i,r,o],f),d)))return this.recordBBox(t,e,f[0],f[2],f[1],f[3]);if(!c)return this.recordFullPageBBox(t);const p=c();return h&&f&&d===void 0&&(d=f[0]<=r-p.actualBoundingBoxLeft&&f[2]>=r+p.actualBoundingBoxRight&&f[1]<=o-p.actualBoundingBoxAscent&&f[3]>=o+p.actualBoundingBoxDescent,this.#u.set(n,d),d)?this.recordBBox(t,e,f[0],f[2],f[1],f[3]):this.recordBBox(t,e,r-p.actualBoundingBoxLeft,r+p.actualBoundingBoxRight,o-p.actualBoundingBoxAscent,o+p.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#o[0]=Math.max(0,this.#r[0]),this.#o[1]=Math.max(0,this.#r[1]),this.#o[2]=Math.min(this.#f,this.#r[2]),this.#o[3]=Math.min(this.#m,this.#r[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,e){const n=this.#l,i=this.#t,r=this.#e;for(const o of e)o in this.#t?n.add(i[o]):o in r&&r[o].forEach(n.add,n);return this}recordNamedDependency(t,e){return this.#i.has(e)&&this.#l.add(this.#i.get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[fh]),this.#g){const n=qm(this.#g,t),{dependencies:i}=n;this.#l.forEach(i.add,i),this.#n.forEach(i.add,i),this.#a.forEach(i.add,i),i.delete(t),n.isRenderingOperation=!0}if(this.#c===t){const n=nP(this.#o[0]*256/this.#f),i=nP(this.#o[1]*256/this.#m),r=iP(this.#o[2]*256/this.#f),o=iP(this.#o[3]*256/this.#m);$m(this.#p,t,n,i,r,o);for(const c of this.#l)c!==t&&$m(this.#p,c,n,i,r,o);for(const c of this.#n)c!==t&&$m(this.#p,c,n,i,r,o);for(const c of this.#a)c!==t&&$m(this.#p,c,n,i,r,o);e||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(t,e=!1){const n=Array.from(this.#l);this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const i of n)this.recordIncrementalData("sameLineText",i);return this}bboxToClipBoxDropOperation(t,e=!1){return this.#c===t&&(this.#c=-1,this.#r[0]=Math.max(this.#r[0],this.#o[0]),this.#r[1]=Math.max(this.#r[1],this.#o[1]),this.#r[2]=Math.min(this.#r[2],this.#o[2]),this.#r[3]=Math.min(this.#r[3],this.#o[3]),e||this.#l.clear()),this}_takePendingDependencies(){const t=this.#l;return this.#l=new Set,t}_extractOperation(t){const e=this.#d.get(t);return this.#d.delete(t),e}_pushPendingDependencies(t){for(const e of t)this.#l.add(e)}take(){return this.#u.clear(),new JF(this.#h,this.#p)}takeDebugMetadata(){return this.#g}}class zv{#t;#e;#i;#n=0;#a=0;constructor(t,e,n){if(t instanceof zv&&t.#i===!!n)return t;this.#t=t,this.#e=e,this.#i=!!n}growOperationsCount(){throw new Error("Unreachable")}save(t){return this.#a++,this.#t.save(this.#e),this}restore(t){return this.#a>0&&(this.#t.restore(this.#e),this.#a--),this}recordOpenMarker(t){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#n--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,e){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,e){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,e){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,n){return this.#t.recordSimpleDataFromNamed(t,e,this.#e),this}recordFutureForcedDependency(t,e){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#i||this.#t.resetBBox(this.#e),this}recordClipBox(t,e,n,i,r,o){return this.#i||this.#t.recordClipBox(this.#e,e,n,i,r,o),this}recordBBox(t,e,n,i,r,o){return this.#i||this.#t.recordBBox(this.#e,e,n,i,r,o),this}recordCharacterBBox(t,e,n,i,r,o,c){return this.#i||this.#t.recordCharacterBBox(this.#e,e,n,i,r,o,c),this}recordFullPageBBox(t){return this.#i||this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,e){return this.#t.recordDependencies(this.#e,e),this}recordNamedDependency(t,e){return this.#t.recordNamedDependency(this.#e,e),this}recordOperation(t){return this.#t.recordOperation(this.#e,!0),this}recordShowTextOperation(t){return this.#t.recordShowTextOperation(this.#e,!0),this}bboxToClipBoxDropOperation(t){return this.#i||this.#t.bboxToClipBoxDropOperation(this.#e,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const As={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Jn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function sS(s,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],i=new Path2D;i.rect(t[0],t[1],e,n),s.clip(i)}class C2{isModifyingCurrentTransform(){return!1}getPattern(){Xe("Abstract method `getPattern` called.")}}class ez extends C2{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,i){let r;if(i===Jn.STROKE||i===Jn.FILL){const o=e.current.getClippedPathBoundingBox(i,nn(t))||[0,0,0,0],c=Math.ceil(o[2]-o[0])||1,h=Math.ceil(o[3]-o[1])||1,d=e.cachedCanvases.getCanvas("pattern",c,h),f=d.context;f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.rect(0,0,f.canvas.width,f.canvas.height),f.translate(-o[0],-o[1]),n=Gt.transform(n,[1,0,0,1,o[0],o[1]]),f.transform(...e.baseTransform),this.matrix&&f.transform(...this.matrix),sS(f,this._bbox),f.fillStyle=this._createGradient(f),f.fill(),r=t.createPattern(d.canvas,"no-repeat");const p=new DOMMatrix(n);r.setTransform(p)}else sS(t,this._bbox),r=this._createGradient(t);return r}}function eA(s,t,e,n,i,r,o,c){const h=t.coords,d=t.colors,f=s.data,p=s.width*4;let m;h[e+1]>h[n+1]&&(m=e,e=n,n=m,m=r,r=o,o=m),h[n+1]>h[i+1]&&(m=n,n=i,i=m,m=o,o=c,c=m),h[e+1]>h[n+1]&&(m=e,e=n,n=m,m=r,r=o,o=m);const y=(h[e]+t.offsetX)*t.scaleX,w=(h[e+1]+t.offsetY)*t.scaleY,b=(h[n]+t.offsetX)*t.scaleX,E=(h[n+1]+t.offsetY)*t.scaleY,_=(h[i]+t.offsetX)*t.scaleX,k=(h[i+1]+t.offsetY)*t.scaleY;if(w>=k)return;const T=d[r],R=d[r+1],D=d[r+2],F=d[o],j=d[o+1],I=d[o+2],O=d[c],X=d[c+1],Q=d[c+2],H=Math.round(w),J=Math.round(k);let N,tt,$,G,gt,nt,Tt,U;for(let W=H;W<=J;W++){if(W<E){const St=W<w?0:(w-W)/(w-E);N=y-(y-b)*St,tt=T-(T-F)*St,$=R-(R-j)*St,G=D-(D-I)*St}else{let St;W>k?St=1:E===k?St=0:St=(E-W)/(E-k),N=b-(b-_)*St,tt=F-(F-O)*St,$=j-(j-X)*St,G=I-(I-Q)*St}let st;W<w?st=0:W>k?st=1:st=(w-W)/(w-k),gt=y-(y-_)*st,nt=T-(T-O)*st,Tt=R-(R-X)*st,U=D-(D-Q)*st;const lt=Math.round(Math.min(N,gt)),ut=Math.round(Math.max(N,gt));let Rt=p*W+lt*4;for(let St=lt;St<=ut;St++)st=(N-St)/(N-gt),st<0?st=0:st>1&&(st=1),f[Rt++]=tt-(tt-nt)*st|0,f[Rt++]=$-($-Tt)*st|0,f[Rt++]=G-(G-U)*st|0,f[Rt++]=255}}function nz(s,t,e){const n=t.coords,i=t.colors;let r,o;switch(t.type){case"lattice":const c=t.verticesPerRow,h=Math.floor(n.length/c)-1,d=c-1;for(r=0;r<h;r++){let f=r*c;for(let p=0;p<d;p++,f++)eA(s,e,n[f],n[f+1],n[f+c],i[f],i[f+1],i[f+c]),eA(s,e,n[f+c+1],n[f+1],n[f+c],i[f+c+1],i[f+1],i[f+c])}break;case"triangles":for(r=0,o=n.length;r<o;r+=3)eA(s,e,n[r],n[r+1],n[r+2],i[r],i[r+1],i[r+2]);break;default:throw new Error("illegal figure")}}class iz extends C2{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,n){const c=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),d=Math.ceil(this._bounds[2])-c,f=Math.ceil(this._bounds[3])-h,p=Math.min(Math.ceil(Math.abs(d*t[0]*1.1)),3e3),m=Math.min(Math.ceil(Math.abs(f*t[1]*1.1)),3e3),y=d/p,w=f/m,b={coords:this._coords,colors:this._colors,offsetX:-c,offsetY:-h,scaleX:1/y,scaleY:1/w},E=p+4,_=m+4,k=n.getCanvas("mesh",E,_),T=k.context,R=T.createImageData(p,m);if(e){const F=R.data;for(let j=0,I=F.length;j<I;j+=4)F[j]=e[0],F[j+1]=e[1],F[j+2]=e[2],F[j+3]=255}for(const F of this._figures)nz(R,F,b);return T.putImageData(R,2,2),{canvas:k.canvas,offsetX:c-2*y,offsetY:h-2*w,scaleX:y,scaleY:w}}isModifyingCurrentTransform(){return!0}getPattern(t,e,n,i){sS(t,this._bbox);const r=new Float32Array(2);if(i===Jn.SHADING)Gt.singularValueDecompose2dScale(nn(t),r);else if(this.matrix){Gt.singularValueDecompose2dScale(this.matrix,r);const[c,h]=r;Gt.singularValueDecompose2dScale(e.baseTransform,r),r[0]*=c,r[1]*=h}else Gt.singularValueDecompose2dScale(e.baseTransform,r);const o=this._createMeshCanvas(r,i===Jn.SHADING?null:this._background,e.cachedCanvases);return i!==Jn.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(o.offsetX,o.offsetY),t.scale(o.scaleX,o.scaleY),t.createPattern(o.canvas,"no-repeat")}}class sz extends C2{getPattern(){return"hotpink"}}function rz(s){switch(s[0]){case"RadialAxial":return new ez(s);case"Mesh":return new iz(s);case"Dummy":return new sz}throw new Error(`Unknown IR type: ${s[0]}`)}const sP={COLORED:1,UNCOLORED:2};class k2{static MAX_PATTERN_SIZE=3e3;constructor(t,e,n,i){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=n,this.baseTransform=i}createPatternCanvas(t,e){const{bbox:n,operatorList:i,paintType:r,tilingType:o,color:c,canvasGraphicsFactory:h}=this;let{xstep:d,ystep:f}=this;d=Math.abs(d),f=Math.abs(f),Ub("TilingType: "+o);const p=n[0],m=n[1],y=n[2],w=n[3],b=y-p,E=w-m,_=new Float32Array(2);Gt.singularValueDecompose2dScale(this.matrix,_);const[k,T]=_;Gt.singularValueDecompose2dScale(this.baseTransform,_);const R=k*_[0],D=T*_[1];let F=b,j=E,I=!1,O=!1;const X=Math.ceil(d*R),Q=Math.ceil(f*D),H=Math.ceil(b*R),J=Math.ceil(E*D);X>=H?F=d:I=!0,Q>=J?j=f:O=!0;const N=this.getSizeAndScale(F,this.ctx.canvas.width,R),tt=this.getSizeAndScale(j,this.ctx.canvas.height,D),$=t.cachedCanvases.getCanvas("pattern",N.size,tt.size),G=$.context,gt=h.createCanvasGraphics(G,e);if(gt.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(gt,r,c),G.translate(-N.scale*p,-tt.scale*m),gt.transform(0,N.scale,0,0,tt.scale,0,0),G.save(),gt.dependencyTracker?.save(),this.clipBbox(gt,p,m,y,w),gt.baseTransform=nn(gt.ctx),gt.executeOperatorList(i),gt.endDrawing(),gt.dependencyTracker?.restore(),G.restore(),I||O){const nt=$.canvas;I&&(F=d),O&&(j=f);const Tt=this.getSizeAndScale(F,this.ctx.canvas.width,R),U=this.getSizeAndScale(j,this.ctx.canvas.height,D),W=Tt.size,st=U.size,lt=t.cachedCanvases.getCanvas("pattern-workaround",W,st),ut=lt.context,Rt=I?Math.floor(b/d):0,St=O?Math.floor(E/f):0;for(let Ct=0;Ct<=Rt;Ct++)for(let xt=0;xt<=St;xt++)ut.drawImage(nt,W*Ct,st*xt,W,st,0,0,W,st);return{canvas:lt.canvas,scaleX:Tt.scale,scaleY:U.scale,offsetX:p,offsetY:m}}return{canvas:$.canvas,scaleX:N.scale,scaleY:tt.scale,offsetX:p,offsetY:m}}getSizeAndScale(t,e,n){const i=Math.max(k2.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*n);return r>=i?r=i:n=r/t,{scale:n,size:r}}clipBbox(t,e,n,i,r){const o=i-e,c=r-n;t.ctx.rect(e,n,o,c),Gt.axialAlignedBoundingBox([e,n,i,r],nn(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const i=t.ctx,r=t.current;switch(e){case sP.COLORED:const{fillStyle:o,strokeStyle:c}=this.ctx;i.fillStyle=r.fillColor=o,i.strokeStyle=r.strokeColor=c;break;case sP.UNCOLORED:i.fillStyle=i.strokeStyle=n,r.fillColor=r.strokeColor=n;break;default:throw new CF(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,n,i,r){let o=n;i!==Jn.SHADING&&(o=Gt.transform(o,e.baseTransform),this.matrix&&(o=Gt.transform(o,this.matrix)));const c=this.createPatternCanvas(e,r);let h=new DOMMatrix(o);h=h.translate(c.offsetX,c.offsetY),h=h.scale(1/c.scaleX,1/c.scaleY);const d=t.createPattern(c.canvas,"repeat");return d.setTransform(h),d}}function az({src:s,srcPos:t=0,dest:e,width:n,height:i,nonBlackColor:r=4294967295,inverseDecode:o=!1}){const c=Hn.isLittleEndian?4278190080:255,[h,d]=o?[r,c]:[c,r],f=n>>3,p=n&7,m=s.length;e=new Uint32Array(e.buffer);let y=0;for(let w=0;w<i;w++){for(const E=t+f;t<E;t++){const _=t<m?s[t]:255;e[y++]=_&128?d:h,e[y++]=_&64?d:h,e[y++]=_&32?d:h,e[y++]=_&16?d:h,e[y++]=_&8?d:h,e[y++]=_&4?d:h,e[y++]=_&2?d:h,e[y++]=_&1?d:h}if(p===0)continue;const b=t<m?s[t++]:255;for(let E=0;E<p;E++)e[y++]=b&1<<7-E?d:h}return{srcPos:t,destPos:y}}const rP=16,aP=100,oz=15,oP=10,ji=16,nA=new DOMMatrix,ss=new Float32Array(2),au=new Float32Array([1/0,1/0,-1/0,-1/0]);function lz(s,t){if(s._removeMirroring)throw new Error("Context is already forwarding operations.");s.__originalSave=s.save,s.__originalRestore=s.restore,s.__originalRotate=s.rotate,s.__originalScale=s.scale,s.__originalTranslate=s.translate,s.__originalTransform=s.transform,s.__originalSetTransform=s.setTransform,s.__originalResetTransform=s.resetTransform,s.__originalClip=s.clip,s.__originalMoveTo=s.moveTo,s.__originalLineTo=s.lineTo,s.__originalBezierCurveTo=s.bezierCurveTo,s.__originalRect=s.rect,s.__originalClosePath=s.closePath,s.__originalBeginPath=s.beginPath,s._removeMirroring=()=>{s.save=s.__originalSave,s.restore=s.__originalRestore,s.rotate=s.__originalRotate,s.scale=s.__originalScale,s.translate=s.__originalTranslate,s.transform=s.__originalTransform,s.setTransform=s.__originalSetTransform,s.resetTransform=s.__originalResetTransform,s.clip=s.__originalClip,s.moveTo=s.__originalMoveTo,s.lineTo=s.__originalLineTo,s.bezierCurveTo=s.__originalBezierCurveTo,s.rect=s.__originalRect,s.closePath=s.__originalClosePath,s.beginPath=s.__originalBeginPath,delete s._removeMirroring},s.save=function(){t.save(),this.__originalSave()},s.restore=function(){t.restore(),this.__originalRestore()},s.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},s.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},s.transform=function(e,n,i,r,o,c){t.transform(e,n,i,r,o,c),this.__originalTransform(e,n,i,r,o,c)},s.setTransform=function(e,n,i,r,o,c){t.setTransform(e,n,i,r,o,c),this.__originalSetTransform(e,n,i,r,o,c)},s.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},s.rotate=function(e){t.rotate(e),this.__originalRotate(e)},s.clip=function(e){t.clip(e),this.__originalClip(e)},s.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},s.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},s.bezierCurveTo=function(e,n,i,r,o,c){t.bezierCurveTo(e,n,i,r,o,c),this.__originalBezierCurveTo(e,n,i,r,o,c)},s.rect=function(e,n,i,r){t.rect(e,n,i,r),this.__originalRect(e,n,i,r)},s.closePath=function(){t.closePath(),this.__originalClosePath()},s.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class cz{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let i;return this.cache[t]!==void 0?(i=this.cache[t],this.canvasFactory.reset(i,e,n)):(i=this.canvasFactory.create(e,n),this.cache[t]=i),i}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Ym(s,t,e,n,i,r,o,c,h,d){const[f,p,m,y,w,b]=nn(s);if(p===0&&m===0){const k=o*f+w,T=Math.round(k),R=c*y+b,D=Math.round(R),F=(o+h)*f+w,j=Math.abs(Math.round(F)-T)||1,I=(c+d)*y+b,O=Math.abs(Math.round(I)-D)||1;return s.setTransform(Math.sign(f),0,0,Math.sign(y),T,D),s.drawImage(t,e,n,i,r,0,0,j,O),s.setTransform(f,p,m,y,w,b),[j,O]}if(f===0&&y===0){const k=c*m+w,T=Math.round(k),R=o*p+b,D=Math.round(R),F=(c+d)*m+w,j=Math.abs(Math.round(F)-T)||1,I=(o+h)*p+b,O=Math.abs(Math.round(I)-D)||1;return s.setTransform(0,Math.sign(p),Math.sign(m),0,T,D),s.drawImage(t,e,n,i,r,0,0,O,j),s.setTransform(f,p,m,y,w,b),[O,j]}s.drawImage(t,e,n,i,r,o,c,h,d);const E=Math.hypot(f,p),_=Math.hypot(m,y);return[E*h,_*d]}class lP{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=JA;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Yn.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,e,n){n?.(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=au.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Jn.FILL,e=null){const n=this.minMax.slice();if(t===Jn.STROKE){e||Xe("Stroke bounding box must include transform."),Gt.singularValueDecompose2dScale(e,ss);const i=ss[0]*this.lineWidth/2,r=ss[1]*this.lineWidth/2;n[0]-=i,n[1]-=r,n[2]+=i,n[3]+=r}return n}updateClipFromPath(){const t=Gt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(au,0)}getClippedPathBoundingBox(t=Jn.FILL,e=null){return Gt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function cP(s,t){if(t instanceof ImageData){s.putImageData(t,0,0);return}const e=t.height,n=t.width,i=e%ji,r=(e-i)/ji,o=i===0?r:r+1,c=s.createImageData(n,ji);let h=0,d;const f=t.data,p=c.data;let m,y,w,b;if(t.kind===Ep.GRAYSCALE_1BPP){const E=f.byteLength,_=new Uint32Array(p.buffer,0,p.byteLength>>2),k=_.length,T=n+7>>3,R=4294967295,D=Hn.isLittleEndian?4278190080:255;for(m=0;m<o;m++){for(w=m<r?ji:i,d=0,y=0;y<w;y++){const F=E-h;let j=0;const I=F>T?n:F*8-7,O=I&-8;let X=0,Q=0;for(;j<O;j+=8)Q=f[h++],_[d++]=Q&128?R:D,_[d++]=Q&64?R:D,_[d++]=Q&32?R:D,_[d++]=Q&16?R:D,_[d++]=Q&8?R:D,_[d++]=Q&4?R:D,_[d++]=Q&2?R:D,_[d++]=Q&1?R:D;for(;j<I;j++)X===0&&(Q=f[h++],X=128),_[d++]=Q&X?R:D,X>>=1}for(;d<k;)_[d++]=0;s.putImageData(c,0,m*ji)}}else if(t.kind===Ep.RGBA_32BPP){for(y=0,b=n*ji*4,m=0;m<r;m++)p.set(f.subarray(h,h+b)),h+=b,s.putImageData(c,0,y),y+=ji;m<o&&(b=n*i*4,p.set(f.subarray(h,h+b)),s.putImageData(c,0,y))}else if(t.kind===Ep.RGB_24BPP)for(w=ji,b=n*w,m=0;m<o;m++){for(m>=r&&(w=i,b=n*w),d=0,y=b;y--;)p[d++]=f[h++],p[d++]=f[h++],p[d++]=f[h++],p[d++]=255;s.putImageData(c,0,m*ji)}else throw new Error(`bad image kind: ${t.kind}`)}function hP(s,t){if(t.bitmap){s.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,i=e%ji,r=(e-i)/ji,o=i===0?r:r+1,c=s.createImageData(n,ji);let h=0;const d=t.data,f=c.data;for(let p=0;p<o;p++){const m=p<r?ji:i;({srcPos:h}=az({src:d,srcPos:h,dest:f,width:n,height:m,nonBlackColor:0})),s.putImageData(c,0,p*ji)}}function sf(s,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)s[n]!==void 0&&(t[n]=s[n]);s.setLineDash!==void 0&&(t.setLineDash(s.getLineDash()),t.lineDashOffset=s.lineDashOffset)}function Xm(s){s.strokeStyle=s.fillStyle="#000000",s.fillRule="nonzero",s.globalAlpha=1,s.lineWidth=1,s.lineCap="butt",s.lineJoin="miter",s.miterLimit=10,s.globalCompositeOperation="source-over",s.font="10px sans-serif",s.setLineDash!==void 0&&(s.setLineDash([]),s.lineDashOffset=0);const{filter:t}=s;t!=="none"&&t!==""&&(s.filter="none")}function uP(s,t){if(t)return!0;Gt.singularValueDecompose2dScale(s,ss);const e=Math.fround(Qs.pixelRatio*uc.PDF_TO_CSS_UNITS);return ss[0]<=e&&ss[1]<=e}const hz=["butt","round","square"],uz=["miter","round","bevel"],dz={},dP={};class Cu{constructor(t,e,n,i,r,{optionalContentConfig:o,markedContentStack:c=null},h,d,f){this.ctx=t,this.current=new lP(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=i,this.filterFactory=r,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=o,this.cachedCanvases=new cz(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=d,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=f??null}getObject(t,e,n=null){return typeof e=="string"?(this.dependencyTracker?.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):n}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:i=null}){const r=this.ctx.canvas.width,o=this.ctx.canvas.height,c=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,r,o),this.ctx.fillStyle=c,n){const h=this.cachedCanvases.getCanvas("transparent",r,o);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...nn(this.compositeCtx))}this.ctx.save(),Xm(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=nn(this.ctx)}executeOperatorList(t,e,n,i,r){const o=t.argsArray,c=t.fnArray;let h=e||0;const d=o.length;if(d===h)return h;const f=d-h>oP&&typeof n=="function",p=f?Date.now()+oz:0;let m=0;const y=this.commonObjs,w=this.objs;let b,E;for(;;){if(i!==void 0&&h===i.nextBreakPoint)return i.breakIt(h,n),h;if(!r||r(h))if(b=c[h],E=o[h]??null,b!==Vu.dependency)E===null?this[b](h):this[b](h,...E);else for(const _ of E){this.dependencyTracker?.recordNamedData(_,h);const k=_.startsWith("g_")?y:w;if(!k.has(_))return k.get(_,n),h}if(h++,h===d)return h;if(f&&++m>oP){if(Date.now()>p)return n(),h;m=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const n=t.width??t.displayWidth,i=t.height??t.displayHeight;let r=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),c=n,h=i,d="prescale1",f,p;for(;r>2&&c>1||o>2&&h>1;){let m=c,y=h;r>2&&c>1&&(m=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c/2),r/=c/m),o>2&&h>1&&(y=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,o/=h/y),f=this.cachedCanvases.getCanvas(d,m,y),p=f.context,p.clearRect(0,0,m,y),p.drawImage(t,0,0,c,h,0,0,m,y),t=f.canvas,c=m,h=y,d=d==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:c,paintHeight:h}}_createMaskCanvas(t,e){const n=this.ctx,{width:i,height:r}=e,o=this.current.fillColor,c=this.current.patternFill,h=nn(n);let d,f,p,m;if((e.bitmap||e.data)&&e.count>1){const X=e.bitmap||e.data.buffer;f=JSON.stringify(c?h:[h.slice(0,4),o]),d=this._cachedBitmapsMap.get(X),d||(d=new Map,this._cachedBitmapsMap.set(X,d));const Q=d.get(f);if(Q&&!c){const H=Math.round(Math.min(h[0],h[2])+h[4]),J=Math.round(Math.min(h[1],h[3])+h[5]);return this.dependencyTracker?.recordDependencies(t,As.transformAndFill),{canvas:Q,offsetX:H,offsetY:J}}p=Q}p||(m=this.cachedCanvases.getCanvas("maskCanvas",i,r),hP(m.context,e));let y=Gt.transform(h,[1/i,0,0,-1/r,0,0]);y=Gt.transform(y,[1,0,0,1,0,-r]);const w=au.slice();Gt.axialAlignedBoundingBox([0,0,i,r],y,w);const[b,E,_,k]=w,T=Math.round(_-b)||1,R=Math.round(k-E)||1,D=this.cachedCanvases.getCanvas("fillCanvas",T,R),F=D.context,j=b,I=E;F.translate(-j,-I),F.transform(...y),p||(p=this._scaleImage(m.canvas,ar(F)),p=p.img,d&&c&&d.set(f,p)),F.imageSmoothingEnabled=uP(nn(F),e.interpolate),Ym(F,p,0,0,p.width,p.height,0,0,i,r),F.globalCompositeOperation="source-in";const O=Gt.transform(ar(F),[1,0,0,1,-j,-I]);return F.fillStyle=c?o.getPattern(n,this,O,Jn.FILL,t):o,F.fillRect(0,0,i,r),d&&!c&&(this.cachedCanvases.delete("fillCanvas"),d.set(f,D.canvas)),this.dependencyTracker?.recordDependencies(t,As.transformAndFill),{canvas:D.canvas,offsetX:Math.round(j),offsetY:Math.round(I)}}setLineWidth(t,e){this.dependencyTracker?.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=hz[e]}setLineJoin(t,e){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=uz[e]}setMiterLimit(t,e){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,n){this.dependencyTracker?.recordSimpleData("dash",t);const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(e),i.lineDashOffset=n)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){for(const[n,i]of e)switch(n){case"LW":this.setLineWidth(t,i);break;case"LC":this.setLineCap(t,i);break;case"LJ":this.setLineJoin(t,i);break;case"ML":this.setMiterLimit(t,i);break;case"D":this.setDash(t,i[0],i[1]);break;case"RI":this.setRenderingIntent(t,i);break;case"FL":this.setFlatness(t,i);break;case"Font":this.setFont(t,i[0],i[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=i;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=i;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=i;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,n=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(i,e,n);this.suspendedCtx=this.ctx;const o=this.ctx=r.context;o.setTransform(this.suspendedCtx.getTransform()),sf(this.suspendedCtx,o),lz(o,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),sf(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,i){const r=i[0],o=i[1],c=i[2]-r,h=i[3]-o;c===0||h===0||(this.genericComposeSMask(e.context,n,c,h,e.subtype,e.backdrop,e.transferMap,r,o,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,i,r,o,c,h,d,f,p){let m=t.canvas,y=h-f,w=d-p;if(o)if(y<0||w<0||y+n>m.width||w+i>m.height){const E=this.cachedCanvases.getCanvas("maskExtension",n,i),_=E.context;_.drawImage(m,-y,-w),_.globalCompositeOperation="destination-atop",_.fillStyle=o,_.fillRect(0,0,n,i),_.globalCompositeOperation="source-over",m=E.canvas,y=w=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const E=new Path2D;E.rect(y,w,n,i),t.clip(E),t.globalCompositeOperation="destination-atop",t.fillStyle=o,t.fillRect(y,w,n,i),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),r==="Alpha"&&c?e.filter=this.filterFactory.addAlphaFilter(c):r==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(c));const b=new Path2D;b.rect(h,d,n,i),e.clip(b),e.globalCompositeOperation="destination-in",e.drawImage(m,y,w,n,i,h,d,n,i),e.restore()}save(t){this.inSMaskMode&&sf(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&sf(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,n,i,r,o,c){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(e,n,i,r,o,c),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n,i){let[r]=n;if(!i){r||=n[0]=new Path2D,this[e](t,r);return}if(this.dependencyTracker!==null){const o=e===Vu.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,i[0]-o,i[2]+o,i[1]-o,i[3]+o).recordDependencies(t,["transform"])}if(!(r instanceof Path2D)){const o=n[0]=new Path2D;for(let c=0,h=r.length;c<h;)switch(r[c++]){case Hm.moveTo:o.moveTo(r[c++],r[c++]);break;case Hm.lineTo:o.lineTo(r[c++],r[c++]);break;case Hm.curveTo:o.bezierCurveTo(r[c++],r[c++],r[c++],r[c++],r[c++],r[c++]);break;case Hm.closePath:o.closePath();break;default:re(`Unrecognized drawing path operator: ${r[c-1]}`);break}r=o}Gt.axialAlignedBoundingBox(i,nn(this.ctx),this.current.minMax),this[e](t,r),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,n=!0){const i=this.ctx,r=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof r=="object"&&r?.getPattern){const o=r.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=r.getPattern(i,this,ar(i),Jn.STROKE,t),o){const c=new Path2D;c.addPath(e,i.getTransform().invertSelf().multiplySelf(o)),e=c}this.rescaleAndStroke(e,!1),i.restore()}else this.rescaleAndStroke(e,!0);this.dependencyTracker?.recordDependencies(t,As.stroke),n&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(Jn.STROKE,nn(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,n=!0){const i=this.ctx,r=this.current.fillColor,o=this.current.patternFill;let c=!1;if(o){const d=r.isModifyingCurrentTransform()?i.getTransform():null;if(this.dependencyTracker?.save(t),i.save(),i.fillStyle=r.getPattern(i,this,ar(i),Jn.FILL,t),d){const f=new Path2D;f.addPath(e,i.getTransform().invertSelf().multiplySelf(d)),e=f}c=!0}const h=this.current.getClippedPathBoundingBox();this.contentVisible&&h!==null&&(this.pendingEOFill?(i.fill(e,"evenodd"),this.pendingEOFill=!1):i.fill(e)),this.dependencyTracker?.recordDependencies(t,As.fill),c&&(i.restore(),this.dependencyTracker?.restore(t)),n&&this.consumePath(t,e,h)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){this.ctx.fill(e),this.dependencyTracker?.recordDependencies(t,As.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=dz}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=dP}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:i}=this;e!==void 0&&i.recordFutureForcedDependency("textClip",i.getOpenMarker()).recordFutureForcedDependency("textClip",t),i.recordCloseMarker(t)}if(e!==void 0){const i=new Path2D,r=n.getTransform().invertSelf();for(const{transform:o,x:c,y:h,fontSize:d,path:f}of e)f&&i.addPath(f,new DOMMatrix(o).preMultiplySelf(r).translate(c,h).scale(d,-d));n.clip(i)}delete this.pendingTextPaths}setCharSpacing(t,e){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,n){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const i=this.commonObjs.get(e),r=this.current;if(!i)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=i.fontMatrix||JA,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&re("Invalid font matrix for font "+e),n<0?(n=-n,r.fontDirection=-1):r.fontDirection=1,this.current.font=i,this.current.fontSize=n,i.isType3Font)return;const o=i.loadedName||"sans-serif",c=i.systemFontInfo?.css||`"${o}", ${i.fallbackName}`;let h="normal";i.black?h="900":i.bold&&(h="bold");const d=i.italic?"italic":"normal";let f=n;n<rP?f=rP:n>aP&&(f=aP),this.current.fontSizeScale=n/f,this.ctx.font=`${d} ${h} ${f}px ${c}`}setTextRenderingMode(t,e){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,n){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=n}setLeadingMoveText(t,e,n){this.setLeading(t,-n),this.moveText(t,e,n)}setTextMatrix(t,e){this.dependencyTracker?.recordSimpleData("textMatrix",t);const{current:n}=this;n.textMatrix=e,n.textMatrixScale=Math.hypot(e[0],e[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#i(t,e,n){const i=new Path2D;return i.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),i}paintChar(t,e,n,i,r,o){const c=this.ctx,h=this.current,d=h.font,f=h.textRenderingMode,p=h.fontSize/h.fontSizeScale,m=f&Yn.FILL_STROKE_MASK,y=!!(f&Yn.ADD_TO_PATH_FLAG),w=h.patternFill&&!d.missingFile,b=h.patternStroke&&!d.missingFile;let E;if((d.disableFontFace||y||w||b)&&!d.missingFile&&(E=d.getPathGenerator(this.commonObjs,e)),E&&(d.disableFontFace||w||b)){c.save(),c.translate(n,i),c.scale(p,-p),this.dependencyTracker?.recordCharacterBBox(t,c,d);let _;if(m===Yn.FILL||m===Yn.FILL_STROKE)if(r){_=c.getTransform(),c.setTransform(...r);const k=this.#i(E,_,r);c.fill(k)}else c.fill(E);if(m===Yn.STROKE||m===Yn.FILL_STROKE)if(o){_||=c.getTransform(),c.setTransform(...o);const{a:k,b:T,c:R,d:D}=_,F=Gt.inverseTransform(o),j=Gt.transform([k,T,R,D,0,0],F);Gt.singularValueDecompose2dScale(j,ss),c.lineWidth*=Math.max(ss[0],ss[1])/p,c.stroke(this.#i(E,_,o))}else c.lineWidth/=p,c.stroke(E);c.restore()}else(m===Yn.FILL||m===Yn.FILL_STROKE)&&(c.fillText(e,n,i),this.dependencyTracker?.recordCharacterBBox(t,c,d,p,n,i,()=>c.measureText(e))),(m===Yn.STROKE||m===Yn.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,c,d,p,n,i,()=>c.measureText(e)).recordDependencies(t,As.stroke),c.strokeText(e,n,i));y&&((this.pendingTextPaths||=[]).push({transform:nn(c),x:n,y:i,fontSize:p,path:E}),this.dependencyTracker?.recordCharacterBBox(t,c,d,p,n,i))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<e.length;i+=4)if(e[i]>0&&e[i]<255){n=!0;break}return ce(this,"isFontSubpixelAAEnabled",n)}showText(t,e){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,As.showText).resetBBox(t),this.current.textRenderingMode&Yn.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,i=n.font;if(i.isType3Font){this.showType3Text(t,e),this.dependencyTracker?.recordShowTextOperation(t);return}const r=n.fontSize;if(r===0){this.dependencyTracker?.recordOperation(t);return}const o=this.ctx,c=n.fontSizeScale,h=n.charSpacing,d=n.wordSpacing,f=n.fontDirection,p=n.textHScale*f,m=e.length,y=i.vertical,w=y?1:-1,b=i.defaultVMetrics,E=r*n.fontMatrix[0],_=n.textRenderingMode===Yn.FILL&&!i.disableFontFace&&!n.patternFill;o.save(),n.textMatrix&&o.transform(...n.textMatrix),o.translate(n.x,n.y+n.textRise),f>0?o.scale(p,-1):o.scale(p,1);let k,T;if(n.patternFill){o.save();const I=n.fillColor.getPattern(o,this,ar(o),Jn.FILL,t);k=nn(o),o.restore(),o.fillStyle=I}if(n.patternStroke){o.save();const I=n.strokeColor.getPattern(o,this,ar(o),Jn.STROKE,t);T=nn(o),o.restore(),o.strokeStyle=I}let R=n.lineWidth;const D=n.textMatrixScale;if(D===0||R===0){const I=n.textRenderingMode&Yn.FILL_STROKE_MASK;(I===Yn.STROKE||I===Yn.FILL_STROKE)&&(R=this.getSinglePixelWidth())}else R/=D;if(c!==1&&(o.scale(c,c),R/=c),o.lineWidth=R,i.isInvalidPDFjsFont){const I=[];let O=0;for(const Q of e)I.push(Q.unicode),O+=Q.width;const X=I.join("");if(o.fillText(X,0,0),this.dependencyTracker!==null){const Q=o.measureText(X);this.dependencyTracker.recordBBox(t,this.ctx,-Q.actualBoundingBoxLeft,Q.actualBoundingBoxRight,-Q.actualBoundingBoxAscent,Q.actualBoundingBoxDescent).recordShowTextOperation(t)}n.x+=O*E*p,o.restore(),this.compose();return}let F=0,j;for(j=0;j<m;++j){const I=e[j];if(typeof I=="number"){F+=w*I*r/1e3;continue}let O=!1;const X=(I.isSpace?d:0)+h,Q=I.fontChar,H=I.accent;let J,N,tt=I.width;if(y){const gt=I.vmetric||b,nt=-(I.vmetric?gt[1]:tt*.5)*E,Tt=gt[2]*E;tt=gt?-gt[0]:tt,J=nt/c,N=(F+Tt)/c}else J=F/c,N=0;let $;if(i.remeasure&&tt>0){$=o.measureText(Q);const gt=$.width*1e3/r*c;if(tt<gt&&this.isFontSubpixelAAEnabled){const nt=tt/gt;O=!0,o.save(),o.scale(nt,1),J/=nt}else tt!==gt&&(J+=(tt-gt)/2e3*r/c)}if(this.contentVisible&&(I.isInFont||i.missingFile)){if(_&&!H)o.fillText(Q,J,N),this.dependencyTracker?.recordCharacterBBox(t,o,$?{bbox:null}:i,r/c,J,N,()=>$??o.measureText(Q));else if(this.paintChar(t,Q,J,N,k,T),H){const gt=J+r*H.offset.x/c,nt=N-r*H.offset.y/c;this.paintChar(t,H.fontChar,gt,nt,k,T)}}const G=y?tt*E-X*f:tt*E+X*f;F+=G,O&&o.restore()}y?n.y-=F:n.x+=F*p,o.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,e){const n=this.ctx,i=this.current,r=i.font,o=i.fontSize,c=i.fontDirection,h=r.vertical?1:-1,d=i.charSpacing,f=i.wordSpacing,p=i.textHScale*c,m=i.fontMatrix||JA,y=e.length,w=i.textRenderingMode===Yn.INVISIBLE;let b,E,_,k;if(w||o===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),i.textMatrix&&n.transform(...i.textMatrix),n.translate(i.x,i.y+i.textRise),n.scale(p,c);const T=this.dependencyTracker;for(this.dependencyTracker=T?new zv(T,t):null,b=0;b<y;++b){if(E=e[b],typeof E=="number"){k=h*E*o/1e3,this.ctx.translate(k,0),i.x+=k*p;continue}const R=(E.isSpace?f:0)+d,D=r.charProcOperatorList[E.operatorListId];D?this.contentVisible&&(this.save(),n.scale(o,o),n.transform(...m),this.executeOperatorList(D),this.restore()):re(`Type3 character "${E.operatorListId}" is not available.`);const F=[E.width,0];Gt.applyTransform(F,m),_=F[0]*o+R,n.translate(_,0),i.x+=_*p}n.restore(),T&&(this.dependencyTracker=T)}setCharWidth(t,e,n){}setCharWidthAndBounds(t,e,n,i,r,o,c){const h=new Path2D;h.rect(i,r,o-i,c-r),this.ctx.clip(h),this.dependencyTracker?.recordBBox(t,this.ctx,i,o,r,c).recordClipBox(t,this.ctx,i,o,r,c),this.endPath(t)}getColorN_Pattern(t,e){let n;if(e[0]==="TilingPattern"){const i=this.baseTransform||nn(this.ctx),r={createCanvasGraphics:(o,c)=>new Cu(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new zv(this.dependencyTracker,c,!0):null)};n=new k2(e,this.ctx,r,i)}else n=this._getPattern(t,e[1],e[2]);return n}setStrokeColorN(t,...e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,n=null){let i;return this.cachedPatterns.has(e)?i=this.cachedPatterns.get(e):(i=rz(this.getObject(t,e)),this.cachedPatterns.set(e,i)),n&&(i.matrix=n),i}shadingFill(t,e){if(!this.contentVisible)return;const n=this.ctx;this.save(t);const i=this._getPattern(t,e);n.fillStyle=i.getPattern(n,this,ar(n),Jn.SHADING,t);const r=ar(n);if(r){const{width:o,height:c}=n.canvas,h=au.slice();Gt.axialAlignedBoundingBox([0,0,o,c],r,h);const[d,f,p,m]=h;this.ctx.fillRect(d,f,p-d,m-f)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,As.transform).recordDependencies(t,As.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){Xe("Should not call beginInlineImage")}beginImageData(){Xe("Should not call beginImageData")}paintFormXObjectBegin(t,e,n){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=nn(this.ctx),n)){Gt.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[i,r,o,c]=n,h=new Path2D;h.rect(i,r,o-i,c-r),this.ctx.clip(h),this.dependencyTracker?.recordClipBox(t,this.ctx,i,o,r,c),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;e.isolated||Ub("TODO: Support non-isolated groups."),e.knockout&&re("Knockout groups not supported.");const i=nn(n);if(e.matrix&&n.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=au.slice();Gt.axialAlignedBoundingBox(e.bbox,nn(n),r);const o=[0,0,n.canvas.width,n.canvas.height];r=Gt.intersect(r,o)||[0,0,0,0];const c=Math.floor(r[0]),h=Math.floor(r[1]),d=Math.max(Math.ceil(r[2])-c,1),f=Math.max(Math.ceil(r[3])-h,1);this.current.startNewPathAndClipBox([0,0,d,f]);let p="groupAt"+this.groupLevel;e.smask&&(p+="_smask_"+this.smaskCounter++%2);const m=this.cachedCanvases.getCanvas(p,d,f),y=m.context;y.translate(-c,-h),y.transform(...i);let w=new Path2D;const[b,E,_,k]=e.bbox;if(w.rect(b,E,_-b,k-E),e.matrix){const T=new Path2D;T.addPath(w,new DOMMatrix(e.matrix)),w=T}y.clip(w),e.smask&&this.smaskStack.push({canvas:m.canvas,context:y,offsetX:c,offsetY:h,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(c,h),n.save()),sf(n,y),this.ctx=y,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(t,e){if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const r=nn(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...r);const o=au.slice();Gt.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],r,o),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(t,e,n,i,r,o){if(this.#t(),Xm(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const c=n[2]-n[0],h=n[3]-n[1];if(o&&this.annotationCanvasMap){i=i.slice(),i[4]-=n[0],i[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=c,n[3]=h,Gt.singularValueDecompose2dScale(nn(this.ctx),ss);const{viewportScale:d}=this,f=Math.ceil(c*this.outputScaleX*d),p=Math.ceil(h*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(f,p);const{canvas:m,context:y}=this.annotationCanvas;this.annotationCanvasMap.set(e,m),this.annotationCanvas.savedCtx=this.ctx,this.ctx=y,this.ctx.save(),this.ctx.setTransform(ss[0],0,0,-ss[1],0,h*ss[1]),Xm(this.ctx)}else{Xm(this.ctx),this.endPath(t);const d=new Path2D;d.rect(n[0],n[1],c,h),this.ctx.clip(d)}}this.current=new lP(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...i),this.transform(t,...r)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){if(!this.contentVisible)return;const n=e.count;e=this.getObject(t,e.data,e),e.count=n;const i=this.ctx,r=this._createMaskCanvas(t,e),o=r.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(o,r.offsetX,r.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,r.offsetX,r.offsetX+o.width,r.offsetY,r.offsetY+o.height).recordOperation(t),i.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n,i=0,r=0,o,c){if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const h=this.ctx;h.save();const d=nn(h);h.transform(n,i,r,o,0,0);const f=this._createMaskCanvas(t,e);h.setTransform(1,0,0,1,f.offsetX-d[4],f.offsetY-d[5]),this.dependencyTracker?.resetBBox(t);for(let p=0,m=c.length;p<m;p+=2){const y=Gt.transform(d,[n,i,r,o,c[p],c[p+1]]);h.drawImage(f.canvas,y[4],y[5]),this.dependencyTracker?.recordBBox(t,this.ctx,y[4],y[4]+f.canvas.width,y[5],y[5]+f.canvas.height)}h.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx,i=this.current.fillColor,r=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,As.transformAndFill);for(const o of e){const{data:c,width:h,height:d,transform:f}=o,p=this.cachedCanvases.getCanvas("maskCanvas",h,d),m=p.context;m.save();const y=this.getObject(t,c,o);hP(m,y),m.globalCompositeOperation="source-in",m.fillStyle=r?i.getPattern(m,this,ar(n),Jn.FILL,t):i,m.fillRect(0,0,h,d),m.restore(),n.save(),n.transform(...f),n.scale(1,-1),Ym(n,p.canvas,0,0,h,d,0,-1,1,1),this.dependencyTracker?.recordBBox(t,n,0,h,0,d),n.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const n=this.getObject(t,e);if(!n){re("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,n)}paintImageXObjectRepeat(t,e,n,i,r){if(!this.contentVisible)return;const o=this.getObject(t,e);if(!o){re("Dependent image isn't ready yet");return}const c=o.width,h=o.height,d=[];for(let f=0,p=r.length;f<p;f+=2)d.push({transform:[n,0,0,i,r[f],r[f+1]],x:0,y:0,w:c,h});this.paintInlineImageXObjectGroup(t,o,d)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:i}=t,r=this.cachedCanvases.getCanvas("inlineImage",n,i),o=r.context;return o.filter=this.current.transferMaps,o.drawImage(e,0,0),o.filter="none",r.canvas}paintInlineImageXObject(t,e){if(!this.contentVisible)return;const n=e.width,i=e.height,r=this.ctx;this.save(t);const{filter:o}=r;o!=="none"&&o!==""&&(r.filter="none"),r.scale(1/n,-1/i);let c;if(e.bitmap)c=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)c=e;else{const f=this.cachedCanvases.getCanvas("inlineImage",n,i).context;cP(f,e),c=this.applyTransferMapsToCanvas(f)}const h=this._scaleImage(c,ar(r));r.imageSmoothingEnabled=uP(nn(r),e.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,r,0,n,-i,0).recordDependencies(t,As.imageXObject).recordOperation(t),Ym(r,h.img,0,0,h.paintWidth,h.paintHeight,0,-i,n,i),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,n){if(!this.contentVisible)return;const i=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const o=e.width,c=e.height,d=this.cachedCanvases.getCanvas("inlineImage",o,c).context;cP(d,e),r=this.applyTransferMapsToCanvas(d)}this.dependencyTracker?.resetBBox(t);for(const o of n)i.save(),i.transform(...o.transform),i.scale(1,-1),Ym(i,r,o.x,o.y,o.w,o.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,i,0,1,-1,0),i.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,As.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,n){}beginMarkedContent(t,e){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,n){this.dependencyTracker?.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,n){const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const r=this.ctx;this.pendingClip?(i||(this.pendingClip===dP?r.clip(e,"evenodd"):r.clip(e)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=nn(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),i=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:i,d:r}=this.ctx.getTransform();let o,c;if(n===0&&i===0){const h=Math.abs(e),d=Math.abs(r);if(h===d)if(t===0)o=c=1/h;else{const f=h*t;o=c=f<1?1/f:1}else if(t===0)o=1/h,c=1/d;else{const f=h*t,p=d*t;o=f<1?1/f:1,c=p<1?1/p:1}}else{const h=Math.abs(e*r-n*i),d=Math.hypot(e,n),f=Math.hypot(i,r);if(t===0)o=f/h,c=d/h;else{const p=t*h;o=f>p?f/p:1,c=d>p?d/p:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=c}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:n,current:{lineWidth:i}}=this,[r,o]=this.getScaleForStroking();if(r===o){n.lineWidth=(i||1)*r,n.stroke(t);return}const c=n.getLineDash();e&&n.save(),n.scale(r,o),nA.a=1/r,nA.d=1/o;const h=new Path2D;if(h.addPath(t,nA),c.length>0){const d=Math.max(r,o);n.setLineDash(c.map(f=>f/d)),n.lineDashOffset/=d}n.lineWidth=i||1,n.stroke(h),e&&n.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const s in Vu)Cu.prototype[s]!==void 0&&(Cu.prototype[Vu[s]]=Cu.prototype[s]);class ku{#t;#e;#i;static strings=["fontFamily","fontWeight","italicAngle"];static write(t){const e=new TextEncoder,n={};let i=0;for(const d of ku.strings){const f=e.encode(t[d]);n[d]=f,i+=4+f.length}const r=new ArrayBuffer(i),o=new Uint8Array(r),c=new DataView(r);let h=0;for(const d of ku.strings){const f=n[d],p=f.length;c.setUint32(h,p),o.set(f,h+4),h+=4+p}return xe(h===r.byteLength,"CssFontInfo.write: Buffer overflow"),r}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#i=new TextDecoder}#n(t){xe(t<ku.strings.length,"Invalid string index");let e=0;for(let i=0;i<t;i++)e+=this.#e.getUint32(e)+4;const n=this.#e.getUint32(e);return this.#i.decode(new Uint8Array(this.#t,e+4,n))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}}class Tu{#t;#e;#i;static strings=["css","loadedName","baseFontName","src"];static write(t){const e=new TextEncoder,n={};let i=0;for(const m of Tu.strings){const y=e.encode(t[m]);n[m]=y,i+=4+y.length}i+=4;let r,o,c=1+i;t.style&&(r=e.encode(t.style.style),o=e.encode(t.style.weight),c+=4+r.length+4+o.length);const h=new ArrayBuffer(c),d=new Uint8Array(h),f=new DataView(h);let p=0;f.setUint8(p++,t.guessFallback?1:0),f.setUint32(p,0),p+=4,i=0;for(const m of Tu.strings){const y=n[m],w=y.length;i+=4+w,f.setUint32(p,w),d.set(y,p+4),p+=4+w}return f.setUint32(p-i-4,i),t.style&&(f.setUint32(p,r.length),d.set(r,p+4),p+=4+r.length,f.setUint32(p,o.length),d.set(o,p+4),p+=4+o.length),xe(p<=h.byteLength,"SubstitionInfo.write: Buffer overflow"),h.transferToFixedLength(p)}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#i=new TextDecoder}get guessFallback(){return this.#e.getUint8(0)!==0}#n(t){xe(t<Tu.strings.length,"Invalid string index");let e=5;for(let i=0;i<t;i++)e+=this.#e.getUint32(e)+4;const n=this.#e.getUint32(e);return this.#i.decode(new Uint8Array(this.#t,e+4,n))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let t=1;t+=4+this.#e.getUint32(t);const e=this.#e.getUint32(t),n=this.#i.decode(new Uint8Array(this.#t,t+4,e));t+=4+e;const i=this.#e.getUint32(t),r=this.#i.decode(new Uint8Array(this.#t,t+4,i));return{style:n,weight:r}}}class Fe{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#t=Math.ceil(this.bools.length*2/8);static#e=this.#t+this.numbers.length*8;static#i=this.#e+1+8;static#n=this.#i+1+48;static#a=this.#n+1+6;#s;#r;#o;constructor({data:t,extra:e}){this.#s=t,this.#r=new TextDecoder,this.#o=new DataView(this.#s),e&&Object.assign(this,e)}#c(t){xe(t<Fe.bools.length,"Invalid boolean index");const e=Math.floor(t/4),n=t*2%8,i=this.#o.getUint8(e)>>n&3;return i===0?void 0:i===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(t){return xe(t<Fe.numbers.length,"Invalid number index"),this.#o.getFloat64(Fe.#t+t*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let t=Fe.#e;if(this.#o.getUint8(t)===0)return;t+=1;const n=[];for(let i=0;i<4;i++)n.push(this.#o.getInt16(t,!0)),t+=2;return n}get fontMatrix(){let t=Fe.#i;if(this.#o.getUint8(t)===0)return;t+=1;const n=[];for(let i=0;i<6;i++)n.push(this.#o.getFloat64(t,!0)),t+=8;return n}get defaultVMetrics(){let t=Fe.#n;if(this.#o.getUint8(t)===0)return;t+=1;const n=[];for(let i=0;i<3;i++)n.push(this.#o.getInt16(t,!0)),t+=2;return n}#d(t){xe(t<Fe.strings.length,"Invalid string index");let e=Fe.#a+4;for(let r=0;r<t;r++)e+=this.#o.getUint32(e)+4;const n=this.#o.getUint32(e),i=new Uint8Array(n);return i.set(new Uint8Array(this.#s,e+4,n)),this.#r.decode(i)}get fallbackName(){return this.#d(0)}get loadedName(){return this.#d(1)}get mimetype(){return this.#d(2)}get name(){return this.#d(3)}get data(){let t=Fe.#a;const e=this.#o.getUint32(t);t+=4+e;const n=this.#o.getUint32(t);t+=4+n;const i=this.#o.getUint32(t);t+=4+i;const r=this.#o.getUint32(t);if(r!==0)return new Uint8Array(this.#s,t+4,r)}clearData(){let t=Fe.#a;const e=this.#o.getUint32(t);t+=4+e;const n=this.#o.getUint32(t);t+=4+n;const i=this.#o.getUint32(t);t+=4+i;const r=this.#o.getUint32(t);new Uint8Array(this.#s,t+4,r).fill(0),this.#o.setUint32(t,0)}get cssFontInfo(){let t=Fe.#a;const e=this.#o.getUint32(t);t+=4+e;const n=this.#o.getUint32(t);t+=4+n;const i=this.#o.getUint32(t);if(i===0)return null;const r=new Uint8Array(i);return r.set(new Uint8Array(this.#s,t+4,i)),new ku(r.buffer)}get systemFontInfo(){let t=Fe.#a;const e=this.#o.getUint32(t);t+=4+e;const n=this.#o.getUint32(t);if(n===0)return null;const i=new Uint8Array(n);return i.set(new Uint8Array(this.#s,t+4,n)),new Tu(i.buffer)}static write(t){const e=t.systemFontInfo?Tu.write(t.systemFontInfo):null,n=t.cssFontInfo?ku.write(t.cssFontInfo):null,i=new TextEncoder,r={};let o=0;for(const b of Fe.strings)r[b]=i.encode(t[b]),o+=4+r[b].length;const c=Fe.#a+4+o+4+(e?e.byteLength:0)+4+(n?n.byteLength:0)+4+(t.data?t.data.length:0),h=new ArrayBuffer(c),d=new Uint8Array(h),f=new DataView(h);let p=0;const m=Fe.bools.length;let y=0,w=0;for(let b=0;b<m;b++){const E=t[Fe.bools[b]];y|=(E===void 0?0:E?2:1)<<w,w+=2,(w===8||b===m-1)&&(f.setUint8(p++,y),y=0,w=0)}xe(p===Fe.#t,"FontInfo.write: Boolean properties offset mismatch");for(const b of Fe.numbers)f.setFloat64(p,t[b]),p+=8;if(xe(p===Fe.#e,"FontInfo.write: Number properties offset mismatch"),t.bbox){f.setUint8(p++,4);for(const b of t.bbox)f.setInt16(p,b,!0),p+=2}else f.setUint8(p++,0),p+=8;if(xe(p===Fe.#i,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){f.setUint8(p++,6);for(const b of t.fontMatrix)f.setFloat64(p,b,!0),p+=8}else f.setUint8(p++,0),p+=48;if(xe(p===Fe.#n,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){f.setUint8(p++,1);for(const b of t.defaultVMetrics)f.setInt16(p,b,!0),p+=2}else f.setUint8(p++,0),p+=6;xe(p===Fe.#a,"FontInfo.write: DefaultVMetrics properties offset mismatch"),f.setUint32(Fe.#a,0),p+=4;for(const b of Fe.strings){const E=r[b],_=E.length;f.setUint32(p,_),d.set(E,p+4),p+=4+_}if(f.setUint32(Fe.#a,p-Fe.#a-4),!e)f.setUint32(p,0),p+=4;else{const b=e.byteLength;f.setUint32(p,b),xe(p+4+b<=h.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),d.set(new Uint8Array(e),p+4),p+=4+b}if(!n)f.setUint32(p,0),p+=4;else{const b=n.byteLength;f.setUint32(p,b),xe(p+4+b<=h.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),d.set(new Uint8Array(n),p+4),p+=4+b}return t.data===void 0?(f.setUint32(p,0),p+=4):(f.setUint32(p,t.data.length),d.set(t.data,p+4),p+=4+t.data.length),xe(p<=h.byteLength,"FontInfo.write: Buffer overflow"),h.transferToFixedLength(p)}}class Pa{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class fz{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const Eh=Symbol("INTERNAL");class pz{#t=!1;#e=!1;#i=!1;#n=!0;constructor(t,{name:e,intent:n,usage:i,rbGroups:r}){this.#t=!!(t&ns.DISPLAY),this.#e=!!(t&ns.PRINT),this.name=e,this.intent=n,this.usage=i,this.rbGroups=r}get visible(){if(this.#i)return this.#n;if(!this.#n)return!1;const{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,n=!1){t!==Eh&&Xe("Internal method `_setVisible` called."),this.#i=n,this.#n=e}}class gz{#t=null;#e=new Map;#i=null;#n=null;constructor(t,e=ns.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#n=t.order;for(const n of t.groups)this.#e.set(n.id,new pz(e,n));if(t.baseState==="OFF")for(const n of this.#e.values())n._setVisible(Eh,!1);for(const n of t.on)this.#e.get(n)._setVisible(Eh,!0);for(const n of t.off)this.#e.get(n)._setVisible(Eh,!1);this.#i=this.getHash()}}#a(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let i=1;i<e;i++){const r=t[i];let o;if(Array.isArray(r))o=this.#a(r);else if(this.#e.has(r))o=this.#e.get(r).visible;else return re(`Optional content group not found: ${r}`),!0;switch(n){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return n==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return Ub("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(re(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#a(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!this.#e.has(e))return re(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!this.#e.has(e))return re(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!this.#e.has(e))return re(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!this.#e.has(e))return re(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return re(`Unknown optional content policy ${t.policy}.`),!0}return re(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){const i=this.#e.get(t);if(!i){re(`Optional content group not found: ${t}`);return}if(n&&e&&i.rbGroups.length)for(const r of i.rbGroups)for(const o of r)o!==t&&this.#e.get(o)?._setVisible(Eh,!1,!0);i._setVisible(Eh,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let n;for(const i of t){switch(i){case"ON":case"OFF":case"Toggle":n=i;continue}const r=this.#e.get(i);if(r)switch(n){case"ON":this.setVisibility(i,!0,e);break;case"OFF":this.setVisibility(i,!1,e);break;case"Toggle":this.setVisibility(i,!r.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#i===null||this.getHash()===this.#i}getOrder(){return this.#e.size?this.#n?this.#n.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new YD;for(const[e,n]of this.#e)t.update(`${e}:${n.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class mz{constructor(t,{disableRange:e=!1,disableStream:n=!1}){xe(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:r,progressiveDone:o,contentDispositionFilename:c}=t;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=c,r?.length>0){const h=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(h)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((h,d)=>{this._onReceiveData({begin:h,chunk:d})}),t.addProgressListener((h,d)=>{this._onProgress({loaded:h,total:d})}),t.addProgressiveReadListener(h=>{this._onReceiveData({chunk:h})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const i=this._rangeReaders.some(function(r){return r._begin!==t?!1:(r._enqueue(n),!0)});xe(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){xe(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new yz(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new vz(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}}class yz{constructor(t,e,n=!1,i=null){this._stream=t,this._done=n||!1,this._filename=Wb(i)?i:null,this._queuedChunks=e||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class vz{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function bz(s){let t=!0,e=n("filename\\*","i").exec(s);if(e){e=e[1];let f=c(e);return f=unescape(f),f=h(f),f=d(f),r(f)}if(e=o(s),e){const f=d(e);return r(f)}if(e=n("filename","i").exec(s),e){e=e[1];let f=c(e);return f=d(f),r(f)}function n(f,p){return new RegExp("(?:^|;)\\s*"+f+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',p)}function i(f,p){if(f){if(!/^[\x00-\xFF]+$/.test(p))return p;try{const m=new TextDecoder(f,{fatal:!0}),y=hg(p);p=m.decode(y),t=!1}catch{}}return p}function r(f){return t&&/[\x80-\xff]/.test(f)&&(f=i("utf-8",f),t&&(f=i("iso-8859-1",f))),f}function o(f){const p=[];let m;const y=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(m=y.exec(f))!==null;){let[,b,E,_]=m;if(b=parseInt(b,10),b in p){if(b===0)break;continue}p[b]=[E,_]}const w=[];for(let b=0;b<p.length&&b in p;++b){let[E,_]=p[b];_=c(_),E&&(_=unescape(_),b===0&&(_=h(_))),w.push(_)}return w.join("")}function c(f){if(f.startsWith('"')){const p=f.slice(1).split('\\"');for(let m=0;m<p.length;++m){const y=p[m].indexOf('"');y!==-1&&(p[m]=p[m].slice(0,y),p.length=m+1),p[m]=p[m].replaceAll(/\\(.)/g,"$1")}f=p.join('"')}return f}function h(f){const p=f.indexOf("'");if(p===-1)return f;const m=f.slice(0,p),w=f.slice(p+1).replace(/^[^']*'/,"");return i(m,w)}function d(f){return!f.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(f)?f:f.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(p,m,y,w){if(y==="q"||y==="Q")return w=w.replaceAll("_"," "),w=w.replaceAll(/=([0-9a-fA-F]{2})/g,function(b,E){return String.fromCharCode(parseInt(E,16))}),i(m,w);try{w=atob(w)}catch{}return i(m,w)})}return""}function nN(s,t){const e=new Headers;if(!s||!t||typeof t!="object")return e;for(const n in t){const i=t[n];i!==void 0&&e.append(n,i)}return e}function Gb(s){return URL.parse(s)?.origin??null}function iN({responseHeaders:s,isHttp:t,rangeChunkSize:e,disableRange:n}){const i={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(s.get("Content-Length"),10);return!Number.isInteger(r)||(i.suggestedLength=r,r<=2*e)||n||!t||s.get("Accept-Ranges")!=="bytes"||(s.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function sN(s){const t=s.get("Content-Disposition");if(t){let e=bz(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Wb(e))return e}return null}function gg(s,t){return new eg(`Unexpected server response (${s}) while retrieving PDF "${t}".`,s,s===404||s===0&&t.startsWith("file:"))}function rN(s){return s===200||s===206}function aN(s,t,e){return{method:"GET",headers:s,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function oN(s){return s instanceof Uint8Array?s.buffer:s instanceof ArrayBuffer?s:(re(`getArrayBuffer - unexpected data format: ${s}`),new Uint8Array(s).buffer)}class xz{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=nN(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return xe(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new wz(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new Az(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class wz{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const n=new Headers(t.headers),i=e.url;fetch(i,aN(n,this._withCredentials,this._abortController)).then(r=>{if(t._responseOrigin=Gb(r.url),!rN(r.status))throw gg(r.status,i);this._reader=r.body.getReader(),this._headersCapability.resolve();const o=r.headers,{allowRangeRequests:c,suggestedLength:h}=iN({responseHeaders:o,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=h||this._contentLength,this._filename=sN(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Da("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:oN(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class Az{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const i=t.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const r=new Headers(t.headers);r.append("Range",`bytes=${e}-${n-1}`);const o=i.url;fetch(o,aN(r,this._withCredentials,this._abortController)).then(c=>{const h=Gb(c.url);if(h!==t._responseOrigin)throw new Error(`Expected range response-origin "${h}" to match "${t._responseOrigin}".`);if(!rN(c.status))throw gg(c.status,o);this._readCapability.resolve(),this._reader=c.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:oN(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const iA=200,sA=206;function Sz(s){const t=s.response;return typeof t!="string"?t:hg(t).buffer}class _z{_responseOrigin=null;constructor({url:t,httpHeaders:e,withCredentials:n}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=nN(this.isHttp,e),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[r,o]of this.headers)e.setRequestHeader(r,o);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),i.expectedStatus=sA):i.expectedStatus=iA,e.responseType="arraybuffer",xe(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=t.onHeadersReceived,i.onDone=t.onDone,i.onError=t.onError,i.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){const n=this.pendingRequests[t];n&&n.onProgress?.(e)}onStateChange(t,e){const n=this.pendingRequests[t];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),i.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],i.status===0&&this.isHttp){n.onError(i.status);return}const r=i.status||iA;if(!(r===iA&&n.expectedStatus===sA)&&r!==n.expectedStatus){n.onError(i.status);return}const c=Sz(i);if(r===sA){const h=i.getResponseHeader("Content-Range"),d=/bytes (\d+)-(\d+)\/(\d+)/.exec(h);d?n.onDone({begin:parseInt(d[1],10),chunk:c}):(re('Missing or invalid "Content-Range" header.'),n.onError(0))}else c?n.onDone({begin:0,chunk:c}):n.onError(i.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class Ez{constructor(t){this._source=t,this._manager=new _z(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return xe(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Cz(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new kz(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class Cz{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=Gb(e.responseURL);const n=e.getAllResponseHeaders(),i=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(c=>{const[h,...d]=c.split(": ");return[h,d.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:o}=iN({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=sN(i),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=gg(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class kz{constructor(t,e,n){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=Gb(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=gg(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Tz=/^[a-z][a-z0-9\-+.]+:/i;function Mz(s){if(Tz.test(s))return new URL(s);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(s))}class Rz{constructor(t){this.source=t,this.url=Mz(t.url),xe(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return xe(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new Pz(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new Lz(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class Pz{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=gg(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Da("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Lz{constructor(t,e,n){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=t.source;this._isStreamingSupported=!i.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:e,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const rf=Symbol("INITIAL_DATA");class lN{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:rf}}get(t,e=null){if(e){const i=this.#e(t);return i.promise.then(()=>e(i.data)),null}const n=this.#t[t];if(!n||n.data===rf)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=this.#t[t];return!!e&&e.data!==rf}delete(t){const e=this.#t[t];return!e||e.data===rf?!1:(delete this.#t[t],!0)}resolve(t,e=null){const n=this.#e(t);n.data=e,n.resolve()}clear(){for(const t in this.#t){const{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:e}=this.#t[t];e!==rf&&(yield[t,e])}}}const Dz=1e5,fP=30;let ig=class ks{#t=Promise.withResolvers();#e=null;#i=!1;#n=!!globalThis.FontInspector?.enabled;#a=null;#s=null;#r=0;#o=0;#c=null;#l=null;#d=0;#u=0;#f=Object.create(null);#m=[];#p=null;#h=[];#g=new WeakMap;#y=null;static#b=new Map;static#v=new Map;static#E=new WeakMap;static#S=null;static#x=new Set;constructor({textContentSource:t,container:e,viewport:n}){if(t instanceof ReadableStream)this.#p=t;else if(typeof t=="object")this.#p=new ReadableStream({start(h){h.enqueue(t),h.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=e,this.#u=n.scale*Qs.pixelRatio,this.#d=n.rotation,this.#s={div:null,properties:null,ctx:null};const{pageWidth:i,pageHeight:r,pageX:o,pageY:c}=n.rawDims;this.#y=[1,0,0,-1,-o,c+r],this.#o=i,this.#r=r,ks.#M(),$o(e,n),this.#t.promise.finally(()=>{ks.#x.delete(this),this.#s=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Hn.platform;return ce(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#c.read().then(({value:e,done:n})=>{if(n){this.#t.resolve();return}this.#a??=e.lang,Object.assign(this.#f,e.styles),this.#k(e.items),t()},this.#t.reject)};return this.#c=this.#p.getReader(),ks.#x.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){const n=t.scale*Qs.pixelRatio,i=t.rotation;if(i!==this.#d&&(e?.(),this.#d=i,$o(this.#l,{rotation:i})),n!==this.#u){e?.(),this.#u=n;const r={div:null,properties:null,ctx:ks.#R(this.#a)};for(const o of this.#h)r.properties=this.#g.get(o),r.div=o,this.#_(r)}}cancel(){const t=new Da("TextLayer task cancelled.");this.#c?.cancel(t).catch(()=>{}),this.#c=null,this.#t.reject(t)}get textDivs(){return this.#h}get textContentItemsStr(){return this.#m}#k(t){if(this.#i)return;this.#s.ctx??=ks.#R(this.#a);const e=this.#h,n=this.#m;for(const i of t){if(e.length>Dz){re("Ignoring additional textDivs for performance reasons."),this.#i=!0;return}if(i.str===void 0){if(i.type==="beginMarkedContentProps"||i.type==="beginMarkedContent"){const r=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),i.id&&this.#e.setAttribute("id",`${i.id}`),r.append(this.#e)}else i.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}n.push(i.str),this.#A(i)}}#A(t){const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#h.push(e);const i=Gt.transform(this.#y,t.transform);let r=Math.atan2(i[1],i[0]);const o=this.#f[t.fontName];o.vertical&&(r+=Math.PI/2);let c=this.#n&&o.fontSubstitution||o.fontFamily;c=ks.fontFamilyMap.get(c)||c;const h=Math.hypot(i[2],i[3]),d=h*ks.#j(c,o,this.#a);let f,p;r===0?(f=i[4],p=i[5]-d):(f=i[4]+d*Math.sin(r),p=i[5]-d*Math.cos(r));const m="calc(var(--total-scale-factor) *",y=e.style;this.#e===this.#l?(y.left=`${(100*f/this.#o).toFixed(2)}%`,y.top=`${(100*p/this.#r).toFixed(2)}%`):(y.left=`${m}${f.toFixed(2)}px)`,y.top=`${m}${p.toFixed(2)}px)`),y.fontSize=`${m}${(ks.#S*h).toFixed(2)}px)`,y.fontFamily=c,n.fontSize=h,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#n&&(e.dataset.fontName=o.fontSubstitutionLoadedName||t.fontName),r!==0&&(n.angle=r*(180/Math.PI));let w=!1;if(t.str.length>1)w=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const b=Math.abs(t.transform[0]),E=Math.abs(t.transform[3]);b!==E&&Math.max(b,E)/Math.min(b,E)>1.5&&(w=!0)}if(w&&(n.canvasWidth=o.vertical?t.height:t.width),this.#g.set(e,n),this.#s.div=e,this.#s.properties=n,this.#_(this.#s),n.hasText&&this.#e.append(e),n.hasEOL){const b=document.createElement("br");b.setAttribute("role","presentation"),this.#e.append(b)}}#_(t){const{div:e,properties:n,ctx:i}=t,{style:r}=e;let o="";if(ks.#S>1&&(o=`scale(${1/ks.#S})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:c}=r,{canvasWidth:h,fontSize:d}=n;ks.#T(i,d*this.#u,c);const{width:f}=i.measureText(e.textContent);f>0&&(o=`scaleX(${h*this.#u/f}) ${o}`)}n.angle!==0&&(o=`rotate(${n.angle}deg) ${o}`),o.length>0&&(r.transform=o)}static cleanup(){if(!(this.#x.size>0)){this.#b.clear();for(const{canvas:t}of this.#v.values())t.remove();this.#v.clear()}}static#R(t=null){let e=this.#v.get(t||="");if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#v.set(t,e),this.#E.set(e,{size:0,family:""})}return e}static#T(t,e,n){const i=this.#E.get(t);e===i.size&&n===i.family||(t.font=`${e}px ${n}`,i.size=e,i.family=n)}static#M(){if(this.#S!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#S=t.getBoundingClientRect().height,t.remove()}static#j(t,e,n){const i=this.#b.get(t);if(i)return i;const r=this.#R(n);r.canvas.width=r.canvas.height=fP,this.#T(r,fP,t);const o=r.measureText(""),c=o.fontBoundingBoxAscent,h=Math.abs(o.fontBoundingBoxDescent);r.canvas.width=r.canvas.height=0;let d=.8;return c?d=c/(c+h):(Hn.platform.isFirefox&&re("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?d=e.ascent:e.descent&&(d=1+e.descent)),this.#b.set(t,d),d}};const Nz=100;function T2(s={}){typeof s=="string"||s instanceof URL?s={url:s}:(s instanceof ArrayBuffer||ArrayBuffer.isView(s))&&(s={data:s});const t=new M2,{docId:e}=t,n=s.url?HF(s.url):null,i=s.data?WF(s.data):null,r=s.httpHeaders||null,o=s.withCredentials===!0,c=s.password??null,h=s.range instanceof R2?s.range:null,d=Number.isInteger(s.rangeChunkSize)&&s.rangeChunkSize>0?s.rangeChunkSize:2**16;let f=s.worker instanceof $u?s.worker:null;const p=s.verbosity,m=typeof s.docBaseUrl=="string"&&!dg(s.docBaseUrl)?s.docBaseUrl:null,y=Gm(s.cMapUrl),w=s.cMapPacked!==!1,b=s.CMapReaderFactory||(bi?KF:JR),E=Gm(s.iccUrl),_=Gm(s.standardFontDataUrl),k=s.StandardFontDataFactory||(bi?ZF:tP),T=Gm(s.wasmUrl),R=s.WasmFactory||(bi?QF:eP),D=s.stopAtErrors!==!0,F=Number.isInteger(s.maxImageSize)&&s.maxImageSize>-1?s.maxImageSize:-1,j=s.isEvalSupported!==!1,I=typeof s.isOffscreenCanvasSupported=="boolean"?s.isOffscreenCanvasSupported:!bi,O=typeof s.isImageDecoderSupported=="boolean"?s.isImageDecoderSupported:!bi&&(Hn.platform.isFirefox||!globalThis.chrome),X=Number.isInteger(s.canvasMaxAreaInBytes)?s.canvasMaxAreaInBytes:-1,Q=typeof s.disableFontFace=="boolean"?s.disableFontFace:bi,H=s.fontExtraProperties===!0,J=s.enableXfa===!0,N=s.ownerDocument||globalThis.document,tt=s.disableRange===!0,$=s.disableStream===!0,G=s.disableAutoFetch===!0,gt=s.pdfBug===!0,nt=s.CanvasFactory||(bi?XF:$F),Tt=s.FilterFactory||(bi?YF:qF),U=s.enableHWA===!0,W=s.useWasm!==!1,st=h?h.length:s.length??NaN,lt=typeof s.useSystemFonts=="boolean"?s.useSystemFonts:!bi&&!Q,ut=typeof s.useWorkerFetch=="boolean"?s.useWorkerFetch:!!(b===JR&&k===tP&&R===eP&&y&&_&&T&&Sf(y,document.baseURI)&&Sf(_,document.baseURI)&&Sf(T,document.baseURI)),Rt=null;SF(p);const St={canvasFactory:new nt({ownerDocument:N,enableHWA:U}),filterFactory:new Tt({docId:e,ownerDocument:N}),cMapReaderFactory:ut?null:new b({baseUrl:y,isCompressed:w}),standardFontDataFactory:ut?null:new k({baseUrl:_}),wasmFactory:ut?null:new R({baseUrl:T})};f||(f=$u.create({verbosity:p,port:Pa.workerPort}),t._worker=f);const Ct={docId:e,apiVersion:"5.4.296",data:i,password:c,disableAutoFetch:G,rangeChunkSize:d,length:st,docBaseUrl:m,enableXfa:J,evaluatorOptions:{maxImageSize:F,disableFontFace:Q,ignoreErrors:D,isEvalSupported:j,isOffscreenCanvasSupported:I,isImageDecoderSupported:O,canvasMaxAreaInBytes:X,fontExtraProperties:H,useSystemFonts:lt,useWasm:W,useWorkerFetch:ut,cMapUrl:y,iccUrl:E,standardFontDataUrl:_,wasmUrl:T}},xt={ownerDocument:N,pdfBug:gt,styleElement:Rt,loadingParams:{disableAutoFetch:G,enableXfa:J}};return f.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const Bt=f.messageHandler.sendWithPromise("GetDocRequest",Ct,i?[i.buffer]:null);let jt;if(h)jt=new mz(h,{disableRange:tt,disableStream:$});else if(!i){if(!n)throw new Error("getDocument - no `url` parameter provided.");const Ut=Sf(n)?xz:bi?Rz:Ez;jt=new Ut({url:n,length:st,httpHeaders:r,withCredentials:o,rangeChunkSize:d,disableRange:tt,disableStream:$})}return Bt.then(Ut=>{if(t.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const Ft=new _f(e,Ut,f.port),L=new jz(Ft,t,jt,xt,St,U);t._transport=L,Ft.send("Ready",null)})}).catch(t._capability.reject),t}class M2{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${M2.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}let R2=class{#t=Promise.withResolvers();#e=[];#i=[];#n=[];#a=[];constructor(t,e,n=!1,i=null){this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=i}addRangeListener(t){this.#a.push(t)}addProgressListener(t){this.#n.push(t)}addProgressiveReadListener(t){this.#i.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,e){for(const n of this.#a)n(t,e)}onDataProgress(t,e){this.#t.promise.then(()=>{for(const n of this.#n)n(t,e)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const e of this.#i)e(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,e){Xe("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class Oz{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ce(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class Iz{#t=!1;constructor(t,e,n,i=!1){this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=i?new $R:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new lN,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:r=!1}={}){return new ug({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:r})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ce(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:e=t.canvas,viewport:n,intent:i="display",annotationMode:r=Mr.ENABLE,transform:o=null,background:c=null,optionalContentConfigPromise:h=null,annotationCanvasMap:d=null,pageColors:f=null,printAnnotationStorage:p=null,isEditing:m=!1,recordOperations:y=!1,operationsFilter:w=null}){this._stats?.time("Overall");const b=this._transport.getRenderingIntent(i,r,p,m),{renderingIntent:E,cacheKey:_}=b;this.#t=!1,h||=this._transport.getOptionalContentConfig(E);let k=this._intentStates.get(_);k||(k=Object.create(null),this._intentStates.set(_,k)),k.streamReaderCancelTimeout&&(clearTimeout(k.streamReaderCancelTimeout),k.streamReaderCancelTimeout=null);const T=!!(E&ns.PRINT);k.displayReadyCapability||(k.displayReadyCapability=Promise.withResolvers(),k.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(b));const R=!!(this._pdfBug&&globalThis.StepperManager?.enabled),D=!this.recordedBBoxes&&(y||R),F=O=>{if(k.renderTasks.delete(j),D){const X=j.gfx?.dependencyTracker.take();X&&(j.stepper&&j.stepper.setOperatorBBoxes(X,j.gfx.dependencyTracker.takeDebugMetadata()),y&&(this.recordedBBoxes=X))}T&&(this.#t=!0),this.#e(),O?(j.capability.reject(O),this._abortOperatorList({intentState:k,reason:O instanceof Error?O:new Error(O)})):j.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},j=new ou({callback:F,params:{canvas:e,canvasContext:t,dependencyTracker:D?new tz(e,k.operatorList.length,R):null,viewport:n,transform:o,background:c},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:k.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!T,pdfBug:this._pdfBug,pageColors:f,enableHWA:this._transport.enableHWA,operationsFilter:w});(k.renderTasks||=new Set).add(j);const I=j.task;return Promise.all([k.displayReadyCapability.promise,h]).then(([O,X])=>{if(this.destroyed){F();return}if(this._stats?.time("Rendering"),!(X.renderingIntent&E))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");j.initializeGraphics({transparency:O,optionalContentConfig:X}),j.operatorListChanged()}).catch(F),I}getOperatorList({intent:t="display",annotationMode:e=Mr.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}={}){function r(){c.operatorList.lastChunk&&(c.opListReadCapability.resolve(c.operatorList),c.renderTasks.delete(h))}const o=this._transport.getRenderingIntent(t,e,n,i,!0);let c=this._intentStates.get(o.cacheKey);c||(c=Object.create(null),this._intentStates.set(o.cacheKey,c));let h;return c.opListReadCapability||(h=Object.create(null),h.operatorListChanged=r,c.opListReadCapability=Promise.withResolvers(),(c.renderTasks||=new Set).add(h),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(o)),c.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>ng.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,i){function r(){o.read().then(function({value:h,done:d}){if(d){n(c);return}c.lang??=h.lang,Object.assign(c.styles,h.styles),c.items.push(...h.items),r()},i)}const o=e.getReader(),c={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const e=this.#e();return t&&e&&(this._stats&&=new $R),e}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,e){const n=this._intentStates.get(e);n&&(this._stats?.timeEnd("Page Request"),n.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let n=0,i=t.length;n<i;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:i}){const{map:r,transfer:o}=n,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:r,modifiedIds:i},o).getReader(),d=this._intentStates.get(e);d.streamReader=h;const f=()=>{h.read().then(({value:p,done:m})=>{if(m){d.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(p,d),f())},p=>{if(d.streamReader=null,!this._transport.destroyed){if(d.operatorList){d.operatorList.lastChunk=!0;for(const m of d.renderTasks)m.operatorListChanged();this.#e()}if(d.displayReadyCapability)d.displayReadyCapability.reject(p);else if(d.opListReadCapability)d.opListReadCapability.reject(p);else throw p}})};f()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof Hb){let i=Nz;e.extraDelay>0&&e.extraDelay<1e3&&(i+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},i);return}}if(t.streamReader.cancel(new Da(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[i,r]of this._intentStates)if(r===t){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}var Ho,Ys,Aa,ac,Fb,oc,lc,Ai,R0,cN,hN,Ef,Gu,P0;const en=class en{constructor({name:t=null,port:e=null,verbosity:n=_F()}={}){sr(this,Ai);sr(this,Ho,Promise.withResolvers());sr(this,Ys,null);sr(this,Aa,null);sr(this,ac,null);if(this.name=t,this.destroyed=!1,this.verbosity=n,e){if(tn(en,lc).has(e))throw new Error("Cannot use more than one PDFWorker per port.");tn(en,lc).set(e,this),rr(this,Ai,cN).call(this,e)}else rr(this,Ai,hN).call(this)}get promise(){return tn(this,Ho).promise}get port(){return tn(this,Aa)}get messageHandler(){return tn(this,Ys)}destroy(){this.destroyed=!0,tn(this,ac)?.terminate(),Pi(this,ac,null),tn(en,lc).delete(tn(this,Aa)),Pi(this,Aa,null),tn(this,Ys)?.destroy(),Pi(this,Ys,null)}static create(t){const e=tn(this,lc).get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new en(t)}static get workerSrc(){if(Pa.workerSrc)return Pa.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return ce(this,"_setupFakeWorkerGlobal",(async()=>tn(this,Gu,P0)?tn(this,Gu,P0):(await import(this.workerSrc)).WorkerMessageHandler)())}};Ho=new WeakMap,Ys=new WeakMap,Aa=new WeakMap,ac=new WeakMap,Fb=new WeakMap,oc=new WeakMap,lc=new WeakMap,Ai=new WeakSet,R0=function(){tn(this,Ho).resolve(),tn(this,Ys).send("configure",{verbosity:this.verbosity})},cN=function(t){Pi(this,Aa,t),Pi(this,Ys,new _f("main","worker",t)),tn(this,Ys).on("ready",()=>{}),rr(this,Ai,R0).call(this)},hN=function(){if(tn(en,oc)||tn(en,Gu,P0)){rr(this,Ai,Ef).call(this);return}let{workerSrc:t}=en;try{en._isSameOrigin(window.location,t)||(t=en._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new _f("main","worker",e),i=()=>{r.abort(),n.destroy(),e.terminate(),this.destroyed?tn(this,Ho).reject(new Error("Worker was destroyed")):rr(this,Ai,Ef).call(this)},r=new AbortController;e.addEventListener("error",()=>{tn(this,ac)||i()},{signal:r.signal}),n.on("test",c=>{if(r.abort(),this.destroyed||!c){i();return}Pi(this,Ys,n),Pi(this,Aa,e),Pi(this,ac,e),rr(this,Ai,R0).call(this)}),n.on("ready",c=>{if(r.abort(),this.destroyed){i();return}try{o()}catch{rr(this,Ai,Ef).call(this)}});const o=()=>{const c=new Uint8Array;n.send("test",c,[c.buffer])};o();return}catch{Ub("The worker has been disabled.")}rr(this,Ai,Ef).call(this)},Ef=function(){tn(en,oc)||(re("Setting up fake worker."),Pi(en,oc,!0)),en._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){tn(this,Ho).reject(new Error("Worker was destroyed"));return}const e=new VF;Pi(this,Aa,e);const n=`fake${vR(en,Fb)._++}`,i=new _f(n+"_worker",n,e);t.setup(i,e),Pi(this,Ys,new _f(n,n+"_worker",e)),rr(this,Ai,R0).call(this)}).catch(t=>{tn(this,Ho).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},Gu=new WeakSet,P0=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},sr(en,Gu),sr(en,Fb,0),sr(en,oc,!1),sr(en,lc,new WeakMap),bi&&(Pi(en,oc,!0),Pa.workerSrc||="./pdf.worker.mjs"),en._isSameOrigin=(t,e)=>{const n=URL.parse(t);if(!n?.origin||n.origin==="null")return!1;const i=new URL(e,n);return n.origin===i.origin},en._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},en.fromPort=t=>{if(DF("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return en.create(t)};let $u=en;class jz{#t=new Map;#e=new Map;#i=new Map;#n=new Map;#a=null;constructor(t,e,n,i,r,o){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new lN,this.fontLoader=new zF({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.wasmFactory=r.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=o,this.setupMessageHandler()}#s(t,e=null){const n=this.#t.get(t);if(n)return n;const i=this.messageHandler.sendWithPromise(t,e);return this.#t.set(t,i),i}get annotationStorage(){return ce(this,"annotationStorage",new _2)}getRenderingIntent(t,e=Mr.ENABLE,n=null,i=!1,r=!1){let o=ns.DISPLAY,c=eS;switch(t){case"any":o=ns.ANY;break;case"display":break;case"print":o=ns.PRINT;break;default:re(`getRenderingIntent - invalid intent: ${t}`)}const h=o&ns.PRINT&&n instanceof XD?n:this.annotationStorage;switch(e){case Mr.DISABLE:o+=ns.ANNOTATIONS_DISABLE;break;case Mr.ENABLE:break;case Mr.ENABLE_FORMS:o+=ns.ANNOTATIONS_FORMS;break;case Mr.ENABLE_STORAGE:o+=ns.ANNOTATIONS_STORAGE,c=h.serializable;break;default:re(`getRenderingIntent - invalid annotationMode: ${e}`)}i&&(o+=ns.IS_EDITING),r&&(o+=ns.OPLIST);const{ids:d,hash:f}=h.modifiedIds,p=[o,c.hash,f];return{renderingIntent:o,cacheKey:p.join("_"),annotationStorageSerializable:c,modifiedIds:d}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#a?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const n of this.#e.values())t.push(n._destroy());this.#e.clear(),this.#i.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),ig.cleanup(),this._networkStream?.cancelAllRequests(new Da("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,i)=>{xe(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},i.onPull=()=>{this._fullReader.read().then(function({value:r,done:o}){if(o){i.close();return}xe(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{i.error(r)})},i.onCancel=r=>{this._fullReader.cancel(r),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",async n=>{await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:r,contentLength:o}=this._fullReader;return(!i||!r)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=c=>{e.onProgress?.({loaded:c.loaded,total:c.total})}),{isStreamingSupported:i,isRangeSupported:r,contentLength:o}}),t.on("GetRangeReader",(n,i)=>{xe(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(n.begin,n.end);if(!r){i.close();return}i.onPull=()=>{r.read().then(function({value:o,done:c}){if(c){i.close();return}xe(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{r.cancel(o),i.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new Oz(n,this))}),t.on("DocException",n=>{e._capability.reject(Ni(n))}),t.on("PasswordRequest",n=>{this.#a=Promise.withResolvers();try{if(!e.onPassword)throw Ni(n);const i=r=>{r instanceof Error?this.#a.reject(r):this.#a.resolve({password:r})};e.onPassword(i,n.code)}catch(i){this.#a.reject(i)}return this.#a.promise}),t.on("DataLoaded",n=>{e.onProgress?.({loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;this.#e.get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,i,r])=>{if(this.destroyed||this.commonObjs.has(n))return null;switch(i){case"Font":if("error"in r){const f=r.error;re(`Error during font loading: ${f}`),this.commonObjs.resolve(n,f);break}const o=new Fe(r),c=this._params.pdfBug&&globalThis.FontInspector?.enabled?(f,p)=>globalThis.FontInspector.fontAdded(f,p):null,h=new UF(o,c,r.extra,r.charProcOperatorList);this.fontLoader.bind(h).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!h.fontExtraProperties&&h.data&&h.clearData(),this.commonObjs.resolve(n,h)});break;case"CopyLocalImage":const{imageRef:d}=r;xe(d,"The imageRef must be defined.");for(const f of this.#e.values())for(const[,p]of f.objs)if(p?.ref===d)return p.dataLen?(this.commonObjs.resolve(n,structuredClone(p)),p.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,r);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),t.on("obj",([n,i,r,o])=>{if(this.destroyed)return;const c=this.#e.get(i);if(!c.objs.has(n)){if(c._intentStates.size===0){o?.bitmap?.close();return}switch(r){case"Image":case"Pattern":c.objs.resolve(n,o);break;default:throw new Error(`Got unknown object type ${r}`)}}}),t.on("DocProgress",n=>{this.destroyed||e.onProgress?.({loaded:n.loaded,total:n.total})}),t.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[n.type];if(!i)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&re("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=this.#i.get(e);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&this.#n.set(r.refStr,t);const o=new Iz(e,r,this,this._params.pdfBug);return this.#e.set(e,o),o});return this.#i.set(e,i),i}getPageIndex(t){return nS(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#s("GetOptionalContentConfig").then(e=>new gz(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#t.get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(i=>({info:i[0],metadata:i[1]?new fz(i[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#e.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),ig.cleanup()}}cachedPageNumber(t){if(!nS(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#n.get(e)??null}}class Bz{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#t;return t.form||t.canvas&&e?.size>0}}class ou{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:n,commonObjs:i,annotationCanvasMap:r,operatorList:o,pageIndex:c,canvasFactory:h,filterFactory:d,useRequestAnimationFrame:f=!1,pdfBug:p=!1,pageColors:m=null,enableHWA:y=!1,operationsFilter:w=null}){this.callback=t,this.params=e,this.objs=n,this.commonObjs=i,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=c,this.canvasFactory=h,this.filterFactory=d,this._pdfBug=p,this.pageColors=m,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=f===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Bz(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=y,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=w}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(ou.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ou.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:i,background:r,dependencyTracker:o}=this.params,c=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Cu(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:i,viewport:n,transparency:t,background:r}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),ou.#e.delete(this._canvas),t||=new Hb(`Rendering cancelled, page ${this._pageIndex+1}`,e),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),ou.#e.delete(this._canvas),this.callback())))}}const uN="5.4.296",dN="f56dc8601";class is{#t=null;#e=null;#i;#n=null;#a=!1;#s=!1;#r=null;#o;#c=null;#l=null;static#d=null;static get _keyboardManager(){return ce(this,"_keyboardManager",new fg([[["Escape","mac+Escape"],is.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],is.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],is.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],is.prototype._moveToPrevious],[["Home","mac+Home"],is.prototype._moveToBeginning],[["End","mac+End"],is.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#s=!1,this.#r=t):this.#s=!0,this.#l=t?._uiManager||e,this.#o=this.#l._eventBus,this.#i=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",is.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#r&&(t.ariaControls=`${this.#r.id}_colorpicker_dropdown`);const e=this.#l._signal;t.addEventListener("click",this.#p.bind(this),{signal:e}),t.addEventListener("keydown",this.#m.bind(this),{signal:e});const n=this.#e=document.createElement("span");return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=this.#i,t.append(n),t}renderMainDropdown(){const t=this.#n=this.#u();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#u(){const t=document.createElement("div"),e=this.#l._signal;t.addEventListener("contextmenu",os,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#r&&(t.id=`${this.#r.id}_colorpicker_dropdown`);for(const[n,i]of this.#l.highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",i),r.title=n,r.setAttribute("data-l10n-id",is.#d[n]);const o=document.createElement("span");r.append(o),o.className="swatch",o.style.backgroundColor=i,r.ariaSelected=i===this.#i,r.addEventListener("click",this.#f.bind(this,i),{signal:e}),t.append(r)}return t.addEventListener("keydown",this.#m.bind(this),{signal:e}),t}#f(t,e){e.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:ve.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#p(t);return}const e=t.target.getAttribute("data-color");e&&this.#f(e,t)}_moveToNext(t){if(!this.#g){this.#p(t);return}if(t.target===this.#t){this.#n.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#n?.firstChild||t.target===this.#t){this.#g&&this._hideDropdownFromKeyboard();return}this.#g||this.#p(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#g){this.#p(t);return}this.#n.firstChild?.focus()}_moveToEnd(t){if(!this.#g){this.#p(t);return}this.#n.lastChild?.focus()}#m(t){is._keyboardManager.exec(this,t)}#p(t){if(this.#g){this.hideDropdown();return}if(this.#a=t.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#h.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#t.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const e=this.#n=this.#u();this.#t.append(e)}#h(t){this.#n?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#g(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#s){if(!this.#g){this.#r?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#a})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#n)return;const e=this.#l.highlightColors.values();for(const n of this.#n.children)n.ariaSelected=e.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#n?.remove(),this.#n=null}}class sg{#t=null;#e=null;#i=null;static#n=null;constructor(t){this.#e=t,this.#i=t._uiManager,sg.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:e,colorValue:n}=this.#e,i=this.#t=document.createElement("input");return i.type="color",i.value=n||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",sg.#n[t]),i.addEventListener("input",()=>{this.#i.updateParams(e,i.value)},{signal:this.#i._signal}),i}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function pP(s){return Math.floor(Math.max(0,Math.min(1,s))*255).toString(16).padStart(2,"0")}function af(s){return Math.max(0,Math.min(255,255*s))}class gP{static CMYK_G([t,e,n,i]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+i)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=af(t),[t,t,t]}static G_HTML([t]){const e=pP(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(af)}static RGB_HTML(t){return`#${t.map(pP).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,i]){return["RGB",1-Math.min(1,t+i),1-Math.min(1,n+i),1-Math.min(1,e+i)]}static CMYK_rgb([t,e,n,i]){return[af(1-Math.min(1,t+i)),af(1-Math.min(1,n+i)),af(1-Math.min(1,e+i))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const i=1-t,r=1-e,o=1-n,c=Math.min(i,r,o);return["CMYK",i,r,o,c]}}class Fz{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width",`${t}px`),i.setAttribute("height",`${e}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${t} ${e}`),i}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Xe("Abstract method `_createSVG` called.")}}class rg extends Fz{_createSVG(t){return document.createElementNS(ia,t)}}const zz=9,dc=new WeakSet,Uz=new Date().getTimezoneOffset()*60*1e3;class mP{static create(t){switch(t.data.annotationType){case dn.LINK:return new P2(t);case dn.TEXT:return new Wz(t);case dn.WIDGET:switch(t.data.fieldType){case"Tx":return new Gz(t);case"Btn":return t.data.radioButton?new fN(t):t.data.checkBox?new $z(t):new qz(t);case"Ch":return new Yz(t);case"Sig":return new Vz(t)}return new Ac(t);case dn.POPUP:return new rS(t);case dn.FREETEXT:return new pN(t);case dn.LINE:return new Kz(t);case dn.SQUARE:return new Zz(t);case dn.CIRCLE:return new Qz(t);case dn.POLYLINE:return new gN(t);case dn.CARET:return new t8(t);case dn.INK:return new L2(t);case dn.POLYGON:return new Jz(t);case dn.HIGHLIGHT:return new mN(t);case dn.UNDERLINE:return new e8(t);case dn.SQUIGGLY:return new n8(t);case dn.STRIKEOUT:return new i8(t);case dn.STAMP:return new yN(t);case dn.FILEATTACHMENT:return new s8(t);default:return new an(t)}}}class an{#t=null;#e=!1;#i=null;constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return an._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:t}=this,e=this.annotationStorage?.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:n,rect:i}=this.data;let r=-1/0,o=-1/0;if(e?.length>=8){for(let c=0;c<e.length;c+=8)e[c+1]>o?(o=e[c+1],r=e[c+2]):e[c+1]===o&&(r=Math.max(r,e[c+2]));return[r,o]}if(n?.length>=1){for(const c of n)for(let h=0,d=c.length;h<d;h+=2)c[h+1]>o?(o=c[h+1],r=c[h]):c[h+1]===o&&(r=Math.max(r,c[h]));if(r!==1/0)return[r,o]}return i?[i[2],i[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:n,pageHeight:i,pageX:r,pageY:o}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-r)/n,t[1]=100*(t[1]-o)/i,t}get commentText(){const{data:t}=this;return this.annotationStorage.getRawValue(`${tg}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){const{data:e}=this,n={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:n})||this.annotationStorage.setValue(`${tg}${e.id}`,{id:e.id,annotationType:e.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(this.#i?.popup||this.popup)?.remove(),this.#i=this.popup=null}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:e,popup:n}=t;e&&this.#n(e);let i=this.#i?.popup||this.popup;!i&&n?.text&&(this._createPopup(n),i=this.#i.popup),i&&(i.updateEdited(t),n?.deleted&&(i.remove(),this.#i=null,this.popup=null))}resetEdited(){this.#t&&(this.#n(this.#t.rect),this.#i?.popup.resetEdited(),this.#t=null)}#n(t){const{container:{style:e},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:o,pageX:c,pageY:h}}}}=this;n?.splice(0,4,...t),e.left=`${100*(t[0]-c)/r}%`,e.top=`${100*(o-t[3]+h)/o}%`,i===0?(e.width=`${100*(t[2]-t[0])/r}%`,e.height=`${100*(t[3]-t[1])/o}%`):this.setRotation(i)}_createContainer(t){const{data:e,parent:{page:n,viewport:i}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),!(this instanceof Ac)&&!(this instanceof P2)&&(r.tabIndex=0);const{style:o}=r;if(o.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof rS){const{rotation:b}=e;return!e.hasOwnCanvas&&b!==0&&this.setRotation(b,r),r}const{width:c,height:h}=this;if(!t&&e.borderStyle.width>0){o.borderWidth=`${e.borderStyle.width}px`;const b=e.borderStyle.horizontalCornerRadius,E=e.borderStyle.verticalCornerRadius;if(b>0||E>0){const k=`calc(${b}px * var(--total-scale-factor)) / calc(${E}px * var(--total-scale-factor))`;o.borderRadius=k}else if(this instanceof fN){const k=`calc(${c}px * var(--total-scale-factor)) / calc(${h}px * var(--total-scale-factor))`;o.borderRadius=k}switch(e.borderStyle.style){case _h.SOLID:o.borderStyle="solid";break;case _h.DASHED:o.borderStyle="dashed";break;case _h.BEVELED:re("Unimplemented border style: beveled");break;case _h.INSET:re("Unimplemented border style: inset");break;case _h.UNDERLINE:o.borderBottomStyle="solid";break}const _=e.borderColor||null;_?(this.#e=!0,o.borderColor=Gt.makeHexColor(_[0]|0,_[1]|0,_[2]|0)):o.borderWidth=0}const d=Gt.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:f,pageHeight:p,pageX:m,pageY:y}=i.rawDims;o.left=`${100*(d[0]-m)/f}%`,o.top=`${100*(d[1]-y)/p}%`;const{rotation:w}=e;return e.hasOwnCanvas||w===0?(o.width=`${100*c/f}%`,o.height=`${100*h/p}%`):this.setRotation(w,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims;let{width:r,height:o}=this;t%180!==0&&([r,o]=[o,r]),e.style.width=`${100*r/n}%`,e.style.height=`${100*o/i}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,i)=>{const r=i.detail[e],o=r[0],c=r.slice(1);i.target.style[n]=gP[`${o}_HTML`](c),this.annotationStorage.setValue(this.data.id,{[n]:gP[`${o}_rgb`](c)})};return ce(this,"_commonActions",{display:e=>{const{display:n}=e.detail,i=n%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const i of Object.keys(e.detail))(t[i]||n[i])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[i,r]of Object.entries(e)){const o=n[i];if(o){const c={detail:{[i]:r},target:t};o(c),delete e[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,i,r]=this.data.rect.map(b=>Math.fround(b));if(t.length===8){const[b,E,_,k]=t.subarray(2,6);if(i===b&&r===E&&e===_&&n===k)return}const{style:o}=this.container;let c;if(this.#e){const{borderColor:b,borderWidth:E}=o;o.borderWidth=0,c=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${b}" stroke-width="${E}">`],this.container.classList.add("hasBorder")}const h=i-e,d=r-n,{svgFactory:f}=this,p=f.createElement("svg");p.classList.add("quadrilateralsContainer"),p.setAttribute("width",0),p.setAttribute("height",0),p.role="none";const m=f.createElement("defs");p.append(m);const y=f.createElement("clipPath"),w=`clippath_${this.data.id}`;y.setAttribute("id",w),y.setAttribute("clipPathUnits","objectBoundingBox"),m.append(y);for(let b=2,E=t.length;b<E;b+=8){const _=t[b],k=t[b+1],T=t[b+2],R=t[b+3],D=f.createElement("rect"),F=(T-e)/h,j=(r-k)/d,I=(_-T)/h,O=(k-R)/d;D.setAttribute("x",F),D.setAttribute("y",j),D.setAttribute("width",I),D.setAttribute("height",O),y.append(D),c?.push(`<rect vector-effect="non-scaling-stroke" x="${F}" y="${j}" width="${I}" height="${O}"/>`)}this.#e&&(c.push("</g></svg>')"),o.backgroundImage=c.join("")),this.container.append(p),this.container.style.clipPath=`url(#${w})`}_createPopup(t=null){const{data:e}=this;let n,i;t?(n={str:t.text},i=t.date):(n=e.contentsObj,i=e.modificationDate);const r=this.#i=new rS({data:{color:e.color,titleObj:e.titleObj,modificationDate:i,contentsObj:n,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent._commentManager||this.parent.div.append(r.render())}get hasPopupElement(){return!!(this.#i||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#i}render(){Xe("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const i=this._fieldObjects[t];if(i)for(const{page:r,id:o,exportValues:c}of i){if(r===-1||o===e)continue;const h=typeof c=="string"?c:null,d=document.querySelector(`[data-element-id="${o}"]`);if(d&&!dc.has(d)){re(`_getElementsByName - element not allowed: ${o}`);continue}n.push({id:o,exportValue:h,domElement:d})}return n}for(const i of document.getElementsByName(t)){const{exportValue:r}=i,o=i.getAttribute("data-element-id");o!==e&&dc.has(i)&&n.push({id:o,exportValue:r,domElement:i})}return n}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class Hz extends an{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&(this._createPopup(t.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}class P2 extends an{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,n=document.createElement("a");n.setAttribute("data-element-id",t.id);let i=!1;return t.url?(e.addLinkAttributes(n,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(n,t.action,t.overlaidText),i=!0):t.attachment?(this.#e(n,t.attachment,t.overlaidText,t.attachmentDest),i=!0):t.setOCGState?(this.#i(n,t.setOCGState,t.overlaidText),i=!0):t.dest?(this._bindLink(n,t.dest,t.overlaidText),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,t),i=!0),t.resetForm?(this._bindResetFormAction(n,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(n,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(n),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e,n=""){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t(),n&&(t.title=n)}_bindNamedAction(t,e,n=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),n&&(t.title=n),this.#t()}#e(t,e,n="",i=null){t.href=this.linkService.getAnchorUrl(""),e.description?t.title=e.description:n&&(t.title=n),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,i),!1),this.#t()}#i(t,e,n=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),n&&(t.title=n),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(e.actions)){const r=n.get(i);r&&(t[r]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:i}}),!1))}e.overlaidText&&(t.title=e.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){const n=t.onclick;if(n||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){re('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(t.onclick=()=>!1);return}t.onclick=()=>{n?.();const{fields:i,refs:r,include:o}=e,c=[];if(i.length!==0||r.length!==0){const f=new Set(r);for(const p of i){const m=this._fieldObjects[p]||[];for(const{id:y}of m)f.add(y)}for(const p of Object.values(this._fieldObjects))for(const m of p)f.has(m.id)===o&&c.push(m)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const h=this.annotationStorage,d=[];for(const f of c){const{id:p}=f;switch(d.push(p),f.type){case"text":{const y=f.defaultValue||"";h.setValue(p,{value:y});break}case"checkbox":case"radiobutton":{const y=f.defaultValue===f.exportValues;h.setValue(p,{value:y});break}case"combobox":case"listbox":{const y=f.defaultValue||"";h.setValue(p,{value:y});break}default:continue}const m=document.querySelector(`[data-element-id="${p}"]`);if(m){if(!dc.has(m)){re(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;m.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}}),!1}}}class Wz extends an{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Ac extends an{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Hn.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,i,r){n.includes("mouse")?t.addEventListener(n,o=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):t.addEventListener(n,o=>{if(n==="blur"){if(!e.focused||!o.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}r&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(o)}})})}_setEventListeners(t,e,n,i){for(const[r,o]of n)(o==="Action"||this.data.actions?.[o])&&((o==="Focus"||o==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,r,o,i),o==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):o==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":Gt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||zz,r=t.style;let o;const c=2,h=d=>Math.round(10*d)/10;if(this.data.multiLine){const d=Math.abs(this.data.rect[3]-this.data.rect[1]-c),f=Math.round(d/(Zw*i))||1,p=d/f;o=Math.min(i,h(p/Zw))}else{const d=Math.abs(this.data.rect[3]-this.data.rect[1]-c);o=Math.min(i,h(d/Zw))}r.fontSize=`calc(${o}px * var(--total-scale-factor))`,r.color=Gt.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class Gz extends Ac{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,i){const r=this.annotationStorage;for(const o of this._getElementsByName(t.name,t.id))o.domElement&&(o.domElement[e]=n),r.setValue(o.id,{[i]:n})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const i=t.getValue(e,{value:this.data.fieldValue});let r=i.value||"";const o=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;o&&r.length>o&&(r=r.slice(0,o));let c=i.formattedValue||this.data.textContent?.join(`
`)||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const h={userValue:r,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=c??r,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",c??r),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),dc.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:d,datetimeType:f,timeStep:p}=this.data,m=!!f&&this.enableScripting;d&&(n.title=d),this._setRequired(n,this.data.required),o&&(n.maxLength=o),n.addEventListener("input",w=>{t.setValue(e,{value:w.target.value}),this.setPropertyOnSiblings(n,"value",w.target.value,"value"),h.formattedValue=null}),n.addEventListener("resetform",w=>{const b=this.data.defaultFieldValue??"";n.value=h.userValue=b,h.formattedValue=null});let y=w=>{const{formattedValue:b}=h;b!=null&&(w.target.value=b),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",b=>{if(h.focused)return;const{target:E}=b;if(m&&(E.type=f,p&&(E.step=p)),h.userValue){const _=h.userValue;if(m)if(f==="time"){const k=new Date(_),T=[k.getHours(),k.getMinutes(),k.getSeconds()];E.value=T.map(R=>R.toString().padStart(2,"0")).join(":")}else E.value=new Date(_-Uz).toISOString().split(f==="date"?"T":".",1)[0];else E.value=_}h.lastCommittedValue=E.value,h.commitKey=1,this.data.actions?.Focus||(h.focused=!0)}),n.addEventListener("updatefromsandbox",b=>{this.showElementAndHideCanvas(b.target);const E={value(_){h.userValue=_.detail.value??"",m||t.setValue(e,{value:h.userValue.toString()}),_.target.value=h.userValue},formattedValue(_){const{formattedValue:k}=_.detail;h.formattedValue=k,k!=null&&_.target!==document.activeElement&&(_.target.value=k);const T={formattedValue:k};m&&(T.value=k),t.setValue(e,T)},selRange(_){_.target.setSelectionRange(..._.detail.selRange)},charLimit:_=>{const{charLimit:k}=_.detail,{target:T}=_;if(k===0){T.removeAttribute("maxLength");return}T.setAttribute("maxLength",k);let R=h.userValue;!R||R.length<=k||(R=R.slice(0,k),T.value=h.userValue=R,t.setValue(e,{value:R}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:R,willCommit:!0,commitKey:1,selStart:T.selectionStart,selEnd:T.selectionEnd}}))}};this._dispatchEventFromSandbox(E,b)}),n.addEventListener("keydown",b=>{h.commitKey=1;let E=-1;if(b.key==="Escape"?E=0:b.key==="Enter"&&!this.data.multiLine?E=2:b.key==="Tab"&&(h.commitKey=3),E===-1)return;const{value:_}=b.target;h.lastCommittedValue!==_&&(h.lastCommittedValue=_,h.userValue=_,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:_,willCommit:!0,commitKey:E,selStart:b.target.selectionStart,selEnd:b.target.selectionEnd}}))});const w=y;y=null,n.addEventListener("blur",b=>{if(!h.focused||!b.relatedTarget)return;this.data.actions?.Blur||(h.focused=!1);const{target:E}=b;let{value:_}=E;if(m){if(_&&f==="time"){const k=_.split(":").map(T=>parseInt(T,10));_=new Date(2e3,0,1,k[0],k[1],k[2]||0).valueOf(),E.step=""}else _.includes("T")||(_=`${_}T00:00`),_=new Date(_).valueOf();E.type="text"}h.userValue=_,h.lastCommittedValue!==_&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:_,willCommit:!0,commitKey:h.commitKey,selStart:b.target.selectionStart,selEnd:b.target.selectionEnd}}),w(b)}),this.data.actions?.Keystroke&&n.addEventListener("beforeinput",b=>{h.lastCommittedValue=null;const{data:E,target:_}=b,{value:k,selectionStart:T,selectionEnd:R}=_;let D=T,F=R;switch(b.inputType){case"deleteWordBackward":{const j=k.substring(0,T).match(/\w*[^\w]*$/);j&&(D-=j[0].length);break}case"deleteWordForward":{const j=k.substring(T).match(/^[^\w]*\w*/);j&&(F+=j[0].length);break}case"deleteContentBackward":T===R&&(D-=1);break;case"deleteContentForward":T===R&&(F+=1);break}b.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:k,change:E||"",willCommit:!1,selStart:D,selEnd:F}})}),this._setEventListeners(n,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],b=>b.target.value)}if(y&&n.addEventListener("blur",y),this.data.comb){const b=(this.data.rect[2]-this.data.rect[0])/o;n.classList.add("comb"),n.style.letterSpacing=`calc(${b}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class Vz extends Ac{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class $z extends Ac{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let i=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",t.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return dc.add(r),r.setAttribute("data-element-id",n),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,i&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=0,r.addEventListener("change",o=>{const{name:c,checked:h}=o.target;for(const d of this._getElementsByName(c,n)){const f=h&&d.exportValue===e.exportValue;d.domElement&&(d.domElement.checked=f),t.setValue(d.id,{value:f})}t.setValue(n,{value:h})}),r.addEventListener("resetform",o=>{const c=e.defaultFieldValue||"Off";o.target.checked=c===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",o=>{const c={value(h){h.target.checked=h.detail.value!=="Off",t.setValue(n,{value:h.target.checked})}};this._dispatchEventFromSandbox(c,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class fN extends Ac{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let i=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof i=="string"&&(i=i!==e.buttonValue,t.setValue(n,{value:i})),i)for(const o of this._getElementsByName(e.fieldName,n))t.setValue(o.id,{value:!1});const r=document.createElement("input");if(dc.add(r),r.setAttribute("data-element-id",n),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,i&&r.setAttribute("checked",!0),r.tabIndex=0,r.addEventListener("change",o=>{const{name:c,checked:h}=o.target;for(const d of this._getElementsByName(c,n))t.setValue(d.id,{value:!1});t.setValue(n,{value:h})}),r.addEventListener("resetform",o=>{const c=e.defaultFieldValue;o.target.checked=c!=null&&c===e.buttonValue}),this.enableScripting&&this.hasJSActions){const o=e.buttonValue;r.addEventListener("updatefromsandbox",c=>{const h={value:d=>{const f=o===d.detail.value;for(const p of this._getElementsByName(d.target.name)){const m=f&&p.id===n;p.domElement&&(p.domElement.checked=m),t.setValue(p.id,{value:m})}}};this._dispatchEventFromSandbox(h,c)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class qz extends P2{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class Yz extends Ac{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),i=document.createElement("select");dc.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",f=>{const p=this.data.defaultFieldValue;for(const m of i.options)m.selected=m.value===p});for(const f of this.data.options){const p=document.createElement("option");p.textContent=f.displayValue,p.value=f.exportValue,n.value.includes(f.exportValue)&&(p.setAttribute("selected",!0),r=!1),i.append(p)}let o=null;if(r){const f=document.createElement("option");f.value=" ",f.setAttribute("hidden",!0),f.setAttribute("selected",!0),i.prepend(f),o=()=>{f.remove(),i.removeEventListener("input",o),o=null},i.addEventListener("input",o)}const c=f=>{const p=f?"value":"textContent",{options:m,multiple:y}=i;return y?Array.prototype.filter.call(m,w=>w.selected).map(w=>w[p]):m.selectedIndex===-1?null:m[m.selectedIndex][p]};let h=c(!1);const d=f=>{const p=f.target.options;return Array.prototype.map.call(p,m=>({displayValue:m.textContent,exportValue:m.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",f=>{const p={value(m){o?.();const y=m.detail.value,w=new Set(Array.isArray(y)?y:[y]);for(const b of i.options)b.selected=w.has(b.value);t.setValue(e,{value:c(!0)}),h=c(!1)},multipleSelection(m){i.multiple=!0},remove(m){const y=i.options,w=m.detail.remove;y[w].selected=!1,i.remove(w),y.length>0&&Array.prototype.findIndex.call(y,E=>E.selected)===-1&&(y[0].selected=!0),t.setValue(e,{value:c(!0),items:d(m)}),h=c(!1)},clear(m){for(;i.length!==0;)i.remove(0);t.setValue(e,{value:null,items:[]}),h=c(!1)},insert(m){const{index:y,displayValue:w,exportValue:b}=m.detail.insert,E=i.children[y],_=document.createElement("option");_.textContent=w,_.value=b,E?E.before(_):i.append(_),t.setValue(e,{value:c(!0),items:d(m)}),h=c(!1)},items(m){const{items:y}=m.detail;for(;i.length!==0;)i.remove(0);for(const w of y){const{displayValue:b,exportValue:E}=w,_=document.createElement("option");_.textContent=b,_.value=E,i.append(_)}i.options.length>0&&(i.options[0].selected=!0),t.setValue(e,{value:c(!0),items:d(m)}),h=c(!1)},indices(m){const y=new Set(m.detail.indices);for(const w of m.target.options)w.selected=y.has(w.index);t.setValue(e,{value:c(!0)}),h=c(!1)},editable(m){m.target.disabled=!m.detail.editable}};this._dispatchEventFromSandbox(p,f)}),i.addEventListener("input",f=>{const p=c(!0),m=c(!1);t.setValue(e,{value:p}),f.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:h,change:m,changeEx:p,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],f=>f.target.value)):i.addEventListener("input",function(f){t.setValue(e,{value:c(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class rS extends an{constructor(t){const{data:e,elements:n,parent:i}=t,r=!!i._commentManager;if(super(t,{isRenderable:!r&&an._hasPopupData(e)}),this.elements=n,r&&an._hasPopupData(e)){const o=this.popup=this.#t();for(const c of n)c.popup=o}else this.popup=null}#t(){return new Xz({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=this.#t(),n=[];for(const i of this.elements)i.popup=e,i.container.ariaHasPopup="dialog",n.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(i=>`${b2}${i}`).join(",")),this.container}}class Xz{#t=null;#e=this.#G.bind(this);#i=this.#F.bind(this);#n=this.#D.bind(this);#a=this.#w.bind(this);#s=null;#r=null;#o=null;#c=null;#l=null;#d=null;#u=null;#f=!1;#m=null;#p=null;#h=null;#g=null;#y=null;#b=null;#v=null;#E=null;#S=null;#x=null;#k=!1;#A=null;#_=null;constructor({container:t,color:e,elements:n,titleObj:i,modificationDate:r,contentsObj:o,richText:c,parent:h,rect:d,parentRect:f,open:p,commentManager:m=null}){this.#r=t,this.#S=i,this.#o=o,this.#E=c,this.#d=h,this.#s=e,this.#v=d,this.#u=f,this.#l=n,this.#t=m,this.#A=n[0],this.#c=Bv.toDateObject(r),this.trigger=n.flatMap(y=>y.getElementsToTriggerPopup()),m?this.renderCommentButton():(this.#R(),this.#r.hidden=!0,p&&this.#w())}#R(){if(this.#p)return;this.#p=new AbortController;const{signal:t}=this.#p;for(const e of this.trigger)e.addEventListener("click",this.#a,{signal:t}),e.addEventListener("pointerenter",this.#n,{signal:t}),e.addEventListener("pointerleave",this.#i,{signal:t}),e.classList.add("popupTriggerArea");for(const e of this.#l)e.container?.addEventListener("keydown",this.#e,{signal:t})}#T(){const t=this.#l.find(e=>e.hasCommentButton);t&&(this.#y=t._normalizePoint(t.commentButtonPosition))}renderCommentButton(){if(this.#g||(this.#y||this.#T(),!this.#y))return;const{signal:t}=this.#p=new AbortController,e=!!this.#A.extraPopupElement,n=()=>{this.#t.toggleCommentPopup(this,!0,void 0,!e)},i=()=>{this.#t.toggleCommentPopup(this,!1,!0,!e)},r=()=>{this.#t.toggleCommentPopup(this,!1,!1)};if(e){this.#g=this.#A.container;for(const o of this.trigger)o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.addEventListener("keydown",this.#e,{signal:t}),o.addEventListener("click",n,{signal:t}),o.addEventListener("pointerenter",i,{signal:t}),o.addEventListener("pointerleave",r,{signal:t}),o.classList.add("popupTriggerArea")}else{const o=this.#g=document.createElement("button");o.className="annotationCommentButton";const c=this.#A.container;o.style.zIndex=c.style.zIndex+1,o.tabIndex=0,o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#j(),this.#M(),o.addEventListener("keydown",this.#e,{signal:t}),o.addEventListener("click",n,{signal:t}),o.addEventListener("pointerenter",i,{signal:t}),o.addEventListener("pointerleave",r,{signal:t}),c.after(o)}}#M(){if(this.#A.extraPopupElement&&!this.#A.editor)return;this.renderCommentButton();const[t,e]=this.#y,{style:n}=this.#g;n.left=`calc(${t}%)`,n.top=`calc(${e}% - var(--comment-button-dim))`}#j(){this.#A.extraPopupElement||(this.renderCommentButton(),this.#g.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:t,opacity:e}=this.#A.commentData;return t?this.#d._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{this.#g?.focus()},0)}getData(){const{richText:t,color:e,opacity:n,creationDate:i,modificationDate:r}=this.#A.commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:n,creationDate:i,modificationDate:r}}get elementBeforePopup(){return this.#g}get comment(){return this.#_||=this.#A.commentText,this.#_}set comment(t){t!==this.comment&&(this.#A.commentText=this.#_=t)}get parentBoundingClientRect(){return this.#A.layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){this.#g&&(this.#g.classList.toggle("selected",t),this.#g.ariaExpanded=e)}setSelectedCommentButton(t){this.#g.classList.toggle("selected",t)}get commentPopupPosition(){if(this.#b)return this.#b;const{x:t,y:e,height:n}=this.#g.getBoundingClientRect(),{x:i,y:r,width:o,height:c}=this.#A.layer.getBoundingClientRect();return[(t-i)/o,(e+n-r)/c]}set commentPopupPosition(t){this.#b=t}hasDefaultPopupPosition(){return this.#b===null}get commentButtonPosition(){return this.#y}get commentButtonWidth(){return this.#g.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,n]=this.#b||this.commentButtonPosition.map(d=>d/100),i=this.parentBoundingClientRect,{x:r,y:o,width:c,height:h}=i;this.#t.showDialog(null,this,r+e*c,o+n*h,{...t,parentDimensions:i})}render(){if(this.#m)return;const t=this.#m=document.createElement("div");if(t.className="popup",this.#s){const n=t.style.outlineColor=Gt.makeHexColor(...this.#s);t.style.backgroundColor=`color-mix(in srgb, ${n} 30%, white)`}const e=document.createElement("span");if(e.className="header",this.#S?.str){const n=document.createElement("span");n.className="title",e.append(n),{dir:n.dir,str:n.textContent}=this.#S}if(t.append(e),this.#c){const n=document.createElement("time");n.className="popupDate",n.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),n.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),n.dateTime=this.#c.toISOString(),e.append(n)}w2({html:this.#L||this.#o.str,dir:this.#o?.dir,className:"popupContent"},t),this.#r.append(t)}get#L(){const t=this.#E,e=this.#o;return t?.str&&(!e?.str||e.str===t.str)&&this.#E.html||null}get#N(){return this.#L?.attributes?.style?.fontSize||0}get#B(){return this.#L?.attributes?.style?.color||null}#O(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},i={style:{color:this.#B,fontSize:this.#N?`calc(${this.#N}px * var(--total-scale-factor))`:""}};for(const r of t.split(`
`))e.push({name:"span",value:r,attributes:i});return n}#G(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#w()}updateEdited({rect:t,popup:e,deleted:n}){if(this.#t){n?(this.remove(),this.#_=null):e&&(e.deleted?this.remove():(this.#j(),this.#_=e.text)),t&&(this.#y=null,this.#T(),this.#M());return}if(n||e?.deleted){this.remove();return}this.#R(),this.#x||={contentsObj:this.#o,richText:this.#E},t&&(this.#h=null),e&&e.text&&(this.#E=this.#O(e.text),this.#c=Bv.toDateObject(e.date),this.#o=null),this.#m?.remove(),this.#m=null}resetEdited(){this.#x&&({contentsObj:this.#o,richText:this.#E}=this.#x,this.#x=null,this.#m?.remove(),this.#m=null,this.#h=null)}remove(){if(this.#p?.abort(),this.#p=null,this.#m?.remove(),this.#m=null,this.#k=!1,this.#f=!1,this.#g?.remove(),this.#g=null,this.trigger)for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#C(){if(this.#h!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:i,pageY:r}}}=this.#d;let o=!!this.#u,c=o?this.#u:this.#v;for(const w of this.#l)if(!c||Gt.intersect(w.data.rect,c)!==null){c=w.data.rect,o=!0;break}const h=Gt.normalizeRect([c[0],t[3]-c[1]+t[1],c[2],t[3]-c[3]+t[1]]),f=o?c[2]-c[0]+5:0,p=h[0]+f,m=h[1];this.#h=[100*(p-i)/e,100*(m-r)/n];const{style:y}=this.#r;y.left=`${this.#h[0]}%`,y.top=`${this.#h[1]}%`}#w(){if(this.#t){this.#t.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#D(),this.#r.addEventListener("click",this.#a),this.#r.addEventListener("keydown",this.#e)):(this.#F(),this.#r.removeEventListener("click",this.#a),this.#r.removeEventListener("keydown",this.#e))}#D(){this.#m||this.render(),this.isVisible?this.#f&&this.#r.classList.add("focused"):(this.#C(),this.#r.hidden=!1,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)+1e3)}#F(){this.#r.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#r.hidden=!0,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)-1e3)}forceHide(){this.#k=this.isVisible,this.#k&&(this.#r.hidden=!0)}maybeShow(){this.#t||(this.#R(),this.#k&&(this.#m||this.#D(),this.#k=!1,this.#r.hidden=!1))}get isVisible(){return this.#t?!1:this.#r.hidden===!1}}class pN extends an{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=ie.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class Kz extends an{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:n}=this,i=this.svgFactory.create(e,n,!0),r=this.#t=this.svgFactory.createElement("svg:line");return r.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),r.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),r.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),r.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),r.setAttribute("stroke-width",t.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),i.append(r),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Zz extends an{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:n}=this,i=this.svgFactory.create(e,n,!0),r=t.borderStyle.width,o=this.#t=this.svgFactory.createElement("svg:rect");return o.setAttribute("x",r/2),o.setAttribute("y",r/2),o.setAttribute("width",e-r),o.setAttribute("height",n-r),o.setAttribute("stroke-width",r||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Qz extends an{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:n}=this,i=this.svgFactory.create(e,n,!0),r=t.borderStyle.width,o=this.#t=this.svgFactory.createElement("svg:ellipse");return o.setAttribute("cx",e/2),o.setAttribute("cy",n/2),o.setAttribute("rx",e/2-r/2),o.setAttribute("ry",n/2-r/2),o.setAttribute("stroke-width",r||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class gN extends an{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:n,popupRef:i},width:r,height:o}=this;if(!e)return this.container;const c=this.svgFactory.create(r,o,!0);let h=[];for(let f=0,p=e.length;f<p;f+=2){const m=e[f]-t[0],y=t[3]-e[f+1];h.push(`${m},${y}`)}h=h.join(" ");const d=this.#t=this.svgFactory.createElement(this.svgElementName);return d.setAttribute("points",h),d.setAttribute("stroke-width",n.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),c.append(d),this.container.append(c),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Jz extends gN{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class t8 extends an{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class L2 extends an{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?ie.HIGHLIGHT:ie.INK}#i(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:n,borderStyle:i,popupRef:r}}=this,{transform:o,width:c,height:h}=this.#i(e,t),d=this.svgFactory.create(c,h,!0),f=this.#t=this.svgFactory.createElement("svg:g");d.append(f),f.setAttribute("stroke-width",i.width||1),f.setAttribute("stroke-linecap","round"),f.setAttribute("stroke-linejoin","round"),f.setAttribute("stroke-miterlimit",10),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),f.setAttribute("transform",o);for(let p=0,m=n.length;p<m;p++){const y=this.svgFactory.createElement(this.svgElementName);this.#e.push(y),y.setAttribute("points",n[p].join(",")),f.append(y)}return!r&&this.hasPopupData&&this._createPopup(),this.container.append(d),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:n,rect:i}=t,r=this.#t;if(e>=0&&r.setAttribute("stroke-width",e||1),n)for(let o=0,c=this.#e.length;o<c;o++)this.#e[o].setAttribute("points",n[o].join(","));if(i){const{transform:o,width:c,height:h}=this.#i(this.data.rotation,i);r.parentElement.setAttribute("viewBox",`0 0 ${c} ${h}`),r.setAttribute("transform",o)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class mN extends an{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=ie.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class e8 extends an{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class n8 extends an{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class i8 extends an{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class yN extends an{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=ie.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class s8 extends an{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let n;e.hasAppearance||e.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),n.addEventListener("dblclick",this.#e.bind(this)),this.#t=n;const{isMac:i}=Hn.platform;return t.addEventListener("keydown",r=>{r.key==="Enter"&&(i?r.metaKey:r.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),t.append(n),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}let D2=class vN{#t=null;#e=null;#i=null;#n=new Map;#a=null;#s=null;constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:i,page:r,viewport:o,structTreeLayer:c,commentManager:h,linkService:d,annotationStorage:f}){this.div=t,this.#t=e,this.#e=n,this.#a=c||null,this.#s=d||null,this.#i=f||new _2,this.page=r,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=i,this._commentManager=h||null}hasEditableAnnotations(){return this.#n.size>0}async#r(t,e,n){const i=t.firstChild||t,r=i.id=`${b2}${e}`,o=await this.#a?.getAriaAttributes(r);if(o)for(const[c,h]of o)i.setAttribute(c,h);n?n.at(-1).container.after(t):(this.div.append(t),this.#t?.moveElementInDOM(this.div,t,i,!1))}async render(t){const{annotations:e}=t,n=this.div;$o(n,this.viewport);const i=new Map,r={data:null,layer:n,linkService:this.#s,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new rg,annotationStorage:this.#i,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const o of e){if(o.noHTML)continue;const c=o.annotationType===dn.POPUP;if(c){const f=i.get(o.id);if(!f)continue;r.elements=f}else if(o.rect[2]===o.rect[0]||o.rect[3]===o.rect[1])continue;r.data=o;const h=mP.create(r);if(!h.isRenderable)continue;if(!c&&o.popupRef){const f=i.get(o.popupRef);f?f.push(h):i.set(o.popupRef,[h])}const d=h.render();o.hidden&&(d.style.visibility="hidden"),await this.#r(d,o.id,r.elements),h.extraPopupElement?.popup?.renderCommentButton(),h._isEditable&&(this.#n.set(h.data.id,h),this._annotationEditorUIManager?.renderAnnotationElement(h))}this.#o()}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:this.#s,svgFactory:new rg,parent:this};for(const n of t){n.borderStyle||=vN._defaultBorderStyle,e.data=n;const i=mP.create(e);if(!i.isRenderable)continue;const r=i.render();await this.#r(r,n.id,null)}}update({viewport:t}){const e=this.div;this.viewport=t,$o(e,{rotation:t.rotation}),this.#o(),e.hidden=!1}#o(){if(!this.#e)return;const t=this.div;for(const[e,n]of this.#e){const i=t.querySelector(`[data-annotation-id="${e}"]`);if(!i)continue;n.className="annotationContent";const{firstChild:r}=i;r?r.nodeName==="CANVAS"?r.replaceWith(n):r.classList.contains("annotationContent")?r.after(n):r.before(n):i.append(n);const o=this.#n.get(e);o&&(o._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,i.id,n),o._hasNoCanvas=!1):o.canvas=n)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(t){return this.#n.get(t)}addFakeAnnotation(t){const{div:e}=this,{id:n,rotation:i}=t,r=new Hz({data:{id:n,rect:t.getPDFRect(),rotation:i},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:this.#s,annotationStorage:this.#i}),o=r.render();return e.append(o),this.#t?.moveElementInDOM(e,o,o,!1),r.createOrUpdatePopup(),r}static get _defaultBorderStyle(){return ce(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:_h.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};const Km=/\r\n?|\n/g;class In extends Xt{#t="";#e=`${this.id}-editor`;#i=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=In.prototype,e=r=>r.isEmpty(),n=Na.TRANSLATE_SMALL,i=Na.TRANSLATE_BIG;return ce(this,"_keyboardManager",new fg([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-n,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[n,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-n],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,n],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:e}]]))}static _type="freetext";static _editorType=ie.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.color=t.color||In._defaultColor||Xt._defaultLineColor,this.#n=t.fontSize||In._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(t,e){Xt.initialize(t,e);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case ve.FREETEXT_SIZE:In._defaultFontSize=e;break;case ve.FREETEXT_COLOR:In._defaultColor=e;break}}updateParams(t,e){switch(t){case ve.FREETEXT_SIZE:this.#a(e);break;case ve.FREETEXT_COLOR:this.#s(e);break}}static get defaultPropertiesToUpdate(){return[[ve.FREETEXT_SIZE,In._defaultFontSize],[ve.FREETEXT_COLOR,In._defaultColor||Xt._defaultLineColor]]}get propertiesToUpdate(){return[[ve.FREETEXT_SIZE,this.#n],[ve.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new sg(this),[["colorPicker",this._colorPicker]]}get colorType(){return ve.FREETEXT_COLOR}#a(t){const e=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-this.#n)*this.parentScale),this.#n=i,this.#o()},n=this.#n;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ve.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#s(t){const e=i=>{this.color=i,this.onUpdatedColor()},n=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ve.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-In._internalPadding*t,-(In._internalPadding+this.#n)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const t=this._uiManager.combinedSignal(this.#i);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#e),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#r(){const t=[];this.editorDiv.normalize();let e=null;for(const n of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&n.nodeName==="BR"||(t.push(In.#c(n)),e=n);return t.join(`
`)}#o(){const[t,e]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:i,div:r}=this,o=r.style.display,c=r.classList.contains("hidden");r.classList.remove("hidden"),r.style.display="hidden",i.div.append(this.div),n=r.getBoundingClientRect(),r.remove(),r.style.display=o,r.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=n.width/t,this.height=n.height/e):(this.width=n.height/t,this.height=n.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#t,e=this.#t=this.#r().trimEnd();if(t===e)return;const n=i=>{if(this.#t=i,!i){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{n(e)},undo:()=>{n(t)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){In._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#e),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,n.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,r]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[c,h]=this.getInitialTranslation();[c,h]=this.pageTranslationToScreen(c,h);const[d,f]=this.pageDimensions,[p,m]=this.pageTranslation;let y,w;switch(this.rotation){case 0:y=t+(o[0]-p)/d,w=e+this.height-(o[1]-m)/f;break;case 90:y=t+(o[0]-p)/d,w=e-(o[1]-m)/f,[c,h]=[h,-c];break;case 180:y=t-this.width+(o[0]-p)/d,w=e-(o[1]-m)/f,[c,h]=[-c,-h];break;case 270:y=t+(o[0]-p-this.height*f)/d,w=e+(o[1]-m-this.width*d)/f,[c,h]=[-h,c];break}this.setAt(y*i,w*r,c,h)}else this._moveAfterPaste(t,e);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Km,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:n}=e;if(n.length===1&&n[0]==="text/plain")return;t.preventDefault();const i=In.#u(e.getData("text")||"").replaceAll(Km,`
`);if(!i)return;const r=window.getSelection();if(!r.rangeCount)return;this.editorDiv.normalize(),r.deleteFromDocument();const o=r.getRangeAt(0);if(!i.includes(`
`)){o.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),r.collapseToStart();return}const{startContainer:c,startOffset:h}=o,d=[],f=[];if(c.nodeType===Node.TEXT_NODE){const y=c.parentElement;if(f.push(c.nodeValue.slice(h).replaceAll(Km,"")),y!==this.editorDiv){let w=d;for(const b of this.editorDiv.childNodes){if(b===y){w=f;continue}w.push(In.#c(b))}}d.push(c.nodeValue.slice(0,h).replaceAll(Km,""))}else if(c===this.editorDiv){let y=d,w=0;for(const b of this.editorDiv.childNodes)w++===h&&(y=f),y.push(In.#c(b))}this.#t=`${d.join(`
`)}${i}${f.join(`
`)}`,this.#l();const p=new Range;let m=Math.sumPrecise(d.map(y=>y.length));for(const{firstChild:y}of this.editorDiv.childNodes)if(y.nodeType===Node.TEXT_NODE){const w=y.nodeValue.length;if(m<=w){p.setStart(y,m),p.setEnd(y,m);break}m-=w}r.removeAllRanges(),r.addRange(p)}#l(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const t of this.#t.split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#d(){return this.#t.replaceAll(""," ")}static#u(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=In._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,e,n){let i=null;if(t instanceof pN){const{data:{defaultAppearanceData:{fontSize:o,fontColor:c},rect:h,rotation:d,id:f,popupRef:p,richText:m,contentsObj:y,creationDate:w,modificationDate:b},textContent:E,textPosition:_,parent:{page:{pageNumber:k}}}=t;if(!E||E.length===0)return null;i=t={annotationType:ie.FREETEXT,color:Array.from(c),fontSize:o,value:E.join(`
`),position:_,pageIndex:k-1,rect:h.slice(0),rotation:d,annotationElementId:f,id:f,deleted:!1,popupRef:p,comment:y?.str||null,richText:m,creationDate:w,modificationDate:b}}const r=await super.deserialize(t,e,n);return r.#n=t.fontSize,r.color=Gt.makeHexColor(...t.color),r.#t=In.#u(t.value),r._initialData=i,t.comment&&r.setCommentData(t),r}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=Xt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),n=Object.assign(super.serialize(t),{color:e,fontSize:this.#n,value:this.#d()});return this.addComment(n),t?(n.isCopy=!0,n):this.annotationElementId&&!this.#f(n)?null:(n.id=this.annotationElementId,n)}#f(t){const{value:e,fontSize:n,color:i,pageIndex:r}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==e||t.fontSize!==n||t.color.some((o,c)=>o!==i[c])||t.pageIndex!==r}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(!e)return null;const{style:n}=e;n.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,n.color=this.color,e.replaceChildren();for(const i of this.#t.split(`
`)){const r=document.createElement("div");r.append(i?document.createTextNode(i):document.createElement("br")),e.append(r)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#t}}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class Wt{static PRECISION=1e-4;toSVGPath(){Xe("Abstract method `toSVGPath` must be implemented.")}get box(){Xe("Abstract getter `box` must be implemented.")}serialize(t,e){Xe("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,i,r,o){o||=new Float32Array(t.length);for(let c=0,h=t.length;c<h;c+=2)o[c]=e+t[c]*i,o[c+1]=n+t[c+1]*r;return o}static _rescaleAndSwap(t,e,n,i,r,o){o||=new Float32Array(t.length);for(let c=0,h=t.length;c<h;c+=2)o[c]=e+t[c+1]*i,o[c+1]=n+t[c]*r;return o}static _translate(t,e,n,i){i||=new Float32Array(t.length);for(let r=0,o=t.length;r<o;r+=2)i[r]=e+t[r],i[r+1]=n+t[r+1];return i}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,n,i,r){switch(r){case 90:return[1-e/n,t/i];case 180:return[1-t/n,1-e/i];case 270:return[e/n,1-t/i];default:return[t/n,e/i]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,i,r,o){return[(t+5*n)/6,(e+5*i)/6,(5*n+r)/6,(5*i+o)/6,(n+r)/2,(i+o)/2]}}class Xl{#t;#e=[];#i;#n;#a=[];#s=new Float32Array(18);#r;#o;#c;#l;#d;#u;#f=[];static#m=8;static#p=2;static#h=Xl.#m+Xl.#p;constructor({x:t,y:e},n,i,r,o,c=0){this.#t=n,this.#u=r*i,this.#n=o,this.#s.set([NaN,NaN,NaN,NaN,t,e],6),this.#i=c,this.#l=Xl.#m*i,this.#c=Xl.#h*i,this.#d=i,this.#f.push(t,e)}isEmpty(){return isNaN(this.#s[8])}#g(){const t=this.#s.subarray(4,6),e=this.#s.subarray(16,18),[n,i,r,o]=this.#t;return[(this.#r+(t[0]-e[0])/2-n)/r,(this.#o+(t[1]-e[1])/2-i)/o,(this.#r+(e[0]-t[0])/2-n)/r,(this.#o+(e[1]-t[1])/2-i)/o]}add({x:t,y:e}){this.#r=t,this.#o=e;const[n,i,r,o]=this.#t;let[c,h,d,f]=this.#s.subarray(8,12);const p=t-d,m=e-f,y=Math.hypot(p,m);if(y<this.#c)return!1;const w=y-this.#l,b=w/y,E=b*p,_=b*m;let k=c,T=h;c=d,h=f,d+=E,f+=_,this.#f?.push(t,e);const R=-_/w,D=E/w,F=R*this.#u,j=D*this.#u;return this.#s.set(this.#s.subarray(2,8),0),this.#s.set([d+F,f+j],4),this.#s.set(this.#s.subarray(14,18),12),this.#s.set([d-F,f-j],16),isNaN(this.#s[6])?(this.#a.length===0&&(this.#s.set([c+F,h+j],2),this.#a.push(NaN,NaN,NaN,NaN,(c+F-n)/r,(h+j-i)/o),this.#s.set([c-F,h-j],14),this.#e.push(NaN,NaN,NaN,NaN,(c-F-n)/r,(h-j-i)/o)),this.#s.set([k,T,c,h,d,f],6),!this.isEmpty()):(this.#s.set([k,T,c,h,d,f],6),Math.abs(Math.atan2(T-h,k-c)-Math.atan2(_,E))<Math.PI/2?([c,h,d,f]=this.#s.subarray(2,6),this.#a.push(NaN,NaN,NaN,NaN,((c+d)/2-n)/r,((h+f)/2-i)/o),[c,h,k,T]=this.#s.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((k+c)/2-n)/r,((T+h)/2-i)/o),!0):([k,T,c,h,d,f]=this.#s.subarray(0,6),this.#a.push(((k+5*c)/6-n)/r,((T+5*h)/6-i)/o,((5*c+d)/6-n)/r,((5*h+f)/6-i)/o,((c+d)/2-n)/r,((h+f)/2-i)/o),[d,f,c,h,k,T]=this.#s.subarray(12,18),this.#e.push(((k+5*c)/6-n)/r,((T+5*h)/6-i)/o,((5*c+d)/6-n)/r,((5*h+f)/6-i)/o,((c+d)/2-n)/r,((h+f)/2-i)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#a,e=this.#e;if(isNaN(this.#s[6])&&!this.isEmpty())return this.#y();const n=[];n.push(`M${t[4]} ${t[5]}`);for(let i=6;i<t.length;i+=6)isNaN(t[i])?n.push(`L${t[i+4]} ${t[i+5]}`):n.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);this.#v(n);for(let i=e.length-6;i>=6;i-=6)isNaN(e[i])?n.push(`L${e[i+4]} ${e[i+5]}`):n.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);return this.#b(n),n.join(" ")}#y(){const[t,e,n,i]=this.#t,[r,o,c,h]=this.#g();return`M${(this.#s[2]-t)/n} ${(this.#s[3]-e)/i} L${(this.#s[4]-t)/n} ${(this.#s[5]-e)/i} L${r} ${o} L${c} ${h} L${(this.#s[16]-t)/n} ${(this.#s[17]-e)/i} L${(this.#s[14]-t)/n} ${(this.#s[15]-e)/i} Z`}#b(t){const e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#v(t){const[e,n,i,r]=this.#t,o=this.#s.subarray(4,6),c=this.#s.subarray(16,18),[h,d,f,p]=this.#g();t.push(`L${(o[0]-e)/i} ${(o[1]-n)/r} L${h} ${d} L${f} ${p} L${(c[0]-e)/i} ${(c[1]-n)/r}`)}newFreeDrawOutline(t,e,n,i,r,o){return new bN(t,e,n,i,r,o)}getOutlines(){const t=this.#a,e=this.#e,n=this.#s,[i,r,o,c]=this.#t,h=new Float32Array((this.#f?.length??0)+2);for(let p=0,m=h.length-2;p<m;p+=2)h[p]=(this.#f[p]-i)/o,h[p+1]=(this.#f[p+1]-r)/c;if(h[h.length-2]=(this.#r-i)/o,h[h.length-1]=(this.#o-r)/c,isNaN(n[6])&&!this.isEmpty())return this.#E(h);const d=new Float32Array(this.#a.length+24+this.#e.length);let f=t.length;for(let p=0;p<f;p+=2){if(isNaN(t[p])){d[p]=d[p+1]=NaN;continue}d[p]=t[p],d[p+1]=t[p+1]}f=this.#x(d,f);for(let p=e.length-6;p>=6;p-=6)for(let m=0;m<6;m+=2){if(isNaN(e[p+m])){d[f]=d[f+1]=NaN,f+=2;continue}d[f]=e[p+m],d[f+1]=e[p+m+1],f+=2}return this.#S(d,f),this.newFreeDrawOutline(d,h,this.#t,this.#d,this.#i,this.#n)}#E(t){const e=this.#s,[n,i,r,o]=this.#t,[c,h,d,f]=this.#g(),p=new Float32Array(36);return p.set([NaN,NaN,NaN,NaN,(e[2]-n)/r,(e[3]-i)/o,NaN,NaN,NaN,NaN,(e[4]-n)/r,(e[5]-i)/o,NaN,NaN,NaN,NaN,c,h,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(e[16]-n)/r,(e[17]-i)/o,NaN,NaN,NaN,NaN,(e[14]-n)/r,(e[15]-i)/o],0),this.newFreeDrawOutline(p,t,this.#t,this.#d,this.#i,this.#n)}#S(t,e){const n=this.#e;return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6}#x(t,e){const n=this.#s.subarray(4,6),i=this.#s.subarray(16,18),[r,o,c,h]=this.#t,[d,f,p,m]=this.#g();return t.set([NaN,NaN,NaN,NaN,(n[0]-r)/c,(n[1]-o)/h,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,p,m,NaN,NaN,NaN,NaN,(i[0]-r)/c,(i[1]-o)/h],e),e+=24}}class bN extends Wt{#t;#e=new Float32Array(4);#i;#n;#a;#s;#r;constructor(t,e,n,i,r,o){super(),this.#r=t,this.#a=e,this.#t=n,this.#s=i,this.#i=r,this.#n=o,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(o);const[c,h,d,f]=this.#e;for(let p=0,m=t.length;p<m;p+=2)t[p]=(t[p]-c)/d,t[p+1]=(t[p+1]-h)/f;for(let p=0,m=e.length;p<m;p+=2)e[p]=(e[p]-c)/d,e[p+1]=(e[p+1]-h)/f}toSVGPath(){const t=[`M${this.#r[4]} ${this.#r[5]}`];for(let e=6,n=this.#r.length;e<n;e+=6){if(isNaN(this.#r[e])){t.push(`L${this.#r[e+4]} ${this.#r[e+5]}`);continue}t.push(`C${this.#r[e]} ${this.#r[e+1]} ${this.#r[e+2]} ${this.#r[e+3]} ${this.#r[e+4]} ${this.#r[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,n,i],r){const o=n-t,c=i-e;let h,d;switch(r){case 0:h=Wt._rescale(this.#r,t,i,o,-c),d=Wt._rescale(this.#a,t,i,o,-c);break;case 90:h=Wt._rescaleAndSwap(this.#r,t,e,o,c),d=Wt._rescaleAndSwap(this.#a,t,e,o,c);break;case 180:h=Wt._rescale(this.#r,n,e,-o,c),d=Wt._rescale(this.#a,n,e,-o,c);break;case 270:h=Wt._rescaleAndSwap(this.#r,n,i,-o,-c),d=Wt._rescaleAndSwap(this.#a,n,i,-o,-c);break}return{outline:Array.from(h),points:[Array.from(d)]}}#o(t){const e=this.#r;let n=e[4],i=e[5];const r=[n,i,n,i];let o=n,c=i,h=n,d=i;const f=t?Math.max:Math.min,p=new Float32Array(4);for(let y=6,w=e.length;y<w;y+=6){const b=e[y+4],E=e[y+5];isNaN(e[y])?(Gt.pointBoundingBox(b,E,r),c>E?(o=b,c=E):c===E&&(o=f(o,b)),d<E?(h=b,d=E):d===E&&(h=f(h,b))):(p[0]=p[1]=1/0,p[2]=p[3]=-1/0,Gt.bezierBoundingBox(n,i,...e.slice(y,y+6),p),Gt.rectBoundingBox(p[0],p[1],p[2],p[3],r),c>p[1]?(o=p[0],c=p[1]):c===p[1]&&(o=f(o,p[0])),d<p[3]?(h=p[2],d=p[3]):d===p[3]&&(h=f(h,p[2]))),n=b,i=E}const m=this.#e;m[0]=r[0]-this.#i,m[1]=r[1]-this.#i,m[2]=r[2]-r[0]+2*this.#i,m[3]=r[3]-r[1]+2*this.#i,this.firstPoint=[o,c],this.lastPoint=[h,d]}get box(){return this.#e}newOutliner(t,e,n,i,r,o=0){return new Xl(t,e,n,i,r,o)}getNewOutline(t,e){const[n,i,r,o]=this.#e,[c,h,d,f]=this.#t,p=r*d,m=o*f,y=n*d+c,w=i*f+h,b=this.newOutliner({x:this.#a[0]*p+y,y:this.#a[1]*m+w},this.#t,this.#s,t,this.#n,e??this.#i);for(let E=2;E<this.#a.length;E+=2)b.add({x:this.#a[E]*p+y,y:this.#a[E+1]*m+w});return b.getOutlines()}}class aS{#t;#e;#i;#n=[];#a=[];constructor(t,e=0,n=0,i=!0){const r=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x:b,y:E,width:_,height:k}of t){const T=Math.floor((b-e)/o)*o,R=Math.ceil((b+_+e)/o)*o,D=Math.floor((E-e)/o)*o,F=Math.ceil((E+k+e)/o)*o,j=[T,D,F,!0],I=[R,D,F,!1];this.#n.push(j,I),Gt.rectBoundingBox(T,D,R,F,r)}const c=r[2]-r[0]+2*n,h=r[3]-r[1]+2*n,d=r[0]-n,f=r[1]-n;let p=i?-1/0:1/0,m=1/0;const y=this.#n.at(i?-1:-2),w=[y[0],y[2]];for(const b of this.#n){const[E,_,k,T]=b;!T&&i?_<m?(m=_,p=E):_===m&&(p=Math.max(p,E)):T&&!i&&(_<m?(m=_,p=E):_===m&&(p=Math.min(p,E))),b[0]=(E-d)/c,b[1]=(_-f)/h,b[2]=(k-f)/h}this.#t=new Float32Array([d,f,c,h]),this.#e=[p,m],this.#i=w}getOutlines(){this.#n.sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of this.#n)e[3]?(t.push(...this.#l(e)),this.#o(e)):(this.#c(e),t.push(...this.#l(e)));return this.#s(t)}#s(t){const e=[],n=new Set;for(const o of t){const[c,h,d]=o;e.push([c,h,o],[c,d,o])}e.sort((o,c)=>o[1]-c[1]||o[0]-c[0]);for(let o=0,c=e.length;o<c;o+=2){const h=e[o][2],d=e[o+1][2];h.push(d),d.push(h),n.add(h),n.add(d)}const i=[];let r;for(;n.size>0;){const o=n.values().next().value;let[c,h,d,f,p]=o;n.delete(o);let m=c,y=h;for(r=[c,d],i.push(r);;){let w;if(n.has(f))w=f;else if(n.has(p))w=p;else break;n.delete(w),[c,h,d,f,p]=w,m!==c&&(r.push(m,y,c,y===h?h:d),m=c),y=y===h?d:h}r.push(m,y)}return new r8(i,this.#t,this.#e,this.#i)}#r(t){const e=this.#a;let n=0,i=e.length-1;for(;n<=i;){const r=n+i>>1,o=e[r][0];if(o===t)return r;o<t?n=r+1:i=r-1}return i+1}#o([,t,e]){const n=this.#r(t);this.#a.splice(n,0,[t,e])}#c([,t,e]){const n=this.#r(t);for(let i=n;i<this.#a.length;i++){const[r,o]=this.#a[i];if(r!==t)break;if(r===t&&o===e){this.#a.splice(i,1);return}}for(let i=n-1;i>=0;i--){const[r,o]=this.#a[i];if(r!==t)break;if(r===t&&o===e){this.#a.splice(i,1);return}}}#l(t){const[e,n,i]=t,r=[[e,n,i]],o=this.#r(i);for(let c=0;c<o;c++){const[h,d]=this.#a[c];for(let f=0,p=r.length;f<p;f++){const[,m,y]=r[f];if(!(d<=m||y<=h)){if(m>=h){if(y>d)r[f][1]=d;else{if(p===1)return[];r.splice(f,1),f--,p--}continue}r[f][2]=h,y>d&&r.push([e,d,y])}}}return r}}class r8 extends Wt{#t;#e;constructor(t,e,n,i){super(),this.#e=t,this.#t=e,this.firstPoint=n,this.lastPoint=i}toSVGPath(){const t=[];for(const e of this.#e){let[n,i]=e;t.push(`M${n} ${i}`);for(let r=2;r<e.length;r+=2){const o=e[r],c=e[r+1];o===n?(t.push(`V${c}`),i=c):c===i&&(t.push(`H${o}`),n=o)}t.push("Z")}return t.join(" ")}serialize([t,e,n,i],r){const o=[],c=n-t,h=i-e;for(const d of this.#e){const f=new Array(d.length);for(let p=0;p<d.length;p+=2)f[p]=t+d[p]*c,f[p+1]=i-d[p+1]*h;o.push(f)}return o}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class oS extends Xl{newFreeDrawOutline(t,e,n,i,r,o){return new a8(t,e,n,i,r,o)}}class a8 extends bN{newOutliner(t,e,n,i,r,o=0){return new oS(t,e,n,i,r,o)}}class fn extends Xt{#t=null;#e=0;#i;#n=null;#a=null;#s=null;#r=null;#o=0;#c=null;#l=null;#d=null;#u=!1;#f=null;#m=null;#p=null;#h="";#g;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=ie.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=fn.prototype;return ce(this,"_keyboardManager",new fg([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||fn._defaultColor,this.#g=t.thickness||fn._defaultThickness,this.opacity=t.opacity||fn._defaultOpacity,this.#i=t.boxes||null,this.#y=t.methodOfCreation||"",this.#h=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#u=!0,this.#v(t),this.#A()):this.#i&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#r=t.focusNode,this.#o=t.focusOffset,this.#b(),this.#A(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#u?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#g,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#b(){const t=new aS(this.#i,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const e=new aS(this.#i,.0025,.001,this._uiManager.direction==="ltr");this.#s=e.getOutlines();const{firstPoint:n}=this.#l;this.#f=[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height];const{lastPoint:i}=this.#s;this.#m=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]}#v({highlightOutlines:t,highlightId:e,clipPathId:n}){this.#l=t;const i=1.5;if(this.#s=t.getNewOutline(this.#g/2+i,.0025),e>=0)this.#d=e,this.#n=n,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},!0);else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:fn.#_(this.#l.box,(p-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:fn.#_(this.#s.box,p),path:{d:this.#s.toSVGPath()}})}const[r,o,c,h]=t.box;switch(this.rotation){case 0:this.x=r,this.y=o,this.width=c,this.height=h;break;case 90:{const[p,m]=this.parentDimensions;this.x=o,this.y=1-r,this.width=c*m/p,this.height=h*p/m;break}case 180:this.x=1-r,this.y=1-o,this.width=c,this.height=h;break;case 270:{const[p,m]=this.parentDimensions;this.x=1-o,this.y=r,this.width=c*m/p,this.height=h*p/m;break}}const{firstPoint:d}=t;this.#f=[(d[0]-r)/c,(d[1]-o)/h];const{lastPoint:f}=this.#s;this.#m=[(f[0]-r)/c,(f[1]-o)/h]}static initialize(t,e){Xt.initialize(t,e),fn._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case ve.HIGHLIGHT_COLOR:fn._defaultColor=e;break;case ve.HIGHLIGHT_THICKNESS:fn._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#m}get commentButtonPosition(){return this.#f}updateParams(t,e){switch(t){case ve.HIGHLIGHT_COLOR:this.#E(e);break;case ve.HIGHLIGHT_THICKNESS:this.#S(e);break}}static get defaultPropertiesToUpdate(){return[[ve.HIGHLIGHT_COLOR,fn._defaultColor],[ve.HIGHLIGHT_THICKNESS,fn._defaultThickness]]}get propertiesToUpdate(){return[[ve.HIGHLIGHT_COLOR,this.color||fn._defaultColor],[ve.HIGHLIGHT_THICKNESS,this.#g||fn._defaultThickness],[ve.HIGHLIGHT_FREE,this.#u]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#a?.updateColor(this.color),super.onUpdatedColor()}#E(t){const e=(r,o)=>{this.color=r,this.opacity=o,this.onUpdatedColor()},n=this.color,i=this.opacity;this.addCommands({cmd:e.bind(this,t,fn._defaultOpacity),undo:e.bind(this,n,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ve.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#S(t){const e=this.#g,n=i=>{this.#g=i,this.#x(i)};this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ve.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#a=new is({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#M())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#M())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#k(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#A(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#k():t&&(this.#A(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#x(t){this.#u&&(this.#v({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))}#k(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#A(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#n}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#u},path:{d:this.#l.toSVGPath()}},!1,!0),this.#p=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#u},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},this.#u),this.#c&&(this.#c.style.clipPath=this.#n))}static#_([t,e,n,i],r){switch(r){case 90:return[1-e-i,t,i,n];case 180:return[1-t-n,1-e-i,n,i];case 270:return[e,1-t-n,i,n]}return[t,e,n,i]}rotate(t){const{drawLayer:e}=this.parent;let n;this.#u?(t=(t-this.rotation+360)%360,n=fn.#_(this.#l.box,t)):n=fn.#_([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#d,{bbox:n,root:{"data-main-rotation":t}}),e.updateProperties(this.#p,{bbox:fn.#_(this.#s.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#h&&(t.setAttribute("aria-label",this.#h),t.setAttribute("role","mark")),this.#u?t.classList.add("free"):this.div.addEventListener("keydown",this.#R.bind(this),{signal:this._uiManager._signal});const e=this.#c=document.createElement("div");return t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#n,this.setDims(this.width,this.height),qD(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#R(t){fn._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#T(!0);break;case 1:case 3:this.#T(!1);break}}#T(t){if(!this.#t)return;const e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#r,this.#o)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#u||this.#T(!1))}get _mustFixPosition(){return!this.#u}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!t}}))}#M(){return this.#u?this.rotation:0}#j(){if(this.#u)return null;const[t,e]=this.pageDimensions,[n,i]=this.pageTranslation,r=this.#i,o=new Float32Array(r.length*8);let c=0;for(const{x:h,y:d,width:f,height:p}of r){const m=h*t+n,y=(1-d)*e+i;o[c]=o[c+4]=m,o[c+1]=o[c+3]=y,o[c+2]=o[c+6]=m+f*t,o[c+5]=o[c+7]=y-p*e,c+=8}return o}#L(t){return this.#l.serialize(t,this.#M())}static startHighlighting(t,e,{target:n,x:i,y:r}){const{x:o,y:c,width:h,height:d}=n.getBoundingClientRect(),f=new AbortController,p=t.combinedSignal(f),m=y=>{f.abort(),this.#B(t,y)};window.addEventListener("blur",m,{signal:p}),window.addEventListener("pointerup",m,{signal:p}),window.addEventListener("pointerdown",rn,{capture:!0,passive:!1,signal:p}),window.addEventListener("contextmenu",os,{signal:p}),n.addEventListener("pointermove",this.#N.bind(this,t),{signal:p}),this._freeHighlight=new oS({x:i,y:r},[o,c,h,d],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#N(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#B(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,n){let i=null;if(t instanceof mN){const{data:{quadPoints:w,rect:b,rotation:E,id:_,color:k,opacity:T,popupRef:R,richText:D,contentsObj:F,creationDate:j,modificationDate:I},parent:{page:{pageNumber:O}}}=t;i=t={annotationType:ie.HIGHLIGHT,color:Array.from(k),opacity:T,quadPoints:w,boxes:null,pageIndex:O-1,rect:b.slice(0),rotation:E,annotationElementId:_,id:_,deleted:!1,popupRef:R,richText:D,comment:F?.str||null,creationDate:j,modificationDate:I}}else if(t instanceof L2){const{data:{inkLists:w,rect:b,rotation:E,id:_,color:k,borderStyle:{rawWidth:T},popupRef:R,richText:D,contentsObj:F,creationDate:j,modificationDate:I},parent:{page:{pageNumber:O}}}=t;i=t={annotationType:ie.HIGHLIGHT,color:Array.from(k),thickness:T,inkLists:w,boxes:null,pageIndex:O-1,rect:b.slice(0),rotation:E,annotationElementId:_,id:_,deleted:!1,popupRef:R,richText:D,comment:F?.str||null,creationDate:j,modificationDate:I}}const{color:r,quadPoints:o,inkLists:c,opacity:h}=t,d=await super.deserialize(t,e,n);d.color=Gt.makeHexColor(...r),d.opacity=h||1,c&&(d.#g=t.thickness),d._initialData=i,t.comment&&d.setCommentData(t);const[f,p]=d.pageDimensions,[m,y]=d.pageTranslation;if(o){const w=d.#i=[];for(let b=0;b<o.length;b+=8)w.push({x:(o[b]-m)/f,y:1-(o[b+1]-y)/p,width:(o[b+2]-o[b])/f,height:(o[b+1]-o[b+5])/p});d.#b(),d.#A(),d.rotate(d.rotation)}else if(c){d.#u=!0;const w=c[0],b={x:w[0]-m,y:p-(w[1]-y)},E=new oS(b,[0,0,f,p],1,d.#g/2,!0,.001);for(let T=0,R=w.length;T<R;T+=2)b.x=w[T]-m,b.y=p-(w[T+1]-y),E.add(b);const{id:_,clipPathId:k}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:d.color,"fill-opacity":d._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:E.toSVGPath()}},!0,!0);d.#v({highlightOutlines:E.getOutlines(),highlightId:_,clipPathId:k}),d.#A(),d.rotate(d.parentRotation)}return d}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=Xt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),n=super.serialize(t);return Object.assign(n,{color:e,opacity:this.opacity,thickness:this.#g,quadPoints:this.#j(),outlines:this.#L(n.rect)}),this.addComment(n),this.annotationElementId&&!this.#O(n)?null:(n.id=this.annotationElementId,n)}#O(t){const{color:e}=this._initialData;return this.hasEditedComment||t.color.some((n,i)=>n!==e[i])}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class xN{#t=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,n)}updateSVGProperty(t,e){this.#t[t]=e}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){Xe("Not implemented")}}class Zt extends Xt{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#i=null;static#n=null;static#a=null;static#s=NaN;static#r=null;static#o=null;static#c=NaN;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(this.#l(t),this.#f())}#l({drawOutlines:t,drawId:e,drawingOptions:n}){this.#t=t,this._drawingOptions||=n,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#d(t,this.parent),this.#h(t.box)}#d(t,e){const{id:n}=e.drawLayer.draw(Zt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return n}static _mergeSVGProperties(t,e){const n=new Set(Object.keys(t));for(const[i,r]of Object.entries(e))n.has(i)?Object.assign(t[i],r):t[i]=r;return t}static getDefaultDrawingOptions(t){Xe("Not implemented")}static get typesMap(){Xe("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const n=this.typesMap.get(t);n&&this._defaultDrawingOptions.updateProperty(n,e),this._currentParent&&(Zt.#i.updateProperty(n,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const n=this.constructor.typesMap.get(t);n&&this._updateProperty(t,n,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[n,i]of this.typesMap)t.push([n,e[i]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[n,i]of this.constructor.typesMap)t.push([n,e[i]]);return t}_updateProperty(t,e,n){const i=this._drawingOptions,r=i[e],o=c=>{i.updateProperty(e,c);const h=this.#t.updateProperty(e,c);h&&this.#h(h),this.parent?.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:o.bind(this,n),undo:o.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,Zt._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#p()),{bbox:this.#g()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,Zt._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#p()),{bbox:this.#g()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#g()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,Zt._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#p(),this.parentDimensions),{bbox:this.#g()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#u(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#h(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#u()):t&&(this._uiManager.addShouldRescale(this),this.#f(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#u(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#d(this.#t,t)}}#m([t,e,n,i]){const{parentDimensions:[r,o],rotation:c}=this;switch(c){case 90:return[e,1-t,n*(o/r),i*(r/o)];case 180:return[1-t,1-e,n,i];case 270:return[1-e,t,n*(o/r),i*(r/o)];default:return[t,e,n,i]}}#p(){const{x:t,y:e,width:n,height:i,parentDimensions:[r,o],rotation:c}=this;switch(c){case 90:return[1-e,t,n*(r/o),i*(o/r)];case 180:return[1-t,1-e,n,i];case 270:return[e,1-t,n*(r/o),i*(o/r)];default:return[t,e,n,i]}}#h(t){[this.x,this.y,this.width,this.height]=this.#m(t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#g(){const{x:t,y:e,width:n,height:i,rotation:r,parentRotation:o,parentDimensions:[c,h]}=this;switch((r*4+o)/90){case 1:return[1-e-i,t,i,n];case 2:return[1-t-n,1-e-i,n,i];case 3:return[e,1-t-n,i,n];case 4:return[t,e-n*(c/h),i*(h/c),n*(c/h)];case 5:return[1-e,t,n*(c/h),i*(h/c)];case 6:return[1-t-i*(h/c),1-e,i*(h/c),n*(c/h)];case 7:return[e-n*(c/h),1-t-i*(h/c),n*(c/h),i*(h/c)];case 8:return[t-n,e-i,n,i];case 9:return[1-e,t-n,i,n];case 10:return[1-t,1-e,n,i];case 11:return[e-i,1-t,i,n];case 12:return[t-i*(h/c),e,i*(h/c),n*(c/h)];case 13:return[1-e-n*(c/h),t-i*(h/c),n*(c/h),i*(h/c)];case 14:return[1-t,1-e-n*(c/h),i*(h/c),n*(c/h)];case 15:return[e,1-t,n*(c/h),i*(h/c)];default:return[t,e,n,i]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Zt._mergeSVGProperties({bbox:this.#g()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#h(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const n=super.render();n.classList.add("draw");const i=document.createElement("div");return n.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),n}static createDrawerInstance(t,e,n,i,r){Xe("Not implemented")}static startDrawing(t,e,n,i){const{target:r,offsetX:o,offsetY:c,pointerId:h,pointerType:d}=i;if(Zt.#r&&Zt.#r!==d)return;const{viewport:{rotation:f}}=t,{width:p,height:m}=r.getBoundingClientRect(),y=Zt.#n=new AbortController,w=t.combinedSignal(y);if(Zt.#s||=h,Zt.#r??=d,window.addEventListener("pointerup",b=>{Zt.#s===b.pointerId?this._endDraw(b):Zt.#o?.delete(b.pointerId)},{signal:w}),window.addEventListener("pointercancel",b=>{Zt.#s===b.pointerId?this._currentParent.endDrawingSession():Zt.#o?.delete(b.pointerId)},{signal:w}),window.addEventListener("pointerdown",b=>{Zt.#r===b.pointerType&&((Zt.#o||=new Set).add(b.pointerId),Zt.#i.isCancellable()&&(Zt.#i.removeLastElement(),Zt.#i.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",os,{signal:w}),r.addEventListener("pointermove",this._drawMove.bind(this),{signal:w}),r.addEventListener("touchmove",b=>{b.timeStamp===Zt.#c&&rn(b)},{signal:w}),t.toggleDrawing(),e._editorUndoBar?.hide(),Zt.#i){t.drawLayer.updateProperties(this._currentDrawId,Zt.#i.startNew(o,c,p,m,f));return}e.updateUIForDefaultProperties(this),Zt.#i=this.createDrawerInstance(o,c,p,m,f),Zt.#a=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(Zt.#a.toSVGProperties(),Zt.#i.defaultSVGProperties),!0,!1)}static _drawMove(t){if(Zt.#c=-1,!Zt.#i)return;const{offsetX:e,offsetY:n,pointerId:i}=t;if(Zt.#s===i){if(Zt.#o?.size>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,Zt.#i.add(e,n)),Zt.#c=t.timeStamp,rn(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,Zt.#i=null,Zt.#a=null,Zt.#r=null,Zt.#c=NaN),Zt.#n&&(Zt.#n.abort(),Zt.#n=null,Zt.#s=NaN,Zt.#o=null)}static _endDraw(t){const e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),t?.target===e.div&&e.drawLayer.updateProperties(this._currentDrawId,Zt.#i.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const n=Zt.#i,i=this._currentDrawId,r=n.getLastElement();e.addCommands({cmd:()=>{e.drawLayer.updateProperties(i,n.setLastElement(r))},undo:()=>{e.drawLayer.updateProperties(i,n.removeLastElement())},mustExec:!1,type:ve.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(ve.DRAW_STEP),!Zt.#i.isEmpty()){const{pageDimensions:[n,i],scale:r}=e,o=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:Zt.#i.getOutlines(n*r,i*r,r,this._INNER_MARGIN),drawingOptions:Zt.#a,mustBeCommitted:!t});return this._cleanup(!0),o}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,n,i,r,o){Xe("Not implemented")}static async deserialize(t,e,n){const{rawDims:{pageWidth:i,pageHeight:r,pageX:o,pageY:c}}=e.viewport,h=this.deserializeDraw(o,c,i,r,this._INNER_MARGIN,t),d=await super.deserialize(t,e,n);return d.createDrawingOptions(t),d.#l({drawOutlines:h}),d.#f(),d.onScaleChanging(),d.rotate(),d}serializeDraw(t){const[e,n]=this.pageTranslation,[i,r]=this.pageDimensions;return this.#t.serialize([e,n,i,r],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class o8{#t=new Float64Array(6);#e;#i;#n;#a;#s;#r="";#o=0;#c=new mg;#l;#d;constructor(t,e,n,i,r,o){this.#l=n,this.#d=i,this.#n=r,this.#a=o,[t,e]=this.#u(t,e);const c=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#s=[t,e],this.#i=[{line:c,points:this.#s}],this.#t.set(c,0)}updateProperty(t,e){t==="stroke-width"&&(this.#a=e)}#u(t,e){return Wt._normalizePoint(t,e,this.#l,this.#d,this.#n)}isEmpty(){return!this.#i||this.#i.length===0}isCancellable(){return this.#s.length<=10}add(t,e){[t,e]=this.#u(t,e);const[n,i,r,o]=this.#t.subarray(2,6),c=t-r,h=e-o;return Math.hypot(this.#l*c,this.#d*h)<=2?null:(this.#s.push(t,e),isNaN(n)?(this.#t.set([r,o,t,e],2),this.#e.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([n,i,r,o,t,e],0),this.#e.push(...Wt.createBezierPoints(n,i,r,o,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(this.#s.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,i,r){this.#l=n,this.#d=i,this.#n=r,[t,e]=this.#u(t,e);const o=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#s=[t,e];const c=this.#i.at(-1);return c&&(c.line=new Float32Array(c.line),c.points=new Float32Array(c.points)),this.#i.push({line:o,points:this.#s}),this.#t.set(o,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#i.at(-1)}setLastElement(t){return this.#i?(this.#i.push(t),this.#e=t.line,this.#s=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(t)}removeLastElement(){if(!this.#i)return this.#c.removeLastElement();this.#i.pop(),this.#r="";for(let t=0,e=this.#i.length;t<e;t++){const{line:n,points:i}=this.#i[t];this.#e=n,this.#s=i,this.#o=0,this.toSVGPath()}return{path:{d:this.#r}}}toSVGPath(){const t=Wt.svgRound(this.#e[4]),e=Wt.svgRound(this.#e[5]);if(this.#s.length===2)return this.#r=`${this.#r} M ${t} ${e} Z`,this.#r;if(this.#s.length<=6){const i=this.#r.lastIndexOf("M");this.#r=`${this.#r.slice(0,i)} M ${t} ${e}`,this.#o=6}if(this.#s.length===4){const i=Wt.svgRound(this.#e[10]),r=Wt.svgRound(this.#e[11]);return this.#r=`${this.#r} L ${i} ${r}`,this.#o=12,this.#r}const n=[];this.#o===0&&(n.push(`M ${t} ${e}`),this.#o=6);for(let i=this.#o,r=this.#e.length;i<r;i+=6){const[o,c,h,d,f,p]=this.#e.slice(i,i+6).map(Wt.svgRound);n.push(`C${o} ${c} ${h} ${d} ${f} ${p}`)}return this.#r+=n.join(" "),this.#o=this.#e.length,this.#r}getOutlines(t,e,n,i){const r=this.#i.at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),this.#c.build(this.#i,t,e,n,this.#n,this.#a,i),this.#t=null,this.#e=null,this.#i=null,this.#r=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class mg extends Wt{#t;#e=0;#i;#n;#a;#s;#r;#o;#c;build(t,e,n,i,r,o,c){this.#a=e,this.#s=n,this.#r=i,this.#o=r,this.#c=o,this.#i=c??0,this.#n=t,this.#u()}get thickness(){return this.#c}setLastElement(t){return this.#n.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of this.#n){if(t.push(`M${Wt.svgRound(e[4])} ${Wt.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12&&isNaN(e[6])){t.push(`L${Wt.svgRound(e[10])} ${Wt.svgRound(e[11])}`);continue}for(let n=6,i=e.length;n<i;n+=6){const[r,o,c,h,d,f]=e.subarray(n,n+6).map(Wt.svgRound);t.push(`C${r} ${o} ${c} ${h} ${d} ${f}`)}}return t.join("")}serialize([t,e,n,i],r){const o=[],c=[],[h,d,f,p]=this.#d();let m,y,w,b,E,_,k,T,R;switch(this.#o){case 0:R=Wt._rescale,m=t,y=e+i,w=n,b=-i,E=t+h*n,_=e+(1-d-p)*i,k=t+(h+f)*n,T=e+(1-d)*i;break;case 90:R=Wt._rescaleAndSwap,m=t,y=e,w=n,b=i,E=t+d*n,_=e+h*i,k=t+(d+p)*n,T=e+(h+f)*i;break;case 180:R=Wt._rescale,m=t+n,y=e,w=-n,b=i,E=t+(1-h-f)*n,_=e+d*i,k=t+(1-h)*n,T=e+(d+p)*i;break;case 270:R=Wt._rescaleAndSwap,m=t+n,y=e+i,w=-n,b=-i,E=t+(1-d-p)*n,_=e+(1-h-f)*i,k=t+(1-d)*n,T=e+(1-h)*i;break}for(const{line:D,points:F}of this.#n)o.push(R(D,m,y,w,b,r?new Array(D.length):null)),c.push(R(F,m,y,w,b,r?new Array(F.length):null));return{lines:o,points:c,rect:[E,_,k,T]}}static deserialize(t,e,n,i,r,{paths:{lines:o,points:c},rotation:h,thickness:d}){const f=[];let p,m,y,w,b;switch(h){case 0:b=Wt._rescale,p=-t/n,m=e/i+1,y=1/n,w=-1/i;break;case 90:b=Wt._rescaleAndSwap,p=-e/i,m=-t/n,y=1/i,w=1/n;break;case 180:b=Wt._rescale,p=t/n+1,m=-e/i,y=-1/n,w=1/i;break;case 270:b=Wt._rescaleAndSwap,p=e/i+1,m=t/n+1,y=-1/i,w=-1/n;break}if(!o){o=[];for(const _ of c){const k=_.length;if(k===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,_[0],_[1]]));continue}if(k===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,_[0],_[1],NaN,NaN,NaN,NaN,_[2],_[3]]));continue}const T=new Float32Array(3*(k-2));o.push(T);let[R,D,F,j]=_.subarray(0,4);T.set([NaN,NaN,NaN,NaN,R,D],0);for(let I=4;I<k;I+=2){const O=_[I],X=_[I+1];T.set(Wt.createBezierPoints(R,D,F,j,O,X),(I-2)*3),[R,D,F,j]=[F,j,O,X]}}}for(let _=0,k=o.length;_<k;_++)f.push({line:b(o[_].map(T=>T??NaN),p,m,y,w),points:b(c[_].map(T=>T??NaN),p,m,y,w)});const E=new this.prototype.constructor;return E.build(f,n,i,1,h,d,r),E}#l(t=this.#c){const e=this.#i+t/2*this.#r;return this.#o%180===0?[e/this.#a,e/this.#s]:[e/this.#s,e/this.#a]}#d(){const[t,e,n,i]=this.#t,[r,o]=this.#l(0);return[t+r,e+o,n-2*r,i-2*o]}#u(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:i}of this.#n){if(i.length<=12){for(let c=4,h=i.length;c<h;c+=6)Gt.pointBoundingBox(i[c],i[c+1],t);continue}let r=i[4],o=i[5];for(let c=6,h=i.length;c<h;c+=6){const[d,f,p,m,y,w]=i.subarray(c,c+6);Gt.bezierBoundingBox(r,o,d,f,p,m,y,w,t),r=y,o=w}}const[e,n]=this.#l();t[0]=hi(t[0]-e,0,1),t[1]=hi(t[1]-n,0,1),t[2]=hi(t[2]+e,0,1),t[3]=hi(t[3]+n,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,e){return t==="stroke-width"?this.#f(e):null}#f(t){const[e,n]=this.#l();this.#c=t;const[i,r]=this.#l(),[o,c]=[i-e,r-n],h=this.#t;return h[0]-=o,h[1]-=c,h[2]+=2*o,h[3]+=2*c,h}updateParentDimensions([t,e],n){const[i,r]=this.#l();this.#a=t,this.#s=e,this.#r=n;const[o,c]=this.#l(),h=o-i,d=c-r,f=this.#t;return f[0]-=h,f[1]-=d,f[2]+=2*h,f[3]+=2*d,f}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(Wt.svgRound).join(" ")}get defaultProperties(){const[t,e]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Wt.svgRound(t)} ${Wt.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=this.#t;let n=0,i=0,r=0,o=0,c=0,h=0;switch(this.#e){case 90:i=e/t,r=-t/e,c=t;break;case 180:n=-1,o=-1,c=t,h=e;break;case 270:i=-e/t,r=t/e,h=e;break;default:return""}return`matrix(${n} ${i} ${r} ${o} ${Wt.svgRound(c)} ${Wt.svgRound(h)})`}getPathResizingSVGProperties([t,e,n,i]){const[r,o]=this.#l(),[c,h,d,f]=this.#t;if(Math.abs(d-r)<=Wt.PRECISION||Math.abs(f-o)<=Wt.PRECISION){const b=t+n/2-(c+d/2),E=e+i/2-(h+f/2);return{path:{"transform-origin":`${Wt.svgRound(t)} ${Wt.svgRound(e)}`,transform:`${this.rotationTransform} translate(${b} ${E})`}}}const p=(n-2*r)/(d-2*r),m=(i-2*o)/(f-2*o),y=d/n,w=f/i;return{path:{"transform-origin":`${Wt.svgRound(c)} ${Wt.svgRound(h)}`,transform:`${this.rotationTransform} scale(${y} ${w}) translate(${Wt.svgRound(r)} ${Wt.svgRound(o)}) scale(${p} ${m}) translate(${Wt.svgRound(-r)} ${Wt.svgRound(-o)})`}}}getPathResizedSVGProperties([t,e,n,i]){const[r,o]=this.#l(),c=this.#t,[h,d,f,p]=c;if(c[0]=t,c[1]=e,c[2]=n,c[3]=i,Math.abs(f-r)<=Wt.PRECISION||Math.abs(p-o)<=Wt.PRECISION){const E=t+n/2-(h+f/2),_=e+i/2-(d+p/2);for(const{line:k,points:T}of this.#n)Wt._translate(k,E,_,k),Wt._translate(T,E,_,T);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Wt.svgRound(t)} ${Wt.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const m=(n-2*r)/(f-2*r),y=(i-2*o)/(p-2*o),w=-m*(h+r)+t+r,b=-y*(d+o)+e+o;if(m!==1||y!==1||w!==0||b!==0)for(const{line:E,points:_}of this.#n)Wt._rescale(E,w,b,m,y,E),Wt._rescale(_,w,b,m,y,_);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Wt.svgRound(t)} ${Wt.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],n){const[i,r]=n,o=this.#t,c=t-o[0],h=e-o[1];if(this.#a===i&&this.#s===r)for(const{line:d,points:f}of this.#n)Wt._translate(d,c,h,d),Wt._translate(f,c,h,f);else{const d=this.#a/i,f=this.#s/r;this.#a=i,this.#s=r;for(const{line:p,points:m}of this.#n)Wt._rescale(p,c,h,d,f,p),Wt._rescale(m,c,h,d,f,m);o[2]*=d,o[3]*=f}return o[0]=t,o[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Wt.svgRound(t)} ${Wt.svgRound(e)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Wt.svgRound(t[0])} ${Wt.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class Vb extends xN{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:Xt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new Vb(this._viewParameters);return t.updateAll(this),t}}class N2 extends Zt{static _type="ink";static _editorType=ie.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){Xt.initialize(t,e),this._defaultDrawingOptions=new Vb(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return ce(this,"typesMap",new Map([[ve.INK_THICKNESS,"stroke-width"],[ve.INK_COLOR,"stroke"],[ve.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,n,i,r){return new o8(t,e,n,i,r,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,n,i,r,o){return mg.deserialize(t,e,n,i,r,o)}static async deserialize(t,e,n){let i=null;if(t instanceof L2){const{data:{inkLists:o,rect:c,rotation:h,id:d,color:f,opacity:p,borderStyle:{rawWidth:m},popupRef:y,richText:w,contentsObj:b,creationDate:E,modificationDate:_},parent:{page:{pageNumber:k}}}=t;i=t={annotationType:ie.INK,color:Array.from(f),thickness:m,opacity:p,paths:{points:o},boxes:null,pageIndex:k-1,rect:c.slice(0),rotation:h,annotationElementId:d,id:d,deleted:!1,popupRef:y,richText:w,comment:b?.str||null,creationDate:E,modificationDate:_}}const r=await super.deserialize(t,e,n);return r._initialData=i,t.comment&&r.setCommentData(t),r}get toolbarButtons(){return this._colorPicker||=new sg(this),[["colorPicker",this._colorPicker]]}get colorType(){return ve.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:n}=this;e.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:n}){this._drawingOptions=N2.getDefaultDrawingOptions({stroke:Gt.makeHexColor(...t),"stroke-width":e,"stroke-opacity":n})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:n}=this.serializeDraw(t),{_drawingOptions:{stroke:i,"stroke-opacity":r,"stroke-width":o}}=this,c=Object.assign(super.serialize(t),{color:Xt._colorManager.convert(i),opacity:r,thickness:o,paths:{lines:e,points:n}});return this.addComment(c),t?(c.isCopy=!0,c):this.annotationElementId&&!this.#t(c)?null:(c.id=this.annotationElementId,c)}#t(t){const{color:e,thickness:n,opacity:i,pageIndex:r}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((o,c)=>o!==e[c])||t.thickness!==n||t.opacity!==i||t.pageIndex!==r}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:e,rect:n}=this.serializeDraw(!1);return t.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:e,popup:this.comment}),null}}class lS extends mg{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const Zm=8,of=3;class Fl{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,e,n,i){return n-=t,i-=e,n===0?i>0?0:4:n===1?i+6:2-i}static#i=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(t,e,n,i,r,o,c){const h=this.#e(n,i,r,o);for(let d=0;d<8;d++){const f=(-d+h-c+16)%8,p=this.#i[2*f],m=this.#i[2*f+1];if(t[(n+p)*e+(i+m)]!==0)return f}return-1}static#a(t,e,n,i,r,o,c){const h=this.#e(n,i,r,o);for(let d=0;d<8;d++){const f=(d+h+c+16)%8,p=this.#i[2*f],m=this.#i[2*f+1];if(t[(n+p)*e+(i+m)]!==0)return f}return-1}static#s(t,e,n,i){const r=t.length,o=new Int32Array(r);for(let f=0;f<r;f++)o[f]=t[f]<=i?1:0;for(let f=1;f<n-1;f++)o[f*e]=o[f*e+e-1]=0;for(let f=0;f<e;f++)o[f]=o[e*n-1-f]=0;let c=1,h;const d=[];for(let f=1;f<n-1;f++){h=1;for(let p=1;p<e-1;p++){const m=f*e+p,y=o[m];if(y===0)continue;let w=f,b=p;if(y===1&&o[m-1]===0)c+=1,b-=1;else if(y>=1&&o[m+1]===0)c+=1,b+=1,y>1&&(h=y);else{y!==1&&(h=Math.abs(y));continue}const E=[p,f],_=b===p+1,k={isHole:_,points:E,id:c,parent:0};d.push(k);let T;for(const Q of d)if(Q.id===h){T=Q;break}T?T.isHole?k.parent=_?T.parent:h:k.parent=_?h:T.parent:k.parent=_?h:0;const R=this.#n(o,e,f,p,w,b,0);if(R===-1){o[m]=-c,o[m]!==1&&(h=Math.abs(o[m]));continue}let D=this.#i[2*R],F=this.#i[2*R+1];const j=f+D,I=p+F;w=j,b=I;let O=f,X=p;for(;;){const Q=this.#a(o,e,O,X,w,b,1);D=this.#i[2*Q],F=this.#i[2*Q+1];const H=O+D,J=X+F;E.push(J,H);const N=O*e+X;if(o[N+1]===0?o[N]=-c:o[N]===1&&(o[N]=c),H===f&&J===p&&O===j&&X===I){o[m]!==1&&(h=Math.abs(o[m]));break}else w=O,b=X,O=H,X=J}}}return d}static#r(t,e,n,i){if(n-e<=4){for(let j=e;j<n-2;j+=2)i.push(t[j],t[j+1]);return}const r=t[e],o=t[e+1],c=t[n-4]-r,h=t[n-3]-o,d=Math.hypot(c,h),f=c/d,p=h/d,m=f*o-p*r,y=h/c,w=1/d,b=Math.atan(y),E=Math.cos(b),_=Math.sin(b),k=w*(Math.abs(E)+Math.abs(_)),T=w*(1-k+k**2),R=Math.max(Math.atan(Math.abs(_+E)*T),Math.atan(Math.abs(_-E)*T));let D=0,F=e;for(let j=e+2;j<n-2;j+=2){const I=Math.abs(m-f*t[j+1]+p*t[j]);I>D&&(F=j,D=I)}D>(d*R)**2?(this.#r(t,e,F+2,i),this.#r(t,F,n,i)):i.push(r,o)}static#o(t){const e=[],n=t.length;return this.#r(t,0,n,e),e.push(t[n-2],t[n-1]),e.length<=4?null:e}static#c(t,e,n,i,r,o){const c=new Float32Array(o**2),h=-2*i**2,d=o>>1;for(let b=0;b<o;b++){const E=(b-d)**2;for(let _=0;_<o;_++)c[b*o+_]=Math.exp((E+(_-d)**2)/h)}const f=new Float32Array(256),p=-2*r**2;for(let b=0;b<256;b++)f[b]=Math.exp(b**2/p);const m=t.length,y=new Uint8Array(m),w=new Uint32Array(256);for(let b=0;b<n;b++)for(let E=0;E<e;E++){const _=b*e+E,k=t[_];let T=0,R=0;for(let F=0;F<o;F++){const j=b+F-d;if(!(j<0||j>=n))for(let I=0;I<o;I++){const O=E+I-d;if(O<0||O>=e)continue;const X=t[j*e+O],Q=c[F*o+I]*f[Math.abs(X-k)];T+=X*Q,R+=Q}}const D=y[_]=Math.round(T/R);w[D]++}return[y,w]}static#l(t){const e=new Uint32Array(256);for(const n of t)e[n]++;return e}static#d(t){const e=t.length,n=new Uint8ClampedArray(e>>2);let i=-1/0,r=1/0;for(let c=0,h=n.length;c<h;c++){const d=n[c]=t[c<<2];i=Math.max(i,d),r=Math.min(r,d)}const o=255/(i-r);for(let c=0,h=n.length;c<h;c++)n[c]=(n[c]-r)*o;return n}static#u(t){let e,n=-1/0,i=-1/0;const r=t.findIndex(h=>h!==0);let o=r,c=r;for(e=r;e<256;e++){const h=t[e];h>n&&(e-o>i&&(i=e-o,c=e-1),n=h,o=e)}for(e=c-1;e>=0&&!(t[e]>t[e+1]);e--);return e}static#f(t){const e=t,{width:n,height:i}=t,{maxDim:r}=this.#t;let o=n,c=i;if(n>r||i>r){let m=n,y=i,w=Math.log2(Math.max(n,i)/r);const b=Math.floor(w);w=w===b?b-1:b;for(let _=0;_<w;_++){o=Math.ceil(m/2),c=Math.ceil(y/2);const k=new OffscreenCanvas(o,c);k.getContext("2d").drawImage(t,0,0,m,y,0,0,o,c),m=o,y=c,t!==e&&t.close(),t=k.transferToImageBitmap()}const E=Math.min(r/o,r/c);o=Math.round(o*E),c=Math.round(c*E)}const d=new OffscreenCanvas(o,c).getContext("2d",{willReadFrequently:!0});d.fillStyle="white",d.fillRect(0,0,o,c),d.filter="grayscale(1)",d.drawImage(t,0,0,t.width,t.height,0,0,o,c);const f=d.getImageData(0,0,o,c).data;return[this.#d(f),o,c]}static extractContoursFromText(t,{fontFamily:e,fontStyle:n,fontWeight:i},r,o,c,h){let d=new OffscreenCanvas(1,1),f=d.getContext("2d",{alpha:!1});const p=200,m=f.font=`${n} ${i} ${p}px ${e}`,{actualBoundingBoxLeft:y,actualBoundingBoxRight:w,actualBoundingBoxAscent:b,actualBoundingBoxDescent:E,fontBoundingBoxAscent:_,fontBoundingBoxDescent:k,width:T}=f.measureText(t),R=1.5,D=Math.ceil(Math.max(Math.abs(y)+Math.abs(w)||0,T)*R),F=Math.ceil(Math.max(Math.abs(b)+Math.abs(E)||p,Math.abs(_)+Math.abs(k)||p)*R);d=new OffscreenCanvas(D,F),f=d.getContext("2d",{alpha:!0,willReadFrequently:!0}),f.font=m,f.filter="grayscale(1)",f.fillStyle="white",f.fillRect(0,0,D,F),f.fillStyle="black",f.fillText(t,D*(R-1)/2,F*(3-R)/2);const j=this.#d(f.getImageData(0,0,D,F).data),I=this.#l(j),O=this.#u(I),X=this.#s(j,D,F,O);return this.processDrawnLines({lines:{curves:X,width:D,height:F},pageWidth:r,pageHeight:o,rotation:c,innerMargin:h,mustSmooth:!0,areContours:!0})}static process(t,e,n,i,r){const[o,c,h]=this.#f(t),[d,f]=this.#c(o,c,h,Math.hypot(c,h)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),p=this.#u(f),m=this.#s(d,c,h,p);return this.processDrawnLines({lines:{curves:m,width:c,height:h},pageWidth:e,pageHeight:n,rotation:i,innerMargin:r,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:i,innerMargin:r,mustSmooth:o,areContours:c}){i%180!==0&&([e,n]=[n,e]);const{curves:h,width:d,height:f}=t,p=t.thickness??0,m=[],y=Math.min(e/d,n/f),w=y/e,b=y/n,E=[];for(const{points:k}of h){const T=o?this.#o(k):k;if(!T)continue;E.push(T);const R=T.length,D=new Float32Array(R),F=new Float32Array(3*(R===2?2:R-2));if(m.push({line:F,points:D}),R===2){D[0]=T[0]*w,D[1]=T[1]*b,F.set([NaN,NaN,NaN,NaN,D[0],D[1]],0);continue}let[j,I,O,X]=T;j*=w,I*=b,O*=w,X*=b,D.set([j,I,O,X],0),F.set([NaN,NaN,NaN,NaN,j,I],0);for(let Q=4;Q<R;Q+=2){const H=D[Q]=T[Q]*w,J=D[Q+1]=T[Q+1]*b;F.set(Wt.createBezierPoints(j,I,O,X,H,J),(Q-2)*3),[j,I,O,X]=[O,X,H,J]}}if(m.length===0)return null;const _=c?new lS:new mg;return _.build(m,e,n,1,i,c?0:p,r),{outline:_,newCurves:E,areContours:c,thickness:p,width:d,height:f}}static async compressSignature({outlines:t,areContours:e,thickness:n,width:i,height:r}){let o=1/0,c=-1/0,h=0;for(const T of t){h+=T.length;for(let R=2,D=T.length;R<D;R++){const F=T[R]-T[R-2];o=Math.min(o,F),c=Math.max(c,F)}}let d;o>=-128&&c<=127?d=Int8Array:o>=-32768&&c<=32767?d=Int16Array:d=Int32Array;const f=t.length,p=Zm+of*f,m=new Uint32Array(p);let y=0;m[y++]=p*Uint32Array.BYTES_PER_ELEMENT+(h-2*f)*d.BYTES_PER_ELEMENT,m[y++]=0,m[y++]=i,m[y++]=r,m[y++]=e?0:1,m[y++]=Math.max(0,Math.floor(n??0)),m[y++]=f,m[y++]=d.BYTES_PER_ELEMENT;for(const T of t)m[y++]=T.length-2,m[y++]=T[0],m[y++]=T[1];const w=new CompressionStream("deflate-raw"),b=w.writable.getWriter();await b.ready,b.write(m);const E=d.prototype.constructor;for(const T of t){const R=new E(T.length-2);for(let D=2,F=T.length;D<F;D++)R[D-2]=T[D]-T[D-2];b.write(R)}b.close();const _=await new Response(w.readable).arrayBuffer(),k=new Uint8Array(_);return zD(k)}static async decompressSignature(t){try{const e=LF(t),{readable:n,writable:i}=new DecompressionStream("deflate-raw"),r=i.getWriter();await r.ready,r.write(e).then(async()=>{await r.ready,await r.close()}).catch(()=>{});let o=null,c=0;for await(const T of n)o||=new Uint8Array(new Uint32Array(T.buffer,0,4)[0]),o.set(T,c),c+=T.length;const h=new Uint32Array(o.buffer,0,o.length>>2),d=h[1];if(d!==0)throw new Error(`Invalid version: ${d}`);const f=h[2],p=h[3],m=h[4]===0,y=h[5],w=h[6],b=h[7],E=[],_=(Zm+of*w)*Uint32Array.BYTES_PER_ELEMENT;let k;switch(b){case Int8Array.BYTES_PER_ELEMENT:k=new Int8Array(o.buffer,_);break;case Int16Array.BYTES_PER_ELEMENT:k=new Int16Array(o.buffer,_);break;case Int32Array.BYTES_PER_ELEMENT:k=new Int32Array(o.buffer,_);break}c=0;for(let T=0;T<w;T++){const R=h[of*T+Zm],D=new Float32Array(R+2);E.push(D);for(let F=0;F<of-1;F++)D[F]=h[of*T+Zm+F+1];for(let F=0;F<R;F++)D[F+2]=D[F]+k[c++]}return{areContours:m,thickness:y,outlines:E,width:f,height:p}}catch(e){return re(`decompressSignature: ${e}`),null}}}class O2 extends xN{constructor(){super(),super.updateProperties({fill:Xt._defaultLineColor,"stroke-width":0})}clone(){const t=new O2;return t.updateAll(this),t}}class I2 extends Vb{constructor(t){super(t),super.updateProperties({stroke:Xt._defaultLineColor,"stroke-width":1})}clone(){const t=new I2(this._viewParameters);return t.updateAll(this),t}}class pr extends Zt{#t=!1;#e=null;#i=null;#n=null;static _type="signature";static _editorType=ie.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#i=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){Xt.initialize(t,e),this._defaultDrawingOptions=new O2,this._defaultDrawnSignatureOptions=new I2(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return ce(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e;const{_isCopy:n}=this;if(n&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),this._drawId===null)if(this.#i){const{lines:i,mustSmooth:r,areContours:o,description:c,uuid:h,heightInPage:d}=this.#i,{rawDims:{pageWidth:f,pageHeight:p},rotation:m}=this.parent.viewport,y=Fl.processDrawnLines({lines:i,pageWidth:f,pageHeight:p,rotation:m,innerMargin:pr._INNER_MARGIN,mustSmooth:r,areContours:o});this.addSignature(y,d,c,h)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return n&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){this.#n=t,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:n,width:i,height:r}=this.#i,o=Math.max(i,r),c=Fl.processDrawnLines({lines:{curves:t.map(h=>({points:h})),thickness:n,width:i,height:r},pageWidth:o,pageHeight:o,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e});return{areContours:e,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,n,i){const{x:r,y:o}=this,{outline:c}=this.#i=t;this.#t=c instanceof lS,this.description=n;let h;this.#t?h=pr.getDefaultDrawingOptions():(h=pr._defaultDrawnSignatureOptions.clone(),h.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:h});const[,d]=this.pageDimensions;let f=e/d;f=f>=1?.5:f,this.width*=f/this.height,this.width>=1&&(f*=.9/this.width,this.width=.9),this.height=f,this.setDims(),this.x=r,this.y=o,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:e,pageHeight:n},rotation:i}=this.parent.viewport;return Fl.process(t,e,n,i,pr._INNER_MARGIN)}getFromText(t,e){const{rawDims:{pageWidth:n,pageHeight:i},rotation:r}=this.parent.viewport;return Fl.extractContoursFromText(t,e,n,i,r,pr._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:e,pageHeight:n},rotation:i}=this.parent.viewport;return Fl.processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:i,innerMargin:pr._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:e}){t?this._drawingOptions=pr.getDefaultDrawingOptions():(this._drawingOptions=pr._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":e}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:e,points:n}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":i}}=this,r=Object.assign(super.serialize(t),{isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:i});return this.addComment(r),t?(r.paths={lines:e,points:n},r.uuid=this.#n,r.isCopy=!0):r.lines=e,this.#e&&(r.accessibilityData={type:"Figure",alt:this.#e}),r}static deserializeDraw(t,e,n,i,r,o){return o.areContours?lS.deserialize(t,e,n,i,r,o):mg.deserialize(t,e,n,i,r,o)}static async deserialize(t,e,n){const i=await super.deserialize(t,e,n);return i.#t=t.areContours,i.description=t.accessibilityData?.alt||"",i.#n=t.uuid,i}}class l8 extends Xt{#t=null;#e=null;#i=null;#n=null;#a=null;#s="";#r=null;#o=!1;#c=null;#l=!1;#d=!1;static _type="stamp";static _editorType=ie.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#n=t.bitmapUrl,this.#a=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){Xt.initialize(t,e)}static isHandlingMimeForPasting(t){return Fv.includes(t)}static paste(t,e){e.pasteEditor({mode:ie.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#u(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#s=t.file.name),this.#p()}#f(){if(this.#i=null,this._uiManager.enableWaiting(!1),!!this.#r){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:r,height:o}=t||this.copyCanvas(null,null,!0).imageData,c=await n.guess({name:"altText",request:{data:i,width:r,height:o,channels:i.length/(r*o)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const h=c.output;return await this.setGuessedAltText(h),e&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}#m(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(n=>this.#u(n,!0)).finally(()=>this.#f());return}if(this.#n){const n=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromUrl(n).then(i=>this.#u(i)).finally(()=>this.#f());return}if(this.#a){const n=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromFile(n).then(i=>this.#u(i)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=Fv.join(",");const e=this._uiManager._signal;this.#i=new Promise(n=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#u(i)}n()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),n()},{signal:e})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#r?.remove(),this.#r=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#m();return}super.rebuild(),this.div!==null&&(this.#e&&this.#r===null&&this.#m(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#i||this.#t||this.#n||this.#a||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#p():this.#m()),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:n,bitmap:i}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(this.#e=n,i&&(this.#t=i),this.#o=!1,this.#p())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const t=200;this.#c=setTimeout(()=>{this.#c=null,this.#g()},t)}#p(){const{div:t}=this;let{width:e,height:n}=this.#t;const[i,r]=this.pageDimensions,o=.75;if(this.width)e=this.width*i,n=this.height*r;else if(e>o*i||n>o*r){const h=Math.min(o*i/e,o*r/n);e*=h,n*=h}this._uiManager.enableWaiting(!1);const c=this.#r=document.createElement("canvas");c.setAttribute("role","img"),this.addContainer(c),this.width=e/i,this.height=n/r,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#g(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#s&&this.div.setAttribute("aria-description",this.#s),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,e,n=!1){t||(t=224);const{width:i,height:r}=this.#t,o=new Qs;let c=this.#t,h=i,d=r,f=null;if(e){if(i>e||r>e){const F=Math.min(e/i,e/r);h=Math.floor(i*F),d=Math.floor(r*F)}f=document.createElement("canvas");const m=f.width=Math.ceil(h*o.sx),y=f.height=Math.ceil(d*o.sy);this.#l||(c=this.#h(m,y));const w=f.getContext("2d");w.filter=this._uiManager.hcmFilter;let b="white",E="#cfcfd8";this._uiManager.hcmFilter!=="none"?E="black":OF.isDarkMode&&(b="#8f8f9d",E="#42414d");const _=15,k=_*o.sx,T=_*o.sy,R=new OffscreenCanvas(k*2,T*2),D=R.getContext("2d");D.fillStyle=b,D.fillRect(0,0,k*2,T*2),D.fillStyle=E,D.fillRect(0,0,k,T),D.fillRect(k,T,k,T),w.fillStyle=w.createPattern(R,"repeat"),w.fillRect(0,0,m,y),w.drawImage(c,0,0,c.width,c.height,0,0,m,y)}let p=null;if(n){let m,y;if(o.symmetric&&c.width<t&&c.height<t)m=c.width,y=c.height;else if(c=this.#t,i>t||r>t){const E=Math.min(t/i,t/r);m=Math.floor(i*E),y=Math.floor(r*E),this.#l||(c=this.#h(m,y))}const b=new OffscreenCanvas(m,y).getContext("2d",{willReadFrequently:!0});b.drawImage(c,0,0,c.width,c.height,0,0,m,y),p={width:m,height:y,data:b.getImageData(0,0,m,y).data}}return{canvas:f,width:h,height:d,imageData:p}}#h(t,e){const{width:n,height:i}=this.#t;let r=n,o=i,c=this.#t;for(;r>2*t||o>2*e;){const h=r,d=o;r>2*t&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2)),o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const f=new OffscreenCanvas(r,o);f.getContext("2d").drawImage(c,0,0,h,d,0,0,r,o),c=f.transferToImageBitmap()}return c}#g(){const[t,e]=this.parentDimensions,{width:n,height:i}=this,r=new Qs,o=Math.ceil(n*t*r.sx),c=Math.ceil(i*e*r.sy),h=this.#r;if(!h||h.width===o&&h.height===c)return;h.width=o,h.height=c;const d=this.#l?this.#t:this.#h(o,c),f=h.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(d,0,0,d.width,d.height,0,0,o,c)}#y(t){if(t){if(this.#l){const i=this._uiManager.imageManager.getSvgUrl(this.#e);if(i)return i}const e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#l){const[e,n]=this.pageDimensions,i=Math.round(this.width*e*uc.PDF_TO_CSS_UNITS),r=Math.round(this.height*n*uc.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(i,r);return o.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,i,r),o.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,e,n){let i=null,r=!1;if(t instanceof yN){const{data:{rect:b,rotation:E,id:_,structParent:k,popupRef:T,richText:R,contentsObj:D,creationDate:F,modificationDate:j},container:I,parent:{page:{pageNumber:O}},canvas:X}=t;let Q,H;X?(delete t.canvas,{id:Q,bitmap:H}=n.imageManager.getFromCanvas(I.id,X),X.remove()):(r=!0,t._hasNoCanvas=!0);const J=(await e._structTree.getAriaAttributes(`${b2}${_}`))?.get("aria-label")||"";i=t={annotationType:ie.STAMP,bitmapId:Q,bitmap:H,pageIndex:O-1,rect:b.slice(0),rotation:E,annotationElementId:_,id:_,deleted:!1,accessibilityData:{decorative:!1,altText:J},isSvg:!1,structParent:k,popupRef:T,richText:R,comment:D?.str||null,creationDate:F,modificationDate:j}}const o=await super.deserialize(t,e,n),{rect:c,bitmap:h,bitmapUrl:d,bitmapId:f,isSvg:p,accessibilityData:m}=t;r?(n.addMissingCanvas(t.id,o),o.#o=!0):f&&n.imageManager.isValidId(f)?(o.#e=f,h&&(o.#t=h)):o.#n=d,o.#l=p;const[y,w]=o.pageDimensions;return o.width=(c[2]-c[0])/y,o.height=(c[3]-c[1])/w,m&&(o.altTextData=m),o._initialData=i,t.comment&&o.setCommentData(t),o.#d=!!i,o}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Object.assign(super.serialize(t),{bitmapId:this.#e,isSvg:this.#l});if(this.addComment(n),t)return n.bitmapUrl=this.#y(!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:i,altText:r}=this.serializeAltText(!1);if(!i&&r&&(n.accessibilityData={type:"Figure",alt:r}),this.annotationElementId){const c=this.#b(n);return c.isSame?null:(c.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1,n.id=this.annotationElementId,delete n.bitmapId,n)}if(e===null)return n;e.stamps||=new Map;const o=this.#l?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:o,serialized:n}),n.bitmap=this.#y(!1);else if(this.#l){const c=e.stamps.get(this.#e);o>c.area&&(c.area=o,c.serialized.bitmap.close(),c.serialized.bitmap=this.#y(!1))}return n}#b(t){const{pageIndex:e,accessibilityData:{altText:n}}=this._initialData,i=t.pageIndex===e,r=(t.accessibilityData?.alt||"")===n;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&r,isSameAltText:r}}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class wr{#t;#e=!1;#i=null;#n=null;#a=null;#s=new Map;#r=!1;#o=!1;#c=!1;#l=null;#d=null;#u=null;#f=null;#m=null;#p=-1;#h;static _initialized=!1;static#g=new Map([In,N2,l8,fn,pr].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:i,accessibilityManager:r,annotationLayer:o,drawLayer:c,textLayer:h,viewport:d,l10n:f}){const p=[...wr.#g.values()];if(!wr._initialized){wr._initialized=!0;for(const m of p)m.initialize(f,t)}t.registerEditorTypes(p),this.#h=t,this.pageIndex=e,this.div=n,this.#t=r,this.#i=o,this.viewport=d,this.#u=h,this.drawLayer=c,this._structTree=i,this.#h.addLayer(this)}get isEmpty(){return this.#s.size===0}get isInvisible(){return this.isEmpty&&this.#h.getMode()===ie.NONE}updateToolbar(t){this.#h.updateToolbar(t)}updateMode(t=this.#h.getMode()){switch(this.#x(),t){case ie.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case ie.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case ie.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===ie.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const n of wr.#g.values())e.toggle(`${n._type}Editing`,t===n._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===this.#u?.div}setEditingState(t){this.#h.setEditingState(t)}addCommands(t){this.#h.addCommands(t)}cleanUndoStack(t){this.#h.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#i?.div.classList.toggle("disabled",!t)}get#y(){return this.#s.size!==0?this.#s.values():this.#h.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#m?.abort(),this.#m=null;const t=new Set;for(const n of this.#y)n.enableEditing(),n.show(!0),n.annotationElementId&&(this.#h.removeChangedExistingAnnotation(n),t.add(n.annotationElementId));const e=this.#i;if(e)for(const n of e.getEditableAnnotations()){if(n.hide(),this.#h.isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;const i=await this.deserialize(n);i&&(this.addOrRebuild(i),i.enableEditing())}this.#c=!1,this.#h._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#u&&!this.#m){this.#m=new AbortController;const n=this.#h.combinedSignal(this.#m);this.#u.div.addEventListener("pointerdown",i=>{const{clientX:o,clientY:c,timeStamp:h}=i,d=this.#p;if(h-d>500){this.#p=h;return}this.#p=-1;const{classList:f}=this.div;f.toggle("getElements",!0);const p=document.elementsFromPoint(o,c);if(f.toggle("getElements",!1),!this.div.contains(p[0]))return;let m;const y=new RegExp(`^${tg}[0-9]+$`);for(const b of p)if(y.test(b.id)){m=b.id;break}if(!m)return;const w=this.#s.get(m);w?.annotationElementId===null&&(i.stopPropagation(),i.preventDefault(),w.dblclick(i))},{signal:n,capture:!0})}const t=this.#i;if(t){const n=new Map,i=new Map;for(const o of this.#y){if(o.disableEditing(),!o.annotationElementId){o.updateFakeAnnotationElement(t);continue}if(o.serialize()!==null){n.set(o.annotationElementId,o);continue}else i.set(o.annotationElementId,o);this.getEditableAnnotation(o.annotationElementId)?.show(),o.remove()}const r=t.getEditableAnnotations();for(const o of r){const{id:c}=o.data;if(this.#h.isDeletedAnnotationElement(c)){o.updateEdited({deleted:!0});continue}let h=i.get(c);if(h){h.resetAnnotationElement(o),h.show(!1),o.show();continue}h=n.get(c),h&&(this.#h.addChangedExistingAnnotation(h),h.renderAnnotationElement(o)&&h.show(!1)),o.show()}}this.#x(),this.isEmpty&&(this.div.hidden=!0);const{classList:e}=this.div;for(const n of wr.#g.values())e.remove(`${n._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(t){return this.#i?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#h.getActive()!==t&&this.#h.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#u?.div&&!this.#f){this.#f=new AbortController;const t=this.#h.combinedSignal(this.#f);this.#u.div.addEventListener("pointerdown",this.#b.bind(this),{signal:t}),this.#u.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#u?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#u.div.classList.remove("highlighting"))}#b(t){this.#h.unselectAll();const{target:e}=t;if(e===this.#u.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#u.div.contains(e)){const{isMac:n}=Hn.platform;if(t.button!==0||t.ctrlKey&&n)return;this.#h.showAllEditors("highlight",!0,!0),this.#u.div.classList.add("free"),this.toggleDrawing(),fn.startHighlighting(this,this.#h.direction==="ltr",{target:this.#u.div,x:t.x,y:t.y}),this.#u.div.addEventListener("pointerup",()=>{this.#u.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#h._signal}),t.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const t=this.#h.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){this.#n?.abort(),this.#n=null}attach(t){this.#s.set(t.id,t);const{annotationElementId:e}=t;e&&this.#h.isDeletedAnnotationElement(e)&&this.#h.removeDeletedAnnotationElement(t)}detach(t){this.#s.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#h.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#h.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#h.addDeletedAnnotationElement(t.annotationElementId),Xt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#h.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#c),this.#h.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#a&&(t._focusEventsAllowed=!1,this.#a=setTimeout(()=>{this.#a=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#h._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getEditorByUID(t){for(const e of this.#s.values())if(e.uid===t)return e;return null}getNextId(){return this.#h.getId()}get#v(){return wr.#g.get(this.#h.getMode())}combinedSignal(t){return this.#h.combinedSignal(t)}#E(t){const e=this.#v;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#v?.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await this.#h.updateMode(t.mode);const{offsetX:n,offsetY:i}=this.#S(),r=this.getNextId(),o=this.#E({parent:this,id:r,x:n,y:i,uiManager:this.#h,isCentered:!0,...e});o&&this.add(o)}async deserialize(t){return await wr.#g.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#h)||null}createAndAddNewEditor(t,e,n={}){const i=this.getNextId(),r=this.#E({parent:this,id:i,x:t.offsetX,y:t.offsetY,uiManager:this.#h,isCentered:e,...n});return r&&this.add(r),r}get boundingClientRect(){return this.div.getBoundingClientRect()}#S(){const{x:t,y:e,width:n,height:i}=this.boundingClientRect,r=Math.max(0,t),o=Math.max(0,e),c=Math.min(window.innerWidth,t+n),h=Math.min(window.innerHeight,e+i),d=(r+c)/2-t,f=(o+h)/2-e,[p,m]=this.viewport.rotation%180===0?[d,f]:[f,d];return{offsetX:p,offsetY:m}}addNewEditor(t={}){this.createAndAddNewEditor(this.#S(),!0,t)}setSelected(t){this.#h.setSelected(t)}toggleSelected(t){this.#h.toggleSelected(t)}unselect(t){this.#h.unselect(t)}pointerup(t){const{isMac:e}=Hn.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!this.#r||(this.#r=!1,this.#v?.isDrawer&&this.#v.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const n=this.#h.getMode();if(n===ie.STAMP||n===ie.SIGNATURE){this.#h.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#h.getMode()===ie.HIGHLIGHT&&this.enableTextSelection(),this.#r){this.#r=!1;return}const{isMac:e}=Hn.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(this.#r=!0,this.#v?.isDrawer){this.startDrawingSession(t);return}const n=this.#h.getActive();this.#e=!n||n.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l){this.#v.startDrawing(this,this.#h,!1,t);return}this.#h.setCurrentDrawingSession(this),this.#l=new AbortController;const e=this.#h.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(this.#d=null,this.commitOrRemove())},{signal:e}),this.#v.startDrawing(this,this.#h,!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&(this.#d=e);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#l?(this.#h.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#d=null,this.#v.endDrawing(t)):null}findNewParent(t,e,n){const i=this.#h.findParent(e,n);return i===null||i===this?!1:(i.changeParent(t),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#v.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#h.getActive()?.parent===this&&(this.#h.commitOrRemove(),this.#h.setActiveEditor(null)),this.#a&&(clearTimeout(this.#a),this.#a=null);for(const t of this.#s.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#s.clear(),this.#h.removeLayer(this)}#x(){for(const t of this.#s.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,$o(this.div,t);for(const e of this.#h.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#h.commitOrRemove(),this.#x();const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,$o(this.div,{rotation:n}),e!==n)for(const i of this.#s.values())i.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#h.viewParameters.realScale}}class jn{#t=null;#e=new Map;#i=new Map;static#n=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const e of this.#e.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return ce(this,"_svgFactory",new rg)}static#a(t,[e,n,i,r]){const{style:o}=t;o.top=`${100*n}%`,o.left=`${100*e}%`,o.width=`${100*i}%`,o.height=`${100*r}%`}#s(){const t=jn._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#r(t,e){const n=jn._svgFactory.createElement("clipPath");t.append(n);const i=`clip_${e}`;n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const r=jn._svgFactory.createElement("use");return n.append(r),r.setAttribute("href",`#${e}`),r.classList.add("clip"),i}#o(t,e){for(const[n,i]of Object.entries(e))i===null?t.removeAttribute(n):t.setAttribute(n,i)}draw(t,e=!1,n=!1){const i=jn.#n++,r=this.#s(),o=jn._svgFactory.createElement("defs");r.append(o);const c=jn._svgFactory.createElement("path");o.append(c);const h=`path_p${this.pageIndex}_${i}`;c.setAttribute("id",h),c.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#i.set(i,c);const d=n?this.#r(o,h):null,f=jn._svgFactory.createElement("use");return r.append(f),f.setAttribute("href",`#${h}`),this.updateProperties(r,t),this.#e.set(i,r),{id:i,clipPathId:`url(#${d})`}}drawOutline(t,e){const n=jn.#n++,i=this.#s(),r=jn._svgFactory.createElement("defs");i.append(r);const o=jn._svgFactory.createElement("path");r.append(o);const c=`path_p${this.pageIndex}_${n}`;o.setAttribute("id",c),o.setAttribute("vector-effect","non-scaling-stroke");let h;if(e){const p=jn._svgFactory.createElement("mask");r.append(p),h=`mask_p${this.pageIndex}_${n}`,p.setAttribute("id",h),p.setAttribute("maskUnits","objectBoundingBox");const m=jn._svgFactory.createElement("rect");p.append(m),m.setAttribute("width","1"),m.setAttribute("height","1"),m.setAttribute("fill","white");const y=jn._svgFactory.createElement("use");p.append(y),y.setAttribute("href",`#${c}`),y.setAttribute("stroke","none"),y.setAttribute("fill","black"),y.setAttribute("fill-rule","nonzero"),y.classList.add("mask")}const d=jn._svgFactory.createElement("use");i.append(d),d.setAttribute("href",`#${c}`),h&&d.setAttribute("mask",`url(#${h})`);const f=d.cloneNode();return i.append(f),d.classList.add("mainOutline"),f.classList.add("secondaryOutline"),this.updateProperties(i,t),this.#e.set(n,i),n}finalizeDraw(t,e){this.#i.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:n,bbox:i,rootClass:r,path:o}=e,c=typeof t=="number"?this.#e.get(t):t;if(c){if(n&&this.#o(c,n),i&&jn.#a(c,i),r){const{classList:h}=c;for(const[d,f]of Object.entries(r))h.toggle(d,f)}if(o){const d=c.firstChild.firstChild;this.#o(d,o)}}}updateParent(t,e){if(e===this)return;const n=this.#e.get(t);n&&(e.#t.append(n),this.#e.delete(t),e.#e.set(t,n))}remove(t){this.#i.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#i.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:aS};globalThis.pdfjsLib={AbortException:Da,AnnotationEditorLayer:wr,AnnotationEditorParamsType:ve,AnnotationEditorType:ie,AnnotationEditorUIManager:Na,AnnotationLayer:D2,AnnotationMode:Mr,AnnotationType:dn,applyOpacity:VD,build:dN,ColorPicker:is,createValidAbsoluteUrl:m2,CSSConstants:GD,DOMSVGFactory:rg,DrawLayer:jn,FeatureTest:Hn,fetchData:ed,findContrastColor:$D,getDocument:T2,getFilenameFromUrl:UD,getPdfFilenameFromUrl:HD,getRGB:nd,getUuid:v2,getXfaPageViewport:WD,GlobalWorkerOptions:Pa,ImageKind:Ep,InvalidPDFException:jv,isDataScheme:dg,isPdfFile:Wb,isValidExplicitDest:KD,MathClamp:hi,noContextMenu:os,normalizeUnicode:FD,OPS:Vu,OutputScale:Qs,PasswordResponses:jD,PDFDataRangeTransport:R2,PDFDateString:Bv,PDFWorker:$u,PermissionFlag:ID,PixelsPerInch:uc,RenderingCancelledException:Hb,renderRichText:w2,ResponseException:eg,setLayerDimensions:$o,shadow:ce,SignatureExtractor:Fl,stopEvent:rn,SupportedImageMimeTypes:Fv,TextLayer:ig,TouchManager:pg,updateUrlHash:y2,Util:Gt,VerbosityLevel:cg,version:uN,XfaLayer:x2};const c8=Object.freeze(Object.defineProperty({__proto__:null,AbortException:Da,AnnotationEditorLayer:wr,AnnotationEditorParamsType:ve,AnnotationEditorType:ie,AnnotationEditorUIManager:Na,AnnotationLayer:D2,AnnotationMode:Mr,AnnotationType:dn,CSSConstants:GD,ColorPicker:is,DOMSVGFactory:rg,DrawLayer:jn,FeatureTest:Hn,GlobalWorkerOptions:Pa,ImageKind:Ep,InvalidPDFException:jv,MathClamp:hi,OPS:Vu,OutputScale:Qs,PDFDataRangeTransport:R2,PDFDateString:Bv,PDFWorker:$u,PasswordResponses:jD,PermissionFlag:ID,PixelsPerInch:uc,RenderingCancelledException:Hb,ResponseException:eg,SignatureExtractor:Fl,SupportedImageMimeTypes:Fv,TextLayer:ig,TouchManager:pg,Util:Gt,VerbosityLevel:cg,XfaLayer:x2,applyOpacity:VD,build:dN,createValidAbsoluteUrl:m2,fetchData:ed,findContrastColor:$D,getDocument:T2,getFilenameFromUrl:UD,getPdfFilenameFromUrl:HD,getRGB:nd,getUuid:v2,getXfaPageViewport:WD,isDataScheme:dg,isPdfFile:Wb,isValidExplicitDest:KD,noContextMenu:os,normalizeUnicode:FD,renderRichText:w2,setLayerDimensions:$o,shadow:ce,stopEvent:rn,updateUrlHash:y2,version:uN},Symbol.toStringTag,{value:"Module"}));function wN(s){var t,e,n="";if(typeof s=="string"||typeof s=="number")n+=s;else if(typeof s=="object")if(Array.isArray(s)){var i=s.length;for(t=0;t<i;t++)s[t]&&(e=wN(s[t]))&&(n&&(n+=" "),n+=e)}else for(e in s)s[e]&&(n&&(n+=" "),n+=e);return n}function $b(){for(var s,t,e=0,n="",i=arguments.length;e<i;e++)(s=arguments[e])&&(t=wN(s))&&(n&&(n+=" "),n+=t);return n}var yP=Object.prototype.hasOwnProperty;function vP(s,t,e){for(e of s.keys())if(Mu(e,t))return e}function Mu(s,t){var e,n,i;if(s===t)return!0;if(s&&t&&(e=s.constructor)===t.constructor){if(e===Date)return s.getTime()===t.getTime();if(e===RegExp)return s.toString()===t.toString();if(e===Array){if((n=s.length)===t.length)for(;n--&&Mu(s[n],t[n]););return n===-1}if(e===Set){if(s.size!==t.size)return!1;for(n of s)if(i=n,i&&typeof i=="object"&&(i=vP(t,i),!i)||!t.has(i))return!1;return!0}if(e===Map){if(s.size!==t.size)return!1;for(n of s)if(i=n[0],i&&typeof i=="object"&&(i=vP(t,i),!i)||!Mu(n[1],t.get(i)))return!1;return!0}if(e===ArrayBuffer)s=new Uint8Array(s),t=new Uint8Array(t);else if(e===DataView){if((n=s.byteLength)===t.byteLength)for(;n--&&s.getInt8(n)===t.getInt8(n););return n===-1}if(ArrayBuffer.isView(s)){if((n=s.byteLength)===t.byteLength)for(;n--&&s[n]===t[n];);return n===-1}if(!e||typeof s=="object"){n=0;for(e in s)if(yP.call(s,e)&&++n&&!yP.call(t,e)||!(e in t)||!Mu(s[e],t[e]))return!1;return Object.keys(t).length===n}}return s!==s&&t!==t}function yg(s){let t=!1;return{promise:new Promise((n,i)=>{s.then(r=>!t&&n(r)).catch(r=>!t&&i(r))}),cancel(){t=!0}}}const h8=["onCopy","onCut","onPaste"],u8=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],d8=["onFocus","onBlur"],f8=["onInput","onInvalid","onReset","onSubmit"],p8=["onLoad","onError"],g8=["onKeyDown","onKeyPress","onKeyUp"],m8=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],y8=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],v8=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],b8=["onSelect"],x8=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],w8=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],A8=["onScroll"],S8=["onWheel"],_8=["onAnimationStart","onAnimationEnd","onAnimationIteration"],E8=["onTransitionEnd"],C8=["onToggle"],k8=["onChange"],T8=[...h8,...u8,...d8,...f8,...p8,...g8,...m8,...y8,...v8,...b8,...x8,...w8,...A8,...S8,..._8,...E8,...k8,...C8];function AN(s,t){const e={};for(const n of T8){const i=s[n];i&&(t?e[n]=(r=>i(r,t(n))):e[n]=i)}return e}var M8="Invariant failed";function $e(s,t){if(!s)throw new Error(M8)}var rA,bP;function R8(){if(bP)return rA;bP=1;var s=function(){};return rA=s,rA}var P8=R8();const fi=u2(P8),SN=at.createContext(null),L8="noopener noreferrer nofollow";class D8{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return $e(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){$e(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}addLinkAttributes(t,e,n){t.href=e,t.rel=this.externalLinkRel||L8,t.target=n?"_blank":this.externalLinkTarget||""}goToDestination(t){return new Promise(e=>{$e(this.pdfDocument),$e(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)}).then(e=>{$e(Array.isArray(e));const n=e[0];new Promise(i=>{$e(this.pdfDocument),n instanceof Object?this.pdfDocument.getPageIndex(n).then(r=>{i(r)}).catch(()=>{$e(!1)}):typeof n=="number"?i(n):$e(!1)}).then(i=>{const r=i+1;$e(this.pdfViewer),$e(r>=1&&r<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:i,pageNumber:r})})})}goToPage(t){const e=t-1;$e(this.pdfViewer),$e(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:e,pageNumber:t})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(t){this.goToDestination(t)}}function Ru({children:s,type:t}){return A.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:s})}const xP={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function N8(s,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return s}}function qu(){return at.useReducer(N8,{value:void 0,error:void 0})}const qb=typeof window<"u",_N=qb&&window.location.protocol==="file:";function O8(s){return typeof s<"u"}function pl(s){return O8(s)&&s!==null}function I8(s){return typeof s=="string"}function j8(s){return s instanceof ArrayBuffer}function B8(s){return $e(qb),s instanceof Blob}function cS(s){return I8(s)&&/^data:/.test(s)}function wP(s){$e(cS(s));const[t="",e=""]=s.split(",");return t.split(";").indexOf("base64")!==-1?atob(e):unescape(e)}function F8(){return qb&&window.devicePixelRatio||1}const EN="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function AP(){fi(!_N,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${EN}`)}function z8(){fi(!_N,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${EN}`)}function fc(s){s?.cancel&&s.cancel()}function hS(s,t){return Object.defineProperty(s,"width",{get(){return this.getViewport({scale:t}).width},configurable:!0}),Object.defineProperty(s,"height",{get(){return this.getViewport({scale:t}).height},configurable:!0}),Object.defineProperty(s,"originalWidth",{get(){return this.getViewport({scale:1}).width},configurable:!0}),Object.defineProperty(s,"originalHeight",{get(){return this.getViewport({scale:1}).height},configurable:!0}),s}function CN(s){return s.name==="AbortException"||s.name==="RenderingCancelledException"}function U8(s){return new Promise((t,e)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return e(new Error("Error while reading a file."));t(n.result)},n.onerror=i=>{if(!i.target)return e(new Error("Error while reading a file."));const{error:r}=i.target;if(!r)return e(new Error("Error while reading a file."));switch(r.code){case r.NOT_FOUND_ERR:return e(new Error("Error while reading a file: File not found."));case r.SECURITY_ERR:return e(new Error("Error while reading a file: Security error."));case r.ABORT_ERR:return e(new Error("Error while reading a file: Aborted."));default:return e(new Error("Error while reading a file."))}},n.readAsArrayBuffer(s)})}const{PDFDataRangeTransport:H8}=c8,W8=(s,t)=>{switch(t){case xP.NEED_PASSWORD:{const e=prompt("Enter the password to open this PDF file.");s(e);break}case xP.INCORRECT_PASSWORD:{const e=prompt("Invalid password. Please try again.");s(e);break}}};function SP(s){return typeof s=="object"&&s!==null&&("data"in s||"range"in s||"url"in s)}const G8=at.forwardRef(function({children:t,className:e,error:n="Failed to load PDF file.",externalLinkRel:i,externalLinkTarget:r,file:o,inputRef:c,imageResourcesPath:h,loading:d="Loading PDF",noData:f="No PDF file specified.",onItemClick:p,onLoadError:m,onLoadProgress:y,onLoadSuccess:w,onPassword:b=W8,onSourceError:E,onSourceSuccess:_,options:k,renderMode:T,rotate:R,scale:D,...F},j){const[I,O]=qu(),{value:X,error:Q}=I,[H,J]=qu(),{value:N,error:tt}=H,$=at.useRef(new D8),G=at.useRef([]),gt=at.useRef(void 0),nt=at.useRef(void 0);o&&o!==gt.current&&SP(o)&&(fi(!Mu(o,gt.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),gt.current=o),k&&k!==nt.current&&(fi(!Mu(k,nt.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),nt.current=k);const Tt=at.useRef({scrollPageIntoView:Ft=>{const{dest:L,pageNumber:ft,pageIndex:rt=ft-1}=Ft;if(p){p({dest:L,pageIndex:rt,pageNumber:ft});return}const K=G.current[rt];if(K){K.scrollIntoView();return}fi(!1,`An internal link leading to page ${ft} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});at.useImperativeHandle(j,()=>({linkService:$,pages:G,viewer:Tt}),[]);function U(){_&&_()}function W(){Q&&(fi(!1,Q.toString()),E&&E(Q))}function st(){O({type:"RESET"})}at.useEffect(st,[o,O]);const lt=at.useCallback(async()=>{if(!o)return null;if(typeof o=="string")return cS(o)?{data:wP(o)}:(AP(),{url:o});if(o instanceof H8)return{range:o};if(j8(o))return{data:o};if(qb&&B8(o))return{data:await U8(o)};if($e(typeof o=="object"),$e(SP(o)),"url"in o&&typeof o.url=="string"){if(cS(o.url)){const{url:Ft,...L}=o;return{data:wP(Ft),...L}}AP()}return o},[o]);at.useEffect(()=>{const Ft=yg(lt());return Ft.promise.then(L=>{O({type:"RESOLVE",value:L})}).catch(L=>{O({type:"REJECT",error:L})}),()=>{fc(Ft)}},[lt,O]),at.useEffect(()=>{if(!(typeof X>"u")){if(X===!1){W();return}U()}},[X]);function ut(){N&&(w&&w(N),G.current=new Array(N.numPages),$.current.setDocument(N))}function Rt(){tt&&(fi(!1,tt.toString()),m&&m(tt))}at.useEffect(function(){J({type:"RESET"})},[J,X]),at.useEffect(function(){if(!X)return;const L=k?{...X,...k}:X,ft=T2(L);y&&(ft.onProgress=y),b&&(ft.onPassword=b);const rt=ft;return rt.promise.then(K=>{rt.destroyed||J({type:"RESOLVE",value:K})}).catch(K=>{rt.destroyed||J({type:"REJECT",error:K})}),()=>{rt.destroy()}},[k,J,X]),at.useEffect(()=>{if(!(typeof N>"u")){if(N===!1){Rt();return}ut()}},[N]),at.useEffect(function(){$.current.setViewer(Tt.current),$.current.setExternalLinkRel(i),$.current.setExternalLinkTarget(r)},[i,r]);const St=at.useCallback((Ft,L)=>{G.current[Ft]=L},[]),Ct=at.useCallback(Ft=>{delete G.current[Ft]},[]),xt=at.useMemo(()=>({imageResourcesPath:h,linkService:$.current,onItemClick:p,pdf:N,registerPage:St,renderMode:T,rotate:R,scale:D,unregisterPage:Ct}),[h,p,N,St,T,R,D,Ct]),Bt=at.useMemo(()=>AN(F,()=>N),[F,N]);function jt(){function Ft(ft){return!!ft?.pdf}if(!Ft(xt))throw new Error("pdf is undefined");const L=typeof t=="function"?t(xt):t;return A.jsx(SN.Provider,{value:xt,children:L})}function Ut(){return o?N==null?A.jsx(Ru,{type:"loading",children:typeof d=="function"?d():d}):N===!1?A.jsx(Ru,{type:"error",children:typeof n=="function"?n():n}):jt():A.jsx(Ru,{type:"no-data",children:typeof f=="function"?f():f})}return A.jsx("div",{className:$b("react-pdf__Document",e),ref:c,...Bt,children:Ut()})});function kN(){return at.useContext(SN)}function TN(){for(var s=[],t=0;t<arguments.length;t++)s[t]=arguments[t];var e=s.filter(Boolean);if(e.length<=1){var n=e[0];return n||null}return function(r){for(var o=0,c=e;o<c.length;o++){var h=c[o];typeof h=="function"?h(r):h&&(h.current=r)}}}const MN=at.createContext(null);function Yb(){return at.useContext(MN)}function V8(){const s=kN(),t=Yb();$e(t);const e={...s,...t},{filterAnnotations:n,imageResourcesPath:i,linkService:r,onGetAnnotationsError:o,onGetAnnotationsSuccess:c,onRenderAnnotationLayerError:h,onRenderAnnotationLayerSuccess:d,page:f,pdf:p,renderForms:m,rotate:y,scale:w=1}=e;$e(p),$e(f),$e(r);const[b,E]=qu(),{value:_,error:k}=b,T=at.useRef(null);fi(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function R(){_&&c&&c(_)}function D(){k&&(fi(!1,k.toString()),o&&o(k))}at.useEffect(function(){E({type:"RESET"})},[E,f]),at.useEffect(function(){if(!f)return;const X=yg(f.getAnnotations()),Q=X;return X.promise.then(H=>{E({type:"RESOLVE",value:H})}).catch(H=>{E({type:"REJECT",error:H})}),()=>{fc(Q)}},[E,f]),at.useEffect(()=>{if(_!==void 0){if(_===!1){D();return}R()}},[_]);function F(){d&&d()}function j(O){fi(!1,`${O}`),h&&h(O)}const I=at.useMemo(()=>f.getViewport({scale:w,rotation:y}),[f,y,w]);return at.useEffect(function(){if(!p||!f||!r||!_)return;const{current:X}=T;if(!X)return;const Q=I.clone({dontFlip:!0}),H={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:p.annotationStorage,commentManager:null,div:X,l10n:null,linkService:r,page:f,structTreeLayer:null,viewport:Q},J={annotations:n?n({annotations:_}):_,annotationStorage:p.annotationStorage,div:X,imageResourcesPath:i,linkService:r,page:f,renderForms:m,viewport:Q};X.innerHTML="";try{new D2(H).render(J),F()}catch(N){j(N)}return()=>{}},[_,n,i,r,f,p,m,I]),A.jsx("div",{className:$b("react-pdf__Page__annotations","annotationLayer"),ref:T})}const RN={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},$8=/^H(\d+)$/;function q8(s){return s in RN}function Xb(s){return"children"in s}function PN(s){return Xb(s)?s.children.length===1&&0 in s.children&&"id"in s.children[0]:!1}function Y8(s){const t={};if(Xb(s)){const{role:e}=s,n=e.match($8);if(n)t.role="heading",t["aria-level"]=Number(n[1]);else if(q8(e)){const i=RN[e];i&&(t.role=i)}}return t}function LN(s){const t={};if(Xb(s)){if(s.alt!==void 0&&(t["aria-label"]=s.alt),s.lang!==void 0&&(t.lang=s.lang),PN(s)){const[e]=s.children;if(e){const n=LN(e);return{...t,...n}}}}else"id"in s&&(t["aria-owns"]=s.id);return t}function X8(s){return s?{...Y8(s),...LN(s)}:null}function DN({className:s,node:t}){const e=at.useMemo(()=>X8(t),[t]),n=at.useMemo(()=>!Xb(t)||PN(t)?null:t.children.map((i,r)=>A.jsx(DN,{node:i},r)),[t]);return A.jsx("span",{className:s,...e,children:n})}function K8(){const s=Yb();$e(s);const{onGetStructTreeError:t,onGetStructTreeSuccess:e}=s,[n,i]=qu(),{value:r,error:o}=n,{customTextRenderer:c,page:h}=s;function d(){r&&e&&e(r)}function f(){o&&(fi(!1,o.toString()),t&&t(o))}return at.useEffect(function(){i({type:"RESET"})},[i,h]),at.useEffect(function(){if(c||!h)return;const m=yg(h.getStructTree()),y=m;return m.promise.then(w=>{i({type:"RESOLVE",value:w})}).catch(w=>{i({type:"REJECT",error:w})}),()=>fc(y)},[c,h,i]),at.useEffect(()=>{if(r!==void 0){if(r===!1){f();return}d()}},[r]),r?A.jsx(DN,{className:"react-pdf__Page__structTree structTree",node:r}):null}const _P=Mr;function Z8(s){const t=Yb();$e(t);const e={...t,...s},{_className:n,canvasBackground:i,devicePixelRatio:r=F8(),onRenderError:o,onRenderSuccess:c,page:h,renderForms:d,renderTextLayer:f,rotate:p,scale:m}=e,{canvasRef:y}=s;$e(h);const w=at.useRef(null);function b(){h&&c&&c(hS(h,m))}function E(R){CN(R)||(fi(!1,R.toString()),o&&o(R))}const _=at.useMemo(()=>h.getViewport({scale:m*r,rotation:p}),[r,h,p,m]),k=at.useMemo(()=>h.getViewport({scale:m,rotation:p}),[h,p,m]);at.useEffect(function(){if(!h)return;h.cleanup();const{current:D}=w;if(!D)return;D.width=_.width,D.height=_.height,D.style.width=`${Math.floor(k.width)}px`,D.style.height=`${Math.floor(k.height)}px`,D.style.visibility="hidden";const F={annotationMode:d?_P.ENABLE_FORMS:_P.ENABLE,canvas:D,canvasContext:D.getContext("2d",{alpha:!1}),viewport:_};i&&(F.background=i);const j=h.render(F),I=j;return j.promise.then(()=>{D.style.visibility="",b()}).catch(E),()=>fc(I)},[i,h,d,_,k]);const T=at.useCallback(()=>{const{current:R}=w;R&&(R.width=0,R.height=0)},[]);return at.useEffect(()=>T,[T]),A.jsx("canvas",{className:`${n}__canvas`,dir:"ltr",ref:TN(y,w),style:{display:"block",userSelect:"none"},children:f?A.jsx(K8,{}):null})}function Q8(s){return"str"in s}function J8(){const s=Yb();$e(s);const{customTextRenderer:t,onGetTextError:e,onGetTextSuccess:n,onRenderTextLayerError:i,onRenderTextLayerSuccess:r,page:o,pageIndex:c,pageNumber:h,rotate:d,scale:f}=s;$e(o);const[p,m]=qu(),{value:y,error:w}=p,b=at.useRef(null);fi(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function E(){y&&n&&n(y)}function _(){w&&(fi(!1,w.toString()),e&&e(w))}at.useEffect(function(){m({type:"RESET"})},[o,m]),at.useEffect(function(){if(!o)return;const I=yg(o.getTextContent()),O=I;return I.promise.then(X=>{m({type:"RESOLVE",value:X})}).catch(X=>{m({type:"REJECT",error:X})}),()=>fc(O)},[o,m]),at.useEffect(()=>{if(y!==void 0){if(y===!1){_();return}E()}},[y]);const k=at.useCallback(()=>{r&&r()},[r]),T=at.useCallback(j=>{CN(j)||(fi(!1,j.toString()),i&&i(j))},[i]);function R(){const j=b.current;j&&j.classList.add("selecting")}function D(){const j=b.current;j&&j.classList.remove("selecting")}const F=at.useMemo(()=>o.getViewport({scale:f,rotation:d}),[o,d,f]);return at.useLayoutEffect(function(){if(!o||!y)return;const{current:I}=b;if(!I)return;I.innerHTML="";const O=o.streamTextContent({includeMarkedContent:!0}),X={container:I,textContentSource:O,viewport:F},Q=new ig(X),H=Q;return Q.render().then(()=>{const J=document.createElement("div");J.className="endOfContent",I.append(J);const N=I.querySelectorAll('[role="presentation"]');if(t){let tt=0;y.items.forEach(($,G)=>{if(!Q8($))return;const gt=N[tt];if(!gt)return;const nt=t({pageIndex:c,pageNumber:h,itemIndex:G,...$});gt.innerHTML=nt,tt+=$.str&&$.hasEOL?2:1})}k()}).catch(T),()=>fc(H)},[t,T,k,o,c,h,y,F]),A.jsx("div",{className:$b("react-pdf__Page__textContent","textLayer"),onMouseUp:D,onMouseDown:R,ref:b})}const EP=1;function tU(s){const e={...kN(),...s},{_className:n="react-pdf__Page",_enableRegisterUnregisterPage:i=!0,canvasBackground:r,canvasRef:o,children:c,className:h,customRenderer:d,customTextRenderer:f,devicePixelRatio:p,error:m="Failed to load the page.",filterAnnotations:y,height:w,inputRef:b,loading:E="Loading page",noData:_="No page specified.",onGetAnnotationsError:k,onGetAnnotationsSuccess:T,onGetStructTreeError:R,onGetStructTreeSuccess:D,onGetTextError:F,onGetTextSuccess:j,onLoadError:I,onLoadSuccess:O,onRenderAnnotationLayerError:X,onRenderAnnotationLayerSuccess:Q,onRenderError:H,onRenderSuccess:J,onRenderTextLayerError:N,onRenderTextLayerSuccess:tt,pageIndex:$,pageNumber:G,pdf:gt,registerPage:nt,renderAnnotationLayer:Tt=!0,renderForms:U=!1,renderMode:W="canvas",renderTextLayer:st=!0,rotate:lt,scale:ut=EP,unregisterPage:Rt,width:St,...Ct}=e,[xt,Bt]=qu(),{value:jt,error:Ut}=xt,Ft=at.useRef(null);$e(gt);const L=pl(G)?G-1:$??null,ft=G??(pl($)?$+1:null),rt=lt??(jt?jt.rotate:null),K=at.useMemo(()=>{if(!jt)return null;let Ht=1;const we=ut??EP;if(St||w){const C=jt.getViewport({scale:1,rotation:rt});St?Ht=St/C.width:w&&(Ht=w/C.height)}return we*Ht},[w,jt,rt,ut,St]);at.useEffect(function(){return()=>{pl(L)&&i&&Rt&&Rt(L)}},[i,gt,L,Rt]);function Z(){if(O){if(!jt||!K)return;O(hS(jt,K))}if(i&&nt){if(!pl(L)||!Ft.current)return;nt(L,Ft.current)}}function ot(){Ut&&(fi(!1,Ut.toString()),I&&I(Ut))}at.useEffect(function(){Bt({type:"RESET"})},[Bt,gt,L]),at.useEffect(function(){if(!gt||!ft)return;const we=yg(gt.getPage(ft)),C=we;return we.promise.then(M=>{Bt({type:"RESOLVE",value:M})}).catch(M=>{Bt({type:"REJECT",error:M})}),()=>fc(C)},[Bt,gt,ft]),at.useEffect(()=>{if(jt!==void 0){if(jt===!1){ot();return}Z()}},[jt,K]);const kt=at.useMemo(()=>pl(L)&&ft&&pl(rt)&&pl(K)?{_className:n,canvasBackground:r,customTextRenderer:f,devicePixelRatio:p,filterAnnotations:y,onGetAnnotationsError:k,onGetAnnotationsSuccess:T,onGetStructTreeError:R,onGetStructTreeSuccess:D,onGetTextError:F,onGetTextSuccess:j,onRenderAnnotationLayerError:X,onRenderAnnotationLayerSuccess:Q,onRenderError:H,onRenderSuccess:J,onRenderTextLayerError:N,onRenderTextLayerSuccess:tt,page:jt,pageIndex:L,pageNumber:ft,renderForms:U,renderTextLayer:st,rotate:rt,scale:K}:null,[n,r,f,p,y,k,T,R,D,F,j,X,Q,H,J,N,tt,jt,L,ft,U,st,rt,K]),Mt=at.useMemo(()=>AN(Ct,()=>jt&&(K?hS(jt,K):void 0)),[Ct,jt,K]),pt=`${L}@${K}/${rt}`;function Lt(){switch(W){case"custom":return $e(d),A.jsx(d,{},`${pt}_custom`);case"none":return null;default:return A.jsx(Z8,{canvasRef:o},`${pt}_canvas`)}}function It(){return st?A.jsx(J8,{},`${pt}_text`):null}function Et(){return Tt?A.jsx(V8,{},`${pt}_annotations`):null}function zt(){function Ht(C){return!!C?.page}if(!Ht(kt))throw new Error("page is undefined");const we=typeof c=="function"?c(kt):c;return A.jsxs(MN.Provider,{value:kt,children:[Lt(),It(),Et(),we]})}function Jt(){return ft?gt===null||jt===void 0||jt===null?A.jsx(Ru,{type:"loading",children:typeof E=="function"?E():E}):gt===!1||jt===!1?A.jsx(Ru,{type:"error",children:typeof m=="function"?m():m}):zt():A.jsx(Ru,{type:"no-data",children:typeof _=="function"?_():_})}return A.jsx("div",{className:$b(n,h),"data-page-number":ft,ref:TN(b,Ft),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${K}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:r||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...Mt,children:Jt()})}z8();Pa.workerSrc="pdf.worker.mjs";const eU="modulepreload",nU=function(s){return"/"+s},CP={},Cf=function(t,e,n){let i=Promise.resolve();if(e&&e.length>0){let h=function(d){return Promise.all(d.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=o?.nonce||o?.getAttribute("nonce");i=h(e.map(d=>{if(d=nU(d),d in CP)return;CP[d]=!0;const f=d.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${p}`))return;const m=document.createElement("link");if(m.rel=f?"stylesheet":eU,f||(m.as="script"),m.crossOrigin="",m.href=d,c&&m.setAttribute("nonce",c),document.head.appendChild(m),f)return new Promise((y,w)=>{m.addEventListener("load",y),m.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${d}`)))})}))}function r(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return i.then(o=>{for(const c of o||[])c.status==="rejected"&&r(c.reason);return t().catch(r)})};var iU=Object.defineProperty,sU=(s,t,e)=>t in s?iU(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,oe=(s,t,e)=>(sU(s,typeof t!="symbol"?t+"":t,e),e),j2=(s,t,e)=>{if(!t.has(s))throw TypeError("Cannot "+e)},v=(s,t,e)=>(j2(s,t,"read from private field"),e?e.call(s):t.get(s)),B=(s,t,e)=>{if(t.has(s))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(s):t.set(s,e)},Y=(s,t,e,n)=>(j2(s,t,"write to private field"),t.set(s,e),e),js=(s,t,e,n)=>({set _(i){Y(s,t,i)},get _(){return v(s,t,n)}}),q=(s,t,e)=>(j2(s,t,"access private method"),e),kf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function NN(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function IQ(s){if(s.__esModule)return s;var t=s.default;if(typeof t=="function"){var e=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(s).forEach(function(n){var i=Object.getOwnPropertyDescriptor(s,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return s[n]}})}),e}var lf=function(s){return s&&s.Math===Math&&s},Dr=lf(typeof globalThis=="object"&&globalThis)||lf(typeof window=="object"&&window)||lf(typeof self=="object"&&self)||lf(typeof kf=="object"&&kf)||lf(typeof kf=="object"&&kf)||(function(){return this})()||Function("return this")(),B2={},Yo=function(s){try{return!!s()}catch{return!0}},rU=Yo,Sc=!rU(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),aU=Yo,ON=!aU(function(){var s=(function(){}).bind();return typeof s!="function"||s.hasOwnProperty("prototype")}),oU=ON,Qm=Function.prototype.call,F2=oU?Qm.bind(Qm):function(){return Qm.apply(Qm,arguments)},IN={},jN={}.propertyIsEnumerable,BN=Object.getOwnPropertyDescriptor,lU=BN&&!jN.call({1:2},1);IN.f=lU?function(s){var t=BN(this,s);return!!t&&t.enumerable}:jN;var FN=function(s,t){return{enumerable:!(s&1),configurable:!(s&2),writable:!(s&4),value:t}},zN=ON,UN=Function.prototype,uS=UN.call,cU=zN&&UN.bind.bind(uS,uS),ja=zN?cU:function(s){return function(){return uS.apply(s,arguments)}},HN=ja,hU=HN({}.toString),uU=HN("".slice),dU=function(s){return uU(hU(s),8,-1)},fU=ja,pU=Yo,gU=dU,aA=Object,mU=fU("".split),yU=pU(function(){return!aA("z").propertyIsEnumerable(0)})?function(s){return gU(s)==="String"?mU(s,""):aA(s)}:aA,WN=function(s){return s==null},vU=WN,bU=TypeError,GN=function(s){if(vU(s))throw new bU("Can't call method on "+s);return s},xU=yU,wU=GN,z2=function(s){return xU(wU(s))},oA=typeof document=="object"&&document.all,Nr=typeof oA>"u"&&oA!==void 0?function(s){return typeof s=="function"||s===oA}:function(s){return typeof s=="function"},AU=Nr,Kb=function(s){return typeof s=="object"?s!==null:AU(s)},lA=Dr,SU=Nr,_U=function(s){return SU(s)?s:void 0},VN=function(s,t){return arguments.length<2?_U(lA[s]):lA[s]&&lA[s][t]},EU=ja,CU=EU({}.isPrototypeOf),kU=typeof navigator<"u"&&String(navigator.userAgent)||"",$N=Dr,cA=kU,kP=$N.process,TP=$N.Deno,MP=kP&&kP.versions||TP&&TP.version,RP=MP&&MP.v8,Xs,Uv;RP&&(Xs=RP.split("."),Uv=Xs[0]>0&&Xs[0]<4?1:+(Xs[0]+Xs[1]));!Uv&&cA&&(Xs=cA.match(/Edge\/(\d+)/),(!Xs||Xs[1]>=74)&&(Xs=cA.match(/Chrome\/(\d+)/),Xs&&(Uv=+Xs[1])));var TU=Uv,PP=TU,MU=Yo,RU=Dr,PU=RU.String,qN=!!Object.getOwnPropertySymbols&&!MU(function(){var s=Symbol("symbol detection");return!PU(s)||!(Object(s)instanceof Symbol)||!Symbol.sham&&PP&&PP<41}),LU=qN,YN=LU&&!Symbol.sham&&typeof Symbol.iterator=="symbol",DU=VN,NU=Nr,OU=CU,IU=YN,jU=Object,XN=IU?function(s){return typeof s=="symbol"}:function(s){var t=DU("Symbol");return NU(t)&&OU(t.prototype,jU(s))},BU=String,FU=function(s){try{return BU(s)}catch{return"Object"}},zU=Nr,UU=FU,HU=TypeError,KN=function(s){if(zU(s))return s;throw new HU(UU(s)+" is not a function")},WU=KN,GU=WN,VU=function(s,t){var e=s[t];return GU(e)?void 0:WU(e)},hA=F2,uA=Nr,dA=Kb,$U=TypeError,qU=function(s,t){var e,n;if(t==="string"&&uA(e=s.toString)&&!dA(n=hA(e,s))||uA(e=s.valueOf)&&!dA(n=hA(e,s))||t!=="string"&&uA(e=s.toString)&&!dA(n=hA(e,s)))return n;throw new $U("Can't convert object to primitive value")},ZN={exports:{}},LP=Dr,YU=Object.defineProperty,U2=function(s,t){try{YU(LP,s,{value:t,configurable:!0,writable:!0})}catch{LP[s]=t}return t},XU=Dr,KU=U2,DP="__core-js_shared__",NP=ZN.exports=XU[DP]||KU(DP,{});(NP.versions||(NP.versions=[])).push({version:"3.37.1",mode:"global",copyright:" 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.37.1/LICENSE",source:"https://github.com/zloirock/core-js"});var H2=ZN.exports,OP=H2,QN=function(s,t){return OP[s]||(OP[s]=t||{})},ZU=GN,QU=Object,JU=function(s){return QU(ZU(s))},tH=ja,eH=JU,nH=tH({}.hasOwnProperty),_c=Object.hasOwn||function(s,t){return nH(eH(s),t)},iH=ja,sH=0,rH=Math.random(),aH=iH(1 .toString),JN=function(s){return"Symbol("+(s===void 0?"":s)+")_"+aH(++sH+rH,36)},oH=Dr,lH=QN,IP=_c,cH=JN,hH=qN,uH=YN,lu=oH.Symbol,fA=lH("wks"),dH=uH?lu.for||lu:lu&&lu.withoutSetter||cH,fH=function(s){return IP(fA,s)||(fA[s]=hH&&IP(lu,s)?lu[s]:dH("Symbol."+s)),fA[s]},pH=F2,jP=Kb,BP=XN,gH=VU,mH=qU,yH=fH,vH=TypeError,bH=yH("toPrimitive"),xH=function(s,t){if(!jP(s)||BP(s))return s;var e=gH(s,bH),n;if(e){if(t===void 0&&(t="default"),n=pH(e,s,t),!jP(n)||BP(n))return n;throw new vH("Can't convert object to primitive value")}return t===void 0&&(t="number"),mH(s,t)},wH=xH,AH=XN,tO=function(s){var t=wH(s,"string");return AH(t)?t:t+""},SH=Dr,FP=Kb,dS=SH.document,_H=FP(dS)&&FP(dS.createElement),EH=function(s){return _H?dS.createElement(s):{}},CH=Sc,kH=Yo,TH=EH,eO=!CH&&!kH(function(){return Object.defineProperty(TH("div"),"a",{get:function(){return 7}}).a!==7}),MH=Sc,RH=F2,PH=IN,LH=FN,DH=z2,NH=tO,OH=_c,IH=eO,zP=Object.getOwnPropertyDescriptor;B2.f=MH?zP:function(s,t){if(s=DH(s),t=NH(t),IH)try{return zP(s,t)}catch{}if(OH(s,t))return LH(!RH(PH.f,s,t),s[t])};var Zb={},jH=Sc,BH=Yo,FH=jH&&BH(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),zH=Kb,UH=String,HH=TypeError,nO=function(s){if(zH(s))return s;throw new HH(UH(s)+" is not an object")},WH=Sc,GH=eO,VH=FH,Jm=nO,UP=tO,$H=TypeError,pA=Object.defineProperty,qH=Object.getOwnPropertyDescriptor,gA="enumerable",mA="configurable",yA="writable";Zb.f=WH?VH?function(s,t,e){if(Jm(s),t=UP(t),Jm(e),typeof s=="function"&&t==="prototype"&&"value"in e&&yA in e&&!e[yA]){var n=qH(s,t);n&&n[yA]&&(s[t]=e.value,e={configurable:mA in e?e[mA]:n[mA],enumerable:gA in e?e[gA]:n[gA],writable:!1})}return pA(s,t,e)}:pA:function(s,t,e){if(Jm(s),t=UP(t),Jm(e),GH)try{return pA(s,t,e)}catch{}if("get"in e||"set"in e)throw new $H("Accessors not supported");return"value"in e&&(s[t]=e.value),s};var YH=Sc,XH=Zb,KH=FN,iO=YH?function(s,t,e){return XH.f(s,t,KH(1,e))}:function(s,t,e){return s[t]=e,s},sO={exports:{}},fS=Sc,ZH=_c,rO=Function.prototype,QH=fS&&Object.getOwnPropertyDescriptor,JH=ZH(rO,"name"),tW=JH&&(!fS||fS&&QH(rO,"name").configurable),eW={CONFIGURABLE:tW},nW=ja,iW=Nr,pS=H2,sW=nW(Function.toString);iW(pS.inspectSource)||(pS.inspectSource=function(s){return sW(s)});var rW=pS.inspectSource,aW=Dr,oW=Nr,HP=aW.WeakMap,lW=oW(HP)&&/native code/.test(String(HP)),cW=QN,hW=JN,WP=cW("keys"),uW=function(s){return WP[s]||(WP[s]=hW(s))},aO={},dW=lW,oO=Dr,fW=iO,vA=_c,bA=H2,pW=uW,gW=aO,GP="Object already initialized",VP=oO.TypeError,mW=oO.WeakMap,gS,Hv,mS,yW=function(s){return mS(s)?Hv(s):gS(s,{})};if(dW||bA.state){var lr=bA.state||(bA.state=new mW);lr.get=lr.get,lr.has=lr.has,lr.set=lr.set,gS=function(s,t){if(lr.has(s))throw new VP(GP);return t.facade=s,lr.set(s,t),t},Hv=function(s){return lr.get(s)||{}},mS=function(s){return lr.has(s)}}else{var ph=pW("state");gW[ph]=!0,gS=function(s,t){if(vA(s,ph))throw new VP(GP);return t.facade=s,fW(s,ph,t),t},Hv=function(s){return vA(s,ph)?s[ph]:{}},mS=function(s){return vA(s,ph)}}var vW={get:Hv,enforce:yW},W2=ja,bW=Yo,xW=Nr,t0=_c,yS=Sc,wW=eW.CONFIGURABLE,AW=rW,lO=vW,SW=lO.enforce,_W=lO.get,$P=String,L0=Object.defineProperty,EW=W2("".slice),CW=W2("".replace),kW=W2([].join),TW=yS&&!bW(function(){return L0(function(){},"length",{value:8}).length!==8}),MW=String(String).split("String"),RW=sO.exports=function(s,t,e){EW($P(t),0,7)==="Symbol("&&(t="["+CW($P(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),e&&e.getter&&(t="get "+t),e&&e.setter&&(t="set "+t),(!t0(s,"name")||wW&&s.name!==t)&&(yS?L0(s,"name",{value:t,configurable:!0}):s.name=t),TW&&e&&t0(e,"arity")&&s.length!==e.arity&&L0(s,"length",{value:e.arity});try{e&&t0(e,"constructor")&&e.constructor?yS&&L0(s,"prototype",{writable:!1}):s.prototype&&(s.prototype=void 0)}catch{}var n=SW(s);return t0(n,"source")||(n.source=kW(MW,typeof t=="string"?t:"")),s};Function.prototype.toString=RW(function(){return xW(this)&&_W(this).source||AW(this)},"toString");var PW=sO.exports,LW=Nr,DW=Zb,NW=PW,OW=U2,IW=function(s,t,e,n){n||(n={});var i=n.enumerable,r=n.name!==void 0?n.name:t;if(LW(e)&&NW(e,r,n),n.global)i?s[t]=e:OW(t,e);else{try{n.unsafe?s[t]&&(i=!0):delete s[t]}catch{}i?s[t]=e:DW.f(s,t,{value:e,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return s},cO={},jW=Math.ceil,BW=Math.floor,FW=Math.trunc||function(s){var t=+s;return(t>0?BW:jW)(t)},zW=FW,hO=function(s){var t=+s;return t!==t||t===0?0:zW(t)},UW=hO,HW=Math.max,WW=Math.min,GW=function(s,t){var e=UW(s);return e<0?HW(e+t,0):WW(e,t)},VW=hO,$W=Math.min,qW=function(s){var t=VW(s);return t>0?$W(t,9007199254740991):0},YW=qW,XW=function(s){return YW(s.length)},KW=z2,ZW=GW,QW=XW,JW=function(s){return function(t,e,n){var i=KW(t),r=QW(i);if(r===0)return!s&&-1;var o=ZW(n,r),c;if(s&&e!==e){for(;r>o;)if(c=i[o++],c!==c)return!0}else for(;r>o;o++)if((s||o in i)&&i[o]===e)return s||o||0;return!s&&-1}},t7={indexOf:JW(!1)},e7=ja,xA=_c,n7=z2,i7=t7.indexOf,s7=aO,qP=e7([].push),r7=function(s,t){var e=n7(s),n=0,i=[],r;for(r in e)!xA(s7,r)&&xA(e,r)&&qP(i,r);for(;t.length>n;)xA(e,r=t[n++])&&(~i7(i,r)||qP(i,r));return i},a7=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],o7=r7,l7=a7,c7=l7.concat("length","prototype");cO.f=Object.getOwnPropertyNames||function(s){return o7(s,c7)};var uO={};uO.f=Object.getOwnPropertySymbols;var h7=VN,u7=ja,d7=cO,f7=uO,p7=nO,g7=u7([].concat),m7=h7("Reflect","ownKeys")||function(s){var t=d7.f(p7(s)),e=f7.f;return e?g7(t,e(s)):t},YP=_c,y7=m7,v7=B2,b7=Zb,x7=function(s,t,e){for(var n=y7(t),i=b7.f,r=v7.f,o=0;o<n.length;o++){var c=n[o];!YP(s,c)&&!(e&&YP(e,c))&&i(s,c,r(t,c))}},w7=Yo,A7=Nr,S7=/#|\.prototype\./,vg=function(s,t){var e=E7[_7(s)];return e===k7?!0:e===C7?!1:A7(t)?w7(t):!!t},_7=vg.normalize=function(s){return String(s).replace(S7,".").toLowerCase()},E7=vg.data={},C7=vg.NATIVE="N",k7=vg.POLYFILL="P",T7=vg,e0=Dr,M7=B2.f,R7=iO,P7=IW,L7=U2,D7=x7,N7=T7,O7=function(s,t){var e=s.target,n=s.global,i=s.stat,r,o,c,h,d,f;if(n?o=e0:i?o=e0[e]||L7(e,{}):o=e0[e]&&e0[e].prototype,o)for(c in t){if(d=t[c],s.dontCallGetSet?(f=M7(o,c),h=f&&f.value):h=o[c],r=N7(n?c:e+(i?".":"#")+c,s.forced),!r&&h!==void 0){if(typeof d==typeof h)continue;D7(d,h)}(s.sham||h&&h.sham)&&R7(d,"sham",!0),P7(o,c,d,s)}},dO={},XP=KN,I7=TypeError,j7=function(s){var t,e;this.promise=new s(function(n,i){if(t!==void 0||e!==void 0)throw new I7("Bad Promise constructor");t=n,e=i}),this.resolve=XP(t),this.reject=XP(e)};dO.f=function(s){return new j7(s)};var B7=O7,F7=dO;B7({target:"Promise",stat:!0},{withResolvers:function(){var s=F7.f(this);return{promise:s.promise,resolve:s.resolve,reject:s.reject}}});function z7(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var fO={exports:{}},mn=fO.exports={},Ar,Sr;function vS(){throw new Error("setTimeout has not been defined")}function bS(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Ar=setTimeout:Ar=vS}catch{Ar=vS}try{typeof clearTimeout=="function"?Sr=clearTimeout:Sr=bS}catch{Sr=bS}})();function pO(s){if(Ar===setTimeout)return setTimeout(s,0);if((Ar===vS||!Ar)&&setTimeout)return Ar=setTimeout,setTimeout(s,0);try{return Ar(s,0)}catch{try{return Ar.call(null,s,0)}catch{return Ar.call(this,s,0)}}}function U7(s){if(Sr===clearTimeout)return clearTimeout(s);if((Sr===bS||!Sr)&&clearTimeout)return Sr=clearTimeout,clearTimeout(s);try{return Sr(s)}catch{try{return Sr.call(null,s)}catch{return Sr.call(this,s)}}}var Ma=[],Pu=!1,Kl,D0=-1;function H7(){!Pu||!Kl||(Pu=!1,Kl.length?Ma=Kl.concat(Ma):D0=-1,Ma.length&&gO())}function gO(){if(!Pu){var s=pO(H7);Pu=!0;for(var t=Ma.length;t;){for(Kl=Ma,Ma=[];++D0<t;)Kl&&Kl[D0].run();D0=-1,t=Ma.length}Kl=null,Pu=!1,U7(s)}}mn.nextTick=function(s){var t=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];Ma.push(new mO(s,t)),Ma.length===1&&!Pu&&pO(gO)};function mO(s,t){this.fun=s,this.array=t}mO.prototype.run=function(){this.fun.apply(null,this.array)};mn.title="browser";mn.browser=!0;mn.env={};mn.argv=[];mn.version="";mn.versions={};function Ba(){}mn.on=Ba;mn.addListener=Ba;mn.once=Ba;mn.off=Ba;mn.removeListener=Ba;mn.removeAllListeners=Ba;mn.emit=Ba;mn.prependListener=Ba;mn.prependOnceListener=Ba;mn.listeners=function(s){return[]};mn.binding=function(s){throw new Error("process.binding is not supported")};mn.cwd=function(){return"/"};mn.chdir=function(s){throw new Error("process.chdir is not supported")};mn.umask=function(){return 0};var W7=fO.exports;const se=z7(W7);var gi=function(){return gi=Object.assign||function(s){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(s[i]=t[i])}return s},gi.apply(this,arguments)};function pc(s,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,r;n<i;n++)(r||!(n in t))&&(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return s.concat(r||Array.prototype.slice.call(t))}function G7(s){var t=Object.create(null);return function(e){return t[e]===void 0&&(t[e]=s(e)),t[e]}}var V7=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,$7=G7(function(s){return V7.test(s)||s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&s.charCodeAt(2)<91}),Qe="-ms-",kp="-moz-",Pe="-webkit-",yO="comm",Qb="rule",G2="decl",q7="@import",vO="@keyframes",Y7="@layer",bO=Math.abs,V2=String.fromCharCode,xS=Object.assign;function X7(s,t){return Un(s,0)^45?(((t<<2^Un(s,0))<<2^Un(s,1))<<2^Un(s,2))<<2^Un(s,3):0}function xO(s){return s.trim()}function ma(s,t){return(s=t.exec(s))?s[0]:s}function he(s,t,e){return s.replace(t,e)}function N0(s,t,e){return s.indexOf(t,e)}function Un(s,t){return s.charCodeAt(t)|0}function Yu(s,t,e){return s.slice(t,e)}function kr(s){return s.length}function wO(s){return s.length}function Tf(s,t){return t.push(s),s}function K7(s,t){return s.map(t).join("")}function KP(s,t){return s.filter(function(e){return!ma(e,t)})}var Jb=1,Xu=1,AO=0,Bs=0,En=0,id="";function t1(s,t,e,n,i,r,o,c){return{value:s,root:t,parent:e,type:n,props:i,children:r,line:Jb,column:Xu,length:o,return:"",siblings:c}}function uo(s,t){return xS(t1("",null,null,"",null,null,0,s.siblings),s,{length:-s.length},t)}function gh(s){for(;s.root;)s=uo(s.root,{children:[s]});Tf(s,s.siblings)}function Z7(){return En}function Q7(){return En=Bs>0?Un(id,--Bs):0,Xu--,En===10&&(Xu=1,Jb--),En}function Zs(){return En=Bs<AO?Un(id,Bs++):0,Xu++,En===10&&(Xu=1,Jb++),En}function cc(){return Un(id,Bs)}function O0(){return Bs}function e1(s,t){return Yu(id,s,t)}function wS(s){switch(s){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function J7(s){return Jb=Xu=1,AO=kr(id=s),Bs=0,[]}function t9(s){return id="",s}function wA(s){return xO(e1(Bs-1,AS(s===91?s+2:s===40?s+1:s)))}function e9(s){for(;(En=cc())&&En<33;)Zs();return wS(s)>2||wS(En)>3?"":" "}function n9(s,t){for(;--t&&Zs()&&!(En<48||En>102||En>57&&En<65||En>70&&En<97););return e1(s,O0()+(t<6&&cc()==32&&Zs()==32))}function AS(s){for(;Zs();)switch(En){case s:return Bs;case 34:case 39:s!==34&&s!==39&&AS(En);break;case 40:s===41&&AS(s);break;case 92:Zs();break}return Bs}function i9(s,t){for(;Zs()&&s+En!==57&&!(s+En===84&&cc()===47););return"/*"+e1(t,Bs-1)+"*"+V2(s===47?s:Zs())}function s9(s){for(;!wS(cc());)Zs();return e1(s,Bs)}function r9(s){return t9(I0("",null,null,null,[""],s=J7(s),0,[0],s))}function I0(s,t,e,n,i,r,o,c,h){for(var d=0,f=0,p=o,m=0,y=0,w=0,b=1,E=1,_=1,k=0,T="",R=i,D=r,F=n,j=T;E;)switch(w=k,k=Zs()){case 40:if(w!=108&&Un(j,p-1)==58){N0(j+=he(wA(k),"&","&\f"),"&\f",bO(d?c[d-1]:0))!=-1&&(_=-1);break}case 34:case 39:case 91:j+=wA(k);break;case 9:case 10:case 13:case 32:j+=e9(w);break;case 92:j+=n9(O0()-1,7);continue;case 47:switch(cc()){case 42:case 47:Tf(a9(i9(Zs(),O0()),t,e,h),h);break;default:j+="/"}break;case 123*b:c[d++]=kr(j)*_;case 125*b:case 59:case 0:switch(k){case 0:case 125:E=0;case 59+f:_==-1&&(j=he(j,/\f/g,"")),y>0&&kr(j)-p&&Tf(y>32?QP(j+";",n,e,p-1,h):QP(he(j," ","")+";",n,e,p-2,h),h);break;case 59:j+=";";default:if(Tf(F=ZP(j,t,e,d,f,i,c,T,R=[],D=[],p,r),r),k===123)if(f===0)I0(j,t,F,F,R,r,p,c,D);else switch(m===99&&Un(j,3)===110?100:m){case 100:case 108:case 109:case 115:I0(s,F,F,n&&Tf(ZP(s,F,F,0,0,i,c,T,i,R=[],p,D),D),i,D,p,c,n?R:D);break;default:I0(j,F,F,F,[""],D,0,c,D)}}d=f=y=0,b=_=1,T=j="",p=o;break;case 58:p=1+kr(j),y=w;default:if(b<1){if(k==123)--b;else if(k==125&&b++==0&&Q7()==125)continue}switch(j+=V2(k),k*b){case 38:_=f>0?1:(j+="\f",-1);break;case 44:c[d++]=(kr(j)-1)*_,_=1;break;case 64:cc()===45&&(j+=wA(Zs())),m=cc(),f=p=kr(T=j+=s9(O0())),k++;break;case 45:w===45&&kr(j)==2&&(b=0)}}return r}function ZP(s,t,e,n,i,r,o,c,h,d,f,p){for(var m=i-1,y=i===0?r:[""],w=wO(y),b=0,E=0,_=0;b<n;++b)for(var k=0,T=Yu(s,m+1,m=bO(E=o[b])),R=s;k<w;++k)(R=xO(E>0?y[k]+" "+T:he(T,/&\f/g,y[k])))&&(h[_++]=R);return t1(s,t,e,i===0?Qb:c,h,d,f,p)}function a9(s,t,e,n){return t1(s,t,e,yO,V2(Z7()),Yu(s,2,-2),0,n)}function QP(s,t,e,n,i){return t1(s,t,e,G2,Yu(s,0,n),Yu(s,n+1,-1),n,i)}function SO(s,t,e){switch(X7(s,t)){case 5103:return Pe+"print-"+s+s;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Pe+s+s;case 4789:return kp+s+s;case 5349:case 4246:case 4810:case 6968:case 2756:return Pe+s+kp+s+Qe+s+s;case 5936:switch(Un(s,t+11)){case 114:return Pe+s+Qe+he(s,/[svh]\w+-[tblr]{2}/,"tb")+s;case 108:return Pe+s+Qe+he(s,/[svh]\w+-[tblr]{2}/,"tb-rl")+s;case 45:return Pe+s+Qe+he(s,/[svh]\w+-[tblr]{2}/,"lr")+s}case 6828:case 4268:case 2903:return Pe+s+Qe+s+s;case 6165:return Pe+s+Qe+"flex-"+s+s;case 5187:return Pe+s+he(s,/(\w+).+(:[^]+)/,Pe+"box-$1$2"+Qe+"flex-$1$2")+s;case 5443:return Pe+s+Qe+"flex-item-"+he(s,/flex-|-self/g,"")+(ma(s,/flex-|baseline/)?"":Qe+"grid-row-"+he(s,/flex-|-self/g,""))+s;case 4675:return Pe+s+Qe+"flex-line-pack"+he(s,/align-content|flex-|-self/g,"")+s;case 5548:return Pe+s+Qe+he(s,"shrink","negative")+s;case 5292:return Pe+s+Qe+he(s,"basis","preferred-size")+s;case 6060:return Pe+"box-"+he(s,"-grow","")+Pe+s+Qe+he(s,"grow","positive")+s;case 4554:return Pe+he(s,/([^-])(transform)/g,"$1"+Pe+"$2")+s;case 6187:return he(he(he(s,/(zoom-|grab)/,Pe+"$1"),/(image-set)/,Pe+"$1"),s,"")+s;case 5495:case 3959:return he(s,/(image-set\([^]*)/,Pe+"$1$`$1");case 4968:return he(he(s,/(.+:)(flex-)?(.*)/,Pe+"box-pack:$3"+Qe+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Pe+s+s;case 4200:if(!ma(s,/flex-|baseline/))return Qe+"grid-column-align"+Yu(s,t)+s;break;case 2592:case 3360:return Qe+he(s,"template-","")+s;case 4384:case 3616:return e&&e.some(function(n,i){return t=i,ma(n.props,/grid-\w+-end/)})?~N0(s+(e=e[t].value),"span",0)?s:Qe+he(s,"-start","")+s+Qe+"grid-row-span:"+(~N0(e,"span",0)?ma(e,/\d+/):+ma(e,/\d+/)-+ma(s,/\d+/))+";":Qe+he(s,"-start","")+s;case 4896:case 4128:return e&&e.some(function(n){return ma(n.props,/grid-\w+-start/)})?s:Qe+he(he(s,"-end","-span"),"span ","")+s;case 4095:case 3583:case 4068:case 2532:return he(s,/(.+)-inline(.+)/,Pe+"$1$2")+s;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(kr(s)-1-t>6)switch(Un(s,t+1)){case 109:if(Un(s,t+4)!==45)break;case 102:return he(s,/(.+:)(.+)-([^]+)/,"$1"+Pe+"$2-$3$1"+kp+(Un(s,t+3)==108?"$3":"$2-$3"))+s;case 115:return~N0(s,"stretch",0)?SO(he(s,"stretch","fill-available"),t,e)+s:s}break;case 5152:case 5920:return he(s,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(n,i,r,o,c,h,d){return Qe+i+":"+r+d+(o?Qe+i+"-span:"+(c?h:+h-+r)+d:"")+s});case 4949:if(Un(s,t+6)===121)return he(s,":",":"+Pe)+s;break;case 6444:switch(Un(s,Un(s,14)===45?18:11)){case 120:return he(s,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Pe+(Un(s,14)===45?"inline-":"")+"box$3$1"+Pe+"$2$3$1"+Qe+"$2box$3")+s;case 100:return he(s,":",":"+Qe)+s}break;case 5719:case 2647:case 2135:case 3927:case 2391:return he(s,"scroll-","scroll-snap-")+s}return s}function Wv(s,t){for(var e="",n=0;n<s.length;n++)e+=t(s[n],n,s,t)||"";return e}function o9(s,t,e,n){switch(s.type){case Y7:if(s.children.length)break;case q7:case G2:return s.return=s.return||s.value;case yO:return"";case vO:return s.return=s.value+"{"+Wv(s.children,n)+"}";case Qb:if(!kr(s.value=s.props.join(",")))return""}return kr(e=Wv(s.children,n))?s.return=s.value+"{"+e+"}":""}function l9(s){var t=wO(s);return function(e,n,i,r){for(var o="",c=0;c<t;c++)o+=s[c](e,n,i,r)||"";return o}}function c9(s){return function(t){t.root||(t=t.return)&&s(t)}}function h9(s,t,e,n){if(s.length>-1&&!s.return)switch(s.type){case G2:s.return=SO(s.value,s.length,e);return;case vO:return Wv([uo(s,{value:he(s.value,"@","@"+Pe)})],n);case Qb:if(s.length)return K7(e=s.props,function(i){switch(ma(i,n=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":gh(uo(s,{props:[he(i,/:(read-\w+)/,":"+kp+"$1")]})),gh(uo(s,{props:[i]})),xS(s,{props:KP(e,n)});break;case"::placeholder":gh(uo(s,{props:[he(i,/:(plac\w+)/,":"+Pe+"input-$1")]})),gh(uo(s,{props:[he(i,/:(plac\w+)/,":"+kp+"$1")]})),gh(uo(s,{props:[he(i,/:(plac\w+)/,Qe+"input-$1")]})),gh(uo(s,{props:[i]})),xS(s,{props:KP(e,n)});break}return""})}}var u9={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},gc=typeof se<"u"&&se.env!==void 0&&(se.env.REACT_APP_SC_ATTR||se.env.SC_ATTR)||"data-styled",_O="active",EO="data-styled-version",n1="6.1.11",$2=`/*!sc*/
`,q2=typeof window<"u"&&"HTMLElement"in window,d9=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof se<"u"&&se.env!==void 0&&se.env.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&se.env.REACT_APP_SC_DISABLE_SPEEDY!==""?se.env.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&se.env.REACT_APP_SC_DISABLE_SPEEDY:typeof se<"u"&&se.env!==void 0&&se.env.SC_DISABLE_SPEEDY!==void 0&&se.env.SC_DISABLE_SPEEDY!==""?se.env.SC_DISABLE_SPEEDY!=="false"&&se.env.SC_DISABLE_SPEEDY:se.env.NODE_ENV!=="production"),JP=/invalid hook call/i,n0=new Set,f9=function(s,t){if(se.env.NODE_ENV!=="production"){var e=t?' with the id of "'.concat(t,'"'):"",n="The component ".concat(s).concat(e,` has been created dynamically.
`)+`You may see this warning because you've called styled inside another component.
To resolve this only create new StyledComponents outside of any render method and function component.`,i=console.error;try{var r=!0;console.error=function(o){for(var c=[],h=1;h<arguments.length;h++)c[h-1]=arguments[h];JP.test(o)?(r=!1,n0.delete(n)):i.apply(void 0,pc([o],c,!1))},at.useRef(),r&&!n0.has(n)&&(console.warn(n),n0.add(n))}catch(o){JP.test(o.message)&&n0.delete(n)}finally{console.error=i}}},i1=Object.freeze([]),Ku=Object.freeze({});function p9(s,t,e){return e===void 0&&(e=Ku),s.theme!==e.theme&&s.theme||t||e.theme}var SS=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),g9=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,m9=/(^-|-$)/g;function tL(s){return s.replace(g9,"-").replace(m9,"")}var y9=/(a)(d)/gi,i0=52,eL=function(s){return String.fromCharCode(s+(s>25?39:97))};function _S(s){var t,e="";for(t=Math.abs(s);t>i0;t=t/i0|0)e=eL(t%i0)+e;return(eL(t%i0)+e).replace(y9,"$1-$2")}var AA,CO=5381,zl=function(s,t){for(var e=t.length;e;)s=33*s^t.charCodeAt(--e);return s},kO=function(s){return zl(CO,s)};function TO(s){return _S(kO(s)>>>0)}function MO(s){return se.env.NODE_ENV!=="production"&&typeof s=="string"&&s||s.displayName||s.name||"Component"}function SA(s){return typeof s=="string"&&(se.env.NODE_ENV==="production"||s.charAt(0)===s.charAt(0).toLowerCase())}var RO=typeof Symbol=="function"&&Symbol.for,PO=RO?Symbol.for("react.memo"):60115,v9=RO?Symbol.for("react.forward_ref"):60112,b9={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},x9={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},LO={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},w9=((AA={})[v9]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},AA[PO]=LO,AA);function nL(s){return("type"in(t=s)&&t.type.$$typeof)===PO?LO:"$$typeof"in s?w9[s.$$typeof]:b9;var t}var A9=Object.defineProperty,S9=Object.getOwnPropertyNames,iL=Object.getOwnPropertySymbols,_9=Object.getOwnPropertyDescriptor,E9=Object.getPrototypeOf,sL=Object.prototype;function DO(s,t,e){if(typeof t!="string"){if(sL){var n=E9(t);n&&n!==sL&&DO(s,n,e)}var i=S9(t);iL&&(i=i.concat(iL(t)));for(var r=nL(s),o=nL(t),c=0;c<i.length;++c){var h=i[c];if(!(h in x9||e&&e[h]||o&&h in o||r&&h in r)){var d=_9(t,h);try{A9(s,h,d)}catch{}}}}return s}function mc(s){return typeof s=="function"}function Y2(s){return typeof s=="object"&&"styledComponentId"in s}function Zl(s,t){return s&&t?"".concat(s," ").concat(t):s||t||""}function ES(s,t){if(s.length===0)return"";for(var e=s[0],n=1;n<s.length;n++)e+=s[n];return e}function Zu(s){return s!==null&&typeof s=="object"&&s.constructor.name===Object.name&&!("props"in s&&s.$$typeof)}function CS(s,t,e){if(e===void 0&&(e=!1),!e&&!Zu(s)&&!Array.isArray(s))return t;if(Array.isArray(t))for(var n=0;n<t.length;n++)s[n]=CS(s[n],t[n]);else if(Zu(t))for(var n in t)s[n]=CS(s[n],t[n]);return s}function X2(s,t){Object.defineProperty(s,"toString",{value:t})}var C9=se.env.NODE_ENV!=="production"?{1:`Cannot create styled-component for component: %s.

`,2:`Can't collect styles once you've consumed a \`ServerStyleSheet\`'s styles! \`ServerStyleSheet\` is a one off instance for each server-side render cycle.

- Are you trying to reuse it across renders?
- Are you accidentally calling collectStyles twice?

`,3:`Streaming SSR is only supported in a Node.js environment; Please do not try to call this method in the browser.

`,4:`The \`StyleSheetManager\` expects a valid target or sheet prop!

- Does this error occur on the client and is your target falsy?
- Does this error occur on the server and is the sheet falsy?

`,5:`The clone method cannot be used on the client!

- Are you running in a client-like environment on the server?
- Are you trying to run SSR on the client?

`,6:`Trying to insert a new style tag, but the given Node is unmounted!

- Are you using a custom target that isn't mounted?
- Does your document not have a valid head element?
- Have you accidentally removed a style tag manually?

`,7:'ThemeProvider: Please return an object from your "theme" prop function, e.g.\n\n```js\ntheme={() => ({})}\n```\n\n',8:`ThemeProvider: Please make your "theme" prop an object.

`,9:"Missing document `<head>`\n\n",10:`Cannot find a StyleSheet instance. Usually this happens if there are multiple copies of styled-components loaded at once. Check out this issue for how to troubleshoot and fix the common cases where this situation can happen: https://github.com/styled-components/styled-components/issues/1941#issuecomment-417862021

`,11:`_This error was replaced with a dev-time warning, it will be deleted for v4 final._ [createGlobalStyle] received children which will not be rendered. Please use the component without passing children elements.

`,12:"It seems you are interpolating a keyframe declaration (%s) into an untagged string. This was supported in styled-components v3, but is not longer supported in v4 as keyframes are now injected on-demand. Please wrap your string in the css\\`\\` helper which ensures the styles are injected correctly. See https://www.styled-components.com/docs/api#css\n\n",13:`%s is not a styled component and cannot be referred to via component selector. See https://www.styled-components.com/docs/advanced#referring-to-other-components for more details.

`,14:`ThemeProvider: "theme" prop is required.

`,15:"A stylis plugin has been supplied that is not named. We need a name for each plugin to be able to prevent styling collisions between different stylis configurations within the same app. Before you pass your plugin to `<StyleSheetManager stylisPlugins={[]}>`, please make sure each plugin is uniquely-named, e.g.\n\n```js\nObject.defineProperty(importedPlugin, 'name', { value: 'some-unique-name' });\n```\n\n",16:`Reached the limit of how many styled components may be created at group %s.
You may only create up to 1,073,741,824 components. If you're creating components dynamically,
as for instance in your render method then you may be running into this limitation.

`,17:`CSSStyleSheet could not be found on HTMLStyleElement.
Has styled-components' style tag been unmounted or altered by another script?
`,18:"ThemeProvider: Please make sure your useTheme hook is within a `<ThemeProvider>`"}:{};function k9(){for(var s=[],t=0;t<arguments.length;t++)s[t]=arguments[t];for(var e=s[0],n=[],i=1,r=s.length;i<r;i+=1)n.push(s[i]);return n.forEach(function(o){e=e.replace(/%[a-z]/,o)}),e}function La(s){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return se.env.NODE_ENV==="production"?new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(s," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):"")):new Error(k9.apply(void 0,pc([C9[s]],t,!1)).trim())}var T9=(function(){function s(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}return s.prototype.indexOfGroup=function(t){for(var e=0,n=0;n<t;n++)e+=this.groupSizes[n];return e},s.prototype.insertRules=function(t,e){if(t>=this.groupSizes.length){for(var n=this.groupSizes,i=n.length,r=i;t>=r;)if((r<<=1)<0)throw La(16,"".concat(t));this.groupSizes=new Uint32Array(r),this.groupSizes.set(n),this.length=r;for(var o=i;o<r;o++)this.groupSizes[o]=0}for(var c=this.indexOfGroup(t+1),h=(o=0,e.length);o<h;o++)this.tag.insertRule(c,e[o])&&(this.groupSizes[t]++,c++)},s.prototype.clearGroup=function(t){if(t<this.length){var e=this.groupSizes[t],n=this.indexOfGroup(t),i=n+e;this.groupSizes[t]=0;for(var r=n;r<i;r++)this.tag.deleteRule(n)}},s.prototype.getGroup=function(t){var e="";if(t>=this.length||this.groupSizes[t]===0)return e;for(var n=this.groupSizes[t],i=this.indexOfGroup(t),r=i+n,o=i;o<r;o++)e+="".concat(this.tag.getRule(o)).concat($2);return e},s})(),M9=1<<30,j0=new Map,Gv=new Map,B0=1,s0=function(s){if(j0.has(s))return j0.get(s);for(;Gv.has(B0);)B0++;var t=B0++;if(se.env.NODE_ENV!=="production"&&((0|t)<0||t>M9))throw La(16,"".concat(t));return j0.set(s,t),Gv.set(t,s),t},R9=function(s,t){B0=t+1,j0.set(s,t),Gv.set(t,s)},P9="style[".concat(gc,"][").concat(EO,'="').concat(n1,'"]'),L9=new RegExp("^".concat(gc,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),D9=function(s,t,e){for(var n,i=e.split(","),r=0,o=i.length;r<o;r++)(n=i[r])&&s.registerName(t,n)},N9=function(s,t){for(var e,n=((e=t.textContent)!==null&&e!==void 0?e:"").split($2),i=[],r=0,o=n.length;r<o;r++){var c=n[r].trim();if(c){var h=c.match(L9);if(h){var d=0|parseInt(h[1],10),f=h[2];d!==0&&(R9(f,d),D9(s,f,h[3]),s.getTag().insertRules(d,i)),i.length=0}else i.push(c)}}};function O9(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var NO=function(s){var t=document.head,e=s||t,n=document.createElement("style"),i=(function(c){var h=Array.from(c.querySelectorAll("style[".concat(gc,"]")));return h[h.length-1]})(e),r=i!==void 0?i.nextSibling:null;n.setAttribute(gc,_O),n.setAttribute(EO,n1);var o=O9();return o&&n.setAttribute("nonce",o),e.insertBefore(n,r),n},I9=(function(){function s(t){this.element=NO(t),this.element.appendChild(document.createTextNode("")),this.sheet=(function(e){if(e.sheet)return e.sheet;for(var n=document.styleSheets,i=0,r=n.length;i<r;i++){var o=n[i];if(o.ownerNode===e)return o}throw La(17)})(this.element),this.length=0}return s.prototype.insertRule=function(t,e){try{return this.sheet.insertRule(e,t),this.length++,!0}catch{return!1}},s.prototype.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},s.prototype.getRule=function(t){var e=this.sheet.cssRules[t];return e&&e.cssText?e.cssText:""},s})(),j9=(function(){function s(t){this.element=NO(t),this.nodes=this.element.childNodes,this.length=0}return s.prototype.insertRule=function(t,e){if(t<=this.length&&t>=0){var n=document.createTextNode(e);return this.element.insertBefore(n,this.nodes[t]||null),this.length++,!0}return!1},s.prototype.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},s.prototype.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},s})(),B9=(function(){function s(t){this.rules=[],this.length=0}return s.prototype.insertRule=function(t,e){return t<=this.length&&(this.rules.splice(t,0,e),this.length++,!0)},s.prototype.deleteRule=function(t){this.rules.splice(t,1),this.length--},s.prototype.getRule=function(t){return t<this.length?this.rules[t]:""},s})(),rL=q2,F9={isServer:!q2,useCSSOMInjection:!d9},OO=(function(){function s(t,e,n){t===void 0&&(t=Ku),e===void 0&&(e={});var i=this;this.options=gi(gi({},F9),t),this.gs=e,this.names=new Map(n),this.server=!!t.isServer,!this.server&&q2&&rL&&(rL=!1,(function(r){for(var o=document.querySelectorAll(P9),c=0,h=o.length;c<h;c++){var d=o[c];d&&d.getAttribute(gc)!==_O&&(N9(r,d),d.parentNode&&d.parentNode.removeChild(d))}})(this)),X2(this,function(){return(function(r){for(var o=r.getTag(),c=o.length,h="",d=function(p){var m=(function(_){return Gv.get(_)})(p);if(m===void 0)return"continue";var y=r.names.get(m),w=o.getGroup(p);if(y===void 0||w.length===0)return"continue";var b="".concat(gc,".g").concat(p,'[id="').concat(m,'"]'),E="";y!==void 0&&y.forEach(function(_){_.length>0&&(E+="".concat(_,","))}),h+="".concat(w).concat(b,'{content:"').concat(E,'"}').concat($2)},f=0;f<c;f++)d(f);return h})(i)})}return s.registerId=function(t){return s0(t)},s.prototype.reconstructWithOptions=function(t,e){return e===void 0&&(e=!0),new s(gi(gi({},this.options),t),this.gs,e&&this.names||void 0)},s.prototype.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},s.prototype.getTag=function(){return this.tag||(this.tag=(t=(function(e){var n=e.useCSSOMInjection,i=e.target;return e.isServer?new B9(i):n?new I9(i):new j9(i)})(this.options),new T9(t)));var t},s.prototype.hasNameForId=function(t,e){return this.names.has(t)&&this.names.get(t).has(e)},s.prototype.registerName=function(t,e){if(s0(t),this.names.has(t))this.names.get(t).add(e);else{var n=new Set;n.add(e),this.names.set(t,n)}},s.prototype.insertRules=function(t,e,n){this.registerName(t,e),this.getTag().insertRules(s0(t),n)},s.prototype.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},s.prototype.clearRules=function(t){this.getTag().clearGroup(s0(t)),this.clearNames(t)},s.prototype.clearTag=function(){this.tag=void 0},s})(),z9=/&/g,U9=/^\s*\/\/.*$/gm;function IO(s,t){return s.map(function(e){return e.type==="rule"&&(e.value="".concat(t," ").concat(e.value),e.value=e.value.replaceAll(",",",".concat(t," ")),e.props=e.props.map(function(n){return"".concat(t," ").concat(n)})),Array.isArray(e.children)&&e.type!=="@keyframes"&&(e.children=IO(e.children,t)),e})}function H9(s){var t,e,n,i=Ku,r=i.options,o=r===void 0?Ku:r,c=i.plugins,h=c===void 0?i1:c,d=function(m,y,w){return w.startsWith(e)&&w.endsWith(e)&&w.replaceAll(e,"").length>0?".".concat(t):m},f=h.slice();f.push(function(m){m.type===Qb&&m.value.includes("&")&&(m.props[0]=m.props[0].replace(z9,e).replace(n,d))}),o.prefix&&f.push(h9),f.push(o9);var p=function(m,y,w,b){y===void 0&&(y=""),w===void 0&&(w=""),b===void 0&&(b="&"),t=b,e=y,n=new RegExp("\\".concat(e,"\\b"),"g");var E=m.replace(U9,""),_=r9(w||y?"".concat(w," ").concat(y," { ").concat(E," }"):E);o.namespace&&(_=IO(_,o.namespace));var k=[];return Wv(_,l9(f.concat(c9(function(T){return k.push(T)})))),k};return p.hash=h.length?h.reduce(function(m,y){return y.name||La(15),zl(m,y.name)},CO).toString():"",p}var W9=new OO,kS=H9(),jO=Ue.createContext({shouldForwardProp:void 0,styleSheet:W9,stylis:kS});jO.Consumer;Ue.createContext(void 0);function aL(){return at.useContext(jO)}var TS=(function(){function s(t,e){var n=this;this.inject=function(i,r){r===void 0&&(r=kS);var o=n.name+r.hash;i.hasNameForId(n.id,o)||i.insertRules(n.id,o,r(n.rules,o,"@keyframes"))},this.name=t,this.id="sc-keyframes-".concat(t),this.rules=e,X2(this,function(){throw La(12,String(n.name))})}return s.prototype.getName=function(t){return t===void 0&&(t=kS),this.name+t.hash},s})(),G9=function(s){return s>="A"&&s<="Z"};function oL(s){for(var t="",e=0;e<s.length;e++){var n=s[e];if(e===1&&n==="-"&&s[0]==="-")return s;G9(n)?t+="-"+n.toLowerCase():t+=n}return t.startsWith("ms-")?"-"+t:t}var BO=function(s){return s==null||s===!1||s===""},FO=function(s){var t,e,n=[];for(var i in s){var r=s[i];s.hasOwnProperty(i)&&!BO(r)&&(Array.isArray(r)&&r.isCss||mc(r)?n.push("".concat(oL(i),":"),r,";"):Zu(r)?n.push.apply(n,pc(pc(["".concat(i," {")],FO(r),!1),["}"],!1)):n.push("".concat(oL(i),": ").concat((t=i,(e=r)==null||typeof e=="boolean"||e===""?"":typeof e!="number"||e===0||t in u9||t.startsWith("--")?String(e).trim():"".concat(e,"px")),";")))}return n};function hc(s,t,e,n){if(BO(s))return[];if(Y2(s))return[".".concat(s.styledComponentId)];if(mc(s)){if(!mc(r=s)||r.prototype&&r.prototype.isReactComponent||!t)return[s];var i=s(t);return se.env.NODE_ENV==="production"||typeof i!="object"||Array.isArray(i)||i instanceof TS||Zu(i)||i===null||console.error("".concat(MO(s)," is not a styled component and cannot be referred to via component selector. See https://www.styled-components.com/docs/advanced#referring-to-other-components for more details.")),hc(i,t,e,n)}var r;return s instanceof TS?e?(s.inject(e,n),[s.getName(n)]):[s]:Zu(s)?FO(s):Array.isArray(s)?Array.prototype.concat.apply(i1,s.map(function(o){return hc(o,t,e,n)})):[s.toString()]}function V9(s){for(var t=0;t<s.length;t+=1){var e=s[t];if(mc(e)&&!Y2(e))return!1}return!0}var $9=kO(n1),q9=(function(){function s(t,e,n){this.rules=t,this.staticRulesId="",this.isStatic=se.env.NODE_ENV==="production"&&(n===void 0||n.isStatic)&&V9(t),this.componentId=e,this.baseHash=zl($9,e),this.baseStyle=n,OO.registerId(e)}return s.prototype.generateAndInjectStyles=function(t,e,n){var i=this.baseStyle?this.baseStyle.generateAndInjectStyles(t,e,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&e.hasNameForId(this.componentId,this.staticRulesId))i=Zl(i,this.staticRulesId);else{var r=ES(hc(this.rules,t,e,n)),o=_S(zl(this.baseHash,r)>>>0);if(!e.hasNameForId(this.componentId,o)){var c=n(r,".".concat(o),void 0,this.componentId);e.insertRules(this.componentId,o,c)}i=Zl(i,o),this.staticRulesId=o}else{for(var h=zl(this.baseHash,n.hash),d="",f=0;f<this.rules.length;f++){var p=this.rules[f];if(typeof p=="string")d+=p,se.env.NODE_ENV!=="production"&&(h=zl(h,p));else if(p){var m=ES(hc(p,t,e,n));h=zl(h,m+f),d+=m}}if(d){var y=_S(h>>>0);e.hasNameForId(this.componentId,y)||e.insertRules(this.componentId,y,n(d,".".concat(y),void 0,this.componentId)),i=Zl(i,y)}}return i},s})(),Vv=Ue.createContext(void 0);Vv.Consumer;function Y9(s){var t=Ue.useContext(Vv),e=at.useMemo(function(){return(function(n,i){if(!n)throw La(14);if(mc(n)){var r=n(i);if(se.env.NODE_ENV!=="production"&&(r===null||Array.isArray(r)||typeof r!="object"))throw La(7);return r}if(Array.isArray(n)||typeof n!="object")throw La(8);return i?gi(gi({},i),n):n})(s.theme,t)},[s.theme,t]);return s.children?Ue.createElement(Vv.Provider,{value:e},s.children):null}var _A={},lL=new Set;function X9(s,t,e){var n=Y2(s),i=s,r=!SA(s),o=t.attrs,c=o===void 0?i1:o,h=t.componentId,d=h===void 0?(function(R,D){var F=typeof R!="string"?"sc":tL(R);_A[F]=(_A[F]||0)+1;var j="".concat(F,"-").concat(TO(n1+F+_A[F]));return D?"".concat(D,"-").concat(j):j})(t.displayName,t.parentComponentId):h,f=t.displayName,p=f===void 0?(function(R){return SA(R)?"styled.".concat(R):"Styled(".concat(MO(R),")")})(s):f,m=t.displayName&&t.componentId?"".concat(tL(t.displayName),"-").concat(t.componentId):t.componentId||d,y=n&&i.attrs?i.attrs.concat(c).filter(Boolean):c,w=t.shouldForwardProp;if(n&&i.shouldForwardProp){var b=i.shouldForwardProp;if(t.shouldForwardProp){var E=t.shouldForwardProp;w=function(R,D){return b(R,D)&&E(R,D)}}else w=b}var _=new q9(e,m,n?i.componentStyle:void 0);function k(R,D){return(function(F,j,I){var O=F.attrs,X=F.componentStyle,Q=F.defaultProps,H=F.foldedComponentIds,J=F.styledComponentId,N=F.target,tt=Ue.useContext(Vv),$=aL(),G=F.shouldForwardProp||$.shouldForwardProp;se.env.NODE_ENV!=="production"&&at.useDebugValue(J);var gt=p9(j,tt,Q)||Ku,nt=(function(ut,Rt,St){for(var Ct,xt=gi(gi({},Rt),{className:void 0,theme:St}),Bt=0;Bt<ut.length;Bt+=1){var jt=mc(Ct=ut[Bt])?Ct(xt):Ct;for(var Ut in jt)xt[Ut]=Ut==="className"?Zl(xt[Ut],jt[Ut]):Ut==="style"?gi(gi({},xt[Ut]),jt[Ut]):jt[Ut]}return Rt.className&&(xt.className=Zl(xt.className,Rt.className)),xt})(O,j,gt),Tt=nt.as||N,U={};for(var W in nt)nt[W]===void 0||W[0]==="$"||W==="as"||W==="theme"&&nt.theme===gt||(W==="forwardedAs"?U.as=nt.forwardedAs:G&&!G(W,Tt)||(U[W]=nt[W],G||se.env.NODE_ENV!=="development"||$7(W)||lL.has(W)||!SS.has(Tt)||(lL.add(W),console.warn('styled-components: it looks like an unknown prop "'.concat(W,'" is being sent through to the DOM, which will likely trigger a React console error. If you would like automatic filtering of unknown props, you can opt-into that behavior via `<StyleSheetManager shouldForwardProp={...}>` (connect an API like `@emotion/is-prop-valid`) or consider using transient props (`$` prefix for automatic filtering.)')))));var st=(function(ut,Rt){var St=aL(),Ct=ut.generateAndInjectStyles(Rt,St.styleSheet,St.stylis);return se.env.NODE_ENV!=="production"&&at.useDebugValue(Ct),Ct})(X,nt);se.env.NODE_ENV!=="production"&&F.warnTooManyClasses&&F.warnTooManyClasses(st);var lt=Zl(H,J);return st&&(lt+=" "+st),nt.className&&(lt+=" "+nt.className),U[SA(Tt)&&!SS.has(Tt)?"class":"className"]=lt,U.ref=I,at.createElement(Tt,U)})(T,R,D)}k.displayName=p;var T=Ue.forwardRef(k);return T.attrs=y,T.componentStyle=_,T.displayName=p,T.shouldForwardProp=w,T.foldedComponentIds=n?Zl(i.foldedComponentIds,i.styledComponentId):"",T.styledComponentId=m,T.target=n?i.target:s,Object.defineProperty(T,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(R){this._foldedDefaultProps=n?(function(D){for(var F=[],j=1;j<arguments.length;j++)F[j-1]=arguments[j];for(var I=0,O=F;I<O.length;I++)CS(D,O[I],!0);return D})({},i.defaultProps,R):R}}),se.env.NODE_ENV!=="production"&&(f9(p,m),T.warnTooManyClasses=(function(R,D){var F={},j=!1;return function(I){if(!j&&(F[I]=!0,Object.keys(F).length>=200)){var O=D?' with the id of "'.concat(D,'"'):"";console.warn("Over ".concat(200," classes were generated for component ").concat(R).concat(O,`.
`)+`Consider using the attrs method, together with a style object for frequently changed styles.
Example:
  const Component = styled.div.attrs(props => ({
    style: {
      background: props.background,
    },
  }))\`width: 100%;\`

  <Component />`),j=!0,F={}}}})(p,m)),X2(T,function(){return".".concat(T.styledComponentId)}),r&&DO(T,s,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),T}function cL(s,t){for(var e=[s[0]],n=0,i=t.length;n<i;n+=1)e.push(t[n],s[n+1]);return e}var hL=function(s){return Object.assign(s,{isCss:!0})};function s1(s){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(mc(s)||Zu(s))return hL(hc(cL(i1,pc([s],t,!0))));var n=s;return t.length===0&&n.length===1&&typeof n[0]=="string"?hc(n):hL(hc(cL(n,t)))}function MS(s,t,e){if(e===void 0&&(e=Ku),!t)throw La(1,t);var n=function(i){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return s(t,e,s1.apply(void 0,pc([i],r,!1)))};return n.attrs=function(i){return MS(s,t,gi(gi({},e),{attrs:Array.prototype.concat(e.attrs,i).filter(Boolean)}))},n.withConfig=function(i){return MS(s,t,gi(gi({},e),i))},n}var zO=function(s){return MS(X9,s)},de=zO;SS.forEach(function(s){de[s]=zO(s)});function K9(s){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];se.env.NODE_ENV!=="production"&&typeof navigator<"u"&&navigator.product==="ReactNative"&&console.warn("`keyframes` cannot be used on ReactNative, only on the web. To do animation in ReactNative please use Animated.");var n=ES(s1.apply(void 0,pc([s],t,!1))),i=TO(n);return new TS(i,n)}se.env.NODE_ENV!=="production"&&typeof navigator<"u"&&navigator.product==="ReactNative"&&console.warn(`It looks like you've imported 'styled-components' on React Native.
Perhaps you're looking to import 'styled-components/native'?
Read more about this at https://www.styled-components.com/docs/basics#react-native`);var r0="__sc-".concat(gc,"__");se.env.NODE_ENV!=="production"&&se.env.NODE_ENV!=="test"&&typeof window<"u"&&(window[r0]||(window[r0]=0),window[r0]===1&&console.warn(`It looks like there are several instances of 'styled-components' initialized in this application. This may cause dynamic styles to not render properly, errors during the rehydration process, a missing theme prop, and makes your application bigger without good reason.

See https://s-c.sh/2BAXzed for more info.`),window[r0]+=1);const Z9="Document {{ currentFileNo }} of {{ allFilesCount }}",Q9="No renderer for file type: {{{ fileType }}}",J9="Download file",tG="Your file is broken. Please check it on your machine.",eG="Recipients",nG="Sender",iG="Loading...",sG="Page {{ currentPage }}/{{ allPagesCount }}",rG={documentNavInfo:Z9,noRendererMessage:Q9,downloadButtonLabel:J9,brokenFile:tG,msgPluginRecipients:eG,msgPluginSender:nG,pdfPluginLoading:iG,pdfPluginPageNumber:sG},aG="Dokument {{ currentFileNo }} z {{ allFilesCount }}",oG="Brak funckji renderujcej dla: {{{ fileType }}}",lG="Pobierz plik",cG="Twj plik jest uszkodzony. Sprawd go na swoim komputerze.",hG="Odbiorcy",uG="Nadawca",dG="Wczytywanie...",fG="Strona {{ currentPage }}/{{ allPagesCount }}",pG={documentNavInfo:aG,noRendererMessage:oG,downloadButtonLabel:lG,brokenFile:cG,msgPluginRecipients:hG,msgPluginSender:uG,pdfPluginLoading:dG,pdfPluginPageNumber:fG},gG="Documento {{ currentFileNo }} de {{ allFilesCount }}",mG="No hay procesador para el tipo de archivo: {{{ fileType }}}",yG="Descargar archivo",vG="Tu archivo est roto. Comprubalo en tu mquina.",bG="Destinatarios",xG="Remitente",wG="Cargando...",AG="Pgina {{ currentPage }}/{{ allPagesCount }}",SG={documentNavInfo:gG,noRendererMessage:mG,downloadButtonLabel:yG,brokenFile:vG,msgPluginRecipients:bG,msgPluginSender:xG,pdfPluginLoading:wG,pdfPluginPageNumber:AG},_G="Dokument {{ currentFileNo }} von {{ allFilesCount }}",EG="Kein Renderer fr Dateityp: {{{ fileType }}}",CG="Datei herunterladen",kG="Ihre Datei ist defekt. Bitte berprfen Sie sie auf Ihrem Rechner.",TG="Empfnger",MG="Absender",RG="Wird geladen...",PG="Seite {{ currentPage }}/{{ allPagesCount }}",LG={documentNavInfo:_G,noRendererMessage:EG,downloadButtonLabel:CG,brokenFile:kG,msgPluginRecipients:TG,msgPluginSender:MG,pdfPluginLoading:RG,pdfPluginPageNumber:PG},DG="Documento {{ currentFileNo }} di {{ allFilesCount }}",NG="Nessun renderer per il tipo di file: {{{ fileType }}}",OG="Scarica file",IG="Il tuo file  danneggiato. Controllalo sul tuo computer.",jG="Destinatari",BG="Mittente",FG="Caricamento in corso...",zG="Pagina {{ currentPage }}/{{ allPagesCount }}",UG={documentNavInfo:DG,noRendererMessage:NG,downloadButtonLabel:OG,brokenFile:IG,msgPluginRecipients:jG,msgPluginSender:BG,pdfPluginLoading:FG,pdfPluginPageNumber:zG},HG="Documento {{ currentFileNo }} de {{ allFilesCount }}",WG="Nenhum renderizador para o tipo de arquivo: {{{ fileType }}}",GG="Baixar arquivo",VG="Seu arquivo est quebrado. Por favor, verifique-o em sua mquina.",$G="Destinatrios",qG="Remetente",YG="Carregando...",XG="Pgina {{ currentPage }}/{{ allPagesCount }}",KG={documentNavInfo:HG,noRendererMessage:WG,downloadButtonLabel:GG,brokenFile:VG,msgPluginRecipients:$G,msgPluginSender:qG,pdfPluginLoading:YG,pdfPluginPageNumber:XG},ZG="Document {{ currentFileNo }} de {{ allFilesCount }}",QG="Aucun moteur de rendu pour le type de fichier : {{{ fileType }}}",JG="Tlcharger le fichier",tV="Votre fichier est cass. Veuillez le vrifier sur votre machine.",eV="Destinataires",nV="Expditeur",iV="Chargement...",sV="Page {{ currentPage }}/{{ allPagesCount }}",rV={documentNavInfo:ZG,noRendererMessage:QG,downloadButtonLabel:JG,brokenFile:tV,msgPluginRecipients:eV,msgPluginSender:nV,pdfPluginLoading:iV,pdfPluginPageNumber:sV},aV=" {{ currentFileNo }}  {{ allFilesCount }}",oV="{{{ fileType }}} :       ",lV=" ",cV="       .",hV="",uV="",dV=" ...",fV=" {{ allPagesCount }} \\ {{ currentPage }}  ",pV={documentNavInfo:aV,noRendererMessage:oV,downloadButtonLabel:lV,brokenFile:cV,msgPluginRecipients:hV,msgPluginSender:uV,pdfPluginLoading:dV,pdfPluginPageNumber:fV},gV="Dokument {{ currentFileNo }} od {{ allFilesCount }}",mV="Ne postoji pregleda za tip fajla: {{ fileType }}",yV="Preuzimanje fajla",vV="Va fajl nije dobar. Molimo Vas da probate da ga otvorite na vaem raunaru.",bV="Primaoci",xV="Poiljalac",wV="Uitavanje...",AV="Strana {{ currentPage }}/{{ allPagesCount }}",SV={documentNavInfo:gV,noRendererMessage:mV,downloadButtonLabel:yV,brokenFile:vV,msgPluginRecipients:bV,msgPluginSender:xV,pdfPluginLoading:wV,pdfPluginPageNumber:AV},_V=" {{ currentFileNo }} od {{ allFilesCount }}",EV="     : {{ fileType }}",CV=" ",kV="   .          .",TV="",MV="",RV="...",PV=" {{ currentPage }}/{{ allPagesCount }}",LV={documentNavInfo:_V,noRendererMessage:EV,downloadButtonLabel:CV,brokenFile:kV,msgPluginRecipients:TV,msgPluginSender:MV,pdfPluginLoading:RV,pdfPluginPageNumber:PV},DV=" {{ currentFileNo }} / {{ allFilesCount }}",NV=": {{ fileType }}",OV="",IV="",jV="",BV="",FV="...",zV=" {{ currentPage }}/{{ allPagesCount }}",UV={documentNavInfo:DV,noRendererMessage:NV,downloadButtonLabel:OV,brokenFile:IV,msgPluginRecipients:jV,msgPluginSender:BV,pdfPluginLoading:FV,pdfPluginPageNumber:zV},HV=" {{ currentFileNo }}  {{ allFilesCount }}",WV="     : {{{ fileType }}}",GV=" ",VV="  . ,     .",$V="",qV="",YV="...",XV=" {{ currentPage }}/{{ allPagesCount }}",KV={documentNavInfo:HV,noRendererMessage:WV,downloadButtonLabel:GV,brokenFile:VV,msgPluginRecipients:$V,msgPluginSender:qV,pdfPluginLoading:YV,pdfPluginPageNumber:XV},ZV="Dokument {{ currentFileNo }} av {{ allFilesCount }}",QV="Ingen renderare fr filtypen: {{{ fileType }}}",JV="Ladda ner",t$="Filen r trasig. Var vnlig kontrollera den p din maskin.",e$="Mottagare",n$="Avsndare",i$="Laddar...",s$="Sida {{ currentPage }}/{{ allPagesCount }}",r$={documentNavInfo:ZV,noRendererMessage:QV,downloadButtonLabel:JV,brokenFile:t$,msgPluginRecipients:e$,msgPluginSender:n$,pdfPluginLoading:i$,pdfPluginPageNumber:s$},a$="Belge {{ currentFileNo }} / {{ allFilesCount }}",o$="Dosya tr iin grntleyici bulunamad: {{{ fileType }}}",l$="Dosyay indir",c$="Dosyanz bozuk. Ltfen kendi cihaznzda kontrol edin.",h$="Alclar",u$="Gnderen",d$="Ykleniyor...",f$="Sayfa {{ currentPage }}/{{ allPagesCount }}",p$={documentNavInfo:a$,noRendererMessage:o$,downloadButtonLabel:l$,brokenFile:c$,msgPluginRecipients:h$,msgPluginSender:u$,pdfPluginLoading:d$,pdfPluginPageNumber:f$},RS={en:rG,pl:pG,es:SG,de:LG,it:UG,pt:KG,fr:rV,ar:pV,sr:SV,sr_cyr:LV,ja:UV,ru:KV,se:r$,tr:p$},K2="en",UO="SET_ALL_DOCUMENTS",HO="SET_DOCUMENT_LOADING",WO="NEXT_DOCUMENT",GO="PREVIOUS_DOCUMENT",VO="UPDATE_CURRENT_DOCUMENT",$O="SET_RENDERER_RECT",qO="SET_MAIN_CONFIG",g$=(s,t)=>({type:UO,documents:s,initialActiveDocument:t}),EA=s=>({type:HO,value:s}),Z2=()=>({type:WO}),Q2=()=>({type:GO}),PS=s=>({type:VO,document:s}),m$=s=>({type:$O,rect:s}),y$=s=>({type:qO,config:s}),$v={currentFileNo:0,documents:[],documentLoading:!0,currentDocument:void 0,rendererRect:void 0,config:{},pluginRenderers:[],language:K2},v$=(s=$v,t)=>{switch(t.type){case UO:{const{documents:e,initialActiveDocument:n}=t;return{...s,documents:e,currentDocument:n||e[0]||null,currentFileNo:n&&e.includes(n)?e.indexOf(n):$v.currentFileNo}}case HO:{const{value:e}=t;return{...s,documentLoading:e}}case WO:{if(s.currentFileNo>=s.documents.length-1)return s;const e=s.currentFileNo+1;return s.onDocumentChange&&s.onDocumentChange(s.documents[e]),{...s,currentFileNo:e,currentDocument:s.documents[e],documentLoading:!0}}case GO:{if(s.currentFileNo<=0)return s;const e=s.currentFileNo-1;return s.onDocumentChange&&s.onDocumentChange(s.documents[e]),{...s,currentFileNo:s.currentFileNo-1,currentDocument:s.documents[e],documentLoading:!0}}case VO:{const{document:e}=t;return{...s,currentDocument:e,currentFileNo:s.documents.findIndex(n=>n.uri===e.uri)}}case $O:{const{rect:e}=t;return{...s,rendererRect:e}}case qO:{const{config:e}=t;return{...s,config:e}}default:return s}},Xo=at.createContext({state:$v,dispatch:()=>null}),b$=at.forwardRef((s,t)=>{const{children:e,documents:n,config:i,pluginRenderers:r,prefetchMethod:o,requestHeaders:c,initialActiveDocument:h,language:d,activeDocument:f,onDocumentChange:p}=s,[m,y]=at.useReducer(v$,{...$v,documents:n||[],currentDocument:n&&n.length?h||n[0]:void 0,config:i,pluginRenderers:r,prefetchMethod:o,requestHeaders:c,currentFileNo:h?n.findIndex(w=>w===h)??0:0,language:d&&RS[d]?d:K2,activeDocument:f,onDocumentChange:p});return at.useEffect(()=>{y(g$(n,h)),i&&y(y$(i))},[n,i,h]),at.useEffect(()=>{f&&y(PS(f))},[f]),at.useImperativeHandle(t,()=>({prev(){y(Q2())},next(){y(Z2())}}),[y]),A.jsx(Xo.Provider,{value:{state:m,dispatch:y},children:e})}),x$=s1`
  background-color: ${s=>s.theme.primary};
  color: ${s=>s.theme.textPrimary};
`,w$=s1`
  background-color: ${s=>s.theme.secondary};
  color: ${s=>s.theme.textSecondary};
`,r1=de.button`
  ${x$}
  display: flex;
  justify-content: center;
  align-items: center;
  width: 35px;
  height: 35px;
  padding: 0;
  margin: 0 0 0 5px;
  text-align: center;
  font-size: 18px;
  border: 0;
  outline: none;
  cursor: pointer;
  text-decoration: none;
  border-radius: 35px;
  opacity: ${s=>s.disabled?.4:1};
  pointer-events: ${s=>s.disabled?"none":"all"};
  box-shadow: 2px 2px 3px #00000033;

  @media (max-width: 768px) {
    width: 30px;
    height: 30px;
    font-size: 15px;
  }
`,YO=de.a`
  display: flex;
  justify-content: center;
  align-items: center;
  border: 0;
  outline: none;
  cursor: pointer;
  text-decoration: none;
  border-radius: 35px;
  background-color: ${s=>s.theme.primary};
  color: ${s=>s.theme.textPrimary};
  box-shadow: 2px 2px 3px #00000033;

  width: 35px;
  height: 35px;
  font-size: 18px;
  @media (max-width: 768px) {
    width: 30px;
    height: 30px;
    font-size: 15px;
  }
`;de(r1)``;const A$=de(r1)`
  ${w$}
`,S$=s=>A.jsx(XO,{...s}),_$=s=>A.jsx(XO,{...s,reverse:!0}),XO=({color:s,size:t,reverse:e})=>A.jsx("svg",{width:t||"100%",height:t||"100%",style:{transform:`${e?"rotate(180deg)":""}`},id:"arrow_left",version:"1.1",viewBox:"0 0 32 32",xmlSpace:"preserve",children:A.jsx("path",{clipRule:"evenodd",d:"M31.106,15H3.278l8.325-8.293  c0.391-0.391,0.391-1.024,0-1.414c-0.391-0.391-1.024-0.391-1.414,0l-9.9,9.899c-0.385,0.385-0.385,1.029,0,1.414l9.9,9.9  c0.391,0.391,1.024,0.391,1.414,0c0.391-0.391,0.391-1.024,0-1.414L3.278,17h27.828c0.552,0,1-0.448,1-1  C32.106,15.448,31.658,15,31.106,15z",fill:s||"#aaa",fillRule:"evenodd",id:"Arrow_Back"})}),E$=s=>{const{color:t,size:e}=s;return A.jsx("svg",{width:e||"100%",height:e||"100%",version:"1.1",id:"Icons",viewBox:"0 0 32 32",xmlSpace:"preserve",style:{alignSelf:"center",justifySelf:"center"},children:A.jsxs("g",{children:[A.jsx("path",{fill:t||"#aaa",d:"M16,2c-0.6,0-1,0.4-1,1v5c0,0.6,0.4,1,1,1s1-0.4,1-1V3C17,2.4,16.6,2,16,2z"}),A.jsx("path",{fill:t||"#aaa",d:`M7.5,6.1c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l3.5,3.5c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.5,6.1
		z`}),A.jsx("path",{fill:t||"#aaa",d:"M9,16c0-0.6-0.4-1-1-1H3c-0.6,0-1,0.4-1,1s0.4,1,1,1h5C8.6,17,9,16.6,9,16z"}),A.jsx("path",{fill:t||"#aaa",d:`M9.6,20.9l-3.5,3.5c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l3.5-3.5c0.4-0.4,0.4-1,0-1.4
		S10,20.6,9.6,20.9z`}),A.jsx("path",{fill:t||"#aaa",d:"M16,23c-0.6,0-1,0.4-1,1v5c0,0.6,0.4,1,1,1s1-0.4,1-1v-5C17,23.4,16.6,23,16,23z"}),A.jsx("path",{fill:t||"#aaa",d:`M22.4,20.9c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l3.5,3.5c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4
		L22.4,20.9z`}),A.jsx("path",{fill:t||"#aaa",d:"M29,15h-5c-0.6,0-1,0.4-1,1s0.4,1,1,1h5c0.6,0,1-0.4,1-1S29.6,15,29,15z"}),A.jsx("path",{fill:t||"#aaa",d:`M21.7,11.3c0.3,0,0.5-0.1,0.7-0.3l3.5-3.5c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-3.5,3.5c-0.4,0.4-0.4,1,0,1.4
		C21.1,11.2,21.4,11.3,21.7,11.3z`})]})})};var C$=Object.prototype.toString,sd=Array.isArray||function(s){return C$.call(s)==="[object Array]"};function J2(s){return typeof s=="function"}function k$(s){return sd(s)?"array":typeof s}function CA(s){return s.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function uL(s,t){return s!=null&&typeof s=="object"&&t in s}function T$(s,t){return s!=null&&typeof s!="object"&&s.hasOwnProperty&&s.hasOwnProperty(t)}var M$=RegExp.prototype.test;function R$(s,t){return M$.call(s,t)}var P$=/\S/;function L$(s){return!R$(P$,s)}var D$={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function N$(s){return String(s).replace(/[&<>"'`=\/]/g,function(t){return D$[t]})}var O$=/\s*/,I$=/\s+/,dL=/\s*=/,j$=/\s*\}/,B$=/#|\^|\/|>|\{|&|=|!/;function F$(s,t){if(!s)return[];var e=!1,n=[],i=[],r=[],o=!1,c=!1,h="",d=0;function f(){if(o&&!c)for(;r.length;)delete i[r.pop()];else r=[];o=!1,c=!1}var p,m,y;function w(I){if(typeof I=="string"&&(I=I.split(I$,2)),!sd(I)||I.length!==2)throw new Error("Invalid tags: "+I);p=new RegExp(CA(I[0])+"\\s*"),m=new RegExp("\\s*"+CA(I[1])),y=new RegExp("\\s*"+CA("}"+I[1]))}w(t||ls.tags);for(var b=new bg(s),E,_,k,T,R,D;!b.eos();){if(E=b.pos,k=b.scanUntil(p),k)for(var F=0,j=k.length;F<j;++F)T=k.charAt(F),L$(T)?(r.push(i.length),h+=T):(c=!0,e=!0,h+=" "),i.push(["text",T,E,E+1]),E+=1,T===`
`&&(f(),h="",d=0,e=!1);if(!b.scan(p))break;if(o=!0,_=b.scan(B$)||"name",b.scan(O$),_==="="?(k=b.scanUntil(dL),b.scan(dL),b.scanUntil(m)):_==="{"?(k=b.scanUntil(y),b.scan(j$),b.scanUntil(m),_="&"):k=b.scanUntil(m),!b.scan(m))throw new Error("Unclosed tag at "+b.pos);if(_==">"?R=[_,k,E,b.pos,h,d,e]:R=[_,k,E,b.pos],d++,i.push(R),_==="#"||_==="^")n.push(R);else if(_==="/"){if(D=n.pop(),!D)throw new Error('Unopened section "'+k+'" at '+E);if(D[1]!==k)throw new Error('Unclosed section "'+D[1]+'" at '+E)}else _==="name"||_==="{"||_==="&"?c=!0:_==="="&&w(k)}if(f(),D=n.pop(),D)throw new Error('Unclosed section "'+D[1]+'" at '+b.pos);return U$(z$(i))}function z$(s){for(var t=[],e,n,i=0,r=s.length;i<r;++i)e=s[i],e&&(e[0]==="text"&&n&&n[0]==="text"?(n[1]+=e[1],n[3]=e[3]):(t.push(e),n=e));return t}function U$(s){for(var t=[],e=t,n=[],i,r,o=0,c=s.length;o<c;++o)switch(i=s[o],i[0]){case"#":case"^":e.push(i),n.push(i),e=i[4]=[];break;case"/":r=n.pop(),r[5]=i[2],e=n.length>0?n[n.length-1][4]:t;break;default:e.push(i)}return t}function bg(s){this.string=s,this.tail=s,this.pos=0}bg.prototype.eos=function(){return this.tail===""};bg.prototype.scan=function(s){var t=this.tail.match(s);if(!t||t.index!==0)return"";var e=t[0];return this.tail=this.tail.substring(e.length),this.pos+=e.length,e};bg.prototype.scanUntil=function(s){var t=this.tail.search(s),e;switch(t){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,t),this.tail=this.tail.substring(t)}return this.pos+=e.length,e};function Qu(s,t){this.view=s,this.cache={".":this.view},this.parent=t}Qu.prototype.push=function(s){return new Qu(s,this)};Qu.prototype.lookup=function(s){var t=this.cache,e;if(t.hasOwnProperty(s))e=t[s];else{for(var n=this,i,r,o,c=!1;n;){if(s.indexOf(".")>0)for(i=n.view,r=s.split("."),o=0;i!=null&&o<r.length;)o===r.length-1&&(c=uL(i,r[o])||T$(i,r[o])),i=i[r[o++]];else i=n.view[s],c=uL(n.view,s);if(c){e=i;break}n=n.parent}t[s]=e}return J2(e)&&(e=e.call(this.view)),e};function Si(){this.templateCache={_cache:{},set:function(s,t){this._cache[s]=t},get:function(s){return this._cache[s]},clear:function(){this._cache={}}}}Si.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()};Si.prototype.parse=function(s,t){var e=this.templateCache,n=s+":"+(t||ls.tags).join(":"),i=typeof e<"u",r=i?e.get(n):void 0;return r==null&&(r=F$(s,t),i&&e.set(n,r)),r};Si.prototype.render=function(s,t,e,n){var i=this.getConfigTags(n),r=this.parse(s,i),o=t instanceof Qu?t:new Qu(t,void 0);return this.renderTokens(r,o,e,s,n)};Si.prototype.renderTokens=function(s,t,e,n,i){for(var r="",o,c,h,d=0,f=s.length;d<f;++d)h=void 0,o=s[d],c=o[0],c==="#"?h=this.renderSection(o,t,e,n,i):c==="^"?h=this.renderInverted(o,t,e,n,i):c===">"?h=this.renderPartial(o,t,e,i):c==="&"?h=this.unescapedValue(o,t):c==="name"?h=this.escapedValue(o,t,i):c==="text"&&(h=this.rawValue(o)),h!==void 0&&(r+=h);return r};Si.prototype.renderSection=function(s,t,e,n,i){var r=this,o="",c=t.lookup(s[1]);function h(p){return r.render(p,t,e,i)}if(c){if(sd(c))for(var d=0,f=c.length;d<f;++d)o+=this.renderTokens(s[4],t.push(c[d]),e,n,i);else if(typeof c=="object"||typeof c=="string"||typeof c=="number")o+=this.renderTokens(s[4],t.push(c),e,n,i);else if(J2(c)){if(typeof n!="string")throw new Error("Cannot use higher-order sections without the original template");c=c.call(t.view,n.slice(s[3],s[5]),h),c!=null&&(o+=c)}else o+=this.renderTokens(s[4],t,e,n,i);return o}};Si.prototype.renderInverted=function(s,t,e,n,i){var r=t.lookup(s[1]);if(!r||sd(r)&&r.length===0)return this.renderTokens(s[4],t,e,n,i)};Si.prototype.indentPartial=function(s,t,e){for(var n=t.replace(/[^ \t]/g,""),i=s.split(`
`),r=0;r<i.length;r++)i[r].length&&(r>0||!e)&&(i[r]=n+i[r]);return i.join(`
`)};Si.prototype.renderPartial=function(s,t,e,n){if(e){var i=this.getConfigTags(n),r=J2(e)?e(s[1]):e[s[1]];if(r!=null){var o=s[6],c=s[5],h=s[4],d=r;c==0&&h&&(d=this.indentPartial(r,h,o));var f=this.parse(d,i);return this.renderTokens(f,t,e,d,n)}}};Si.prototype.unescapedValue=function(s,t){var e=t.lookup(s[1]);if(e!=null)return e};Si.prototype.escapedValue=function(s,t,e){var n=this.getConfigEscape(e)||ls.escape,i=t.lookup(s[1]);if(i!=null)return typeof i=="number"&&n===ls.escape?String(i):n(i)};Si.prototype.rawValue=function(s){return s[1]};Si.prototype.getConfigTags=function(s){return sd(s)?s:s&&typeof s=="object"?s.tags:void 0};Si.prototype.getConfigEscape=function(s){if(s&&typeof s=="object"&&!sd(s))return s.escape};var ls={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(s){ag.templateCache=s},get templateCache(){return ag.templateCache}},ag=new Si;ls.clearCache=function(){return ag.clearCache()};ls.parse=function(s,t){return ag.parse(s,t)};ls.render=function(s,t,e,n){if(typeof s!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+k$(s)+'" was given as the first argument for mustache#render(template, view, partials)');return ag.render(s,t,e,n)};ls.escape=N$;ls.Scanner=bg;ls.Context=Qu;ls.Writer=Si;const Ec=()=>{const{state:{language:s}}=at.useContext(Xo),t=RS[K2];return{t:at.useCallback((e,n)=>{const i=RS[s];return i[e]?ls.render(i[e],n):t[e]?ls.render(t[e],n):e},[s,t])}},H$=()=>{const{state:{currentDocument:s,currentFileNo:t,documents:e},dispatch:n}=at.useContext(Xo),{t:i}=Ec();if(e.length<=1||!s)return null;let r=s.uri||"";const o=r?.split("/");return o.length&&(r=o[o.length-1]),A.jsxs(W$,{id:"doc-nav",children:[A.jsx("p",{id:"doc-nav-info",children:i("documentNavInfo",{currentFileNo:t+1,allFilesCount:e.length})}),A.jsx(KO,{id:"doc-nav-prev",onClick:()=>n(Q2()),disabled:t===0,children:A.jsx(S$,{color:"#fff",size:"60%"})}),A.jsx(G$,{id:"doc-nav-next",onClick:()=>n(Z2()),disabled:t>=e.length-1,children:A.jsx(_$,{color:"#fff",size:"60%"})})]})},W$=de.div`
  min-width: 150px;
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: flex-end;
  margin: 0 10px;
  color: ${s=>s.theme.textPrimary};
`,KO=de(A$)`
  width: 30px;
  height: 30px;
  margin: 0 5px 0 10px;

  @media (max-width: 768px) {
    width: 25px;
    height: 25px;
  }
`,G$=de(KO)`
  margin: 0 5px;
`,ZO=(s,t)=>{var e;if(!s)return"";let n="";if(s.fileName)n=s.fileName;else{n=s.uri||"",n=decodeURI(n),t||(n=(e=n?.split("?"))==null?void 0:e[0]);const i=n?.split("/");i.length&&(n=i[i.length-1])}return n},V$=()=>{var s,t;const{state:{config:e,currentDocument:n}}=at.useContext(Xo);if(!n||(s=e?.header)!=null&&s.disableFileName)return null;const i=ZO(n,((t=e?.header)==null?void 0:t.retainURLParams)||!1);return A.jsx($$,{id:"file-name","data-testid":"file-name",children:i})},$$=de.div`
  flex: 1;
  text-align: left;
  color: ${s=>s.theme.textPrimary};
  font-weight: bold;
  margin: 0 10px;
  overflow: hidden;
`,q$=()=>{var s,t,e;const{state:n,dispatch:i}=at.useContext(Xo),{config:r}=n;return(s=r?.header)!=null&&s.disableHeader?null:((e=(t=r?.header)==null?void 0:t.overrideComponent)==null?void 0:e.call(t,n,()=>i(Q2()),()=>i(Z2())))||A.jsxs(Y$,{id:"header-bar","data-testid":"header-bar",children:[A.jsx(V$,{}),A.jsx(H$,{})]})},Y$=de.div`
  display: flex;
  justify-content: flex-end;
  align-items: center;
  z-index: 1;
  padding: 0 10px;
  background-color: ${s=>s.theme.primary};
  font-size: 16px;
  min-height: 50px;

  @media (max-width: 768px) {
    min-height: 30px;
    padding: 5px;
    font-size: 10px;
  }
`,tC=({documentURI:s,signal:t,fileLoaderComplete:e,readerTypeFunction:n,headers:i})=>fetch(s,{signal:t,headers:i}).then(async r=>{const o=await r.blob(),c=new FileReader;switch(c.addEventListener("loadend",()=>e(c)),n){case"arrayBuffer":c.readAsArrayBuffer(o);break;case"binaryString":c.readAsBinaryString(o);break;case"dataURL":c.readAsDataURL(o);break;case"text":c.readAsText(o);break}}).catch(r=>r),X$=s=>tC({...s,readerTypeFunction:"arrayBuffer"}),QO=s=>tC({...s,readerTypeFunction:"dataURL"}),JO=s=>tC({...s,readerTypeFunction:"text"}),K$=QO,Z$=()=>{const{state:{currentDocument:s,pluginRenderers:t}}=at.useContext(Xo),[e,n]=at.useState();return at.useEffect(()=>{if(!s)return;if(!s.fileType){n(void 0);return}const i=[];t?.forEach(o=>{s.fileType!==void 0&&o.fileTypes.indexOf(s.fileType)>=0&&i.push(o)});const[r]=i.sort((o,c)=>c.weight-o.weight);n(r&&r!==void 0?()=>r:null)},[s,t]),{CurrentRenderer:e}},Q$=()=>{const{state:s,dispatch:t}=at.useContext(Xo),{currentFileNo:e,currentDocument:n,prefetchMethod:i}=s,{CurrentRenderer:r}=Z$(),o=n?.uri||"";return at.useEffect(()=>{if(!n||n.fileType!==void 0)return;const c=new AbortController,{signal:h}=c;return fetch(o,{method:i||o.startsWith("blob:")?"GET":"HEAD",signal:h,headers:s?.requestHeaders}).then(d=>{const f=d.headers.get("content-type"),p=f?.split(";")||[],m=p.length?p[0]:void 0;t(PS({...n,fileType:m||void 0}))}).catch(d=>{if(d?.name!=="AbortError")throw d}),()=>{c.abort()}},[e,o,n]),at.useEffect(()=>{var c;if(!n||r===void 0)return;const h=new AbortController,{signal:d}=h,f={documentURI:o,signal:d,fileLoaderComplete:p=>{if(!n||!p){t(EA(!1));return}const m={...n};p.result!==null&&(m.fileData=p.result),t(PS(m)),t(EA(!1))},headers:s?.requestHeaders};return r===null?t(EA(!1)):r.fileLoader!==void 0?(c=r.fileLoader)==null||c.call(r,f):K$(f),()=>{h.abort()}},[r,e]),{state:s,dispatch:t,CurrentRenderer:r}},J$=()=>{const[s,t]=at.useState({width:void 0,height:void 0});return at.useEffect(()=>{function e(){t({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]),s},fL=({children:s})=>{var t,e;const{state:n}=at.useContext(Xo),{config:i}=n,[r,o]=at.useState(((t=i?.loadingRenderer)==null?void 0:t.showLoadingTimeout)===!1);return at.useEffect(()=>{var c;setTimeout(()=>{o(!0)},typeof((c=i?.loadingRenderer)==null?void 0:c.showLoadingTimeout)=="number"?i.loadingRenderer.showLoadingTimeout:500)},[(e=i?.loadingRenderer)==null?void 0:e.showLoadingTimeout]),r?A.jsx(A.Fragment,{children:s}):null},tq=({documents:s,documentLoading:t,config:e,currentDocument:n,fileName:i,CurrentRenderer:r,state:o,t:c})=>{var h,d;if(s.length)if(t){if(e&&(h=e?.loadingRenderer)!=null&&h.overrideComponent){const f=e.loadingRenderer.overrideComponent;return A.jsx(fL,{children:A.jsx(f,{document:n,fileName:i})})}return A.jsx(fL,{children:A.jsx(nq,{id:"loading-renderer","data-testid":"loading-renderer",children:A.jsx(sq,{children:A.jsx(E$,{color:"#444",size:40})})})})}else{if(r)return A.jsx(r,{mainState:o});if(r===void 0)return null;if(e&&(d=e?.noRenderer)!=null&&d.overrideComponent){const f=e.noRenderer.overrideComponent;return A.jsx(f,{document:n,fileName:i})}return A.jsxs("div",{id:"no-renderer","data-testid":"no-renderer",children:[c("noRendererMessage",{fileType:n?.fileType??""}),A.jsx(rq,{id:"no-renderer-download",href:n?.uri,download:n?.uri,children:c("downloadButtonLabel")})]})}else return A.jsx("div",{id:"no-documents"})},eq=()=>{var s;const{state:t,dispatch:e,CurrentRenderer:n}=Q$(),{documents:i,documentLoading:r,currentDocument:o,config:c}=t,h=J$(),{t:d}=Ec(),f=at.useCallback(m=>{m&&e(m$(m?.getBoundingClientRect()))},[h,e]),p=ZO(o,((s=c?.header)==null?void 0:s.retainURLParams)||!1);return A.jsx("div",{id:"proxy-renderer","data-testid":"proxy-renderer",ref:f,children:A.jsx(tq,{state:t,documents:i,documentLoading:r,config:c,currentDocument:o,fileName:p,CurrentRenderer:n,t:d})})},nq=de.div`
  display: flex;
  flex: 1;
  height: 75px;
  align-items: center;
  justify-content: center;
`,iq=K9`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,sq=de.div`
  animation-name: ${iq};
  animation-duration: 4s;
  animation-timing-function: linear;
  animation-iteration-count: infinite;
`,rq=de(YO)`
  width: 130px;
  height: 30px;
  background-color: ${s=>s.theme.primary};
  @media (max-width: 768px) {
    width: 125px;
    height: 25px;
  }
`,pL={primary:"#fff",secondary:"#000",tertiary:"#ffffff99",textPrimary:"#000",textSecondary:"#fff",textTertiary:"#00000044",disableThemeScrollbar:!1},Oa=({mainState:{currentDocument:s},children:t,...e})=>s?A.jsx(aq,{id:"image-renderer",...e,children:t||A.jsx(oq,{id:"image-img",src:s.fileData})}):null;Oa.fileTypes=[];Oa.weight=0;const aq=de.div`
  display: flex;
  flex: 1;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  background-color: #fff;
`,oq=de.img`
  max-width: 95%;
  max-height: 95%;
`,eC=s=>A.jsx(Oa,{...s});eC.fileTypes=["bmp","image/bmp"];eC.weight=0;const a1=({mainState:{currentDocument:s}})=>(at.useEffect(()=>{const t=s?.fileData;let e="";const n=t?.replace(/^data:text\/html;(?:charset=([^;]*);)?base64,/,(d,f)=>(e=f||"utf-8",""));let i=window.atob(n);const r=Uint8Array.from(i,d=>d.charCodeAt(0));i=new TextDecoder(e).decode(r);const o=document.getElementById("html-body"),c=o?.contentWindow&&o.contentWindow;if(!c)return;const h=c.document;h.open(),h.write(`${i}`),h.close()},[s]),A.jsx(lq,{id:"html-renderer",children:A.jsx(cq,{id:"html-body",sandbox:"allow-same-origin"})}));a1.fileTypes=["htm","html","text/htm","text/html"];a1.weight=0;a1.fileLoader=QO;const lq=de.div`
  display: flex;
  flex-direction: column;
  width: 100%;
  padding: 0 30px;
`,cq=de.iframe`
  height: 100%;
  padding: 15px;
  margin: 20px 0 20px 0;
  border: 1px solid ${s=>s.theme.secondary};
`,nC=s=>A.jsx(Oa,{...s});nC.fileTypes=["jpg","jpeg","image/jpg","image/jpeg"];nC.weight=0;const o1=({mainState:{currentDocument:s}})=>s?A.jsx(hq,{id:"msdoc-renderer",children:A.jsx(uq,{id:"msdoc-iframe",title:"msdoc-iframe",src:`https://view.officeapps.live.com/op/embed.aspx?src=${encodeURIComponent(s.uri)}`,frameBorder:"0"})}):null,gl={odt:["odt","application/vnd.oasis.opendocument.text"],doc:["doc","application/msword"],docx:["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/octet-stream"],xls:["xls","application/vnd.ms-excel"],xlsx:["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],ppt:["ppt","application/vnd.ms-powerpoint"],pptx:["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"]};o1.fileTypes=[...gl.odt,...gl.doc,...gl.docx,...gl.xls,...gl.xlsx,...gl.ppt,...gl.pptx];o1.weight=0;o1.fileLoader=({fileLoaderComplete:s})=>s();const hq=de.div`
  width: 100%;
`,uq=de.iframe`
  width: 100%;
  height: 100%;
  border: 0;
`;var Pn={},l1={};l1.byteLength=pq;l1.toByteArray=mq;l1.fromByteArray=bq;var Rr=[],Ls=[],dq=typeof Uint8Array<"u"?Uint8Array:Array,kA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var mh=0,fq=kA.length;mh<fq;++mh)Rr[mh]=kA[mh],Ls[kA.charCodeAt(mh)]=mh;Ls[45]=62;Ls[95]=63;function t3(s){var t=s.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=s.indexOf("=");e===-1&&(e=t);var n=e===t?0:4-e%4;return[e,n]}function pq(s){var t=t3(s),e=t[0],n=t[1];return(e+n)*3/4-n}function gq(s,t,e){return(t+e)*3/4-e}function mq(s){var t,e=t3(s),n=e[0],i=e[1],r=new dq(gq(s,n,i)),o=0,c=i>0?n-4:n,h;for(h=0;h<c;h+=4)t=Ls[s.charCodeAt(h)]<<18|Ls[s.charCodeAt(h+1)]<<12|Ls[s.charCodeAt(h+2)]<<6|Ls[s.charCodeAt(h+3)],r[o++]=t>>16&255,r[o++]=t>>8&255,r[o++]=t&255;return i===2&&(t=Ls[s.charCodeAt(h)]<<2|Ls[s.charCodeAt(h+1)]>>4,r[o++]=t&255),i===1&&(t=Ls[s.charCodeAt(h)]<<10|Ls[s.charCodeAt(h+1)]<<4|Ls[s.charCodeAt(h+2)]>>2,r[o++]=t>>8&255,r[o++]=t&255),r}function yq(s){return Rr[s>>18&63]+Rr[s>>12&63]+Rr[s>>6&63]+Rr[s&63]}function vq(s,t,e){for(var n,i=[],r=t;r<e;r+=3)n=(s[r]<<16&16711680)+(s[r+1]<<8&65280)+(s[r+2]&255),i.push(yq(n));return i.join("")}function bq(s){for(var t,e=s.length,n=e%3,i=[],r=16383,o=0,c=e-n;o<c;o+=r)i.push(vq(s,o,o+r>c?c:o+r));return n===1?(t=s[e-1],i.push(Rr[t>>2]+Rr[t<<4&63]+"==")):n===2&&(t=(s[e-2]<<8)+s[e-1],i.push(Rr[t>>10]+Rr[t>>4&63]+Rr[t<<2&63]+"=")),i.join("")}var iC={};iC.read=function(s,t,e,n,i){var r,o,c=i*8-n-1,h=(1<<c)-1,d=h>>1,f=-7,p=e?i-1:0,m=e?-1:1,y=s[t+p];for(p+=m,r=y&(1<<-f)-1,y>>=-f,f+=c;f>0;r=r*256+s[t+p],p+=m,f-=8);for(o=r&(1<<-f)-1,r>>=-f,f+=n;f>0;o=o*256+s[t+p],p+=m,f-=8);if(r===0)r=1-d;else{if(r===h)return o?NaN:(y?-1:1)*(1/0);o=o+Math.pow(2,n),r=r-d}return(y?-1:1)*o*Math.pow(2,r-n)};iC.write=function(s,t,e,n,i,r){var o,c,h,d=r*8-i-1,f=(1<<d)-1,p=f>>1,m=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=n?0:r-1,w=n?1:-1,b=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(c=isNaN(t)?1:0,o=f):(o=Math.floor(Math.log(t)/Math.LN2),t*(h=Math.pow(2,-o))<1&&(o--,h*=2),o+p>=1?t+=m/h:t+=m*Math.pow(2,1-p),t*h>=2&&(o++,h/=2),o+p>=f?(c=0,o=f):o+p>=1?(c=(t*h-1)*Math.pow(2,i),o=o+p):(c=t*Math.pow(2,p-1)*Math.pow(2,i),o=0));i>=8;s[e+y]=c&255,y+=w,c/=256,i-=8);for(o=o<<i|c,d+=i;d>0;s[e+y]=o&255,y+=w,o/=256,d-=8);s[e+y-w]|=b*128};(function(s){const t=l1,e=iC,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;s.Buffer=f,s.SlowBuffer=D,s.INSPECT_MAX_BYTES=50;const i=2147483647;s.kMaxLength=i;const{Uint8Array:r,ArrayBuffer:o,SharedArrayBuffer:c}=globalThis;f.TYPED_ARRAY_SUPPORT=h(),!f.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function h(){try{const C=new r(1),M={foo:function(){return 42}};return Object.setPrototypeOf(M,r.prototype),Object.setPrototypeOf(C,M),C.foo()===42}catch{return!1}}Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}});function d(C){if(C>i)throw new RangeError('The value "'+C+'" is invalid for option "size"');const M=new r(C);return Object.setPrototypeOf(M,f.prototype),M}function f(C,M,z){if(typeof C=="number"){if(typeof M=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return w(C)}return p(C,M,z)}f.poolSize=8192;function p(C,M,z){if(typeof C=="string")return b(C,M);if(o.isView(C))return _(C);if(C==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof C);if(Et(C,o)||C&&Et(C.buffer,o)||typeof c<"u"&&(Et(C,c)||C&&Et(C.buffer,c)))return k(C,M,z);if(typeof C=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const et=C.valueOf&&C.valueOf();if(et!=null&&et!==C)return f.from(et,M,z);const dt=T(C);if(dt)return dt;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof C[Symbol.toPrimitive]=="function")return f.from(C[Symbol.toPrimitive]("string"),M,z);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof C)}f.from=function(C,M,z){return p(C,M,z)},Object.setPrototypeOf(f.prototype,r.prototype),Object.setPrototypeOf(f,r);function m(C){if(typeof C!="number")throw new TypeError('"size" argument must be of type number');if(C<0)throw new RangeError('The value "'+C+'" is invalid for option "size"')}function y(C,M,z){return m(C),C<=0?d(C):M!==void 0?typeof z=="string"?d(C).fill(M,z):d(C).fill(M):d(C)}f.alloc=function(C,M,z){return y(C,M,z)};function w(C){return m(C),d(C<0?0:R(C)|0)}f.allocUnsafe=function(C){return w(C)},f.allocUnsafeSlow=function(C){return w(C)};function b(C,M){if((typeof M!="string"||M==="")&&(M="utf8"),!f.isEncoding(M))throw new TypeError("Unknown encoding: "+M);const z=F(C,M)|0;let et=d(z);const dt=et.write(C,M);return dt!==z&&(et=et.slice(0,dt)),et}function E(C){const M=C.length<0?0:R(C.length)|0,z=d(M);for(let et=0;et<M;et+=1)z[et]=C[et]&255;return z}function _(C){if(Et(C,r)){const M=new r(C);return k(M.buffer,M.byteOffset,M.byteLength)}return E(C)}function k(C,M,z){if(M<0||C.byteLength<M)throw new RangeError('"offset" is outside of buffer bounds');if(C.byteLength<M+(z||0))throw new RangeError('"length" is outside of buffer bounds');let et;return M===void 0&&z===void 0?et=new r(C):z===void 0?et=new r(C,M):et=new r(C,M,z),Object.setPrototypeOf(et,f.prototype),et}function T(C){if(f.isBuffer(C)){const M=R(C.length)|0,z=d(M);return z.length===0||C.copy(z,0,0,M),z}if(C.length!==void 0)return typeof C.length!="number"||zt(C.length)?d(0):E(C);if(C.type==="Buffer"&&Array.isArray(C.data))return E(C.data)}function R(C){if(C>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return C|0}function D(C){return+C!=C&&(C=0),f.alloc(+C)}f.isBuffer=function(C){return C!=null&&C._isBuffer===!0&&C!==f.prototype},f.compare=function(C,M){if(Et(C,r)&&(C=f.from(C,C.offset,C.byteLength)),Et(M,r)&&(M=f.from(M,M.offset,M.byteLength)),!f.isBuffer(C)||!f.isBuffer(M))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(C===M)return 0;let z=C.length,et=M.length;for(let dt=0,_t=Math.min(z,et);dt<_t;++dt)if(C[dt]!==M[dt]){z=C[dt],et=M[dt];break}return z<et?-1:et<z?1:0},f.isEncoding=function(C){switch(String(C).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(C,M){if(!Array.isArray(C))throw new TypeError('"list" argument must be an Array of Buffers');if(C.length===0)return f.alloc(0);let z;if(M===void 0)for(M=0,z=0;z<C.length;++z)M+=C[z].length;const et=f.allocUnsafe(M);let dt=0;for(z=0;z<C.length;++z){let _t=C[z];if(Et(_t,r))dt+_t.length>et.length?(f.isBuffer(_t)||(_t=f.from(_t)),_t.copy(et,dt)):r.prototype.set.call(et,_t,dt);else if(f.isBuffer(_t))_t.copy(et,dt);else throw new TypeError('"list" argument must be an Array of Buffers');dt+=_t.length}return et};function F(C,M){if(f.isBuffer(C))return C.length;if(o.isView(C)||Et(C,o))return C.byteLength;if(typeof C!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof C);const z=C.length,et=arguments.length>2&&arguments[2]===!0;if(!et&&z===0)return 0;let dt=!1;for(;;)switch(M){case"ascii":case"latin1":case"binary":return z;case"utf8":case"utf-8":return kt(C).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z*2;case"hex":return z>>>1;case"base64":return Lt(C).length;default:if(dt)return et?-1:kt(C).length;M=(""+M).toLowerCase(),dt=!0}}f.byteLength=F;function j(C,M,z){let et=!1;if((M===void 0||M<0)&&(M=0),M>this.length||((z===void 0||z>this.length)&&(z=this.length),z<=0)||(z>>>=0,M>>>=0,z<=M))return"";for(C||(C="utf8");;)switch(C){case"hex":return W(this,M,z);case"utf8":case"utf-8":return G(this,M,z);case"ascii":return Tt(this,M,z);case"latin1":case"binary":return U(this,M,z);case"base64":return $(this,M,z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return st(this,M,z);default:if(et)throw new TypeError("Unknown encoding: "+C);C=(C+"").toLowerCase(),et=!0}}f.prototype._isBuffer=!0;function I(C,M,z){const et=C[M];C[M]=C[z],C[z]=et}f.prototype.swap16=function(){const C=this.length;if(C%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let M=0;M<C;M+=2)I(this,M,M+1);return this},f.prototype.swap32=function(){const C=this.length;if(C%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let M=0;M<C;M+=4)I(this,M,M+3),I(this,M+1,M+2);return this},f.prototype.swap64=function(){const C=this.length;if(C%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let M=0;M<C;M+=8)I(this,M,M+7),I(this,M+1,M+6),I(this,M+2,M+5),I(this,M+3,M+4);return this},f.prototype.toString=function(){const C=this.length;return C===0?"":arguments.length===0?G(this,0,C):j.apply(this,arguments)},f.prototype.toLocaleString=f.prototype.toString,f.prototype.equals=function(C){if(!f.isBuffer(C))throw new TypeError("Argument must be a Buffer");return this===C?!0:f.compare(this,C)===0},f.prototype.inspect=function(){let C="";const M=s.INSPECT_MAX_BYTES;return C=this.toString("hex",0,M).replace(/(.{2})/g,"$1 ").trim(),this.length>M&&(C+=" ... "),"<Buffer "+C+">"},n&&(f.prototype[n]=f.prototype.inspect),f.prototype.compare=function(C,M,z,et,dt){if(Et(C,r)&&(C=f.from(C,C.offset,C.byteLength)),!f.isBuffer(C))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof C);if(M===void 0&&(M=0),z===void 0&&(z=C?C.length:0),et===void 0&&(et=0),dt===void 0&&(dt=this.length),M<0||z>C.length||et<0||dt>this.length)throw new RangeError("out of range index");if(et>=dt&&M>=z)return 0;if(et>=dt)return-1;if(M>=z)return 1;if(M>>>=0,z>>>=0,et>>>=0,dt>>>=0,this===C)return 0;let _t=dt-et,Ot=z-M;const Re=Math.min(_t,Ot),cn=this.slice(et,dt),Ne=C.slice(M,z);for(let _e=0;_e<Re;++_e)if(cn[_e]!==Ne[_e]){_t=cn[_e],Ot=Ne[_e];break}return _t<Ot?-1:Ot<_t?1:0};function O(C,M,z,et,dt){if(C.length===0)return-1;if(typeof z=="string"?(et=z,z=0):z>2147483647?z=2147483647:z<-2147483648&&(z=-2147483648),z=+z,zt(z)&&(z=dt?0:C.length-1),z<0&&(z=C.length+z),z>=C.length){if(dt)return-1;z=C.length-1}else if(z<0)if(dt)z=0;else return-1;if(typeof M=="string"&&(M=f.from(M,et)),f.isBuffer(M))return M.length===0?-1:X(C,M,z,et,dt);if(typeof M=="number")return M=M&255,typeof r.prototype.indexOf=="function"?dt?r.prototype.indexOf.call(C,M,z):r.prototype.lastIndexOf.call(C,M,z):X(C,[M],z,et,dt);throw new TypeError("val must be string, number or Buffer")}function X(C,M,z,et,dt){let _t=1,Ot=C.length,Re=M.length;if(et!==void 0&&(et=String(et).toLowerCase(),et==="ucs2"||et==="ucs-2"||et==="utf16le"||et==="utf-16le")){if(C.length<2||M.length<2)return-1;_t=2,Ot/=2,Re/=2,z/=2}function cn(_e,Oe){return _t===1?_e[Oe]:_e.readUInt16BE(Oe*_t)}let Ne;if(dt){let _e=-1;for(Ne=z;Ne<Ot;Ne++)if(cn(C,Ne)===cn(M,_e===-1?0:Ne-_e)){if(_e===-1&&(_e=Ne),Ne-_e+1===Re)return _e*_t}else _e!==-1&&(Ne-=Ne-_e),_e=-1}else for(z+Re>Ot&&(z=Ot-Re),Ne=z;Ne>=0;Ne--){let _e=!0;for(let Oe=0;Oe<Re;Oe++)if(cn(C,Ne+Oe)!==cn(M,Oe)){_e=!1;break}if(_e)return Ne}return-1}f.prototype.includes=function(C,M,z){return this.indexOf(C,M,z)!==-1},f.prototype.indexOf=function(C,M,z){return O(this,C,M,z,!0)},f.prototype.lastIndexOf=function(C,M,z){return O(this,C,M,z,!1)};function Q(C,M,z,et){z=Number(z)||0;const dt=C.length-z;et?(et=Number(et),et>dt&&(et=dt)):et=dt;const _t=M.length;et>_t/2&&(et=_t/2);let Ot;for(Ot=0;Ot<et;++Ot){const Re=parseInt(M.substr(Ot*2,2),16);if(zt(Re))return Ot;C[z+Ot]=Re}return Ot}function H(C,M,z,et){return It(kt(M,C.length-z),C,z,et)}function J(C,M,z,et){return It(Mt(M),C,z,et)}function N(C,M,z,et){return It(Lt(M),C,z,et)}function tt(C,M,z,et){return It(pt(M,C.length-z),C,z,et)}f.prototype.write=function(C,M,z,et){if(M===void 0)et="utf8",z=this.length,M=0;else if(z===void 0&&typeof M=="string")et=M,z=this.length,M=0;else if(isFinite(M))M=M>>>0,isFinite(z)?(z=z>>>0,et===void 0&&(et="utf8")):(et=z,z=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const dt=this.length-M;if((z===void 0||z>dt)&&(z=dt),C.length>0&&(z<0||M<0)||M>this.length)throw new RangeError("Attempt to write outside buffer bounds");et||(et="utf8");let _t=!1;for(;;)switch(et){case"hex":return Q(this,C,M,z);case"utf8":case"utf-8":return H(this,C,M,z);case"ascii":case"latin1":case"binary":return J(this,C,M,z);case"base64":return N(this,C,M,z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return tt(this,C,M,z);default:if(_t)throw new TypeError("Unknown encoding: "+et);et=(""+et).toLowerCase(),_t=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function $(C,M,z){return M===0&&z===C.length?t.fromByteArray(C):t.fromByteArray(C.slice(M,z))}function G(C,M,z){z=Math.min(C.length,z);const et=[];let dt=M;for(;dt<z;){const _t=C[dt];let Ot=null,Re=_t>239?4:_t>223?3:_t>191?2:1;if(dt+Re<=z){let cn,Ne,_e,Oe;switch(Re){case 1:_t<128&&(Ot=_t);break;case 2:cn=C[dt+1],(cn&192)===128&&(Oe=(_t&31)<<6|cn&63,Oe>127&&(Ot=Oe));break;case 3:cn=C[dt+1],Ne=C[dt+2],(cn&192)===128&&(Ne&192)===128&&(Oe=(_t&15)<<12|(cn&63)<<6|Ne&63,Oe>2047&&(Oe<55296||Oe>57343)&&(Ot=Oe));break;case 4:cn=C[dt+1],Ne=C[dt+2],_e=C[dt+3],(cn&192)===128&&(Ne&192)===128&&(_e&192)===128&&(Oe=(_t&15)<<18|(cn&63)<<12|(Ne&63)<<6|_e&63,Oe>65535&&Oe<1114112&&(Ot=Oe))}}Ot===null?(Ot=65533,Re=1):Ot>65535&&(Ot-=65536,et.push(Ot>>>10&1023|55296),Ot=56320|Ot&1023),et.push(Ot),dt+=Re}return nt(et)}const gt=4096;function nt(C){const M=C.length;if(M<=gt)return String.fromCharCode.apply(String,C);let z="",et=0;for(;et<M;)z+=String.fromCharCode.apply(String,C.slice(et,et+=gt));return z}function Tt(C,M,z){let et="";z=Math.min(C.length,z);for(let dt=M;dt<z;++dt)et+=String.fromCharCode(C[dt]&127);return et}function U(C,M,z){let et="";z=Math.min(C.length,z);for(let dt=M;dt<z;++dt)et+=String.fromCharCode(C[dt]);return et}function W(C,M,z){const et=C.length;(!M||M<0)&&(M=0),(!z||z<0||z>et)&&(z=et);let dt="";for(let _t=M;_t<z;++_t)dt+=Jt[C[_t]];return dt}function st(C,M,z){const et=C.slice(M,z);let dt="";for(let _t=0;_t<et.length-1;_t+=2)dt+=String.fromCharCode(et[_t]+et[_t+1]*256);return dt}f.prototype.slice=function(C,M){const z=this.length;C=~~C,M=M===void 0?z:~~M,C<0?(C+=z,C<0&&(C=0)):C>z&&(C=z),M<0?(M+=z,M<0&&(M=0)):M>z&&(M=z),M<C&&(M=C);const et=this.subarray(C,M);return Object.setPrototypeOf(et,f.prototype),et};function lt(C,M,z){if(C%1!==0||C<0)throw new RangeError("offset is not uint");if(C+M>z)throw new RangeError("Trying to access beyond buffer length")}f.prototype.readUintLE=f.prototype.readUIntLE=function(C,M,z){C=C>>>0,M=M>>>0,z||lt(C,M,this.length);let et=this[C],dt=1,_t=0;for(;++_t<M&&(dt*=256);)et+=this[C+_t]*dt;return et},f.prototype.readUintBE=f.prototype.readUIntBE=function(C,M,z){C=C>>>0,M=M>>>0,z||lt(C,M,this.length);let et=this[C+--M],dt=1;for(;M>0&&(dt*=256);)et+=this[C+--M]*dt;return et},f.prototype.readUint8=f.prototype.readUInt8=function(C,M){return C=C>>>0,M||lt(C,1,this.length),this[C]},f.prototype.readUint16LE=f.prototype.readUInt16LE=function(C,M){return C=C>>>0,M||lt(C,2,this.length),this[C]|this[C+1]<<8},f.prototype.readUint16BE=f.prototype.readUInt16BE=function(C,M){return C=C>>>0,M||lt(C,2,this.length),this[C]<<8|this[C+1]},f.prototype.readUint32LE=f.prototype.readUInt32LE=function(C,M){return C=C>>>0,M||lt(C,4,this.length),(this[C]|this[C+1]<<8|this[C+2]<<16)+this[C+3]*16777216},f.prototype.readUint32BE=f.prototype.readUInt32BE=function(C,M){return C=C>>>0,M||lt(C,4,this.length),this[C]*16777216+(this[C+1]<<16|this[C+2]<<8|this[C+3])},f.prototype.readBigUInt64LE=Ht(function(C){C=C>>>0,rt(C,"offset");const M=this[C],z=this[C+7];(M===void 0||z===void 0)&&K(C,this.length-8);const et=M+this[++C]*2**8+this[++C]*2**16+this[++C]*2**24,dt=this[++C]+this[++C]*2**8+this[++C]*2**16+z*2**24;return BigInt(et)+(BigInt(dt)<<BigInt(32))}),f.prototype.readBigUInt64BE=Ht(function(C){C=C>>>0,rt(C,"offset");const M=this[C],z=this[C+7];(M===void 0||z===void 0)&&K(C,this.length-8);const et=M*2**24+this[++C]*2**16+this[++C]*2**8+this[++C],dt=this[++C]*2**24+this[++C]*2**16+this[++C]*2**8+z;return(BigInt(et)<<BigInt(32))+BigInt(dt)}),f.prototype.readIntLE=function(C,M,z){C=C>>>0,M=M>>>0,z||lt(C,M,this.length);let et=this[C],dt=1,_t=0;for(;++_t<M&&(dt*=256);)et+=this[C+_t]*dt;return dt*=128,et>=dt&&(et-=Math.pow(2,8*M)),et},f.prototype.readIntBE=function(C,M,z){C=C>>>0,M=M>>>0,z||lt(C,M,this.length);let et=M,dt=1,_t=this[C+--et];for(;et>0&&(dt*=256);)_t+=this[C+--et]*dt;return dt*=128,_t>=dt&&(_t-=Math.pow(2,8*M)),_t},f.prototype.readInt8=function(C,M){return C=C>>>0,M||lt(C,1,this.length),this[C]&128?(255-this[C]+1)*-1:this[C]},f.prototype.readInt16LE=function(C,M){C=C>>>0,M||lt(C,2,this.length);const z=this[C]|this[C+1]<<8;return z&32768?z|4294901760:z},f.prototype.readInt16BE=function(C,M){C=C>>>0,M||lt(C,2,this.length);const z=this[C+1]|this[C]<<8;return z&32768?z|4294901760:z},f.prototype.readInt32LE=function(C,M){return C=C>>>0,M||lt(C,4,this.length),this[C]|this[C+1]<<8|this[C+2]<<16|this[C+3]<<24},f.prototype.readInt32BE=function(C,M){return C=C>>>0,M||lt(C,4,this.length),this[C]<<24|this[C+1]<<16|this[C+2]<<8|this[C+3]},f.prototype.readBigInt64LE=Ht(function(C){C=C>>>0,rt(C,"offset");const M=this[C],z=this[C+7];(M===void 0||z===void 0)&&K(C,this.length-8);const et=this[C+4]+this[C+5]*2**8+this[C+6]*2**16+(z<<24);return(BigInt(et)<<BigInt(32))+BigInt(M+this[++C]*2**8+this[++C]*2**16+this[++C]*2**24)}),f.prototype.readBigInt64BE=Ht(function(C){C=C>>>0,rt(C,"offset");const M=this[C],z=this[C+7];(M===void 0||z===void 0)&&K(C,this.length-8);const et=(M<<24)+this[++C]*2**16+this[++C]*2**8+this[++C];return(BigInt(et)<<BigInt(32))+BigInt(this[++C]*2**24+this[++C]*2**16+this[++C]*2**8+z)}),f.prototype.readFloatLE=function(C,M){return C=C>>>0,M||lt(C,4,this.length),e.read(this,C,!0,23,4)},f.prototype.readFloatBE=function(C,M){return C=C>>>0,M||lt(C,4,this.length),e.read(this,C,!1,23,4)},f.prototype.readDoubleLE=function(C,M){return C=C>>>0,M||lt(C,8,this.length),e.read(this,C,!0,52,8)},f.prototype.readDoubleBE=function(C,M){return C=C>>>0,M||lt(C,8,this.length),e.read(this,C,!1,52,8)};function ut(C,M,z,et,dt,_t){if(!f.isBuffer(C))throw new TypeError('"buffer" argument must be a Buffer instance');if(M>dt||M<_t)throw new RangeError('"value" argument is out of bounds');if(z+et>C.length)throw new RangeError("Index out of range")}f.prototype.writeUintLE=f.prototype.writeUIntLE=function(C,M,z,et){if(C=+C,M=M>>>0,z=z>>>0,!et){const Ot=Math.pow(2,8*z)-1;ut(this,C,M,z,Ot,0)}let dt=1,_t=0;for(this[M]=C&255;++_t<z&&(dt*=256);)this[M+_t]=C/dt&255;return M+z},f.prototype.writeUintBE=f.prototype.writeUIntBE=function(C,M,z,et){if(C=+C,M=M>>>0,z=z>>>0,!et){const Ot=Math.pow(2,8*z)-1;ut(this,C,M,z,Ot,0)}let dt=z-1,_t=1;for(this[M+dt]=C&255;--dt>=0&&(_t*=256);)this[M+dt]=C/_t&255;return M+z},f.prototype.writeUint8=f.prototype.writeUInt8=function(C,M,z){return C=+C,M=M>>>0,z||ut(this,C,M,1,255,0),this[M]=C&255,M+1},f.prototype.writeUint16LE=f.prototype.writeUInt16LE=function(C,M,z){return C=+C,M=M>>>0,z||ut(this,C,M,2,65535,0),this[M]=C&255,this[M+1]=C>>>8,M+2},f.prototype.writeUint16BE=f.prototype.writeUInt16BE=function(C,M,z){return C=+C,M=M>>>0,z||ut(this,C,M,2,65535,0),this[M]=C>>>8,this[M+1]=C&255,M+2},f.prototype.writeUint32LE=f.prototype.writeUInt32LE=function(C,M,z){return C=+C,M=M>>>0,z||ut(this,C,M,4,4294967295,0),this[M+3]=C>>>24,this[M+2]=C>>>16,this[M+1]=C>>>8,this[M]=C&255,M+4},f.prototype.writeUint32BE=f.prototype.writeUInt32BE=function(C,M,z){return C=+C,M=M>>>0,z||ut(this,C,M,4,4294967295,0),this[M]=C>>>24,this[M+1]=C>>>16,this[M+2]=C>>>8,this[M+3]=C&255,M+4};function Rt(C,M,z,et,dt){ft(M,et,dt,C,z,7);let _t=Number(M&BigInt(4294967295));C[z++]=_t,_t=_t>>8,C[z++]=_t,_t=_t>>8,C[z++]=_t,_t=_t>>8,C[z++]=_t;let Ot=Number(M>>BigInt(32)&BigInt(4294967295));return C[z++]=Ot,Ot=Ot>>8,C[z++]=Ot,Ot=Ot>>8,C[z++]=Ot,Ot=Ot>>8,C[z++]=Ot,z}function St(C,M,z,et,dt){ft(M,et,dt,C,z,7);let _t=Number(M&BigInt(4294967295));C[z+7]=_t,_t=_t>>8,C[z+6]=_t,_t=_t>>8,C[z+5]=_t,_t=_t>>8,C[z+4]=_t;let Ot=Number(M>>BigInt(32)&BigInt(4294967295));return C[z+3]=Ot,Ot=Ot>>8,C[z+2]=Ot,Ot=Ot>>8,C[z+1]=Ot,Ot=Ot>>8,C[z]=Ot,z+8}f.prototype.writeBigUInt64LE=Ht(function(C,M=0){return Rt(this,C,M,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeBigUInt64BE=Ht(function(C,M=0){return St(this,C,M,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeIntLE=function(C,M,z,et){if(C=+C,M=M>>>0,!et){const Re=Math.pow(2,8*z-1);ut(this,C,M,z,Re-1,-Re)}let dt=0,_t=1,Ot=0;for(this[M]=C&255;++dt<z&&(_t*=256);)C<0&&Ot===0&&this[M+dt-1]!==0&&(Ot=1),this[M+dt]=(C/_t>>0)-Ot&255;return M+z},f.prototype.writeIntBE=function(C,M,z,et){if(C=+C,M=M>>>0,!et){const Re=Math.pow(2,8*z-1);ut(this,C,M,z,Re-1,-Re)}let dt=z-1,_t=1,Ot=0;for(this[M+dt]=C&255;--dt>=0&&(_t*=256);)C<0&&Ot===0&&this[M+dt+1]!==0&&(Ot=1),this[M+dt]=(C/_t>>0)-Ot&255;return M+z},f.prototype.writeInt8=function(C,M,z){return C=+C,M=M>>>0,z||ut(this,C,M,1,127,-128),C<0&&(C=255+C+1),this[M]=C&255,M+1},f.prototype.writeInt16LE=function(C,M,z){return C=+C,M=M>>>0,z||ut(this,C,M,2,32767,-32768),this[M]=C&255,this[M+1]=C>>>8,M+2},f.prototype.writeInt16BE=function(C,M,z){return C=+C,M=M>>>0,z||ut(this,C,M,2,32767,-32768),this[M]=C>>>8,this[M+1]=C&255,M+2},f.prototype.writeInt32LE=function(C,M,z){return C=+C,M=M>>>0,z||ut(this,C,M,4,2147483647,-2147483648),this[M]=C&255,this[M+1]=C>>>8,this[M+2]=C>>>16,this[M+3]=C>>>24,M+4},f.prototype.writeInt32BE=function(C,M,z){return C=+C,M=M>>>0,z||ut(this,C,M,4,2147483647,-2147483648),C<0&&(C=4294967295+C+1),this[M]=C>>>24,this[M+1]=C>>>16,this[M+2]=C>>>8,this[M+3]=C&255,M+4},f.prototype.writeBigInt64LE=Ht(function(C,M=0){return Rt(this,C,M,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),f.prototype.writeBigInt64BE=Ht(function(C,M=0){return St(this,C,M,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ct(C,M,z,et,dt,_t){if(z+et>C.length)throw new RangeError("Index out of range");if(z<0)throw new RangeError("Index out of range")}function xt(C,M,z,et,dt){return M=+M,z=z>>>0,dt||Ct(C,M,z,4),e.write(C,M,z,et,23,4),z+4}f.prototype.writeFloatLE=function(C,M,z){return xt(this,C,M,!0,z)},f.prototype.writeFloatBE=function(C,M,z){return xt(this,C,M,!1,z)};function Bt(C,M,z,et,dt){return M=+M,z=z>>>0,dt||Ct(C,M,z,8),e.write(C,M,z,et,52,8),z+8}f.prototype.writeDoubleLE=function(C,M,z){return Bt(this,C,M,!0,z)},f.prototype.writeDoubleBE=function(C,M,z){return Bt(this,C,M,!1,z)},f.prototype.copy=function(C,M,z,et){if(!f.isBuffer(C))throw new TypeError("argument should be a Buffer");if(z||(z=0),!et&&et!==0&&(et=this.length),M>=C.length&&(M=C.length),M||(M=0),et>0&&et<z&&(et=z),et===z||C.length===0||this.length===0)return 0;if(M<0)throw new RangeError("targetStart out of bounds");if(z<0||z>=this.length)throw new RangeError("Index out of range");if(et<0)throw new RangeError("sourceEnd out of bounds");et>this.length&&(et=this.length),C.length-M<et-z&&(et=C.length-M+z);const dt=et-z;return this===C&&typeof r.prototype.copyWithin=="function"?this.copyWithin(M,z,et):r.prototype.set.call(C,this.subarray(z,et),M),dt},f.prototype.fill=function(C,M,z,et){if(typeof C=="string"){if(typeof M=="string"?(et=M,M=0,z=this.length):typeof z=="string"&&(et=z,z=this.length),et!==void 0&&typeof et!="string")throw new TypeError("encoding must be a string");if(typeof et=="string"&&!f.isEncoding(et))throw new TypeError("Unknown encoding: "+et);if(C.length===1){const _t=C.charCodeAt(0);(et==="utf8"&&_t<128||et==="latin1")&&(C=_t)}}else typeof C=="number"?C=C&255:typeof C=="boolean"&&(C=Number(C));if(M<0||this.length<M||this.length<z)throw new RangeError("Out of range index");if(z<=M)return this;M=M>>>0,z=z===void 0?this.length:z>>>0,C||(C=0);let dt;if(typeof C=="number")for(dt=M;dt<z;++dt)this[dt]=C;else{const _t=f.isBuffer(C)?C:f.from(C,et),Ot=_t.length;if(Ot===0)throw new TypeError('The value "'+C+'" is invalid for argument "value"');for(dt=0;dt<z-M;++dt)this[dt+M]=_t[dt%Ot]}return this};const jt={};function Ut(C,M,z){jt[C]=class extends z{constructor(){super(),Object.defineProperty(this,"message",{value:M.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${C}]`,this.stack,delete this.name}get code(){return C}set code(et){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:et,writable:!0})}toString(){return`${this.name} [${C}]: ${this.message}`}}}Ut("ERR_BUFFER_OUT_OF_BOUNDS",function(C){return C?`${C} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ut("ERR_INVALID_ARG_TYPE",function(C,M){return`The "${C}" argument must be of type number. Received type ${typeof M}`},TypeError),Ut("ERR_OUT_OF_RANGE",function(C,M,z){let et=`The value of "${C}" is out of range.`,dt=z;return Number.isInteger(z)&&Math.abs(z)>2**32?dt=Ft(String(z)):typeof z=="bigint"&&(dt=String(z),(z>BigInt(2)**BigInt(32)||z<-(BigInt(2)**BigInt(32)))&&(dt=Ft(dt)),dt+="n"),et+=` It must be ${M}. Received ${dt}`,et},RangeError);function Ft(C){let M="",z=C.length;const et=C[0]==="-"?1:0;for(;z>=et+4;z-=3)M=`_${C.slice(z-3,z)}${M}`;return`${C.slice(0,z)}${M}`}function L(C,M,z){rt(M,"offset"),(C[M]===void 0||C[M+z]===void 0)&&K(M,C.length-(z+1))}function ft(C,M,z,et,dt,_t){if(C>z||C<M){const Ot=typeof M=="bigint"?"n":"";let Re;throw M===0||M===BigInt(0)?Re=`>= 0${Ot} and < 2${Ot} ** ${(_t+1)*8}${Ot}`:Re=`>= -(2${Ot} ** ${(_t+1)*8-1}${Ot}) and < 2 ** ${(_t+1)*8-1}${Ot}`,new jt.ERR_OUT_OF_RANGE("value",Re,C)}L(et,dt,_t)}function rt(C,M){if(typeof C!="number")throw new jt.ERR_INVALID_ARG_TYPE(M,"number",C)}function K(C,M,z){throw Math.floor(C)!==C?(rt(C,z),new jt.ERR_OUT_OF_RANGE("offset","an integer",C)):M<0?new jt.ERR_BUFFER_OUT_OF_BOUNDS:new jt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${M}`,C)}const Z=/[^+/0-9A-Za-z-_]/g;function ot(C){if(C=C.split("=")[0],C=C.trim().replace(Z,""),C.length<2)return"";for(;C.length%4!==0;)C=C+"=";return C}function kt(C,M){M=M||1/0;let z;const et=C.length;let dt=null;const _t=[];for(let Ot=0;Ot<et;++Ot){if(z=C.charCodeAt(Ot),z>55295&&z<57344){if(!dt){if(z>56319){(M-=3)>-1&&_t.push(239,191,189);continue}else if(Ot+1===et){(M-=3)>-1&&_t.push(239,191,189);continue}dt=z;continue}if(z<56320){(M-=3)>-1&&_t.push(239,191,189),dt=z;continue}z=(dt-55296<<10|z-56320)+65536}else dt&&(M-=3)>-1&&_t.push(239,191,189);if(dt=null,z<128){if((M-=1)<0)break;_t.push(z)}else if(z<2048){if((M-=2)<0)break;_t.push(z>>6|192,z&63|128)}else if(z<65536){if((M-=3)<0)break;_t.push(z>>12|224,z>>6&63|128,z&63|128)}else if(z<1114112){if((M-=4)<0)break;_t.push(z>>18|240,z>>12&63|128,z>>6&63|128,z&63|128)}else throw new Error("Invalid code point")}return _t}function Mt(C){const M=[];for(let z=0;z<C.length;++z)M.push(C.charCodeAt(z)&255);return M}function pt(C,M){let z,et,dt;const _t=[];for(let Ot=0;Ot<C.length&&!((M-=2)<0);++Ot)z=C.charCodeAt(Ot),et=z>>8,dt=z%256,_t.push(dt),_t.push(et);return _t}function Lt(C){return t.toByteArray(ot(C))}function It(C,M,z,et){let dt;for(dt=0;dt<et&&!(dt+z>=M.length||dt>=C.length);++dt)M[dt+z]=C[dt];return dt}function Et(C,M){return C instanceof M||C!=null&&C.constructor!=null&&C.constructor.name!=null&&C.constructor.name===M.name}function zt(C){return C!==C}const Jt=(function(){const C="0123456789abcdef",M=new Array(256);for(let z=0;z<16;++z){const et=z*16;for(let dt=0;dt<16;++dt)M[et+dt]=C[z]+C[dt]}return M})();function Ht(C){return typeof BigInt>"u"?we:C}function we(){throw new Error("BigInt not supported")}})(Pn);const LS=Pn.Buffer,xq=Pn.Blob,wq=Pn.BlobOptions,Aq=Pn.Buffer,Sq=Pn.File,_q=Pn.FileOptions,Eq=Pn.INSPECT_MAX_BYTES,Cq=Pn.SlowBuffer,kq=Pn.TranscodeEncoding,Tq=Pn.atob,Mq=Pn.btoa,Rq=Pn.constants,Pq=Pn.isAscii,Lq=Pn.isUtf8,Dq=Pn.kMaxLength,Nq=Pn.kStringMaxLength,Oq=Pn.resolveObjectURL,Iq=Pn.transcode,jQ=Object.freeze(Object.defineProperty({__proto__:null,Blob:xq,BlobOptions:wq,Buffer:Aq,File:Sq,FileOptions:_q,INSPECT_MAX_BYTES:Eq,SlowBuffer:Cq,TranscodeEncoding:kq,atob:Tq,btoa:Mq,constants:Rq,default:LS,isAscii:Pq,isUtf8:Lq,kMaxLength:Dq,kStringMaxLength:Nq,resolveObjectURL:Oq,transcode:Iq},Symbol.toStringTag,{value:"Module"}));var Tp={};Tp.d=(s,t)=>{for(var e in t)Tp.o(t,e)&&!Tp.o(s,e)&&Object.defineProperty(s,e,{enumerable:!0,get:t[e]})};Tp.o=(s,t)=>Object.prototype.hasOwnProperty.call(s,t);var te=globalThis.pdfjsLib={};Tp.d(te,{AbortException:()=>kc,AnnotationEditorLayer:()=>qX,AnnotationEditorParamsType:()=>ee,AnnotationEditorType:()=>Se,AnnotationEditorUIManager:()=>og,AnnotationLayer:()=>HX,AnnotationMode:()=>Po,CMapCompressionType:()=>NS,ColorPicker:()=>EI,DOMSVGFactory:()=>aC,DrawLayer:()=>YX,FeatureTest:()=>Wi,GlobalWorkerOptions:()=>qo,ImageKind:()=>F0,InvalidPDFException:()=>n3,MissingPDFException:()=>Cc,OPS:()=>$s,Outliner:()=>uE,PDFDataRangeTransport:()=>K3,PDFDateString:()=>c3,PDFWorker:()=>Iy,PasswordResponses:()=>zq,PermissionFlag:()=>Fq,PixelsPerInch:()=>Ju,RenderingCancelledException:()=>oC,TextLayer:()=>hb,UnexpectedResponseException:()=>d1,Util:()=>qt,VerbosityLevel:()=>c1,XfaLayer:()=>J3,build:()=>wX,createValidAbsoluteUrl:()=>Gq,fetchData:()=>v1,getDocument:()=>hX,getFilenameFromUrl:()=>tY,getPdfFilenameFromUrl:()=>eY,getXfaPageViewport:()=>nY,isDataScheme:()=>lC,isPdfFile:()=>cC,noContextMenu:()=>Hi,normalizeUnicode:()=>Kq,renderTextLayer:()=>eX,setLayerDimensions:()=>yc,shadow:()=>Ee,updateTextLayer:()=>nX,version:()=>xX});const mi=typeof se=="object"&&se+""=="[object process]"&&!se.versions.nw&&!(se.versions.electron&&se.type&&se.type!=="browser"),e3=[1,0,0,1,0,0],DS=[.001,0,0,.001,0,0],jq=1e7,TA=1.35,Ds={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},Po={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Bq="pdfjs_internal_editor_",Se={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},ee={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},Fq={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},ei={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},F0={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},kn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},cf={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},c1={ERRORS:0,WARNINGS:1,INFOS:5},NS={NONE:0,BINARY:1},$s={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},zq={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let h1=c1.WARNINGS;function Uq(s){Number.isInteger(s)&&(h1=s)}function Hq(){return h1}function u1(s){h1>=c1.INFOS&&console.log(`Info: ${s}`)}function ue(s){h1>=c1.WARNINGS&&console.log(`Warning: ${s}`)}function He(s){throw new Error(s)}function Mn(s,t){s||He(t)}function Wq(s){switch(s?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Gq(s,t=null,e=null){if(!s)return null;try{if(e&&typeof s=="string"){if(e.addDefaultProtocol&&s.startsWith("www.")){const i=s.match(/\./g);i?.length>=2&&(s=`http://${s}`)}if(e.tryConvertEncoding)try{s=Xq(s)}catch{}}const n=t?new URL(s,t):new URL(s);if(Wq(n))return n}catch{}return null}function Ee(s,t,e,n=!1){return Object.defineProperty(s,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const Ko=(function(){function s(t,e){this.constructor===s&&He("Cannot initialize BaseException."),this.message=t,this.name=e}return s.prototype=new Error,s.constructor=s,s})();class OS extends Ko{constructor(t,e){super(t,"PasswordException"),this.code=e}}class IS extends Ko{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class n3 extends Ko{constructor(t){super(t,"InvalidPDFException")}}class Cc extends Ko{constructor(t){super(t,"MissingPDFException")}}class d1 extends Ko{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class Vq extends Ko{constructor(t){super(t,"FormatError")}}class kc extends Ko{constructor(t){super(t,"AbortException")}}function i3(s){(typeof s!="object"||s?.length===void 0)&&He("Invalid argument for bytesToString");const t=s.length,e=8192;if(t<e)return String.fromCharCode.apply(null,s);const n=[];for(let i=0;i<t;i+=e){const r=Math.min(i+e,t),o=s.subarray(i,r);n.push(String.fromCharCode.apply(null,o))}return n.join("")}function f1(s){typeof s!="string"&&He("Invalid argument for stringToBytes");const t=s.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=s.charCodeAt(n)&255;return e}function $q(s){return String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255)}function sC(s){const t=Object.create(null);for(const[e,n]of s)t[e]=n;return t}function qq(){const s=new Uint8Array(4);return s[0]=1,new Uint32Array(s.buffer,0,1)[0]===1}function Yq(){try{return new Function(""),!0}catch{return!1}}class Wi{static get isLittleEndian(){return Ee(this,"isLittleEndian",qq())}static get isEvalSupported(){return Ee(this,"isEvalSupported",Yq())}static get isOffscreenCanvasSupported(){return Ee(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof navigator?.platform=="string"?Ee(this,"platform",{isMac:navigator.platform.includes("Mac")}):Ee(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){var t,e;return Ee(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const MA=Array.from(Array(256).keys(),s=>s.toString(16).padStart(2,"0"));var hf,a0,qv,jS;class qt{static makeHexColor(t,e,n){return`#${MA[t]}${MA[e]}${MA[n]}`}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){const n=t[0]*e[0]+t[1]*e[2]+e[4],i=t[0]*e[1]+t[1]*e[3]+e[5];return[n,i]}static applyInverseTransform(t,e){const n=e[0]*e[3]-e[1]*e[2],i=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/n,r=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/n;return[i,r]}static getAxialAlignedBoundingBox(t,e){const n=this.applyTransform(t,e),i=this.applyTransform(t.slice(2,4),e),r=this.applyTransform([t[0],t[3]],e),o=this.applyTransform([t[2],t[1]],e);return[Math.min(n[0],i[0],r[0],o[0]),Math.min(n[1],i[1],r[1],o[1]),Math.max(n[0],i[0],r[0],o[0]),Math.max(n[1],i[1],r[1],o[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],n=t[0]*e[0]+t[1]*e[2],i=t[0]*e[1]+t[1]*e[3],r=t[2]*e[0]+t[3]*e[2],o=t[2]*e[1]+t[3]*e[3],c=(n+o)/2,h=Math.sqrt((n+o)**2-4*(n*o-r*i))/2,d=c+h||1,f=c-h||1;return[Math.sqrt(d),Math.sqrt(f)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),i=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>i)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>o?null:[n,r,i,o]}static bezierBoundingBox(t,e,n,i,r,o,c,h,d){return d?(d[0]=Math.min(d[0],t,c),d[1]=Math.min(d[1],e,h),d[2]=Math.max(d[2],t,c),d[3]=Math.max(d[3],e,h)):d=[Math.min(t,c),Math.min(e,h),Math.max(t,c),Math.max(e,h)],q(this,qv,jS).call(this,t,n,r,c,e,i,o,h,3*(-t+3*(n-r)+c),6*(t-2*n+r),3*(n-t),d),q(this,qv,jS).call(this,t,n,r,c,e,i,o,h,3*(-e+3*(i-o)+h),6*(e-2*i+o),3*(i-e),d),d}}hf=new WeakSet,a0=function(s,t,e,n,i,r,o,c,h,d){if(h<=0||h>=1)return;const f=1-h,p=h*h,m=p*h,y=f*(f*(f*s+3*h*t)+3*p*e)+m*n,w=f*(f*(f*i+3*h*r)+3*p*o)+m*c;d[0]=Math.min(d[0],y),d[1]=Math.min(d[1],w),d[2]=Math.max(d[2],y),d[3]=Math.max(d[3],w)},qv=new WeakSet,jS=function(s,t,e,n,i,r,o,c,h,d,f,p){if(Math.abs(h)<1e-12){Math.abs(d)>=1e-12&&q(this,hf,a0).call(this,s,t,e,n,i,r,o,c,-f/d,p);return}const m=d**2-4*f*h;if(m<0)return;const y=Math.sqrt(m),w=2*h;q(this,hf,a0).call(this,s,t,e,n,i,r,o,c,(-d+y)/w,p),q(this,hf,a0).call(this,s,t,e,n,i,r,o,c,(-d-y)/w,p)},B(qt,hf),B(qt,qv);function Xq(s){return decodeURIComponent(escape(s))}let RA=null,gL=null;function Kq(s){return RA||(RA=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,gL=new Map([["","t"]])),s.replaceAll(RA,(t,e,n)=>e?e.normalize("NFKC"):gL.get(n))}function Zq(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const s=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(s);else for(let t=0;t<32;t++)s[t]=Math.floor(Math.random()*255);return i3(s)}const s3="pdfjs_internal_id_",ta={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};class p1{constructor(){this.constructor===p1&&He("Cannot initialize BaseFilterFactory.")}addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,i,r){return"none"}destroy(t=!1){}}class g1{constructor(){this.constructor===g1&&He("Cannot initialize BaseCanvasFactory.")}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d")}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){He("Abstract method `_createCanvas` called.")}}class m1{constructor({baseUrl:t=null,isCompressed:e=!0}){this.constructor===m1&&He("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":""),n=this.isCompressed?NS.BINARY:NS.NONE;return this._fetchData(e,n).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}_fetchData(t,e){He("Abstract method `_fetchData` called.")}}class y1{constructor({baseUrl:t=null}){this.constructor===y1&&He("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetchData(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}_fetchData(t){He("Abstract method `_fetchData` called.")}}class rC{constructor(){this.constructor===rC&&He("Cannot initialize BaseSVGFactory.")}create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width",`${t}px`),i.setAttribute("height",`${e}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${t} ${e}`),i}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){He("Abstract method `_createSVG` called.")}}const sa="http://www.w3.org/2000/svg",Ch=class{};oe(Ch,"CSS",96),oe(Ch,"PDF",72),oe(Ch,"PDF_TO_CSS_UNITS",Ch.CSS/Ch.PDF);let Ju=Ch;var Ql,Sa,fo,ts,z0,kh,Xn,ni,Al,Th,Jl,cu,Mf,U0,BS,r3,H0,FS,Sl,Mh,Rh,uf,Ph,Rf,W0,zS,Lh,Pf;class Qq extends p1{constructor({docId:t,ownerDocument:e=globalThis.document}={}){super(),B(this,Xn),B(this,Al),B(this,Jl),B(this,Mf),B(this,BS),B(this,H0),B(this,Sl),B(this,Rh),B(this,Ph),B(this,W0),B(this,Lh),B(this,Ql,void 0),B(this,Sa,void 0),B(this,fo,void 0),B(this,ts,void 0),B(this,z0,void 0),B(this,kh,0),Y(this,fo,t),Y(this,ts,e)}addFilter(t){if(!t)return"none";let e=v(this,Xn,ni).get(t);if(e)return e;const[n,i,r]=q(this,Mf,U0).call(this,t),o=t.length===1?n:`${n}${i}${r}`;if(e=v(this,Xn,ni).get(o),e)return v(this,Xn,ni).set(t,e),e;const c=`g_${v(this,fo)}_transfer_map_${js(this,kh)._++}`,h=`url(#${c})`;v(this,Xn,ni).set(t,h),v(this,Xn,ni).set(o,h);const d=q(this,Sl,Mh).call(this,c);return q(this,Ph,Rf).call(this,n,i,r,d),h}addHCMFilter(t,e){var n;const i=`${t}-${e}`,r="base";let o=v(this,Al,Th).get(r);if(o?.key===i||(o?((n=o.filter)==null||n.remove(),o.key=i,o.url="none",o.filter=null):(o={key:i,url:"none",filter:null},v(this,Al,Th).set(r,o)),!t||!e))return o.url;const c=q(this,Lh,Pf).call(this,t);t=qt.makeHexColor(...c);const h=q(this,Lh,Pf).call(this,e);if(e=qt.makeHexColor(...h),v(this,Jl,cu).style.color="",t==="#000000"&&e==="#ffffff"||t===e)return o.url;const d=new Array(256);for(let w=0;w<=255;w++){const b=w/255;d[w]=b<=.03928?b/12.92:((b+.055)/1.055)**2.4}const f=d.join(","),p=`g_${v(this,fo)}_hcm_filter`,m=o.filter=q(this,Sl,Mh).call(this,p);q(this,Ph,Rf).call(this,f,f,f,m),q(this,H0,FS).call(this,m);const y=(w,b)=>{const E=c[w]/255,_=h[w]/255,k=new Array(b+1);for(let T=0;T<=b;T++)k[T]=E+T/b*(_-E);return k.join(",")};return q(this,Ph,Rf).call(this,y(0,5),y(1,5),y(2,5),m),o.url=`url(#${p})`,o.url}addAlphaFilter(t){let e=v(this,Xn,ni).get(t);if(e)return e;const[n]=q(this,Mf,U0).call(this,[t]),i=`alpha_${n}`;if(e=v(this,Xn,ni).get(i),e)return v(this,Xn,ni).set(t,e),e;const r=`g_${v(this,fo)}_alpha_map_${js(this,kh)._++}`,o=`url(#${r})`;v(this,Xn,ni).set(t,o),v(this,Xn,ni).set(i,o);const c=q(this,Sl,Mh).call(this,r);return q(this,W0,zS).call(this,n,c),o}addLuminosityFilter(t){let e=v(this,Xn,ni).get(t||"luminosity");if(e)return e;let n,i;if(t?([n]=q(this,Mf,U0).call(this,[t]),i=`luminosity_${n}`):i="luminosity",e=v(this,Xn,ni).get(i),e)return v(this,Xn,ni).set(t,e),e;const r=`g_${v(this,fo)}_luminosity_map_${js(this,kh)._++}`,o=`url(#${r})`;v(this,Xn,ni).set(t,o),v(this,Xn,ni).set(i,o);const c=q(this,Sl,Mh).call(this,r);return q(this,BS,r3).call(this,c),t&&q(this,W0,zS).call(this,n,c),o}addHighlightHCMFilter(t,e,n,i,r){var o;const c=`${e}-${n}-${i}-${r}`;let h=v(this,Al,Th).get(t);if(h?.key===c||(h?((o=h.filter)==null||o.remove(),h.key=c,h.url="none",h.filter=null):(h={key:c,url:"none",filter:null},v(this,Al,Th).set(t,h)),!e||!n))return h.url;const[d,f]=[e,n].map(q(this,Lh,Pf).bind(this));let p=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),m=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[y,w]=[i,r].map(q(this,Lh,Pf).bind(this));m<p&&([p,m,y,w]=[m,p,w,y]),v(this,Jl,cu).style.color="";const b=(k,T,R)=>{const D=new Array(256),F=(m-p)/R,j=k/255,I=(T-k)/(255*R);let O=0;for(let X=0;X<=R;X++){const Q=Math.round(p+X*F),H=j+X*I;for(let J=O;J<=Q;J++)D[J]=H;O=Q+1}for(let X=O;X<256;X++)D[X]=D[O-1];return D.join(",")},E=`g_${v(this,fo)}_hcm_${t}_filter`,_=h.filter=q(this,Sl,Mh).call(this,E);return q(this,H0,FS).call(this,_),q(this,Ph,Rf).call(this,b(y[0],w[0],5),b(y[1],w[1],5),b(y[2],w[2],5),_),h.url=`url(#${E})`,h.url}destroy(t=!1){t&&v(this,Al,Th).size!==0||(v(this,Sa)&&(v(this,Sa).parentNode.parentNode.remove(),Y(this,Sa,null)),v(this,Ql)&&(v(this,Ql).clear(),Y(this,Ql,null)),Y(this,kh,0))}}Ql=new WeakMap,Sa=new WeakMap,fo=new WeakMap,ts=new WeakMap,z0=new WeakMap,kh=new WeakMap,Xn=new WeakSet,ni=function(){return v(this,Ql)||Y(this,Ql,new Map)},Al=new WeakSet,Th=function(){return v(this,z0)||Y(this,z0,new Map)},Jl=new WeakSet,cu=function(){if(!v(this,Sa)){const s=v(this,ts).createElement("div"),{style:t}=s;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const e=v(this,ts).createElementNS(sa,"svg");e.setAttribute("width",0),e.setAttribute("height",0),Y(this,Sa,v(this,ts).createElementNS(sa,"defs")),s.append(e),e.append(v(this,Sa)),v(this,ts).body.append(s)}return v(this,Sa)},Mf=new WeakSet,U0=function(s){if(s.length===1){const c=s[0],h=new Array(256);for(let f=0;f<256;f++)h[f]=c[f]/255;const d=h.join(",");return[d,d,d]}const[t,e,n]=s,i=new Array(256),r=new Array(256),o=new Array(256);for(let c=0;c<256;c++)i[c]=t[c]/255,r[c]=e[c]/255,o[c]=n[c]/255;return[i.join(","),r.join(","),o.join(",")]},BS=new WeakSet,r3=function(s){const t=v(this,ts).createElementNS(sa,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),s.append(t)},H0=new WeakSet,FS=function(s){const t=v(this,ts).createElementNS(sa,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),s.append(t)},Sl=new WeakSet,Mh=function(s){const t=v(this,ts).createElementNS(sa,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",s),v(this,Jl,cu).append(t),t},Rh=new WeakSet,uf=function(s,t,e){const n=v(this,ts).createElementNS(sa,t);n.setAttribute("type","discrete"),n.setAttribute("tableValues",e),s.append(n)},Ph=new WeakSet,Rf=function(s,t,e,n){const i=v(this,ts).createElementNS(sa,"feComponentTransfer");n.append(i),q(this,Rh,uf).call(this,i,"feFuncR",s),q(this,Rh,uf).call(this,i,"feFuncG",t),q(this,Rh,uf).call(this,i,"feFuncB",e)},W0=new WeakSet,zS=function(s,t){const e=v(this,ts).createElementNS(sa,"feComponentTransfer");t.append(e),q(this,Rh,uf).call(this,e,"feFuncA",s)},Lh=new WeakSet,Pf=function(s){return v(this,Jl,cu).style.color=s,hC(getComputedStyle(v(this,Jl,cu)).getPropertyValue("color"))};class Jq extends g1{constructor({ownerDocument:t=globalThis.document}={}){super(),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}async function v1(s,t="text"){if(Lf(s,document.baseURI)){const e=await fetch(s);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const i=new XMLHttpRequest;i.open("GET",s,!0),i.responseType=t,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(i.response);return}e(i.responseText);return}n(new Error(i.statusText))}},i.send(null)})}class a3 extends m1{_fetchData(t,e){return v1(t,this.isCompressed?"arraybuffer":"text").then(n=>({cMapData:n instanceof ArrayBuffer?new Uint8Array(n):f1(n),compressionType:e}))}}class o3 extends y1{_fetchData(t){return v1(t,"arraybuffer").then(e=>new Uint8Array(e))}}class aC extends rC{_createSVG(t){return document.createElementNS(sa,t)}}class xg{constructor({viewBox:t,scale:e,rotation:n,offsetX:i=0,offsetY:r=0,dontFlip:o=!1}){this.viewBox=t,this.scale=e,this.rotation=n,this.offsetX=i,this.offsetY=r;const c=(t[2]+t[0])/2,h=(t[3]+t[1])/2;let d,f,p,m;switch(n%=360,n<0&&(n+=360),n){case 180:d=-1,f=0,p=0,m=1;break;case 90:d=0,f=1,p=1,m=0;break;case 270:d=0,f=-1,p=-1,m=0;break;case 0:d=1,f=0,p=0,m=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(p=-p,m=-m);let y,w,b,E;d===0?(y=Math.abs(h-t[1])*e+i,w=Math.abs(c-t[0])*e+r,b=(t[3]-t[1])*e,E=(t[2]-t[0])*e):(y=Math.abs(c-t[0])*e+i,w=Math.abs(h-t[1])*e+r,b=(t[2]-t[0])*e,E=(t[3]-t[1])*e),this.transform=[d*e,f*e,p*e,m*e,y-d*e*c-p*e*h,w-f*e*c-m*e*h],this.width=b,this.height=E}get rawDims(){const{viewBox:t}=this;return Ee(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:r=!1}={}){return new xg({viewBox:this.viewBox.slice(),scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:r})}convertToViewportPoint(t,e){return qt.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=qt.applyTransform([t[0],t[1]],this.transform),n=qt.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){return qt.applyInverseTransform([t,e],this.transform)}}class oC extends Ko{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function lC(s){const t=s.length;let e=0;for(;e<t&&s[e].trim()==="";)e++;return s.substring(e,e+5).toLowerCase()==="data:"}function cC(s){return typeof s=="string"&&/\.pdf$/i.test(s)}function tY(s){return[s]=s.split(/[#?]/,1),s.substring(s.lastIndexOf("/")+1)}function eY(s,t="document.pdf"){if(typeof s!="string")return t;if(lC(s))return ue('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=e.exec(s);let r=n.exec(i[1])||n.exec(i[2])||n.exec(i[3]);if(r&&(r=r[0],r.includes("%")))try{r=n.exec(decodeURIComponent(r))[0]}catch{}return r||t}class mL{constructor(){oe(this,"started",Object.create(null)),oe(this,"times",[])}time(t){t in this.started&&ue(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||ue(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:i,end:r}of this.times)t.push(`${n.padEnd(e)} ${r-i}ms
`);return t.join("")}}function Lf(s,t){try{const{protocol:e}=t?new URL(s,t):new URL(s);return e==="http:"||e==="https:"}catch{return!1}}function Hi(s){s.preventDefault()}function l3(s){console.log("Deprecated API usage: "+s)}let PA;class c3{static toDateObject(t){if(!t||typeof t!="string")return null;PA||(PA=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=PA.exec(t);if(!e)return null;const n=parseInt(e[1],10);let i=parseInt(e[2],10);i=i>=1&&i<=12?i-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let c=parseInt(e[5],10);c=c>=0&&c<=59?c:0;let h=parseInt(e[6],10);h=h>=0&&h<=59?h:0;const d=e[7]||"Z";let f=parseInt(e[8],10);f=f>=0&&f<=23?f:0;let p=parseInt(e[9],10)||0;return p=p>=0&&p<=59?p:0,d==="-"?(o+=f,c+=p):d==="+"&&(o-=f,c-=p),new Date(Date.UTC(n,i,r,o,c,h))}}function nY(s,{scale:t=1,rotation:e=0}){const{width:n,height:i}=s.attributes.style,r=[0,0,parseInt(n),parseInt(i)];return new xg({viewBox:r,scale:t,rotation:e})}function hC(s){if(s.startsWith("#")){const t=parseInt(s.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return s.startsWith("rgb(")?s.slice(4,-1).split(",").map(t=>parseInt(t)):s.startsWith("rgba(")?s.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(ue(`Not a valid color format: "${s}"`),[0,0,0])}function iY(s){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const e of s.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;s.set(e,hC(n))}t.remove()}function sn(s){const{a:t,b:e,c:n,d:i,e:r,f:o}=s.getTransform();return[t,e,n,i,r,o]}function ea(s){const{a:t,b:e,c:n,d:i,e:r,f:o}=s.getTransform().invertSelf();return[t,e,n,i,r,o]}function yc(s,t,e=!1,n=!0){if(t instanceof xg){const{pageWidth:i,pageHeight:r}=t.rawDims,{style:o}=s,c=Wi.isCSSRoundSupported,h=`var(--scale-factor) * ${i}px`,d=`var(--scale-factor) * ${r}px`,f=c?`round(${h}, 1px)`:`calc(${h})`,p=c?`round(${d}, 1px)`:`calc(${d})`;!e||t.rotation%180===0?(o.width=f,o.height=p):(o.width=p,o.height=f)}n&&s.setAttribute("data-main-rotation",t.rotation)}var Dh,Nh,_a,hu,US,h3,HS,yL,WS,vL,Mp,Yv,GS,u3,G0,VS;const d3=class f3{constructor(t){B(this,HS),B(this,WS),B(this,Mp),B(this,GS),B(this,G0),B(this,Dh,null),B(this,Nh,null),B(this,_a,void 0),B(this,hu,null),Y(this,_a,t)}render(){const t=Y(this,Dh,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Hi),t.addEventListener("pointerdown",q(f3,US,h3));const e=Y(this,hu,document.createElement("div"));e.className="buttons",t.append(e);const n=v(this,_a).toolbarPosition;if(n){const{style:i}=t,r=v(this,_a)._uiManager.direction==="ltr"?1-n[0]:n[0];i.insetInlineEnd=`${100*r}%`,i.top=`calc(${100*n[1]}% + var(--editor-toolbar-vert-offset))`}return q(this,GS,u3).call(this),t}hide(){var t;v(this,Dh).classList.add("hidden"),(t=v(this,Nh))==null||t.hideDropdown()}show(){v(this,Dh).classList.remove("hidden")}addAltTextButton(t){q(this,Mp,Yv).call(this,t),v(this,hu).prepend(t,v(this,G0,VS))}addColorPicker(t){Y(this,Nh,t);const e=t.renderButton();q(this,Mp,Yv).call(this,e),v(this,hu).prepend(e,v(this,G0,VS))}remove(){var t;v(this,Dh).remove(),(t=v(this,Nh))==null||t.destroy(),Y(this,Nh,null)}};Dh=new WeakMap,Nh=new WeakMap,_a=new WeakMap,hu=new WeakMap,US=new WeakSet,h3=function(s){s.stopPropagation()},HS=new WeakSet,yL=function(s){v(this,_a)._focusEventsAllowed=!1,s.preventDefault(),s.stopPropagation()},WS=new WeakSet,vL=function(s){v(this,_a)._focusEventsAllowed=!0,s.preventDefault(),s.stopPropagation()},Mp=new WeakSet,Yv=function(s){s.addEventListener("focusin",q(this,HS,yL).bind(this),{capture:!0}),s.addEventListener("focusout",q(this,WS,vL).bind(this),{capture:!0}),s.addEventListener("contextmenu",Hi)},GS=new WeakSet,u3=function(){const s=document.createElement("button");s.className="delete",s.tabIndex=0,s.setAttribute("data-l10n-id",`pdfjs-editor-remove-${v(this,_a).editorType}-button`),q(this,Mp,Yv).call(this,s),s.addEventListener("click",t=>{v(this,_a)._uiManager.delete()}),v(this,hu).append(s)},G0=new WeakSet,VS=function(){const s=document.createElement("div");return s.className="divider",s},B(d3,US);let sY=d3;var V0,Ul,Xv,$S,p3,qS,g3,YS,bL;class rY{constructor(t){B(this,$S),B(this,qS),B(this,YS),B(this,V0,null),B(this,Ul,null),B(this,Xv,void 0),Y(this,Xv,t)}show(t,e,n){const[i,r]=q(this,qS,g3).call(this,e,n),{style:o}=v(this,Ul)||Y(this,Ul,q(this,$S,p3).call(this));t.append(v(this,Ul)),o.insetInlineEnd=`${100*i}%`,o.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){v(this,Ul).remove()}}V0=new WeakMap,Ul=new WeakMap,Xv=new WeakMap,$S=new WeakSet,p3=function(){const s=Y(this,Ul,document.createElement("div"));s.className="editToolbar",s.setAttribute("role","toolbar"),s.addEventListener("contextmenu",Hi);const t=Y(this,V0,document.createElement("div"));return t.className="buttons",s.append(t),q(this,YS,bL).call(this),s},qS=new WeakSet,g3=function(s,t){let e=0,n=0;for(const i of s){const r=i.y+i.height;if(r<e)continue;const o=i.x+(t?i.width:0);if(r>e){n=o,e=r;continue}t?o>n&&(n=o):o<n&&(n=o)}return[t?1-n:n,e]},YS=new WeakSet,bL=function(){const s=document.createElement("button");s.className="highlightButton",s.tabIndex=0,s.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");s.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label"),s.addEventListener("contextmenu",Hi),s.addEventListener("click",()=>{v(this,Xv).highlightSelection("floating_button")}),v(this,V0).append(s)};function Kv(s,t,e){for(const n of e)t.addEventListener(n,s[n].bind(s))}function aY(s){return Math.round(Math.min(255,Math.max(1,255*s))).toString(16).padStart(2,"0")}var XS;class oY{constructor(){B(this,XS,0)}get id(){return`${Bq}${js(this,XS)._++}`}}XS=new WeakMap;var Zv,KS,zi,$0,ZS;const m3=class{constructor(){B(this,$0),B(this,Zv,Zq()),B(this,KS,0),B(this,zi,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',e=new OffscreenCanvas(1,3).getContext("2d"),n=new Image;n.src=t;const i=n.decode().then(()=>(e.drawImage(n,0,0,1,1,0,0,1,3),new Uint32Array(e.getImageData(0,0,1,1).data.buffer)[0]===0));return Ee(this,"_isSVGFittingCanvas",i)}async getFromFile(t){const{lastModified:e,name:n,size:i,type:r}=t;return q(this,$0,ZS).call(this,`${e}_${n}_${i}_${r}`,t)}async getFromUrl(t){return q(this,$0,ZS).call(this,t,t)}async getFromId(t){v(this,zi)||Y(this,zi,new Map);const e=v(this,zi).get(t);return e?e.bitmap?(e.refCounter+=1,e):e.file?this.getFromFile(e.file):this.getFromUrl(e.url):null}getSvgUrl(t){const e=v(this,zi).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){v(this,zi)||Y(this,zi,new Map);const e=v(this,zi).get(t);e&&(e.refCounter-=1,e.refCounter===0&&(e.bitmap=null))}isValidId(t){return t.startsWith(`image_${v(this,Zv)}_`)}};Zv=new WeakMap,KS=new WeakMap,zi=new WeakMap,$0=new WeakSet,ZS=async function(s,t){v(this,zi)||Y(this,zi,new Map);let e=v(this,zi).get(s);if(e===null)return null;if(e!=null&&e.bitmap)return e.refCounter+=1,e;try{e||(e={bitmap:null,id:`image_${v(this,Zv)}_${js(this,KS)._++}`,refCounter:0,isSvg:!1});let n;if(typeof t=="string"?(e.url=t,n=await v1(t,"blob")):n=e.file=t,n.type==="image/svg+xml"){const i=m3._isSVGFittingCanvas,r=new FileReader,o=new Image,c=new Promise((h,d)=>{o.onload=()=>{e.bitmap=o,e.isSvg=!0,h()},r.onload=async()=>{const f=e.svgUrl=r.result;o.src=await i?`${f}#svgView(preserveAspectRatio(none))`:f},o.onerror=r.onerror=d});r.readAsDataURL(n),await c}else e.bitmap=await createImageBitmap(n);e.refCounter=1}catch(n){console.error(n),e=null}return v(this,zi).set(s,e),e&&v(this,zi).set(e.id,e),e};let lY=m3;var Kn,_l,q0,Tn;class cY{constructor(t=128){B(this,Kn,[]),B(this,_l,!1),B(this,q0,void 0),B(this,Tn,-1),Y(this,q0,t)}add({cmd:t,undo:e,post:n,mustExec:i,type:r=NaN,overwriteIfSameType:o=!1,keepUndo:c=!1}){if(i&&t(),v(this,_l))return;const h={cmd:t,undo:e,post:n,type:r};if(v(this,Tn)===-1){v(this,Kn).length>0&&(v(this,Kn).length=0),Y(this,Tn,0),v(this,Kn).push(h);return}if(o&&v(this,Kn)[v(this,Tn)].type===r){c&&(h.undo=v(this,Kn)[v(this,Tn)].undo),v(this,Kn)[v(this,Tn)]=h;return}const d=v(this,Tn)+1;d===v(this,q0)?v(this,Kn).splice(0,1):(Y(this,Tn,d),d<v(this,Kn).length&&v(this,Kn).splice(d)),v(this,Kn).push(h)}undo(){if(v(this,Tn)===-1)return;Y(this,_l,!0);const{undo:t,post:e}=v(this,Kn)[v(this,Tn)];t(),e?.(),Y(this,_l,!1),Y(this,Tn,v(this,Tn)-1)}redo(){if(v(this,Tn)<v(this,Kn).length-1){Y(this,Tn,v(this,Tn)+1),Y(this,_l,!0);const{cmd:t,post:e}=v(this,Kn)[v(this,Tn)];t(),e?.(),Y(this,_l,!1)}}hasSomethingToUndo(){return v(this,Tn)!==-1}hasSomethingToRedo(){return v(this,Tn)<v(this,Kn).length-1}destroy(){Y(this,Kn,null)}}Kn=new WeakMap,_l=new WeakMap,q0=new WeakMap,Tn=new WeakMap;var QS,y3;class wg{constructor(t){B(this,QS),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Wi.platform;for(const[n,i,r={}]of t)for(const o of n){const c=o.startsWith("mac+");e&&c?(this.callbacks.set(o.slice(4),{callback:i,options:r}),this.allKeys.add(o.split("+").at(-1))):!e&&!c&&(this.callbacks.set(o,{callback:i,options:r}),this.allKeys.add(o.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(q(this,QS,y3).call(this,e));if(!n)return;const{callback:i,options:{bubbles:r=!1,args:o=[],checker:c=null}}=n;c&&!c(t,e)||(i.bind(t,...o,e)(),r||(e.stopPropagation(),e.preventDefault()))}}QS=new WeakSet,y3=function(s){s.altKey&&this.buffer.push("alt"),s.ctrlKey&&this.buffer.push("ctrl"),s.metaKey&&this.buffer.push("meta"),s.shiftKey&&this.buffer.push("shift"),this.buffer.push(s.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const v3=class b3{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return iY(t),Ee(this,"_colors",t)}convert(t){const e=hC(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,i]of this._colors)if(i.every((r,o)=>r===e[o]))return b3._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?qt.makeHexColor(...e):t}};oe(v3,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let hY=v3;var Ts,Bn,ai,Df,po,Oh,ur,Nf,Ih,ra,go,jh,Qv,Y0,aa,Of,Hl,_r,JS,Wl,X0,Bh,K0,If,ui,ze,mo,Fh,jf,Z0,Q0,J0,ty,ey,ny,iy,sy,ry,ay,oy,ly,cy,El,oa,yo,hy,Rp,uy,t_,xL,e_,x3,Pp,Jv,n_,w3,i_,A3,s_,S3,dy,r_,fy,a_,py,o_,gy,l_,my,c_,li,xi,ya,ko,h_,_3,u_,E3,yy,d_,f_,C3,zh,Bf,vy,p_;const g_=class m_{constructor(t,e,n,i,r,o,c,h,d){B(this,Rp),B(this,t_),B(this,e_),B(this,Pp),B(this,n_),B(this,i_),B(this,s_),B(this,dy),B(this,fy),B(this,py),B(this,gy),B(this,my),B(this,li),B(this,ya),B(this,h_),B(this,u_),B(this,yy),B(this,f_),B(this,zh),B(this,vy),B(this,Ts,null),B(this,Bn,new Map),B(this,ai,new Map),B(this,Df,null),B(this,po,null),B(this,Oh,null),B(this,ur,new cY),B(this,Nf,0),B(this,Ih,new Set),B(this,ra,null),B(this,go,null),B(this,jh,new Set),B(this,Qv,!1),B(this,Y0,null),B(this,aa,null),B(this,Of,null),B(this,Hl,!1),B(this,_r,null),B(this,JS,new oY),B(this,Wl,!1),B(this,X0,!1),B(this,Bh,null),B(this,K0,null),B(this,If,null),B(this,ui,Se.NONE),B(this,ze,new Set),B(this,mo,null),B(this,Fh,null),B(this,jf,null),B(this,Z0,this.blur.bind(this)),B(this,Q0,this.focus.bind(this)),B(this,J0,this.copy.bind(this)),B(this,ty,this.cut.bind(this)),B(this,ey,this.paste.bind(this)),B(this,ny,this.keydown.bind(this)),B(this,iy,this.keyup.bind(this)),B(this,sy,this.onEditingAction.bind(this)),B(this,ry,this.onPageChanging.bind(this)),B(this,ay,this.onScaleChanging.bind(this)),B(this,oy,q(this,e_,x3).bind(this)),B(this,ly,this.onRotationChanging.bind(this)),B(this,cy,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1}),B(this,El,[0,0]),B(this,oa,null),B(this,yo,null),B(this,hy,null),Y(this,yo,t),Y(this,hy,e),Y(this,Df,n),this._eventBus=i,this._eventBus._on("editingaction",v(this,sy)),this._eventBus._on("pagechanging",v(this,ry)),this._eventBus._on("scalechanging",v(this,ay)),this._eventBus._on("rotationchanging",v(this,ly)),q(this,n_,w3).call(this),q(this,fy,a_).call(this),Y(this,po,r.annotationStorage),Y(this,Y0,r.filterFactory),Y(this,Fh,o),Y(this,Of,c||null),Y(this,Qv,h),Y(this,If,d||null),this.viewParameters={realScale:Ju.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const t=m_.prototype,e=o=>v(o,yo).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),n=(o,{target:c})=>{if(c instanceof HTMLInputElement){const{type:h}=c;return h!=="text"&&h!=="number"}return!0},i=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return Ee(this,"_keyboardManager",new wg([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(o,{target:c})=>!(c instanceof HTMLButtonElement)&&v(o,yo).contains(c)&&!o.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(o,{target:c})=>!(c instanceof HTMLButtonElement)&&v(o,yo).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}destroy(){var t,e;q(this,py,o_).call(this),q(this,dy,r_).call(this),this._eventBus._off("editingaction",v(this,sy)),this._eventBus._off("pagechanging",v(this,ry)),this._eventBus._off("scalechanging",v(this,ay)),this._eventBus._off("rotationchanging",v(this,ly));for(const n of v(this,ai).values())n.destroy();v(this,ai).clear(),v(this,Bn).clear(),v(this,jh).clear(),Y(this,Ts,null),v(this,ze).clear(),v(this,ur).destroy(),(t=v(this,Df))==null||t.destroy(),(e=v(this,_r))==null||e.hide(),Y(this,_r,null),v(this,aa)&&(clearTimeout(v(this,aa)),Y(this,aa,null)),v(this,oa)&&(clearTimeout(v(this,oa)),Y(this,oa,null)),q(this,i_,A3).call(this)}async mlGuess(t){var e;return((e=v(this,If))==null?void 0:e.guess(t))||null}get hasMLManager(){return!!v(this,If)}get hcmFilter(){return Ee(this,"hcmFilter",v(this,Fh)?v(this,Y0).addHCMFilter(v(this,Fh).foreground,v(this,Fh).background):"none")}get direction(){return Ee(this,"direction",getComputedStyle(v(this,yo)).direction)}get highlightColors(){return Ee(this,"highlightColors",v(this,Of)?new Map(v(this,Of).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return Ee(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setMainHighlightColorPicker(t){Y(this,K0,t)}editAltText(t){var e;(e=v(this,Df))==null||e.editAltText(this,t)}onPageChanging({pageNumber:t}){Y(this,Nf,t-1)}focusMainContainer(){v(this,yo).focus()}findParent(t,e){for(const n of v(this,ai).values()){const{x:i,y:r,width:o,height:c}=n.div.getBoundingClientRect();if(t>=i&&t<=i+o&&e>=r&&e<=r+c)return n}return null}disableUserSelect(t=!1){v(this,hy).classList.toggle("noUserSelect",t)}addShouldRescale(t){v(this,jh).add(t)}removeShouldRescale(t){v(this,jh).delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*Ju.PDF_TO_CSS_UNITS;for(const e of v(this,jh))e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:o}=e,c=e.toString(),h=q(this,Rp,uy).call(this,e).closest(".textLayer"),d=this.getSelectionBoxes(h);if(d){e.empty(),v(this,ui)===Se.NONE&&(this._eventBus.dispatch("showannotationeditorui",{source:this,mode:Se.HIGHLIGHT}),this.showAllEditors("highlight",!0,!0));for(const f of v(this,ai).values())if(f.hasTextLayer(h)){f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:d,anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:o,text:c});break}}}addToAnnotationStorage(t){!t.isEmpty()&&v(this,po)&&!v(this,po).has(t.id)&&v(this,po).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,v(this,Hl)&&(Y(this,Hl,!1),q(this,Pp,Jv).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of v(this,ze))if(e.div.contains(t)){Y(this,Bh,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!v(this,Bh))return;const[t,e]=v(this,Bh);Y(this,Bh,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0}),e.focus()}addEditListeners(){q(this,fy,a_).call(this),q(this,gy,l_).call(this)}removeEditListeners(){q(this,py,o_).call(this),q(this,my,c_).call(this)}copy(t){var e;if(t.preventDefault(),(e=v(this,Ts))==null||e.commitOrRemove(),!this.hasSelection)return;const n=[];for(const i of v(this,ze)){const r=i.serialize(!0);r&&n.push(r)}n.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(t){this.copy(t),this.delete()}paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const o of v(this,go))if(o.isHandlingMimeForPasting(r.type)){o.paste(r,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(r){ue(`paste: "${r.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const r=[];for(const h of n){const d=i.deserialize(h);if(!d)return;r.push(d)}const o=()=>{for(const h of r)q(this,yy,d_).call(this,h);q(this,vy,p_).call(this,r)},c=()=>{for(const h of r)h.remove()};this.addCommands({cmd:o,undo:c,mustExec:!0})}catch(r){ue(`paste: "${r.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),v(this,ui)!==Se.NONE&&!this.isEditorHandlingKeyboard&&m_._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,v(this,Hl)&&(Y(this,Hl,!1),q(this,Pp,Jv).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(q(this,s_,S3).call(this),q(this,gy,l_).call(this),q(this,li,xi).call(this,{isEditing:v(this,ui)!==Se.NONE,isEmpty:q(this,zh,Bf).call(this),hasSomethingToUndo:v(this,ur).hasSomethingToUndo(),hasSomethingToRedo:v(this,ur).hasSomethingToRedo(),hasSelectedEditor:!1})):(q(this,dy,r_).call(this),q(this,my,c_).call(this),q(this,li,xi).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!v(this,go)){Y(this,go,t);for(const e of v(this,go))q(this,ya,ko).call(this,e.defaultPropertiesToUpdate)}}getId(){return v(this,JS).id}get currentLayer(){return v(this,ai).get(v(this,Nf))}getLayer(t){return v(this,ai).get(t)}get currentPageIndex(){return v(this,Nf)}addLayer(t){v(this,ai).set(t.pageIndex,t),v(this,Wl)?t.enable():t.disable()}removeLayer(t){v(this,ai).delete(t.pageIndex)}updateMode(t,e=null,n=!1){if(v(this,ui)!==t){if(Y(this,ui,t),t===Se.NONE){this.setEditingState(!1),q(this,u_,E3).call(this);return}this.setEditingState(!0),q(this,h_,_3).call(this),this.unselectAll();for(const i of v(this,ai).values())i.updateMode(t);if(!e&&n){this.addNewEditorFromKeyboard();return}if(e){for(const i of v(this,Bn).values())if(i.annotationElementId===e){this.setSelected(i),i.enterInEditMode();break}}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==v(this,ui)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var n;if(v(this,go)){switch(t){case ee.CREATE:this.currentLayer.addNewEditor();return;case ee.HIGHLIGHT_DEFAULT_COLOR:(n=v(this,K0))==null||n.updateColor(e);break;case ee.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(v(this,jf)||Y(this,jf,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const i of v(this,ze))i.updateParams(t,e);for(const i of v(this,go))i.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){var i;for(const r of v(this,Bn).values())r.editorType===t&&r.show(e);(((i=v(this,jf))==null?void 0:i.get(ee.HIGHLIGHT_SHOW_ALL))??!0)!==e&&q(this,ya,ko).call(this,[[ee.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(v(this,X0)!==t){Y(this,X0,t);for(const e of v(this,ai).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const n of v(this,Bn).values())n.pageIndex===t&&e.push(n);return e}getEditor(t){return v(this,Bn).get(t)}addEditor(t){v(this,Bn).set(t.id,t)}removeEditor(t){var e;t.div.contains(document.activeElement)&&(v(this,aa)&&clearTimeout(v(this,aa)),Y(this,aa,setTimeout(()=>{this.focusMainContainer(),Y(this,aa,null)},0))),v(this,Bn).delete(t.id),this.unselect(t),(!t.annotationElementId||!v(this,Ih).has(t.annotationElementId))&&((e=v(this,po))==null||e.remove(t.id))}addDeletedAnnotationElement(t){v(this,Ih).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return v(this,Ih).has(t)}removeDeletedAnnotationElement(t){v(this,Ih).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){v(this,Ts)!==t&&(Y(this,Ts,t),t&&q(this,ya,ko).call(this,t.propertiesToUpdate))}updateUI(t){v(this,f_,C3)===t&&q(this,ya,ko).call(this,t.propertiesToUpdate)}toggleSelected(t){if(v(this,ze).has(t)){v(this,ze).delete(t),t.unselect(),q(this,li,xi).call(this,{hasSelectedEditor:this.hasSelection});return}v(this,ze).add(t),t.select(),q(this,ya,ko).call(this,t.propertiesToUpdate),q(this,li,xi).call(this,{hasSelectedEditor:!0})}setSelected(t){for(const e of v(this,ze))e!==t&&e.unselect();v(this,ze).clear(),v(this,ze).add(t),t.select(),q(this,ya,ko).call(this,t.propertiesToUpdate),q(this,li,xi).call(this,{hasSelectedEditor:!0})}isSelected(t){return v(this,ze).has(t)}get firstSelectedEditor(){return v(this,ze).values().next().value}unselect(t){t.unselect(),v(this,ze).delete(t),q(this,li,xi).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return v(this,ze).size!==0}get isEnterHandled(){return v(this,ze).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){v(this,ur).undo(),q(this,li,xi).call(this,{hasSomethingToUndo:v(this,ur).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:q(this,zh,Bf).call(this)})}redo(){v(this,ur).redo(),q(this,li,xi).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:v(this,ur).hasSomethingToRedo(),isEmpty:q(this,zh,Bf).call(this)})}addCommands(t){v(this,ur).add(t),q(this,li,xi).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:q(this,zh,Bf).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const t=[...v(this,ze)],e=()=>{for(const i of t)i.remove()},n=()=>{for(const i of t)q(this,yy,d_).call(this,i)};this.addCommands({cmd:e,undo:n,mustExec:!0})}commitOrRemove(){var t;(t=v(this,Ts))==null||t.commitOrRemove()}hasSomethingToControl(){return v(this,Ts)||this.hasSelection}selectAll(){for(const t of v(this,ze))t.commit();q(this,vy,p_).call(this,v(this,Bn).values())}unselectAll(){if(!(v(this,Ts)&&(v(this,Ts).commitOrRemove(),v(this,ui)!==Se.NONE))&&this.hasSelection){for(const t of v(this,ze))t.unselect();v(this,ze).clear(),q(this,li,xi).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;v(this,El)[0]+=t,v(this,El)[1]+=e;const[i,r]=v(this,El),o=[...v(this,ze)];v(this,oa)&&clearTimeout(v(this,oa)),Y(this,oa,setTimeout(()=>{Y(this,oa,null),v(this,El)[0]=v(this,El)[1]=0,this.addCommands({cmd:()=>{for(const h of o)v(this,Bn).has(h.id)&&h.translateInPage(i,r)},undo:()=>{for(const h of o)v(this,Bn).has(h.id)&&h.translateInPage(-i,-r)},mustExec:!1})},1e3));for(const h of o)h.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),Y(this,ra,new Map);for(const t of v(this,ze))v(this,ra).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!v(this,ra))return!1;this.disableUserSelect(!1);const t=v(this,ra);Y(this,ra,null);let e=!1;for(const[{x:i,y:r,pageIndex:o},c]of t)c.newX=i,c.newY=r,c.newPageIndex=o,e||(e=i!==c.savedX||r!==c.savedY||o!==c.savedPageIndex);if(!e)return!1;const n=(i,r,o,c)=>{if(v(this,Bn).has(i.id)){const h=v(this,ai).get(c);h?i._setParentAndPosition(h,r,o):(i.pageIndex=c,i.x=r,i.y=o)}};return this.addCommands({cmd:()=>{for(const[i,{newX:r,newY:o,newPageIndex:c}]of t)n(i,r,o,c)},undo:()=>{for(const[i,{savedX:r,savedY:o,savedPageIndex:c}]of t)n(i,r,o,c)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(v(this,ra))for(const n of v(this,ra).keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||v(this,ze).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return v(this,Ts)===t}getActive(){return v(this,Ts)}getMode(){return v(this,ui)}get imageManager(){return Ee(this,"imageManager",new lY)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let d=0,f=e.rangeCount;d<f;d++)if(!t.contains(e.getRangeAt(d).commonAncestorContainer))return null;const{x:n,y:i,width:r,height:o}=t.getBoundingClientRect();let c;switch(t.getAttribute("data-main-rotation")){case"90":c=(d,f,p,m)=>({x:(f-i)/o,y:1-(d+p-n)/r,width:m/o,height:p/r});break;case"180":c=(d,f,p,m)=>({x:1-(d+p-n)/r,y:1-(f+m-i)/o,width:p/r,height:m/o});break;case"270":c=(d,f,p,m)=>({x:1-(f+m-i)/o,y:(d-n)/r,width:m/o,height:p/r});break;default:c=(d,f,p,m)=>({x:(d-n)/r,y:(f-i)/o,width:p/r,height:m/o});break}const h=[];for(let d=0,f=e.rangeCount;d<f;d++){const p=e.getRangeAt(d);if(!p.collapsed)for(const{x:m,y,width:w,height:b}of p.getClientRects())w===0||b===0||h.push(c(m,y,w,b))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:t,id:e}){(v(this,Oh)||Y(this,Oh,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=v(this,Oh))==null||e.delete(t)}renderAnnotationElement(t){var e;const n=(e=v(this,Oh))==null?void 0:e.get(t.data.id);if(!n)return;const i=v(this,po).getRawValue(n);i&&(v(this,ui)===Se.NONE&&!i.hasBeenModified||i.renderAnnotationElement(t))}};Ts=new WeakMap,Bn=new WeakMap,ai=new WeakMap,Df=new WeakMap,po=new WeakMap,Oh=new WeakMap,ur=new WeakMap,Nf=new WeakMap,Ih=new WeakMap,ra=new WeakMap,go=new WeakMap,jh=new WeakMap,Qv=new WeakMap,Y0=new WeakMap,aa=new WeakMap,Of=new WeakMap,Hl=new WeakMap,_r=new WeakMap,JS=new WeakMap,Wl=new WeakMap,X0=new WeakMap,Bh=new WeakMap,K0=new WeakMap,If=new WeakMap,ui=new WeakMap,ze=new WeakMap,mo=new WeakMap,Fh=new WeakMap,jf=new WeakMap,Z0=new WeakMap,Q0=new WeakMap,J0=new WeakMap,ty=new WeakMap,ey=new WeakMap,ny=new WeakMap,iy=new WeakMap,sy=new WeakMap,ry=new WeakMap,ay=new WeakMap,oy=new WeakMap,ly=new WeakMap,cy=new WeakMap,El=new WeakMap,oa=new WeakMap,yo=new WeakMap,hy=new WeakMap,Rp=new WeakSet,uy=function({anchorNode:s}){return s.nodeType===Node.TEXT_NODE?s.parentElement:s},t_=new WeakSet,xL=function(){const s=document.getSelection();if(!s||s.isCollapsed)return;const t=q(this,Rp,uy).call(this,s).closest(".textLayer"),e=this.getSelectionBoxes(t);e&&(v(this,_r)||Y(this,_r,new rY(this)),v(this,_r).show(t,e,this.direction==="ltr"))},e_=new WeakSet,x3=function(){var s,t,e;const n=document.getSelection();if(!n||n.isCollapsed){v(this,mo)&&((s=v(this,_r))==null||s.hide(),Y(this,mo,null),q(this,li,xi).call(this,{hasSelectedText:!1}));return}const{anchorNode:i}=n;if(i!==v(this,mo)){if(!q(this,Rp,uy).call(this,n).closest(".textLayer")){v(this,mo)&&((t=v(this,_r))==null||t.hide(),Y(this,mo,null),q(this,li,xi).call(this,{hasSelectedText:!1}));return}if((e=v(this,_r))==null||e.hide(),Y(this,mo,i),q(this,li,xi).call(this,{hasSelectedText:!0}),!(v(this,ui)!==Se.HIGHLIGHT&&v(this,ui)!==Se.NONE)&&(v(this,ui)===Se.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),Y(this,Hl,this.isShiftKeyDown),!this.isShiftKeyDown)){const r=o=>{o.type==="pointerup"&&o.button!==0||(window.removeEventListener("pointerup",r),window.removeEventListener("blur",r),o.type==="pointerup"&&q(this,Pp,Jv).call(this,"main_toolbar"))};window.addEventListener("pointerup",r),window.addEventListener("blur",r)}}},Pp=new WeakSet,Jv=function(s=""){v(this,ui)===Se.HIGHLIGHT?this.highlightSelection(s):v(this,Qv)&&q(this,t_,xL).call(this)},n_=new WeakSet,w3=function(){document.addEventListener("selectionchange",v(this,oy))},i_=new WeakSet,A3=function(){document.removeEventListener("selectionchange",v(this,oy))},s_=new WeakSet,S3=function(){window.addEventListener("focus",v(this,Q0)),window.addEventListener("blur",v(this,Z0))},dy=new WeakSet,r_=function(){window.removeEventListener("focus",v(this,Q0)),window.removeEventListener("blur",v(this,Z0))},fy=new WeakSet,a_=function(){window.addEventListener("keydown",v(this,ny)),window.addEventListener("keyup",v(this,iy))},py=new WeakSet,o_=function(){window.removeEventListener("keydown",v(this,ny)),window.removeEventListener("keyup",v(this,iy))},gy=new WeakSet,l_=function(){document.addEventListener("copy",v(this,J0)),document.addEventListener("cut",v(this,ty)),document.addEventListener("paste",v(this,ey))},my=new WeakSet,c_=function(){document.removeEventListener("copy",v(this,J0)),document.removeEventListener("cut",v(this,ty)),document.removeEventListener("paste",v(this,ey))},li=new WeakSet,xi=function(s){Object.entries(s).some(([t,e])=>v(this,cy)[t]!==e)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(v(this,cy),s)}),v(this,ui)===Se.HIGHLIGHT&&s.hasSelectedEditor===!1&&q(this,ya,ko).call(this,[[ee.HIGHLIGHT_FREE,!0]]))},ya=new WeakSet,ko=function(s){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:s})},h_=new WeakSet,_3=function(){if(!v(this,Wl)){Y(this,Wl,!0);for(const s of v(this,ai).values())s.enable();for(const s of v(this,Bn).values())s.enable()}},u_=new WeakSet,E3=function(){if(this.unselectAll(),v(this,Wl)){Y(this,Wl,!1);for(const s of v(this,ai).values())s.disable();for(const s of v(this,Bn).values())s.disable()}},yy=new WeakSet,d_=function(s){const t=v(this,ai).get(s.pageIndex);t?t.addOrRebuild(s):(this.addEditor(s),this.addToAnnotationStorage(s))},f_=new WeakSet,C3=function(){let s=null;for(s of v(this,ze));return s},zh=new WeakSet,Bf=function(){if(v(this,Bn).size===0)return!0;if(v(this,Bn).size===1)for(const s of v(this,Bn).values())return s.isEmpty();return!1},vy=new WeakSet,p_=function(s){for(const t of v(this,ze))t.unselect();v(this,ze).clear();for(const t of s)t.isEmpty()||(v(this,ze).add(t),t.select());q(this,li,xi).call(this,{hasSelectedEditor:this.hasSelection})},oe(g_,"TRANSLATE_SMALL",1),oe(g_,"TRANSLATE_BIG",10);let og=g_;var Lo,Do,gr,To,Tr,Ff,Wo,by,y_;const xy=class wy{constructor(t){B(this,by),B(this,Lo,""),B(this,Do,!1),B(this,gr,null),B(this,To,null),B(this,Tr,null),B(this,Ff,!1),B(this,Wo,null),Y(this,Wo,t)}static initialize(t){wy._l10nPromise||(wy._l10nPromise=t)}async render(){const t=Y(this,gr,document.createElement("button"));t.className="altText";const e=await wy._l10nPromise.get("pdfjs-editor-alt-text-button-label");t.textContent=e,t.setAttribute("aria-label",e),t.tabIndex="0",t.addEventListener("contextmenu",Hi),t.addEventListener("pointerdown",i=>i.stopPropagation());const n=i=>{i.preventDefault(),v(this,Wo)._uiManager.editAltText(v(this,Wo))};return t.addEventListener("click",n,{capture:!0}),t.addEventListener("keydown",i=>{i.target===t&&i.key==="Enter"&&(Y(this,Ff,!0),n(i))}),await q(this,by,y_).call(this),t}finish(){v(this,gr)&&(v(this,gr).focus({focusVisible:v(this,Ff)}),Y(this,Ff,!1))}isEmpty(){return!v(this,Lo)&&!v(this,Do)}get data(){return{altText:v(this,Lo),decorative:v(this,Do)}}set data({altText:t,decorative:e}){v(this,Lo)===t&&v(this,Do)===e||(Y(this,Lo,t),Y(this,Do,e),q(this,by,y_).call(this))}toggle(t=!1){v(this,gr)&&(!t&&v(this,Tr)&&(clearTimeout(v(this,Tr)),Y(this,Tr,null)),v(this,gr).disabled=!t)}destroy(){var t;(t=v(this,gr))==null||t.remove(),Y(this,gr,null),Y(this,To,null)}};Lo=new WeakMap,Do=new WeakMap,gr=new WeakMap,To=new WeakMap,Tr=new WeakMap,Ff=new WeakMap,Wo=new WeakMap,by=new WeakSet,y_=async function(){var s;const t=v(this,gr);if(!t)return;if(!v(this,Lo)&&!v(this,Do)){t.classList.remove("done"),(s=v(this,To))==null||s.remove();return}t.classList.add("done"),xy._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(i=>{t.setAttribute("aria-label",i)});let e=v(this,To);if(!e){Y(this,To,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip");const i=e.id=`alt-text-tooltip-${v(this,Wo).id}`;t.setAttribute("aria-describedby",i);const r=100;t.addEventListener("mouseenter",()=>{Y(this,Tr,setTimeout(()=>{Y(this,Tr,null),v(this,To).classList.add("show"),v(this,Wo)._reportTelemetry({action:"alt_text_tooltip"})},r))}),t.addEventListener("mouseleave",()=>{var o;v(this,Tr)&&(clearTimeout(v(this,Tr)),Y(this,Tr,null)),(o=v(this,To))==null||o.classList.remove("show")})}e.innerText=v(this,Do)?await xy._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):v(this,Lo),e.parentNode||t.append(e);const n=v(this,Wo).getImageForAltText();n?.setAttribute("aria-describedby",e.id)},oe(xy,"_l10nPromise",null);let wL=xy;var Er,Oi,zf,Uh,di,uu,Uf,Hf,vi,tb,du,la,Ay,Hh,Go,ca,Wf,Gf,Ms,Sy,v_,_y,b_,eb,x_,Ey,LA,w_,k3,A_,AL,Cy,DA,nb,S_,ib,__,E_,T3,C_,M3,k_,R3,T_,P3,sb,M_,fu,Lp;const ha=class Zn{constructor(t){B(this,_y),B(this,Ey),B(this,w_),B(this,A_),B(this,Cy),B(this,nb),B(this,ib),B(this,E_),B(this,C_),B(this,k_),B(this,T_),B(this,sb),B(this,fu),B(this,Er,null),B(this,Oi,null),B(this,zf,!1),B(this,Uh,!1),B(this,di,null),B(this,uu,null),B(this,Uf,this.focusin.bind(this)),B(this,Hf,this.focusout.bind(this)),B(this,vi,null),B(this,tb,""),B(this,du,!1),B(this,la,null),B(this,Ay,!1),B(this,Hh,!1),B(this,Go,!1),B(this,ca,null),B(this,Wf,0),B(this,Gf,0),B(this,Ms,null),oe(this,"_initialOptions",Object.create(null)),oe(this,"_isVisible",!0),oe(this,"_uiManager",null),oe(this,"_focusEventsAllowed",!0),oe(this,"_l10nPromise",null),B(this,Sy,!1),B(this,v_,Zn._zIndex++),this.constructor===Zn&&He("Cannot initialize AnnotationEditor."),this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:n,pageHeight:i,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[r,o];const[c,h]=this.parentDimensions;this.x=t.x/c,this.y=t.y/h,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=Zn.prototype._resizeWithKeyboard,e=og.TRANSLATE_SMALL,n=og.TRANSLATE_BIG;return Ee(this,"_resizerKeyboardManager",new wg([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],Zn.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return Ee(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new uY({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e,n){if(Zn._l10nPromise||(Zn._l10nPromise=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map(r=>[r,t.get(r.replaceAll(/([A-Z])/g,o=>`-${o.toLowerCase()}`))]))),n!=null&&n.strings)for(const r of n.strings)Zn._l10nPromise.set(r,t.get(r));if(Zn._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);Zn._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){He("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return v(this,Sy)}set _isDraggable(t){var e;Y(this,Sy,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=v(this,v_)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):q(this,fu,Lp).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(v(this,du)?Y(this,du,!1):this.parent.setSelected(this))}focusout(t){var e;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const n=t.relatedTarget;n!=null&&n.closest(`#${this.id}`)||(t.preventDefault(),(e=this.parent)!=null&&e.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,i){const[r,o]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(t+n)/r,this.y=(e+i)/o,this.fixAndSetPosition()}translate(t,e){q(this,_y,b_).call(this,this.parentDimensions,t,e)}translateInPage(t,e){v(this,la)||Y(this,la,[this.x,this.y]),q(this,_y,b_).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){v(this,la)||Y(this,la,[this.x,this.y]);const[n,i]=this.parentDimensions;if(this.x+=t/n,this.y+=e/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:d,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,d,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:r,y:o}=this;const[c,h]=this.getBaseTranslation();r+=c,o+=h,this.div.style.left=`${(100*r).toFixed(2)}%`,this.div.style.top=`${(100*o).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!v(this,la)&&(v(this,la)[0]!==this.x||v(this,la)[1]!==this.y)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=Zn,i=n/t,r=n/e;switch(this.rotation){case 90:return[-i,r];case 180:return[i,r];case 270:return[i,-r];default:return[-i,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const[e,n]=this.pageDimensions;let{x:i,y:r,width:o,height:c}=this;if(o*=e,c*=n,i*=e,r*=n,this._mustFixPosition)switch(t){case 0:i=Math.max(0,Math.min(e-o,i)),r=Math.max(0,Math.min(n-c,r));break;case 90:i=Math.max(0,Math.min(e-c,i)),r=Math.min(n,Math.max(o,r));break;case 180:i=Math.min(e,Math.max(o,i)),r=Math.min(n,Math.max(c,r));break;case 270:i=Math.min(e,Math.max(c,i)),r=Math.max(0,Math.min(n-o,r));break}this.x=i/=e,this.y=r/=n;const[h,d]=this.getBaseTranslation();i+=h,r+=d;const{style:f}=this.div;f.left=`${(100*i).toFixed(2)}%`,f.top=`${(100*r).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var n;return q(n=Zn,eb,x_).call(n,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var n;return q(n=Zn,eb,x_).call(n,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this,i=e*t,r=n*t;return Wi.isCSSRoundSupported?[Math.round(i),Math.round(r)]:[i,r]}setDims(t,e){const[n,i]=this.parentDimensions;this.div.style.width=`${(100*t/n).toFixed(2)}%`,v(this,Uh)||(this.div.style.height=`${(100*e/i).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:n}=t,i=n.endsWith("%"),r=!v(this,Uh)&&e.endsWith("%");if(i&&r)return;const[o,c]=this.parentDimensions;i||(t.width=`${(100*parseFloat(n)/o).toFixed(2)}%`),!v(this,Uh)&&!r&&(t.height=`${(100*parseFloat(e)/c).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var t;(t=v(this,Oi))==null||t.finish()}async addEditToolbar(){return v(this,vi)||v(this,Hh)?v(this,vi):(Y(this,vi,new sY(this)),this.div.append(v(this,vi).render()),v(this,Oi)&&v(this,vi).addAltTextButton(await v(this,Oi).render()),v(this,vi))}removeEditToolbar(){var t;v(this,vi)&&(v(this,vi).remove(),Y(this,vi,null),(t=v(this,Oi))==null||t.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){v(this,Oi)||(wL.initialize(Zn._l10nPromise),Y(this,Oi,new wL(this)),await this.addEditToolbar())}get altTextData(){var t;return(t=v(this,Oi))==null?void 0:t.data}set altTextData(t){v(this,Oi)&&(v(this,Oi).data=t)}hasAltText(){var t;return!((t=v(this,Oi))!=null&&t.isEmpty())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=v(this,zf)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.div.addEventListener("focusin",v(this,Uf)),this.div.addEventListener("focusout",v(this,Hf));const[t,e]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*e/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/e).toFixed(2)}%`);const[n,i]=this.getInitialTranslation();return this.translate(n,i),Kv(this,this.div,["pointerdown"]),this.div}pointerdown(t){const{isMac:e}=Wi.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(Y(this,du,!0),this._isDraggable){q(this,E_,T3).call(this,t);return}q(this,ib,__).call(this,t)}moveInDOM(){v(this,ca)&&clearTimeout(v(this,ca)),Y(this,ca,setTimeout(()=>{var t;Y(this,ca,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition()}getRect(t,e,n=this.rotation){const i=this.parentScale,[r,o]=this.pageDimensions,[c,h]=this.pageTranslation,d=t/i,f=e/i,p=this.x*r,m=this.y*o,y=this.width*r,w=this.height*o;switch(n){case 0:return[p+d+c,o-m-f-w+h,p+d+y+c,o-m-f+h];case 90:return[p+f+c,o-m+d+h,p+f+w+c,o-m+d+y+h];case 180:return[p-d-y+c,o-m+f+h,p-d+c,o-m+f+w+h];case 270:return[p-f-w+c,o-m-d-y+h,p-f+c,o-m-d+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,i,r,o]=t,c=r-n,h=o-i;switch(this.rotation){case 0:return[n,e-o,c,h];case 90:return[n,e-i,h,c];case 180:return[r,e-i,c,h];case 270:return[r,e-o,h,c];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){Y(this,Hh,!0)}disableEditMode(){Y(this,Hh,!1)}isInEditMode(){return v(this,Hh)}shouldGetKeyboardEvents(){return v(this,Go)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var t,e;(t=this.div)==null||t.addEventListener("focusin",v(this,Uf)),(e=this.div)==null||e.addEventListener("focusout",v(this,Hf))}rotate(t){}serialize(t=!1,e=null){He("An editor must be serializable")}static deserialize(t,e,n){const i=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n});i.rotation=t.rotation;const[r,o]=i.pageDimensions,[c,h,d,f]=i.getRectInCurrentCoords(t.rect,o);return i.x=c/r,i.y=h/o,i.width=d/r,i.height=f/o,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.div.removeEventListener("focusin",v(this,Uf)),this.div.removeEventListener("focusout",v(this,Hf)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),v(this,ca)&&(clearTimeout(v(this,ca)),Y(this,ca,null)),q(this,fu,Lp).call(this),this.removeEditToolbar(),v(this,Ms)){for(const t of v(this,Ms).values())clearTimeout(t);Y(this,Ms,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(q(this,w_,k3).call(this),v(this,di).classList.remove("hidden"),Kv(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),Y(this,uu,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=v(this,di).children;if(!v(this,Er)){Y(this,Er,Array.from(e));const o=q(this,C_,M3).bind(this),c=q(this,k_,R3).bind(this);for(const h of v(this,Er)){const d=h.getAttribute("data-resizer-name");h.setAttribute("role","spinbutton"),h.addEventListener("keydown",o),h.addEventListener("blur",c),h.addEventListener("focus",q(this,T_,P3).bind(this,d)),Zn._l10nPromise.get(`pdfjs-editor-resizer-label-${d}`).then(f=>h.setAttribute("aria-label",f))}}const n=v(this,Er)[0];let i=0;for(const o of e){if(o===n)break;i++}const r=(360-this.rotation+this.parentRotation)%360/90*(v(this,Er).length/4);if(r!==i){if(r<i)for(let c=0;c<i-r;c++)v(this,di).append(v(this,di).firstChild);else if(r>i)for(let c=0;c<r-i;c++)v(this,di).firstChild.before(v(this,di).lastChild);let o=0;for(const c of e){const h=v(this,Er)[o++].getAttribute("data-resizer-name");Zn._l10nPromise.get(`pdfjs-editor-resizer-label-${h}`).then(d=>c.setAttribute("aria-label",d))}}q(this,sb,M_).call(this,0),Y(this,Go,!0),v(this,di).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){v(this,Go)&&q(this,nb,S_).call(this,v(this,tb),{movementX:t,movementY:e})}_stopResizingWithKeyboard(){q(this,fu,Lp).call(this),this.div.focus()}select(){var t,e;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!v(this,vi)){this.addEditToolbar().then(()=>{var n,i;(n=this.div)!=null&&n.classList.contains("selectedEditor")&&((i=v(this,vi))==null||i.show())});return}(e=v(this,vi))==null||e.show()}unselect(){var t,e,n,i;(t=v(this,di))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=v(this,vi))==null||i.hide()}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return v(this,Ay)}set isEditing(t){Y(this,Ay,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){Y(this,Uh,!0);const n=t/e,{style:i}=this.div;i.aspectRatio=n,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){v(this,Ms)||Y(this,Ms,new Map);const{action:n}=t;let i=v(this,Ms).get(n);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(t),v(this,Ms).delete(n),v(this,Ms).size===0&&Y(this,Ms,null)},Zn._telemetryTimeout),v(this,Ms).set(n,i);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),Y(this,zf,!1)}disable(){this.div&&(this.div.tabIndex=-1),Y(this,zf,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;e.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};Er=new WeakMap,Oi=new WeakMap,zf=new WeakMap,Uh=new WeakMap,di=new WeakMap,uu=new WeakMap,Uf=new WeakMap,Hf=new WeakMap,vi=new WeakMap,tb=new WeakMap,du=new WeakMap,la=new WeakMap,Ay=new WeakMap,Hh=new WeakMap,Go=new WeakMap,ca=new WeakMap,Wf=new WeakMap,Gf=new WeakMap,Ms=new WeakMap,Sy=new WeakMap,v_=new WeakMap,_y=new WeakSet,b_=function([s,t],e,n){[e,n]=this.screenToPageTranslation(e,n),this.x+=e/s,this.y+=n/t,this.fixAndSetPosition()},eb=new WeakSet,x_=function(s,t,e){switch(e){case 90:return[t,-s];case 180:return[-s,-t];case 270:return[-t,s];default:return[s,t]}},Ey=new WeakSet,LA=function(s){switch(s){case 90:{const[t,e]=this.pageDimensions;return[0,-t/e,e/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,e]=this.pageDimensions;return[0,t/e,-e/t,0]}default:return[1,0,0,1]}},w_=new WeakSet,k3=function(){if(v(this,di))return;Y(this,di,document.createElement("div")),v(this,di).classList.add("resizers");const s=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"];for(const t of s){const e=document.createElement("div");v(this,di).append(e),e.classList.add("resizer",t),e.setAttribute("data-resizer-name",t),e.addEventListener("pointerdown",q(this,A_,AL).bind(this,t)),e.addEventListener("contextmenu",Hi),e.tabIndex=-1}this.div.prepend(v(this,di))},A_=new WeakSet,AL=function(s,t){var e;t.preventDefault();const{isMac:n}=Wi.platform;if(t.button!==0||t.ctrlKey&&n)return;(e=v(this,Oi))==null||e.toggle(!1);const i=q(this,nb,S_).bind(this,s),r=this._isDraggable;this._isDraggable=!1;const o={passive:!0,capture:!0};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",i,o),window.addEventListener("contextmenu",Hi);const c=this.x,h=this.y,d=this.width,f=this.height,p=this.parent.div.style.cursor,m=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const y=()=>{var w;this.parent.togglePointerEvents(!0),(w=v(this,Oi))==null||w.toggle(!0),this._isDraggable=r,window.removeEventListener("pointerup",y),window.removeEventListener("blur",y),window.removeEventListener("pointermove",i,o),window.removeEventListener("contextmenu",Hi),this.parent.div.style.cursor=p,this.div.style.cursor=m,q(this,Cy,DA).call(this,c,h,d,f)};window.addEventListener("pointerup",y),window.addEventListener("blur",y)},Cy=new WeakSet,DA=function(s,t,e,n){const i=this.x,r=this.y,o=this.width,c=this.height;i===s&&r===t&&o===e&&c===n||this.addCommands({cmd:()=>{this.width=o,this.height=c,this.x=i,this.y=r;const[h,d]=this.parentDimensions;this.setDims(h*o,d*c),this.fixAndSetPosition()},undo:()=>{this.width=e,this.height=n,this.x=s,this.y=t;const[h,d]=this.parentDimensions;this.setDims(h*e,d*n),this.fixAndSetPosition()},mustExec:!0})},nb=new WeakSet,S_=function(s,t){const[e,n]=this.parentDimensions,i=this.x,r=this.y,o=this.width,c=this.height,h=ha.MIN_SIZE/e,d=ha.MIN_SIZE/n,f=$=>Math.round($*1e4)/1e4,p=q(this,Ey,LA).call(this,this.rotation),m=($,G)=>[p[0]*$+p[2]*G,p[1]*$+p[3]*G],y=q(this,Ey,LA).call(this,360-this.rotation),w=($,G)=>[y[0]*$+y[2]*G,y[1]*$+y[3]*G];let b,E,_=!1,k=!1;switch(s){case"topLeft":_=!0,b=($,G)=>[0,0],E=($,G)=>[$,G];break;case"topMiddle":b=($,G)=>[$/2,0],E=($,G)=>[$/2,G];break;case"topRight":_=!0,b=($,G)=>[$,0],E=($,G)=>[0,G];break;case"middleRight":k=!0,b=($,G)=>[$,G/2],E=($,G)=>[0,G/2];break;case"bottomRight":_=!0,b=($,G)=>[$,G],E=($,G)=>[0,0];break;case"bottomMiddle":b=($,G)=>[$/2,G],E=($,G)=>[$/2,0];break;case"bottomLeft":_=!0,b=($,G)=>[0,G],E=($,G)=>[$,0];break;case"middleLeft":k=!0,b=($,G)=>[0,G/2],E=($,G)=>[$,G/2];break}const T=b(o,c),R=E(o,c);let D=m(...R);const F=f(i+D[0]),j=f(r+D[1]);let I=1,O=1,[X,Q]=this.screenToPageTranslation(t.movementX,t.movementY);if([X,Q]=w(X/e,Q/n),_){const $=Math.hypot(o,c);I=O=Math.max(Math.min(Math.hypot(R[0]-T[0]-X,R[1]-T[1]-Q)/$,1/o,1/c),h/o,d/c)}else k?I=Math.max(h,Math.min(1,Math.abs(R[0]-T[0]-X)))/o:O=Math.max(d,Math.min(1,Math.abs(R[1]-T[1]-Q)))/c;const H=f(o*I),J=f(c*O);D=m(...E(H,J));const N=F-D[0],tt=j-D[1];this.width=H,this.height=J,this.x=N,this.y=tt,this.setDims(e*H,n*J),this.fixAndSetPosition()},ib=new WeakSet,__=function(s){const{isMac:t}=Wi.platform;s.ctrlKey&&!t||s.shiftKey||s.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},E_=new WeakSet,T3=function(s){const t=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let e,n;t&&(this.div.classList.add("moving"),e={passive:!0,capture:!0},Y(this,Wf,s.clientX),Y(this,Gf,s.clientY),n=r=>{const{clientX:o,clientY:c}=r,[h,d]=this.screenToPageTranslation(o-v(this,Wf),c-v(this,Gf));Y(this,Wf,o),Y(this,Gf,c),this._uiManager.dragSelectedEditors(h,d)},window.addEventListener("pointermove",n,e));const i=()=>{window.removeEventListener("pointerup",i),window.removeEventListener("blur",i),t&&(this.div.classList.remove("moving"),window.removeEventListener("pointermove",n,e)),Y(this,du,!1),this._uiManager.endDragSession()||q(this,ib,__).call(this,s)};window.addEventListener("pointerup",i),window.addEventListener("blur",i)},C_=new WeakSet,M3=function(s){ha._resizerKeyboardManager.exec(this,s)},k_=new WeakSet,R3=function(s){var t;v(this,Go)&&((t=s.relatedTarget)==null?void 0:t.parentNode)!==v(this,di)&&q(this,fu,Lp).call(this)},T_=new WeakSet,P3=function(s){Y(this,tb,v(this,Go)?s:"")},sb=new WeakSet,M_=function(s){if(v(this,Er))for(const t of v(this,Er))t.tabIndex=s},fu=new WeakSet,Lp=function(){if(Y(this,Go,!1),q(this,sb,M_).call(this,-1),v(this,uu)){const{savedX:s,savedY:t,savedWidth:e,savedHeight:n}=v(this,uu);q(this,Cy,DA).call(this,s,t,e,n),Y(this,uu,null)}},B(ha,eb),oe(ha,"_borderLineWidth",-1),oe(ha,"_colorManager",new hY),oe(ha,"_zIndex",1),oe(ha,"_telemetryTimeout",1e3);let Ye=ha;class uY extends Ye{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}const SL=3285377520,Ss=4294901760,cr=65535;class L3{constructor(t){this.h1=t?t&4294967295:SL,this.h2=t?t&4294967295:SL}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let b=0,E=t.length;b<E;b++){const _=t.charCodeAt(b);_<=255?e[n++]=_:(e[n++]=_>>>8,e[n++]=_&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=n>>2,r=n-i*4,o=new Uint32Array(e.buffer,0,i);let c=0,h=0,d=this.h1,f=this.h2;const p=3432918353,m=461845907,y=p&cr,w=m&cr;for(let b=0;b<i;b++)b&1?(c=o[b],c=c*p&Ss|c*y&cr,c=c<<15|c>>>17,c=c*m&Ss|c*w&cr,d^=c,d=d<<13|d>>>19,d=d*5+3864292196):(h=o[b],h=h*p&Ss|h*y&cr,h=h<<15|h>>>17,h=h*m&Ss|h*w&cr,f^=h,f=f<<13|f>>>19,f=f*5+3864292196);switch(c=0,r){case 3:c^=e[i*4+2]<<16;case 2:c^=e[i*4+1]<<8;case 1:c^=e[i*4],c=c*p&Ss|c*y&cr,c=c<<15|c>>>17,c=c*m&Ss|c*w&cr,i&1?d^=c:f^=c}this.h1=d,this.h2=f}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Ss|t*36045&cr,e=e*4283543511&Ss|((e<<16|t>>>16)*2950163797&Ss)>>>16,t^=e>>>1,t=t*444984403&Ss|t*60499&cr,e=e*3301882366&Ss|((e<<16|t>>>16)*3120437893&Ss)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const R_=Object.freeze({map:null,hash:"",transfer:void 0});var Lu,ii,P_,D3;class uC{constructor(){B(this,P_),B(this,Lu,!1),B(this,ii,new Map),this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=v(this,ii).get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return v(this,ii).get(t)}remove(t){if(v(this,ii).delete(t),v(this,ii).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of v(this,ii).values())if(e instanceof Ye)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=v(this,ii).get(t);let i=!1;if(n!==void 0)for(const[r,o]of Object.entries(e))n[r]!==o&&(i=!0,n[r]=o);else i=!0,v(this,ii).set(t,e);i&&q(this,P_,D3).call(this),e instanceof Ye&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return v(this,ii).has(t)}getAll(){return v(this,ii).size>0?sC(v(this,ii)):null}setAll(t){for(const[e,n]of Object.entries(t))this.setValue(e,n)}get size(){return v(this,ii).size}resetModified(){v(this,Lu)&&(Y(this,Lu,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new N3(this)}get serializable(){if(v(this,ii).size===0)return R_;const t=new Map,e=new L3,n=[],i=Object.create(null);let r=!1;for(const[o,c]of v(this,ii)){const h=c instanceof Ye?c.serialize(!1,i):c;h&&(t.set(o,h),e.update(`${o}:${JSON.stringify(h)}`),r||(r=!!h.bitmap))}if(r)for(const o of t.values())o.bitmap&&n.push(o.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:R_}get editorStats(){let t=null;const e=new Map;for(const n of v(this,ii).values()){if(!(n instanceof Ye))continue;const i=n.telemetryFinalData;if(!i)continue;const{type:r}=i;e.has(r)||e.set(r,Object.getPrototypeOf(n).constructor),t||(t=Object.create(null));const o=t[r]||(t[r]=new Map);for(const[c,h]of Object.entries(i)){if(c==="type")continue;let d=o.get(c);d||(d=new Map,o.set(c,d));const f=d.get(h)??0;d.set(h,f+1)}}for(const[n,i]of e)t[n]=i.computeTelemetryFinalData(t[n]);return t}}Lu=new WeakMap,ii=new WeakMap,P_=new WeakSet,D3=function(){v(this,Lu)||(Y(this,Lu,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var ky;class N3 extends uC{constructor(t){super(),B(this,ky,void 0);const{map:e,hash:n,transfer:i}=t.serializable,r=structuredClone(e,i?{transfer:i}:null);Y(this,ky,{map:r,hash:n,transfer:i})}get print(){He("Should not call PrintAnnotationStorage.print")}get serializable(){return v(this,ky)}}ky=new WeakMap;var Vf;class dY{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){B(this,Vf,new Set),this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),v(this,Vf).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:e}){if(!(!t||v(this,Vf).has(t.loadedName))){if(Mn(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:i,style:r}=t,o=new FontFace(n,i,r);this.addNativeFontFace(o);try{await o.load(),v(this,Vf).add(n),e?.(t)}catch{ue(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}He("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(i){throw ue(`Failed to load font '${n.family}': '${i}'.`),t.disableFontFace=!0,i}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const i=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,i)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return Ee(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let t=!1;return(mi||typeof navigator<"u"&&typeof navigator?.userAgent=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),Ee(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function e(){for(Mn(!i.done,"completeRequest() cannot be called twice."),i.done=!0;n.length>0&&n[0].done;){const r=n.shift();setTimeout(r.callback,0)}}const{loadingRequests:n}=this,i={done:!1,complete:e,callback:t};return n.push(i),i}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Ee(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(T,R){return T.charCodeAt(R)<<24|T.charCodeAt(R+1)<<16|T.charCodeAt(R+2)<<8|T.charCodeAt(R+3)&255}function i(T,R,D,F){const j=T.substring(0,R),I=T.substring(R+D);return j+F+I}let r,o;const c=this._document.createElement("canvas");c.width=1,c.height=1;const h=c.getContext("2d");let d=0;function f(T,R){if(++d>30){ue("Load test font never loaded."),R();return}if(h.font="30px "+T,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){R();return}setTimeout(f.bind(null,T,R))}const p=`lt${Date.now()}${this.loadTestFontId++}`;let m=this._loadTestFont;m=i(m,976,p.length,p);const y=16,w=1482184792;let b=n(m,y);for(r=0,o=p.length-3;r<o;r+=4)b=b-w+n(p,r)|0;r<p.length&&(b=b-w+n(p+"XXX",r)|0),m=i(m,y,4,$q(b));const E=`url(data:font/opentype;base64,${btoa(m)});`,_=`@font-face {font-family:"${p}";src:${E}}`;this.insertRule(_);const k=this._document.createElement("div");k.style.visibility="hidden",k.style.width=k.style.height="10px",k.style.position="absolute",k.style.top=k.style.left="0px";for(const T of[t.loadedName,p]){const R=this._document.createElement("span");R.textContent="Hi",R.style.fontFamily=T,k.append(R)}this._document.body.append(k),f(p,()=>{k.remove(),e.complete()})}}Vf=new WeakMap;class fY{constructor(t,{disableFontFace:e=!1,inspectFont:n=null}){this.compiledGlyphs=Object.create(null);for(const i in t)this[i]=t[i];this.disableFontFace=e===!0,this._inspectFont=n}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var t;if(!this.data||this.disableFontFace)return null;const e=i3(this.data),n=`url(data:${this.mimetype};base64,${btoa(e)});`;let i;if(!this.cssFontInfo)i=`@font-face {font-family:"${this.loadedName}";src:${n}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),i=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${n}}`}return(t=this._inspectFont)==null||t.call(this,this,n),i}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];let n;try{n=t.get(this.loadedName+"_path_"+e)}catch(r){ue(`getPathGenerator - ignoring character: "${r}".`)}if(!Array.isArray(n)||n.length===0)return this.compiledGlyphs[e]=function(r,o){};const i=[];for(let r=0,o=n.length;r<o;)switch(n[r++]){case ta.BEZIER_CURVE_TO:{const[c,h,d,f,p,m]=n.slice(r,r+6);i.push(y=>y.bezierCurveTo(c,h,d,f,p,m)),r+=6}break;case ta.MOVE_TO:{const[c,h]=n.slice(r,r+2);i.push(d=>d.moveTo(c,h)),r+=2}break;case ta.LINE_TO:{const[c,h]=n.slice(r,r+2);i.push(d=>d.lineTo(c,h)),r+=2}break;case ta.QUADRATIC_CURVE_TO:{const[c,h,d,f]=n.slice(r,r+4);i.push(p=>p.quadraticCurveTo(c,h,d,f)),r+=4}break;case ta.RESTORE:i.push(c=>c.restore());break;case ta.SAVE:i.push(c=>c.save());break;case ta.SCALE:Mn(i.length===2,"Scale command is only valid at the third position.");break;case ta.TRANSFORM:{const[c,h,d,f,p,m]=n.slice(r,r+6);i.push(y=>y.transform(c,h,d,f,p,m)),r+=6}break;case ta.TRANSLATE:{const[c,h]=n.slice(r,r+2);i.push(d=>d.translate(c,h)),r+=2}break}return this.compiledGlyphs[e]=function(r,o){i[0](r),i[1](r),r.scale(o,-o);for(let c=2,h=i.length;c<h;c++)i[c](r)}}}if(mi){var L_=Promise.withResolvers(),rb=null;(async()=>{const s=await Cf(()=>import("./empty-GlqisfcO-CRMO4_-l.js"),[]),t=await Cf(()=>import("./index-B0Gk_P0t-Dv9uDKM7.js"),__vite__mapDeps([0,1])).then(o=>o.i),e=await Cf(()=>import("./index-rMqNZYyA-CVtMPITQ.js"),__vite__mapDeps([2,0,1])).then(o=>o.i),n=await Cf(()=>import("./url-Bs332b_7-DBKEgtJa.js"),[]).then(o=>o.u);let i,r;return new Map(Object.entries({fs:s,http:t,https:e,url:n,canvas:i,path2d:r}))})().then(s=>{rb=s,L_.resolve()},s=>{ue(`loadPackages: ${s}`),rb=new Map,L_.resolve()})}class Lr{static get promise(){return L_.promise}static get(t){return rb?.get(t)}}const O3=function(s){return Lr.get("fs").promises.readFile(s).then(t=>new Uint8Array(t))};class pY extends p1{}class gY extends g1{_createCanvas(t,e){return Lr.get("canvas").createCanvas(t,e)}}class mY extends m1{_fetchData(t,e){return O3(t).then(n=>({cMapData:n,compressionType:e}))}}class yY extends y1{_fetchData(t){return O3(t)}}const wi={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function D_(s,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],i=new Path2D;i.rect(t[0],t[1],e,n),s.clip(i)}class Ag{constructor(){this.constructor===Ag&&He("Cannot initialize BaseShadingPattern.")}getPattern(){He("Abstract method `getPattern` called.")}}class vY extends Ag{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,i){let r;if(i===wi.STROKE||i===wi.FILL){const o=e.current.getClippedPathBoundingBox(i,sn(t))||[0,0,0,0],c=Math.ceil(o[2]-o[0])||1,h=Math.ceil(o[3]-o[1])||1,d=e.cachedCanvases.getCanvas("pattern",c,h,!0),f=d.context;f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.rect(0,0,f.canvas.width,f.canvas.height),f.translate(-o[0],-o[1]),n=qt.transform(n,[1,0,0,1,o[0],o[1]]),f.transform(...e.baseTransform),this.matrix&&f.transform(...this.matrix),D_(f,this._bbox),f.fillStyle=this._createGradient(f),f.fill(),r=t.createPattern(d.canvas,"no-repeat");const p=new DOMMatrix(n);r.setTransform(p)}else D_(t,this._bbox),r=this._createGradient(t);return r}}function NA(s,t,e,n,i,r,o,c){const h=t.coords,d=t.colors,f=s.data,p=s.width*4;let m;h[e+1]>h[n+1]&&(m=e,e=n,n=m,m=r,r=o,o=m),h[n+1]>h[i+1]&&(m=n,n=i,i=m,m=o,o=c,c=m),h[e+1]>h[n+1]&&(m=e,e=n,n=m,m=r,r=o,o=m);const y=(h[e]+t.offsetX)*t.scaleX,w=(h[e+1]+t.offsetY)*t.scaleY,b=(h[n]+t.offsetX)*t.scaleX,E=(h[n+1]+t.offsetY)*t.scaleY,_=(h[i]+t.offsetX)*t.scaleX,k=(h[i+1]+t.offsetY)*t.scaleY;if(w>=k)return;const T=d[r],R=d[r+1],D=d[r+2],F=d[o],j=d[o+1],I=d[o+2],O=d[c],X=d[c+1],Q=d[c+2],H=Math.round(w),J=Math.round(k);let N,tt,$,G,gt,nt,Tt,U;for(let W=H;W<=J;W++){if(W<E){const St=W<w?0:(w-W)/(w-E);N=y-(y-b)*St,tt=T-(T-F)*St,$=R-(R-j)*St,G=D-(D-I)*St}else{let St;W>k?St=1:E===k?St=0:St=(E-W)/(E-k),N=b-(b-_)*St,tt=F-(F-O)*St,$=j-(j-X)*St,G=I-(I-Q)*St}let st;W<w?st=0:W>k?st=1:st=(w-W)/(w-k),gt=y-(y-_)*st,nt=T-(T-O)*st,Tt=R-(R-X)*st,U=D-(D-Q)*st;const lt=Math.round(Math.min(N,gt)),ut=Math.round(Math.max(N,gt));let Rt=p*W+lt*4;for(let St=lt;St<=ut;St++)st=(N-St)/(N-gt),st<0?st=0:st>1&&(st=1),f[Rt++]=tt-(tt-nt)*st|0,f[Rt++]=$-($-Tt)*st|0,f[Rt++]=G-(G-U)*st|0,f[Rt++]=255}}function bY(s,t,e){const n=t.coords,i=t.colors;let r,o;switch(t.type){case"lattice":const c=t.verticesPerRow,h=Math.floor(n.length/c)-1,d=c-1;for(r=0;r<h;r++){let f=r*c;for(let p=0;p<d;p++,f++)NA(s,e,n[f],n[f+1],n[f+c],i[f],i[f+1],i[f+c]),NA(s,e,n[f+c+1],n[f+1],n[f+c],i[f+c+1],i[f+1],i[f+c])}break;case"triangles":for(r=0,o=n.length;r<o;r+=3)NA(s,e,n[r],n[r+1],n[r+2],i[r],i[r+1],i[r+2]);break;default:throw new Error("illegal figure")}}class xY extends Ag{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,n){const i=Math.floor(this._bounds[0]),r=Math.floor(this._bounds[1]),o=Math.ceil(this._bounds[2])-i,c=Math.ceil(this._bounds[3])-r,h=Math.min(Math.ceil(Math.abs(o*t[0]*1.1)),3e3),d=Math.min(Math.ceil(Math.abs(c*t[1]*1.1)),3e3),f=o/h,p=c/d,m={coords:this._coords,colors:this._colors,offsetX:-i,offsetY:-r,scaleX:1/f,scaleY:1/p},y=h+4,w=d+4,b=n.getCanvas("mesh",y,w,!1),E=b.context,_=E.createImageData(h,d);if(e){const k=_.data;for(let T=0,R=k.length;T<R;T+=4)k[T]=e[0],k[T+1]=e[1],k[T+2]=e[2],k[T+3]=255}for(const k of this._figures)bY(_,k,m);return E.putImageData(_,2,2),{canvas:b.canvas,offsetX:i-2*f,offsetY:r-2*p,scaleX:f,scaleY:p}}getPattern(t,e,n,i){D_(t,this._bbox);let r;if(i===wi.SHADING)r=qt.singularValueDecompose2dScale(sn(t));else if(r=qt.singularValueDecompose2dScale(e.baseTransform),this.matrix){const c=qt.singularValueDecompose2dScale(this.matrix);r=[r[0]*c[0],r[1]*c[1]]}const o=this._createMeshCanvas(r,i===wi.SHADING?null:this._background,e.cachedCanvases);return i!==wi.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(o.offsetX,o.offsetY),t.scale(o.scaleX,o.scaleY),t.createPattern(o.canvas,"no-repeat")}}class wY extends Ag{getPattern(){return"hotpink"}}function AY(s){switch(s[0]){case"RadialAxial":return new vY(s);case"Mesh":return new xY(s);case"Dummy":return new wY}throw new Error(`Unknown IR type: ${s[0]}`)}const _L={COLORED:1,UNCOLORED:2},I3=class j3{constructor(t,e,n,i,r){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=n,this.canvasGraphicsFactory=i,this.baseTransform=r}createPatternCanvas(t){const e=this.operatorList,n=this.bbox,i=this.xstep,r=this.ystep,o=this.paintType,c=this.tilingType,h=this.color,d=this.canvasGraphicsFactory;u1("TilingType: "+c);const f=n[0],p=n[1],m=n[2],y=n[3],w=qt.singularValueDecompose2dScale(this.matrix),b=qt.singularValueDecompose2dScale(this.baseTransform),E=[w[0]*b[0],w[1]*b[1]],_=this.getSizeAndScale(i,this.ctx.canvas.width,E[0]),k=this.getSizeAndScale(r,this.ctx.canvas.height,E[1]),T=t.cachedCanvases.getCanvas("pattern",_.size,k.size,!0),R=T.context,D=d.createCanvasGraphics(R);D.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(D,o,h);let F=f,j=p,I=m,O=y;return f<0&&(F=0,I+=Math.abs(f)),p<0&&(j=0,O+=Math.abs(p)),R.translate(-(_.scale*F),-(k.scale*j)),D.transform(_.scale,0,0,k.scale,0,0),R.save(),this.clipBbox(D,F,j,I,O),D.baseTransform=sn(D.ctx),D.executeOperatorList(e),D.endDrawing(),{canvas:T.canvas,scaleX:_.scale,scaleY:k.scale,offsetX:F,offsetY:j}}getSizeAndScale(t,e,n){t=Math.abs(t);const i=Math.max(j3.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*n);return r>=i?r=i:n=r/t,{scale:n,size:r}}clipBbox(t,e,n,i,r){const o=i-e,c=r-n;t.ctx.rect(e,n,o,c),t.current.updateRectMinMax(sn(t.ctx),[e,n,i,r]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const i=t.ctx,r=t.current;switch(e){case _L.COLORED:const o=this.ctx;i.fillStyle=o.fillStyle,i.strokeStyle=o.strokeStyle,r.fillColor=o.fillStyle,r.strokeColor=o.strokeStyle;break;case _L.UNCOLORED:const c=qt.makeHexColor(n[0],n[1],n[2]);i.fillStyle=c,i.strokeStyle=c,r.fillColor=c,r.strokeColor=c;break;default:throw new Vq(`Unsupported paint type: ${e}`)}}getPattern(t,e,n,i){let r=n;i!==wi.SHADING&&(r=qt.transform(r,e.baseTransform),this.matrix&&(r=qt.transform(r,this.matrix)));const o=this.createPatternCanvas(e);let c=new DOMMatrix(r);c=c.translate(o.offsetX,o.offsetY),c=c.scale(1/o.scaleX,1/o.scaleY);const h=t.createPattern(o.canvas,"repeat");return h.setTransform(c),h}};oe(I3,"MAX_PATTERN_SIZE",3e3);let SY=I3;function _Y({src:s,srcPos:t=0,dest:e,width:n,height:i,nonBlackColor:r=4294967295,inverseDecode:o=!1}){const c=Wi.isLittleEndian?4278190080:255,[h,d]=o?[r,c]:[c,r],f=n>>3,p=n&7,m=s.length;e=new Uint32Array(e.buffer);let y=0;for(let w=0;w<i;w++){for(const E=t+f;t<E;t++){const _=t<m?s[t]:255;e[y++]=_&128?d:h,e[y++]=_&64?d:h,e[y++]=_&32?d:h,e[y++]=_&16?d:h,e[y++]=_&8?d:h,e[y++]=_&4?d:h,e[y++]=_&2?d:h,e[y++]=_&1?d:h}if(p===0)continue;const b=t<m?s[t++]:255;for(let E=0;E<p;E++)e[y++]=b&1<<7-E?d:h}return{srcPos:t,destPos:y}}const EL=16,CL=100,EY=15,kL=10,TL=1e3,Bi=16;function CY(s,t){if(s._removeMirroring)throw new Error("Context is already forwarding operations.");s.__originalSave=s.save,s.__originalRestore=s.restore,s.__originalRotate=s.rotate,s.__originalScale=s.scale,s.__originalTranslate=s.translate,s.__originalTransform=s.transform,s.__originalSetTransform=s.setTransform,s.__originalResetTransform=s.resetTransform,s.__originalClip=s.clip,s.__originalMoveTo=s.moveTo,s.__originalLineTo=s.lineTo,s.__originalBezierCurveTo=s.bezierCurveTo,s.__originalRect=s.rect,s.__originalClosePath=s.closePath,s.__originalBeginPath=s.beginPath,s._removeMirroring=()=>{s.save=s.__originalSave,s.restore=s.__originalRestore,s.rotate=s.__originalRotate,s.scale=s.__originalScale,s.translate=s.__originalTranslate,s.transform=s.__originalTransform,s.setTransform=s.__originalSetTransform,s.resetTransform=s.__originalResetTransform,s.clip=s.__originalClip,s.moveTo=s.__originalMoveTo,s.lineTo=s.__originalLineTo,s.bezierCurveTo=s.__originalBezierCurveTo,s.rect=s.__originalRect,s.closePath=s.__originalClosePath,s.beginPath=s.__originalBeginPath,delete s._removeMirroring},s.save=function(){t.save(),this.__originalSave()},s.restore=function(){t.restore(),this.__originalRestore()},s.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},s.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},s.transform=function(e,n,i,r,o,c){t.transform(e,n,i,r,o,c),this.__originalTransform(e,n,i,r,o,c)},s.setTransform=function(e,n,i,r,o,c){t.setTransform(e,n,i,r,o,c),this.__originalSetTransform(e,n,i,r,o,c)},s.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},s.rotate=function(e){t.rotate(e),this.__originalRotate(e)},s.clip=function(e){t.clip(e),this.__originalClip(e)},s.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},s.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},s.bezierCurveTo=function(e,n,i,r,o,c){t.bezierCurveTo(e,n,i,r,o,c),this.__originalBezierCurveTo(e,n,i,r,o,c)},s.rect=function(e,n,i,r){t.rect(e,n,i,r),this.__originalRect(e,n,i,r)},s.closePath=function(){t.closePath(),this.__originalClosePath()},s.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class kY{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let i;return this.cache[t]!==void 0?(i=this.cache[t],this.canvasFactory.reset(i,e,n)):(i=this.canvasFactory.create(e,n),this.cache[t]=i),i}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function o0(s,t,e,n,i,r,o,c,h,d){const[f,p,m,y,w,b]=sn(s);if(p===0&&m===0){const k=o*f+w,T=Math.round(k),R=c*y+b,D=Math.round(R),F=(o+h)*f+w,j=Math.abs(Math.round(F)-T)||1,I=(c+d)*y+b,O=Math.abs(Math.round(I)-D)||1;return s.setTransform(Math.sign(f),0,0,Math.sign(y),T,D),s.drawImage(t,e,n,i,r,0,0,j,O),s.setTransform(f,p,m,y,w,b),[j,O]}if(f===0&&y===0){const k=c*m+w,T=Math.round(k),R=o*p+b,D=Math.round(R),F=(c+d)*m+w,j=Math.abs(Math.round(F)-T)||1,I=(o+h)*p+b,O=Math.abs(Math.round(I)-D)||1;return s.setTransform(0,Math.sign(p),Math.sign(m),0,T,D),s.drawImage(t,e,n,i,r,0,0,O,j),s.setTransform(f,p,m,y,w,b),[O,j]}s.drawImage(t,e,n,i,r,o,c,h,d);const E=Math.hypot(f,p),_=Math.hypot(m,y);return[E*h,_*d]}function TY(s){const{width:t,height:e}=s;if(t>TL||e>TL)return null;const n=1e3,i=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=t+1;let o=new Uint8Array(r*(e+1)),c,h,d;const f=t+7&-8;let p=new Uint8Array(f*e),m=0;for(const E of s.data){let _=128;for(;_>0;)p[m++]=E&_?0:255,_>>=1}let y=0;for(m=0,p[m]!==0&&(o[0]=1,++y),h=1;h<t;h++)p[m]!==p[m+1]&&(o[h]=p[m]?2:1,++y),m++;for(p[m]!==0&&(o[h]=2,++y),c=1;c<e;c++){m=c*f,d=c*r,p[m-f]!==p[m]&&(o[d]=p[m]?1:8,++y);let E=(p[m]?4:0)+(p[m-f]?8:0);for(h=1;h<t;h++)E=(E>>2)+(p[m+1]?4:0)+(p[m-f+1]?8:0),i[E]&&(o[d+h]=i[E],++y),m++;if(p[m-f]!==p[m]&&(o[d+h]=p[m]?2:4,++y),y>n)return null}for(m=f*(e-1),d=c*r,p[m]!==0&&(o[d]=8,++y),h=1;h<t;h++)p[m]!==p[m+1]&&(o[d+h]=p[m]?4:8,++y),m++;if(p[m]!==0&&(o[d+h]=4,++y),y>n)return null;const w=new Int32Array([0,r,-1,0,-r,0,0,0,1]),b=new Path2D;for(c=0;y&&c<=e;c++){let E=c*r;const _=E+t;for(;E<_&&!o[E];)E++;if(E===_)continue;b.moveTo(E%r,c);const k=E;let T=o[E];do{const R=w[T];do E+=R;while(!o[E]);const D=o[E];D!==5&&D!==10?(T=D,o[E]=0):(T=D&51*T>>4,o[E]&=T>>2|T<<2),b.lineTo(E%r,E/r|0),o[E]||--y}while(k!==E);--c}return p=null,o=null,function(E){E.save(),E.scale(1/t,-1/e),E.translate(0,-e),E.fill(b),E.beginPath(),E.restore()}}class ML{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=e3,this.textMatrixScale=1,this.fontMatrix=DS,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=ei.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,n){[e,n]=qt.applyTransform([e,n],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(t,e){const n=qt.applyTransform(e,t),i=qt.applyTransform(e.slice(2),t),r=qt.applyTransform([e[0],e[3]],t),o=qt.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,n[0],i[0],r[0],o[0]),this.minY=Math.min(this.minY,n[1],i[1],r[1],o[1]),this.maxX=Math.max(this.maxX,n[0],i[0],r[0],o[0]),this.maxY=Math.max(this.maxY,n[1],i[1],r[1],o[1])}updateScalingPathMinMax(t,e){qt.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,n,i,r,o,c,h,d,f){const p=qt.bezierBoundingBox(e,n,i,r,o,c,h,d,f);f||this.updateRectMinMax(t,p)}getPathBoundingBox(t=wi.FILL,e=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(t===wi.STROKE){e||He("Stroke bounding box must include transform.");const i=qt.singularValueDecompose2dScale(e),r=i[0]*this.lineWidth/2,o=i[1]*this.lineWidth/2;n[0]-=r,n[1]-=o,n[2]+=r,n[3]+=o}return n}updateClipFromPath(){const t=qt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=wi.FILL,e=null){return qt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function RL(s,t){if(typeof ImageData<"u"&&t instanceof ImageData){s.putImageData(t,0,0);return}const e=t.height,n=t.width,i=e%Bi,r=(e-i)/Bi,o=i===0?r:r+1,c=s.createImageData(n,Bi);let h=0,d;const f=t.data,p=c.data;let m,y,w,b;if(t.kind===F0.GRAYSCALE_1BPP){const E=f.byteLength,_=new Uint32Array(p.buffer,0,p.byteLength>>2),k=_.length,T=n+7>>3,R=4294967295,D=Wi.isLittleEndian?4278190080:255;for(m=0;m<o;m++){for(w=m<r?Bi:i,d=0,y=0;y<w;y++){const F=E-h;let j=0;const I=F>T?n:F*8-7,O=I&-8;let X=0,Q=0;for(;j<O;j+=8)Q=f[h++],_[d++]=Q&128?R:D,_[d++]=Q&64?R:D,_[d++]=Q&32?R:D,_[d++]=Q&16?R:D,_[d++]=Q&8?R:D,_[d++]=Q&4?R:D,_[d++]=Q&2?R:D,_[d++]=Q&1?R:D;for(;j<I;j++)X===0&&(Q=f[h++],X=128),_[d++]=Q&X?R:D,X>>=1}for(;d<k;)_[d++]=0;s.putImageData(c,0,m*Bi)}}else if(t.kind===F0.RGBA_32BPP){for(y=0,b=n*Bi*4,m=0;m<r;m++)p.set(f.subarray(h,h+b)),h+=b,s.putImageData(c,0,y),y+=Bi;m<o&&(b=n*i*4,p.set(f.subarray(h,h+b)),s.putImageData(c,0,y))}else if(t.kind===F0.RGB_24BPP)for(w=Bi,b=n*w,m=0;m<o;m++){for(m>=r&&(w=i,b=n*w),d=0,y=b;y--;)p[d++]=f[h++],p[d++]=f[h++],p[d++]=f[h++],p[d++]=255;s.putImageData(c,0,m*Bi)}else throw new Error(`bad image kind: ${t.kind}`)}function PL(s,t){if(t.bitmap){s.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,i=e%Bi,r=(e-i)/Bi,o=i===0?r:r+1,c=s.createImageData(n,Bi);let h=0;const d=t.data,f=c.data;for(let p=0;p<o;p++){const m=p<r?Bi:i;({srcPos:h}=_Y({src:d,srcPos:h,dest:f,width:n,height:m,nonBlackColor:0})),s.putImageData(c,0,p*Bi)}}function df(s,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)s[n]!==void 0&&(t[n]=s[n]);s.setLineDash!==void 0&&(t.setLineDash(s.getLineDash()),t.lineDashOffset=s.lineDashOffset)}function l0(s){if(s.strokeStyle=s.fillStyle="#000000",s.fillRule="nonzero",s.globalAlpha=1,s.lineWidth=1,s.lineCap="butt",s.lineJoin="miter",s.miterLimit=10,s.globalCompositeOperation="source-over",s.font="10px sans-serif",s.setLineDash!==void 0&&(s.setLineDash([]),s.lineDashOffset=0),!mi){const{filter:t}=s;t!=="none"&&t!==""&&(s.filter="none")}}function LL(s,t){if(t)return!0;const e=qt.singularValueDecompose2dScale(s);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*Ju.PDF_TO_CSS_UNITS);return e[0]<=n&&e[1]<=n}const MY=["butt","round","square"],RY=["miter","round","bevel"],PY={},DL={};var Ty,N_,My,O_;const LY=class B3{constructor(t,e,n,i,r,{optionalContentConfig:o,markedContentStack:c=null},h,d){B(this,Ty),B(this,My),this.ctx=t,this.current=new ML(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=i,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=o,this.cachedCanvases=new kY(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=d,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:i=null}){const r=this.ctx.canvas.width,o=this.ctx.canvas.height,c=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,r,o),this.ctx.fillStyle=c,n){const h=this.cachedCanvases.getCanvas("transparent",r,o);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...sn(this.compositeCtx))}this.ctx.save(),l0(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=sn(this.ctx)}executeOperatorList(t,e,n,i){const r=t.argsArray,o=t.fnArray;let c=e||0;const h=r.length;if(h===c)return c;const d=h-c>kL&&typeof n=="function",f=d?Date.now()+EY:0;let p=0;const m=this.commonObjs,y=this.objs;let w;for(;;){if(i!==void 0&&c===i.nextBreakPoint)return i.breakIt(c,n),c;if(w=o[c],w!==$s.dependency)this[w].apply(this,r[c]);else for(const b of r[c]){const E=b.startsWith("g_")?m:y;if(!E.has(b))return E.get(b,n),c}if(c++,c===h)return c;if(d&&++p>kL){if(Date.now()>f)return n(),c;p=0}}}endDrawing(){q(this,Ty,N_).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),q(this,My,O_).call(this)}_scaleImage(t,e){const n=t.width,i=t.height;let r=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),c=n,h=i,d="prescale1",f,p;for(;r>2&&c>1||o>2&&h>1;){let m=c,y=h;r>2&&c>1&&(m=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c/2),r/=c/m),o>2&&h>1&&(y=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,o/=h/y),f=this.cachedCanvases.getCanvas(d,m,y),p=f.context,p.clearRect(0,0,m,y),p.drawImage(t,0,0,c,h,0,0,m,y),t=f.canvas,c=m,h=y,d=d==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:c,paintHeight:h}}_createMaskCanvas(t){const e=this.ctx,{width:n,height:i}=t,r=this.current.fillColor,o=this.current.patternFill,c=sn(e);let h,d,f,p;if((t.bitmap||t.data)&&t.count>1){const I=t.bitmap||t.data.buffer;d=JSON.stringify(o?c:[c.slice(0,4),r]),h=this._cachedBitmapsMap.get(I),h||(h=new Map,this._cachedBitmapsMap.set(I,h));const O=h.get(d);if(O&&!o){const X=Math.round(Math.min(c[0],c[2])+c[4]),Q=Math.round(Math.min(c[1],c[3])+c[5]);return{canvas:O,offsetX:X,offsetY:Q}}f=O}f||(p=this.cachedCanvases.getCanvas("maskCanvas",n,i),PL(p.context,t));let m=qt.transform(c,[1/n,0,0,-1/i,0,0]);m=qt.transform(m,[1,0,0,1,0,-i]);const[y,w,b,E]=qt.getAxialAlignedBoundingBox([0,0,n,i],m),_=Math.round(b-y)||1,k=Math.round(E-w)||1,T=this.cachedCanvases.getCanvas("fillCanvas",_,k),R=T.context,D=y,F=w;R.translate(-D,-F),R.transform(...m),f||(f=this._scaleImage(p.canvas,ea(R)),f=f.img,h&&o&&h.set(d,f)),R.imageSmoothingEnabled=LL(sn(R),t.interpolate),o0(R,f,0,0,f.width,f.height,0,0,n,i),R.globalCompositeOperation="source-in";const j=qt.transform(ea(R),[1,0,0,1,-D,-F]);return R.fillStyle=o?r.getPattern(e,this,j,wi.FILL):r,R.fillRect(0,0,n,i),h&&!o&&(this.cachedCanvases.delete("fillCanvas"),h.set(d,T.canvas)),{canvas:T.canvas,offsetX:Math.round(D),offsetY:Math.round(F)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=MY[t]}setLineJoin(t){this.ctx.lineJoin=RY[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(t),n.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,n]of t)switch(e){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(n,t,e);this.suspendedCtx=this.ctx,this.ctx=i.context;const r=this.ctx;r.setTransform(...sn(this.suspendedCtx)),df(this.suspendedCtx,r),CY(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),df(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,i){const r=i[0],o=i[1],c=i[2]-r,h=i[3]-o;c===0||h===0||(this.genericComposeSMask(e.context,n,c,h,e.subtype,e.backdrop,e.transferMap,r,o,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,i,r,o,c,h,d,f,p){let m=t.canvas,y=h-f,w=d-p;if(o){if(y<0||w<0||y+n>m.width||w+i>m.height){const E=this.cachedCanvases.getCanvas("maskExtension",n,i),_=E.context;_.drawImage(m,-y,-w),o.some(k=>k!==0)&&(_.globalCompositeOperation="destination-atop",_.fillStyle=qt.makeHexColor(...o),_.fillRect(0,0,n,i),_.globalCompositeOperation="source-over"),m=E.canvas,y=w=0}else if(o.some(E=>E!==0)){t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const E=new Path2D;E.rect(y,w,n,i),t.clip(E),t.globalCompositeOperation="destination-atop",t.fillStyle=qt.makeHexColor(...o),t.fillRect(y,w,n,i),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),r==="Alpha"&&c?e.filter=this.filterFactory.addAlphaFilter(c):r==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(c));const b=new Path2D;b.rect(h,d,n,i),e.clip(b),e.globalCompositeOperation="destination-in",e.drawImage(m,y,w,n,i,h,d,n,i),e.restore()}save(){this.inSMaskMode?(df(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),df(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,n,i,r,o){this.ctx.transform(t,e,n,i,r,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n){const i=this.ctx,r=this.current;let o=r.x,c=r.y,h,d;const f=sn(i),p=f[0]===0&&f[3]===0||f[1]===0&&f[2]===0,m=p?n.slice(0):null;for(let y=0,w=0,b=t.length;y<b;y++)switch(t[y]|0){case $s.rectangle:o=e[w++],c=e[w++];const E=e[w++],_=e[w++],k=o+E,T=c+_;i.moveTo(o,c),E===0||_===0?i.lineTo(k,T):(i.lineTo(k,c),i.lineTo(k,T),i.lineTo(o,T)),p||r.updateRectMinMax(f,[o,c,k,T]),i.closePath();break;case $s.moveTo:o=e[w++],c=e[w++],i.moveTo(o,c),p||r.updatePathMinMax(f,o,c);break;case $s.lineTo:o=e[w++],c=e[w++],i.lineTo(o,c),p||r.updatePathMinMax(f,o,c);break;case $s.curveTo:h=o,d=c,o=e[w+4],c=e[w+5],i.bezierCurveTo(e[w],e[w+1],e[w+2],e[w+3],o,c),r.updateCurvePathMinMax(f,h,d,e[w],e[w+1],e[w+2],e[w+3],o,c,m),w+=6;break;case $s.curveTo2:h=o,d=c,i.bezierCurveTo(o,c,e[w],e[w+1],e[w+2],e[w+3]),r.updateCurvePathMinMax(f,h,d,o,c,e[w],e[w+1],e[w+2],e[w+3],m),o=e[w+2],c=e[w+3],w+=4;break;case $s.curveTo3:h=o,d=c,o=e[w+2],c=e[w+3],i.bezierCurveTo(e[w],e[w+1],o,c,o,c),r.updateCurvePathMinMax(f,h,d,e[w],e[w+1],o,c,o,c,m),w+=4;break;case $s.closePath:i.closePath();break}p&&r.updateScalingPathMinMax(f,m),r.setCurrentPoint(o,c)}closePath(){this.ctx.closePath()}stroke(t=!0){const e=this.ctx,n=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&n!=null&&n.getPattern?(e.save(),e.strokeStyle=n.getPattern(e,this,ea(e),wi.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const e=this.ctx,n=this.current.fillColor,i=this.current.patternFill;let r=!1;i&&(e.save(),e.fillStyle=n.getPattern(e,this,ea(e),wi.FILL),r=!0);const o=this.current.getClippedPathBoundingBox();this.contentVisible&&o!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),r&&e.restore(),t&&this.consumePath(o)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=PY}eoClip(){this.pendingClip=DL}beginText(){this.current.textMatrix=e3,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}e.save(),e.beginPath();for(const n of t)e.setTransform(...n.transform),e.translate(n.x,n.y),n.addToPath(e,n.fontSize);e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var n;const i=this.commonObjs.get(t),r=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(r.fontMatrix=i.fontMatrix||DS,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&ue("Invalid font matrix for font "+t),e<0?(e=-e,r.fontDirection=-1):r.fontDirection=1,this.current.font=i,this.current.fontSize=e,i.isType3Font)return;const o=i.loadedName||"sans-serif",c=((n=i.systemFontInfo)==null?void 0:n.css)||`"${o}", ${i.fallbackName}`;let h="normal";i.black?h="900":i.bold&&(h="bold");const d=i.italic?"italic":"normal";let f=e;e<EL?f=EL:e>CL&&(f=CL),this.current.fontSizeScale=e/f,this.ctx.font=`${d} ${h} ${f}px ${c}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,n,i,r,o){this.current.textMatrix=[t,e,n,i,r,o],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,n,i){const r=this.ctx,o=this.current,c=o.font,h=o.textRenderingMode,d=o.fontSize/o.fontSizeScale,f=h&ei.FILL_STROKE_MASK,p=!!(h&ei.ADD_TO_PATH_FLAG),m=o.patternFill&&!c.missingFile;let y;(c.disableFontFace||p||m)&&(y=c.getPathGenerator(this.commonObjs,t)),c.disableFontFace||m?(r.save(),r.translate(e,n),r.beginPath(),y(r,d),i&&r.setTransform(...i),(f===ei.FILL||f===ei.FILL_STROKE)&&r.fill(),(f===ei.STROKE||f===ei.FILL_STROKE)&&r.stroke(),r.restore()):((f===ei.FILL||f===ei.FILL_STROKE)&&r.fillText(t,e,n),(f===ei.STROKE||f===ei.FILL_STROKE)&&r.strokeText(t,e,n)),p&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:sn(r),x:e,y:n,fontSize:d,addToPath:y})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<e.length;i+=4)if(e[i]>0&&e[i]<255){n=!0;break}return Ee(this,"isFontSubpixelAAEnabled",n)}showText(t){const e=this.current,n=e.font;if(n.isType3Font)return this.showType3Text(t);const i=e.fontSize;if(i===0)return;const r=this.ctx,o=e.fontSizeScale,c=e.charSpacing,h=e.wordSpacing,d=e.fontDirection,f=e.textHScale*d,p=t.length,m=n.vertical,y=m?1:-1,w=n.defaultVMetrics,b=i*e.fontMatrix[0],E=e.textRenderingMode===ei.FILL&&!n.disableFontFace&&!e.patternFill;r.save(),r.transform(...e.textMatrix),r.translate(e.x,e.y+e.textRise),d>0?r.scale(f,-1):r.scale(f,1);let _;if(e.patternFill){r.save();const F=e.fillColor.getPattern(r,this,ea(r),wi.FILL);_=sn(r),r.restore(),r.fillStyle=F}let k=e.lineWidth;const T=e.textMatrixScale;if(T===0||k===0){const F=e.textRenderingMode&ei.FILL_STROKE_MASK;(F===ei.STROKE||F===ei.FILL_STROKE)&&(k=this.getSinglePixelWidth())}else k/=T;if(o!==1&&(r.scale(o,o),k/=o),r.lineWidth=k,n.isInvalidPDFjsFont){const F=[];let j=0;for(const I of t)F.push(I.unicode),j+=I.width;r.fillText(F.join(""),0,0),e.x+=j*b*f,r.restore(),this.compose();return}let R=0,D;for(D=0;D<p;++D){const F=t[D];if(typeof F=="number"){R+=y*F*i/1e3;continue}let j=!1;const I=(F.isSpace?h:0)+c,O=F.fontChar,X=F.accent;let Q,H,J=F.width;if(m){const tt=F.vmetric||w,$=-(F.vmetric?tt[1]:J*.5)*b,G=tt[2]*b;J=tt?-tt[0]:J,Q=$/o,H=(R+G)/o}else Q=R/o,H=0;if(n.remeasure&&J>0){const tt=r.measureText(O).width*1e3/i*o;if(J<tt&&this.isFontSubpixelAAEnabled){const $=J/tt;j=!0,r.save(),r.scale($,1),Q/=$}else J!==tt&&(Q+=(J-tt)/2e3*i/o)}if(this.contentVisible&&(F.isInFont||n.missingFile)){if(E&&!X)r.fillText(O,Q,H);else if(this.paintChar(O,Q,H,_),X){const tt=Q+i*X.offset.x/o,$=H-i*X.offset.y/o;this.paintChar(X.fontChar,tt,$,_)}}const N=m?J*b-I*d:J*b+I*d;R+=N,j&&r.restore()}m?e.y-=R:e.x+=R*f,r.restore(),this.compose()}showType3Text(t){const e=this.ctx,n=this.current,i=n.font,r=n.fontSize,o=n.fontDirection,c=i.vertical?1:-1,h=n.charSpacing,d=n.wordSpacing,f=n.textHScale*o,p=n.fontMatrix||DS,m=t.length,y=n.textRenderingMode===ei.INVISIBLE;let w,b,E,_;if(!(y||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...n.textMatrix),e.translate(n.x,n.y),e.scale(f,o),w=0;w<m;++w){if(b=t[w],typeof b=="number"){_=c*b*r/1e3,this.ctx.translate(_,0),n.x+=_*f;continue}const k=(b.isSpace?d:0)+h,T=i.charProcOperatorList[b.operatorListId];if(!T){ue(`Type3 character "${b.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=b,this.save(),e.scale(r,r),e.transform(...p),this.executeOperatorList(T),this.restore()),E=qt.applyTransform([b.width,0],p)[0]*r+k,e.translate(E,0),n.x+=E*f}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,n,i,r,o){this.ctx.rect(n,i,r-n,o-i),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const n=t[1],i=this.baseTransform||sn(this.ctx),r={createCanvasGraphics:o=>new B3(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new SY(t,n,this.ctx,r,i)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,n){const i=qt.makeHexColor(t,e,n);this.ctx.strokeStyle=i,this.current.strokeColor=i}setFillRGBColor(t,e,n){const i=qt.makeHexColor(t,e,n);this.ctx.fillStyle=i,this.current.fillColor=i,this.current.patternFill=!1}_getPattern(t,e=null){let n;return this.cachedPatterns.has(t)?n=this.cachedPatterns.get(t):(n=AY(this.getObject(t)),this.cachedPatterns.set(t,n)),e&&(n.matrix=e),n}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const n=this._getPattern(t);e.fillStyle=n.getPattern(e,this,ea(e),wi.SHADING);const i=ea(e);if(i){const{width:r,height:o}=e.canvas,[c,h,d,f]=qt.getAxialAlignedBoundingBox([0,0,r,o],i);this.ctx.fillRect(c,h,d-c,f-h)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){He("Should not call beginInlineImage")}beginImageData(){He("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=sn(this.ctx),e)){const n=e[2]-e[0],i=e[3]-e[1];this.ctx.rect(e[0],e[1],n,i),this.current.updateRectMinMax(sn(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||u1("TODO: Support non-isolated groups."),t.knockout&&ue("Knockout groups not supported.");const n=sn(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let i=qt.getAxialAlignedBoundingBox(t.bbox,sn(e));const r=[0,0,e.canvas.width,e.canvas.height];i=qt.intersect(i,r)||[0,0,0,0];const o=Math.floor(i[0]),c=Math.floor(i[1]),h=Math.max(Math.ceil(i[2])-o,1),d=Math.max(Math.ceil(i[3])-c,1);this.current.startNewPathAndClipBox([0,0,h,d]);let f="groupAt"+this.groupLevel;t.smask&&(f+="_smask_"+this.smaskCounter++%2);const p=this.cachedCanvases.getCanvas(f,h,d),m=p.context;m.translate(-o,-c),m.transform(...n),t.smask?this.smaskStack.push({canvas:p.canvas,context:m,offsetX:o,offsetY:c,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(o,c),e.save()),df(e,m),this.ctx=m,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const i=sn(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...i);const r=qt.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],i);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(t,e,n,i,r){if(q(this,Ty,N_).call(this),l0(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const o=e[2]-e[0],c=e[3]-e[1];if(r&&this.annotationCanvasMap){n=n.slice(),n[4]-=e[0],n[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=o,e[3]=c;const[h,d]=qt.singularValueDecompose2dScale(sn(this.ctx)),{viewportScale:f}=this,p=Math.ceil(o*this.outputScaleX*f),m=Math.ceil(c*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(p,m);const{canvas:y,context:w}=this.annotationCanvas;this.annotationCanvasMap.set(t,y),this.annotationCanvas.savedCtx=this.ctx,this.ctx=w,this.ctx.save(),this.ctx.setTransform(h,0,0,-d,0,c*d),l0(this.ctx)}else l0(this.ctx),this.ctx.rect(e[0],e[1],o,c),this.ctx.clip(),this.endPath()}this.current=new ML(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),q(this,My,O_).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const n=this.ctx,i=this.processingType3;if(i&&(i.compiled===void 0&&(i.compiled=TY(t)),i.compiled)){i.compiled(n);return}const r=this._createMaskCanvas(t),o=r.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(o,r.offsetX,r.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n=0,i=0,r,o){if(!this.contentVisible)return;t=this.getObject(t.data,t);const c=this.ctx;c.save();const h=sn(c);c.transform(e,n,i,r,0,0);const d=this._createMaskCanvas(t);c.setTransform(1,0,0,1,d.offsetX-h[4],d.offsetY-h[5]);for(let f=0,p=o.length;f<p;f+=2){const m=qt.transform(h,[e,n,i,r,o[f],o[f+1]]),[y,w]=qt.applyTransform([0,0],m);c.drawImage(d.canvas,y,w)}c.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,n=this.current.fillColor,i=this.current.patternFill;for(const r of t){const{data:o,width:c,height:h,transform:d}=r,f=this.cachedCanvases.getCanvas("maskCanvas",c,h),p=f.context;p.save();const m=this.getObject(o,r);PL(p,m),p.globalCompositeOperation="source-in",p.fillStyle=i?n.getPattern(p,this,ea(e),wi.FILL):n,p.fillRect(0,0,c,h),p.restore(),e.save(),e.transform(...d),e.scale(1,-1),o0(e,f.canvas,0,0,c,h,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){ue("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,n,i){if(!this.contentVisible)return;const r=this.getObject(t);if(!r){ue("Dependent image isn't ready yet");return}const o=r.width,c=r.height,h=[];for(let d=0,f=i.length;d<f;d+=2)h.push({transform:[e,0,0,n,i[d],i[d+1]],x:0,y:0,w:o,h:c});this.paintInlineImageXObjectGroup(r,h)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:i}=t,r=this.cachedCanvases.getCanvas("inlineImage",n,i),o=r.context;return o.filter=this.current.transferMaps,o.drawImage(e,0,0),o.filter="none",r.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,n=t.height,i=this.ctx;if(this.save(),!mi){const{filter:c}=i;c!=="none"&&c!==""&&(i.filter="none")}i.scale(1/e,-1/n);let r;if(t.bitmap)r=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)r=t;else{const c=this.cachedCanvases.getCanvas("inlineImage",e,n).context;RL(c,t),r=this.applyTransferMapsToCanvas(c)}const o=this._scaleImage(r,ea(i));i.imageSmoothingEnabled=LL(sn(i),t.interpolate),o0(i,o.img,0,0,o.paintWidth,o.paintHeight,0,-n,e,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx;let i;if(t.bitmap)i=t.bitmap;else{const r=t.width,o=t.height,c=this.cachedCanvases.getCanvas("inlineImage",r,o).context;RL(c,t),i=this.applyTransferMapsToCanvas(c)}for(const r of e)n.save(),n.transform(...r.transform),n.scale(1,-1),o0(n,i,r.x,r.y,r.w,r.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const n=this.ctx;this.pendingClip&&(e||(this.pendingClip===DL?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=sn(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),i=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:i,d:r}=this.ctx.getTransform();let o,c;if(n===0&&i===0){const h=Math.abs(e),d=Math.abs(r);if(h===d)if(t===0)o=c=1/h;else{const f=h*t;o=c=f<1?1/f:1}else if(t===0)o=1/h,c=1/d;else{const f=h*t,p=d*t;o=f<1?1/f:1,c=p<1?1/p:1}}else{const h=Math.abs(e*r-n*i),d=Math.hypot(e,n),f=Math.hypot(i,r);if(t===0)o=f/h,c=d/h;else{const p=t*h;o=f>p?f/p:1,c=d>p?d/p:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=c}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:n}=this.current,[i,r]=this.getScaleForStroking();if(e.lineWidth=n||1,i===1&&r===1){e.stroke();return}const o=e.getLineDash();if(t&&e.save(),e.scale(i,r),o.length>0){const c=Math.max(i,r);e.setLineDash(o.map(h=>h/c)),e.lineDashOffset/=c}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};Ty=new WeakSet,N_=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},My=new WeakSet,O_=function(){if(this.pageColors){const s=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(s!=="none"){const t=this.ctx.filter;this.ctx.filter=s,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}};let Ry=LY;for(const s in $s)Ry.prototype[s]!==void 0&&(Ry.prototype[$s[s]]=Ry.prototype[s]);var ab,ob;class qo{static get workerPort(){return v(this,ab)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");Y(this,ab,t)}static get workerSrc(){return v(this,ob)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");Y(this,ob,t)}}ab=new WeakMap,ob=new WeakMap,B(qo,ab,null),B(qo,ob,"");const c0={DATA:1,ERROR:2},An={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function es(s){switch(s instanceof Error||typeof s=="object"&&s!==null||He('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),s.name){case"AbortException":return new kc(s.message);case"MissingPDFException":return new Cc(s.message);case"PasswordException":return new OS(s.message,s.code);case"UnexpectedResponseException":return new d1(s.message,s.status);case"UnknownErrorException":return new IS(s.message,s.details);default:return new IS(s.message,s.toString())}}var I_,F3,j_,z3,$f,h0;class qf{constructor(t,e,n){B(this,I_),B(this,j_),B(this,$f),this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=i=>{const r=i.data;if(r.targetName!==this.sourceName)return;if(r.stream){q(this,j_,z3).call(this,r);return}if(r.callback){const c=r.callbackId,h=this.callbackCapabilities[c];if(!h)throw new Error(`Cannot resolve callback ${c}`);if(delete this.callbackCapabilities[c],r.callback===c0.DATA)h.resolve(r.data);else if(r.callback===c0.ERROR)h.reject(es(r.reason));else throw new Error("Unexpected callback case");return}const o=this.actionHandler[r.action];if(!o)throw new Error(`Unknown action from worker: ${r.action}`);if(r.callbackId){const c=this.sourceName,h=r.sourceName;new Promise(function(d){d(o(r.data))}).then(function(d){n.postMessage({sourceName:c,targetName:h,callback:c0.DATA,callbackId:r.callbackId,data:d})},function(d){n.postMessage({sourceName:c,targetName:h,callback:c0.ERROR,callbackId:r.callbackId,reason:es(d)})});return}if(r.streamId){q(this,I_,F3).call(this,r);return}o(r.data)},n.addEventListener("message",this._onComObjOnMessage)}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const i=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[i]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:i,data:e},n)}catch(o){r.reject(o)}return r.promise}sendWithStream(t,e,n,i){const r=this.streamId++,o=this.sourceName,c=this.targetName,h=this.comObj;return new ReadableStream({start:d=>{const f=Promise.withResolvers();return this.streamControllers[r]={controller:d,startCall:f,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:o,targetName:c,action:t,streamId:r,data:e,desiredSize:d.desiredSize},i),f.promise},pull:d=>{const f=Promise.withResolvers();return this.streamControllers[r].pullCall=f,h.postMessage({sourceName:o,targetName:c,stream:An.PULL,streamId:r,desiredSize:d.desiredSize}),f.promise},cancel:d=>{Mn(d instanceof Error,"cancel must have a valid reason");const f=Promise.withResolvers();return this.streamControllers[r].cancelCall=f,this.streamControllers[r].isClosed=!0,h.postMessage({sourceName:o,targetName:c,stream:An.CANCEL,streamId:r,reason:es(d)}),f.promise}},n)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}I_=new WeakSet,F3=function(s){const t=s.streamId,e=this.sourceName,n=s.sourceName,i=this.comObj,r=this,o=this.actionHandler[s.action],c={enqueue(h,d=1,f){if(this.isCancelled)return;const p=this.desiredSize;this.desiredSize-=d,p>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:e,targetName:n,stream:An.ENQUEUE,streamId:t,chunk:h},f)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:e,targetName:n,stream:An.CLOSE,streamId:t}),delete r.streamSinks[t])},error(h){Mn(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,i.postMessage({sourceName:e,targetName:n,stream:An.ERROR,streamId:t,reason:es(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:s.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[t]=c,new Promise(function(h){h(o(s.data,c))}).then(function(){i.postMessage({sourceName:e,targetName:n,stream:An.START_COMPLETE,streamId:t,success:!0})},function(h){i.postMessage({sourceName:e,targetName:n,stream:An.START_COMPLETE,streamId:t,reason:es(h)})})},j_=new WeakSet,z3=function(s){const t=s.streamId,e=this.sourceName,n=s.sourceName,i=this.comObj,r=this.streamControllers[t],o=this.streamSinks[t];switch(s.stream){case An.START_COMPLETE:s.success?r.startCall.resolve():r.startCall.reject(es(s.reason));break;case An.PULL_COMPLETE:s.success?r.pullCall.resolve():r.pullCall.reject(es(s.reason));break;case An.PULL:if(!o){i.postMessage({sourceName:e,targetName:n,stream:An.PULL_COMPLETE,streamId:t,success:!0});break}o.desiredSize<=0&&s.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=s.desiredSize,new Promise(function(c){var h;c((h=o.onPull)==null?void 0:h.call(o))}).then(function(){i.postMessage({sourceName:e,targetName:n,stream:An.PULL_COMPLETE,streamId:t,success:!0})},function(c){i.postMessage({sourceName:e,targetName:n,stream:An.PULL_COMPLETE,streamId:t,reason:es(c)})});break;case An.ENQUEUE:if(Mn(r,"enqueue should have stream controller"),r.isClosed)break;r.controller.enqueue(s.chunk);break;case An.CLOSE:if(Mn(r,"close should have stream controller"),r.isClosed)break;r.isClosed=!0,r.controller.close(),q(this,$f,h0).call(this,r,t);break;case An.ERROR:Mn(r,"error should have stream controller"),r.controller.error(es(s.reason)),q(this,$f,h0).call(this,r,t);break;case An.CANCEL_COMPLETE:s.success?r.cancelCall.resolve():r.cancelCall.reject(es(s.reason)),q(this,$f,h0).call(this,r,t);break;case An.CANCEL:if(!o)break;new Promise(function(c){var h;c((h=o.onCancel)==null?void 0:h.call(o,es(s.reason)))}).then(function(){i.postMessage({sourceName:e,targetName:n,stream:An.CANCEL_COMPLETE,streamId:t,success:!0})},function(c){i.postMessage({sourceName:e,targetName:n,stream:An.CANCEL_COMPLETE,streamId:t,reason:es(c)})}),o.sinkCapability.reject(es(s.reason)),o.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},$f=new WeakSet,h0=async function(s,t){var e,n,i;await Promise.allSettled([(e=s.startCall)==null?void 0:e.promise,(n=s.pullCall)==null?void 0:n.promise,(i=s.cancelCall)==null?void 0:i.promise]),delete this.streamControllers[t]};var Wh,Py;class DY{constructor({parsedData:t,rawData:e}){B(this,Wh,void 0),B(this,Py,void 0),Y(this,Wh,t),Y(this,Py,e)}getRaw(){return v(this,Py)}get(t){return v(this,Wh).get(t)??null}getAll(){return sC(v(this,Wh))}has(t){return v(this,Wh).has(t)}}Wh=new WeakMap,Py=new WeakMap;const vo=Symbol("INTERNAL");var Ly,Dy,Ny,Yf;class NY{constructor(t,{name:e,intent:n,usage:i}){B(this,Ly,!1),B(this,Dy,!1),B(this,Ny,!1),B(this,Yf,!0),Y(this,Ly,!!(t&Ds.DISPLAY)),Y(this,Dy,!!(t&Ds.PRINT)),this.name=e,this.intent=n,this.usage=i}get visible(){if(v(this,Ny))return v(this,Yf);if(!v(this,Yf))return!1;const{print:t,view:e}=this.usage;return v(this,Ly)?e?.viewState!=="OFF":v(this,Dy)?t?.printState!=="OFF":!0}_setVisible(t,e,n=!1){t!==vo&&He("Internal method `_setVisible` called."),Y(this,Ny,n),Y(this,Yf,e)}}Ly=new WeakMap,Dy=new WeakMap,Ny=new WeakMap,Yf=new WeakMap;var Cl,Ve,Xf,Kf,lb,B_;class OY{constructor(t,e=Ds.DISPLAY){if(B(this,lb),B(this,Cl,null),B(this,Ve,new Map),B(this,Xf,null),B(this,Kf,null),this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,Y(this,Kf,t.order);for(const n of t.groups)v(this,Ve).set(n.id,new NY(e,n));if(t.baseState==="OFF")for(const n of v(this,Ve).values())n._setVisible(vo,!1);for(const n of t.on)v(this,Ve).get(n)._setVisible(vo,!0);for(const n of t.off)v(this,Ve).get(n)._setVisible(vo,!1);Y(this,Xf,this.getHash())}}isVisible(t){if(v(this,Ve).size===0)return!0;if(!t)return u1("Optional content group not defined."),!0;if(t.type==="OCG")return v(this,Ve).has(t.id)?v(this,Ve).get(t.id).visible:(ue(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return q(this,lb,B_).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!v(this,Ve).has(e))return ue(`Optional content group not found: ${e}`),!0;if(v(this,Ve).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!v(this,Ve).has(e))return ue(`Optional content group not found: ${e}`),!0;if(!v(this,Ve).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!v(this,Ve).has(e))return ue(`Optional content group not found: ${e}`),!0;if(!v(this,Ve).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!v(this,Ve).has(e))return ue(`Optional content group not found: ${e}`),!0;if(v(this,Ve).get(e).visible)return!1}return!0}return ue(`Unknown optional content policy ${t.policy}.`),!0}return ue(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0){const n=v(this,Ve).get(t);if(!n){ue(`Optional content group not found: ${t}`);return}n._setVisible(vo,!!e,!0),Y(this,Cl,null)}setOCGState({state:t,preserveRB:e}){let n;for(const i of t){switch(i){case"ON":case"OFF":case"Toggle":n=i;continue}const r=v(this,Ve).get(i);if(r)switch(n){case"ON":r._setVisible(vo,!0);break;case"OFF":r._setVisible(vo,!1);break;case"Toggle":r._setVisible(vo,!r.visible);break}}Y(this,Cl,null)}get hasInitialVisibility(){return v(this,Xf)===null||this.getHash()===v(this,Xf)}getOrder(){return v(this,Ve).size?v(this,Kf)?v(this,Kf).slice():[...v(this,Ve).keys()]:null}getGroups(){return v(this,Ve).size>0?sC(v(this,Ve)):null}getGroup(t){return v(this,Ve).get(t)||null}getHash(){if(v(this,Cl)!==null)return v(this,Cl);const t=new L3;for(const[e,n]of v(this,Ve))t.update(`${e}:${n.visible}`);return Y(this,Cl,t.hexdigest())}}Cl=new WeakMap,Ve=new WeakMap,Xf=new WeakMap,Kf=new WeakMap,lb=new WeakSet,B_=function(s){const t=s.length;if(t<2)return!0;const e=s[0];for(let n=1;n<t;n++){const i=s[n];let r;if(Array.isArray(i))r=q(this,lb,B_).call(this,i);else if(v(this,Ve).has(i))r=v(this,Ve).get(i).visible;else return ue(`Optional content group not found: ${i}`),!0;switch(e){case"And":if(!r)return!1;break;case"Or":if(r)return!0;break;case"Not":return!r;default:return!0}}return e==="And"};class IY{constructor(t,{disableRange:e=!1,disableStream:n=!1}){Mn(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:r,progressiveDone:o,contentDispositionFilename:c}=t;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=c,r?.length>0){const h=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(h)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((h,d)=>{this._onReceiveData({begin:h,chunk:d})}),t.addProgressListener((h,d)=>{this._onProgress({loaded:h,total:d})}),t.addProgressiveReadListener(h=>{this._onReceiveData({chunk:h})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const i=this._rangeReaders.some(function(r){return r._begin!==t?!1:(r._enqueue(n),!0)});Mn(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,n,i,r;t.total===void 0?(n=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||n.call(e,{loaded:t.loaded}):(r=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||r.call(i,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){Mn(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new jY(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new BY(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class jY{constructor(t,e,n=!1,i=null){this._stream=t,this._done=n||!1,this._filename=cC(i)?i:null,this._queuedChunks=e||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class BY{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function FY(s){let t=!0,e=n("filename\\*","i").exec(s);if(e){e=e[1];let f=c(e);return f=unescape(f),f=h(f),f=d(f),r(f)}if(e=o(s),e){const f=d(e);return r(f)}if(e=n("filename","i").exec(s),e){e=e[1];let f=c(e);return f=d(f),r(f)}function n(f,p){return new RegExp("(?:^|;)\\s*"+f+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',p)}function i(f,p){if(f){if(!/^[\x00-\xFF]+$/.test(p))return p;try{const m=new TextDecoder(f,{fatal:!0}),y=f1(p);p=m.decode(y),t=!1}catch{}}return p}function r(f){return t&&/[\x80-\xff]/.test(f)&&(f=i("utf-8",f),t&&(f=i("iso-8859-1",f))),f}function o(f){const p=[];let m;const y=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(m=y.exec(f))!==null;){let[,b,E,_]=m;if(b=parseInt(b,10),b in p){if(b===0)break;continue}p[b]=[E,_]}const w=[];for(let b=0;b<p.length&&b in p;++b){let[E,_]=p[b];_=c(_),E&&(_=unescape(_),b===0&&(_=h(_))),w.push(_)}return w.join("")}function c(f){if(f.startsWith('"')){const p=f.slice(1).split('\\"');for(let m=0;m<p.length;++m){const y=p[m].indexOf('"');y!==-1&&(p[m]=p[m].slice(0,y),p.length=m+1),p[m]=p[m].replaceAll(/\\(.)/g,"$1")}f=p.join('"')}return f}function h(f){const p=f.indexOf("'");if(p===-1)return f;const m=f.slice(0,p),y=f.slice(p+1).replace(/^[^']*'/,"");return i(m,y)}function d(f){return!f.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(f)?f:f.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(p,m,y,w){if(y==="q"||y==="Q")return w=w.replaceAll("_"," "),w=w.replaceAll(/=([0-9a-fA-F]{2})/g,function(b,E){return String.fromCharCode(parseInt(E,16))}),i(m,w);try{w=atob(w)}catch{}return i(m,w)})}return""}function dC({getResponseHeader:s,isHttp:t,rangeChunkSize:e,disableRange:n}){const i={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(s("Content-Length"),10);return!Number.isInteger(r)||(i.suggestedLength=r,r<=2*e)||n||!t||s("Accept-Ranges")!=="bytes"||(s("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function fC(s){const t=s("Content-Disposition");if(t){let e=FY(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(cC(e))return e}return null}function b1(s,t){return s===404||s===0&&t.startsWith("file:")?new Cc('Missing PDF "'+t+'".'):new d1(`Unexpected server response (${s}) while retrieving PDF "${t}".`,s)}function U3(s){return s===200||s===206}function H3(s,t,e){return{method:"GET",headers:s,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function W3(s){const t=new Headers;for(const e in s){const n=s[e];n!==void 0&&t.append(e,n)}return t}function G3(s){return s instanceof Uint8Array?s.buffer:s instanceof ArrayBuffer?s:(ue(`getArrayBuffer - unexpected data format: ${s}`),new Uint8Array(s).buffer)}class NL{constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Mn(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new zY(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new UY(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class zY{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._headers=W3(this._stream.httpHeaders);const n=e.url;fetch(n,H3(this._headers,this._withCredentials,this._abortController)).then(i=>{if(!U3(i.status))throw b1(i.status,n);this._reader=i.body.getReader(),this._headersCapability.resolve();const r=h=>i.headers.get(h),{allowRangeRequests:o,suggestedLength:c}=dC({getResponseHeader:r,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=c||this._contentLength,this._filename=fC(r),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new kc("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var t;await this._headersCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:(this._loaded+=e.byteLength,(t=this.onProgress)==null||t.call(this,{loaded:this._loaded,total:this._contentLength}),{value:G3(e),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class UY{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const i=t.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController,this._headers=W3(this._stream.httpHeaders),this._headers.append("Range",`bytes=${e}-${n-1}`);const r=i.url;fetch(r,H3(this._headers,this._withCredentials,this._abortController)).then(o=>{if(!U3(o.status))throw b1(o.status,r);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var t;await this._readCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:(this._loaded+=e.byteLength,(t=this.onProgress)==null||t.call(this,{loaded:this._loaded}),{value:G3(e),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const OA=200,IA=206;function HY(s){const t=s.response;return typeof t!="string"?t:f1(t).buffer}class WY{constructor(t,e={}){this.url=t,this.isHttp=/^https?:/i.test(t),this.httpHeaders=this.isHttp&&e.httpHeaders||Object.create(null),this.withCredentials=e.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(t,e,n){const i={begin:t,end:e};for(const r in n)i[r]=n[r];return this.request(i)}requestFull(t){return this.request(t)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const r in this.httpHeaders){const o=this.httpHeaders[r];o!==void 0&&e.setRequestHeader(r,o)}return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),i.expectedStatus=IA):i.expectedStatus=OA,e.responseType="arraybuffer",t.onError&&(e.onerror=function(r){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=t.onHeadersReceived,i.onDone=t.onDone,i.onError=t.onError,i.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){var n;const i=this.pendingRequests[t];i&&((n=i.onProgress)==null||n.call(i,e))}onStateChange(t,e){var n,i,r;const o=this.pendingRequests[t];if(!o)return;const c=o.xhr;if(c.readyState>=2&&o.onHeadersReceived&&(o.onHeadersReceived(),delete o.onHeadersReceived),c.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],c.status===0&&this.isHttp){(n=o.onError)==null||n.call(o,c.status);return}const h=c.status||OA;if(!(h===OA&&o.expectedStatus===IA)&&h!==o.expectedStatus){(i=o.onError)==null||i.call(o,c.status);return}const d=HY(c);if(h===IA){const f=c.getResponseHeader("Content-Range"),p=/bytes (\d+)-(\d+)\/(\d+)/.exec(f);o.onDone({begin:parseInt(p[1],10),chunk:d})}else d?o.onDone({begin:0,chunk:d}):(r=o.onError)==null||r.call(o,c.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class GY{constructor(t){this._source=t,this._manager=new WY(t.url,{httpHeaders:t.httpHeaders,withCredentials:t.withCredentials}),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return Mn(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new VY(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new $Y(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class VY{constructor(t,e){this._manager=t;const n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=t.requestFull(n),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t),n=o=>e.getResponseHeader(o),{allowRangeRequests:i,suggestedLength:r}=dC({getResponseHeader:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=r||this._contentLength,this._filename=fC(n),this._isRangeSupported&&this._manager.abortRequest(t),this._headersReceivedCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=b1(t,this._url),this._headersReceivedCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersReceivedCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class $Y{constructor(t,e,n){this._manager=t;const i={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._requestId=t.requestRange(e,n,i),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError=b1(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const V3=/^file:\/\/\/[a-zA-Z]:\//;function qY(s){const t=Lr.get("url"),e=t.parse(s);return e.protocol==="file:"||e.host?e:/^[a-z]:[/\\]/i.test(s)?t.parse(`file:///${s}`):(e.host||(e.protocol="file:"),e)}class YY{constructor(t){this.source=t,this.url=qY(t.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Mn(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new ZY(this):new XY(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=this.isFsUrl?new QY(this,t,e):new KY(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class $3{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var t;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(t=this.onProgress)==null||t.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new kc("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class q3{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const e=t.source;this._isStreamingSupported=!e.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var t;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(t=this.onProgress)==null||t.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function cb(s,t){return{protocol:s.protocol,auth:s.auth,host:s.hostname,port:s.port,path:s.path,method:"GET",headers:t}}class XY extends $3{constructor(t){super(t);const e=n=>{if(n.statusCode===404){const c=new Cc(`Missing PDF "${this._url}".`);this._storedError=c,this._headersCapability.reject(c);return}this._headersCapability.resolve(),this._setReadableStream(n);const i=c=>this._readableStream.headers[c.toLowerCase()],{allowRangeRequests:r,suggestedLength:o}=dC({getResponseHeader:i,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=r,this._contentLength=o||this._contentLength,this._filename=fC(i)};if(this._request=null,this._url.protocol==="http:"){const n=Lr.get("http");this._request=n.request(cb(this._url,t.httpHeaders),e)}else{const n=Lr.get("https");this._request=n.request(cb(this._url,t.httpHeaders),e)}this._request.on("error",n=>{this._storedError=n,this._headersCapability.reject(n)}),this._request.end()}}class KY extends q3{constructor(t,e,n){super(t),this._httpHeaders={};for(const r in t.httpHeaders){const o=t.httpHeaders[r];o!==void 0&&(this._httpHeaders[r]=o)}this._httpHeaders.Range=`bytes=${e}-${n-1}`;const i=r=>{if(r.statusCode===404){const o=new Cc(`Missing PDF "${this._url}".`);this._storedError=o;return}this._setReadableStream(r)};if(this._request=null,this._url.protocol==="http:"){const r=Lr.get("http");this._request=r.request(cb(this._url,this._httpHeaders),i)}else{const r=Lr.get("https");this._request=r.request(cb(this._url,this._httpHeaders),i)}this._request.on("error",r=>{this._storedError=r}),this._request.end()}}class ZY extends $3{constructor(t){super(t);let e=decodeURIComponent(this._url.path);V3.test(this._url.href)&&(e=e.replace(/^\//,""));const n=Lr.get("fs");n.promises.lstat(e).then(i=>{this._contentLength=i.size,this._setReadableStream(n.createReadStream(e)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=new Cc(`Missing PDF "${e}".`)),this._storedError=i,this._headersCapability.reject(i)})}}class QY extends q3{constructor(t,e,n){super(t);let i=decodeURIComponent(this._url.path);V3.test(this._url.href)&&(i=i.replace(/^\//,""));const r=Lr.get("fs");this._setReadableStream(r.createReadStream(i,{start:e,end:n-1}))}}const JY=1e5,Li=30,tX=.8;var OL,ml,Zi,u0,d0,yl,co,f0,p0,yh,ff,pf,vl,gf,g0,mf,vh,m0,y0,_s,bh,xh,yf,jA,IL,BA,jL,v0,FA,vf,b0,zA,BL;let hb=(_s=class{constructor({textContentSource:s,container:t,viewport:e}){if(B(this,jA),B(this,BA),B(this,v0),B(this,ml,Promise.withResolvers()),B(this,Zi,null),B(this,u0,!1),B(this,d0,!!((OL=globalThis.FontInspector)!=null&&OL.enabled)),B(this,yl,null),B(this,co,null),B(this,f0,0),B(this,p0,0),B(this,yh,null),B(this,ff,null),B(this,pf,0),B(this,vl,0),B(this,gf,Object.create(null)),B(this,g0,[]),B(this,mf,null),B(this,vh,[]),B(this,m0,new WeakMap),B(this,y0,null),s instanceof ReadableStream)Y(this,mf,s);else if(typeof s=="object")Y(this,mf,new ReadableStream({start(c){c.enqueue(s),c.close()}}));else throw new Error('No "textContentSource" parameter specified.');Y(this,Zi,Y(this,ff,t)),Y(this,vl,e.scale*(globalThis.devicePixelRatio||1)),Y(this,pf,e.rotation),Y(this,co,{prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:null});const{pageWidth:n,pageHeight:i,pageX:r,pageY:o}=e.rawDims;Y(this,y0,[1,0,0,-1,-r,o+i]),Y(this,p0,n),Y(this,f0,i),yc(t,e),v(this,ml).promise.catch(()=>{}).then(()=>{v(_s,yf).delete(this),Y(this,co,null),Y(this,gf,null)})}render(){const s=()=>{v(this,yh).read().then(({value:t,done:e})=>{if(e){v(this,ml).resolve();return}v(this,yl)??Y(this,yl,t.lang),Object.assign(v(this,gf),t.styles),q(this,jA,IL).call(this,t.items),s()},v(this,ml).reject)};return Y(this,yh,v(this,mf).getReader()),v(_s,yf).add(this),s(),v(this,ml).promise}update({viewport:s,onBefore:t=null}){var e;const n=s.scale*(globalThis.devicePixelRatio||1),i=s.rotation;if(i!==v(this,pf)&&(t?.(),Y(this,pf,i),yc(v(this,ff),{rotation:i})),n!==v(this,vl)){t?.(),Y(this,vl,n);const r={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:q(e=_s,vf,b0).call(e,v(this,yl))};for(const o of v(this,vh))r.properties=v(this,m0).get(o),r.div=o,q(this,v0,FA).call(this,r)}}cancel(){var s;const t=new kc("TextLayer task cancelled.");(s=v(this,yh))==null||s.cancel(t).catch(()=>{}),Y(this,yh,null),v(this,ml).reject(t)}get textDivs(){return v(this,vh)}get textContentItemsStr(){return v(this,g0)}static cleanup(){if(!(v(this,yf).size>0)){v(this,bh).clear();for(const{canvas:s}of v(this,xh).values())s.remove();v(this,xh).clear()}}},ml=new WeakMap,Zi=new WeakMap,u0=new WeakMap,d0=new WeakMap,yl=new WeakMap,co=new WeakMap,f0=new WeakMap,p0=new WeakMap,yh=new WeakMap,ff=new WeakMap,pf=new WeakMap,vl=new WeakMap,gf=new WeakMap,g0=new WeakMap,mf=new WeakMap,vh=new WeakMap,m0=new WeakMap,y0=new WeakMap,bh=new WeakMap,xh=new WeakMap,yf=new WeakMap,jA=new WeakSet,IL=function(s){var t,e;if(v(this,u0))return;(e=v(this,co)).ctx||(e.ctx=q(t=_s,vf,b0).call(t,v(this,yl)));const n=v(this,vh),i=v(this,g0);for(const r of s){if(n.length>JY){ue("Ignoring additional textDivs for performance reasons."),Y(this,u0,!0);return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){const o=v(this,Zi);Y(this,Zi,document.createElement("span")),v(this,Zi).classList.add("markedContent"),r.id!==null&&v(this,Zi).setAttribute("id",`${r.id}`),o.append(v(this,Zi))}else r.type==="endMarkedContent"&&Y(this,Zi,v(this,Zi).parentNode);continue}i.push(r.str),q(this,BA,jL).call(this,r)}},BA=new WeakSet,jL=function(s){var t;const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:s.str!=="",hasEOL:s.hasEOL,fontSize:0};v(this,vh).push(e);const i=qt.transform(v(this,y0),s.transform);let r=Math.atan2(i[1],i[0]);const o=v(this,gf)[s.fontName];o.vertical&&(r+=Math.PI/2);const c=v(this,d0)&&o.fontSubstitution||o.fontFamily,h=Math.hypot(i[2],i[3]),d=h*q(t=_s,zA,BL).call(t,c,v(this,yl));let f,p;r===0?(f=i[4],p=i[5]-d):(f=i[4]+d*Math.sin(r),p=i[5]-d*Math.cos(r));const m="calc(var(--scale-factor)*",y=e.style;v(this,Zi)===v(this,ff)?(y.left=`${(100*f/v(this,p0)).toFixed(2)}%`,y.top=`${(100*p/v(this,f0)).toFixed(2)}%`):(y.left=`${m}${f.toFixed(2)}px)`,y.top=`${m}${p.toFixed(2)}px)`),y.fontSize=`${m}${h.toFixed(2)}px)`,y.fontFamily=c,n.fontSize=h,e.setAttribute("role","presentation"),e.textContent=s.str,e.dir=s.dir,v(this,d0)&&(e.dataset.fontName=o.fontSubstitutionLoadedName||s.fontName),r!==0&&(n.angle=r*(180/Math.PI));let w=!1;if(s.str.length>1)w=!0;else if(s.str!==" "&&s.transform[0]!==s.transform[3]){const b=Math.abs(s.transform[0]),E=Math.abs(s.transform[3]);b!==E&&Math.max(b,E)/Math.min(b,E)>1.5&&(w=!0)}if(w&&(n.canvasWidth=o.vertical?s.height:s.width),v(this,m0).set(e,n),v(this,co).div=e,v(this,co).properties=n,q(this,v0,FA).call(this,v(this,co)),n.hasText&&v(this,Zi).append(e),n.hasEOL){const b=document.createElement("br");b.setAttribute("role","presentation"),v(this,Zi).append(b)}},v0=new WeakSet,FA=function(s){const{div:t,properties:e,ctx:n,prevFontSize:i,prevFontFamily:r}=s,{style:o}=t;let c="";if(e.canvasWidth!==0&&e.hasText){const{fontFamily:h}=o,{canvasWidth:d,fontSize:f}=e;(i!==f||r!==h)&&(n.font=`${f*v(this,vl)}px ${h}`,s.prevFontSize=f,s.prevFontFamily=h);const{width:p}=n.measureText(t.textContent);p>0&&(c=`scaleX(${d*v(this,vl)/p})`)}e.angle!==0&&(c=`rotate(${e.angle}deg) ${c}`),c.length>0&&(o.transform=c)},vf=new WeakSet,b0=function(s=null){let t=v(this,xh).get(s||(s=""));if(!t){const e=document.createElement("canvas");e.className="hiddenCanvasElement",e.lang=s,document.body.append(e),t=e.getContext("2d",{alpha:!1}),v(this,xh).set(s,t)}return t},zA=new WeakSet,BL=function(s,t){const e=v(this,bh).get(s);if(e)return e;const n=q(this,vf,b0).call(this,t),i=n.font;n.canvas.width=n.canvas.height=Li,n.font=`${Li}px ${s}`;const r=n.measureText("");let o=r.fontBoundingBoxAscent,c=Math.abs(r.fontBoundingBoxDescent);if(o){const f=o/(o+c);return v(this,bh).set(s,f),n.canvas.width=n.canvas.height=0,n.font=i,f}n.strokeStyle="red",n.clearRect(0,0,Li,Li),n.strokeText("g",0,0);let h=n.getImageData(0,0,Li,Li).data;c=0;for(let f=h.length-1-3;f>=0;f-=4)if(h[f]>0){c=Math.ceil(f/4/Li);break}n.clearRect(0,0,Li,Li),n.strokeText("A",0,Li),h=n.getImageData(0,0,Li,Li).data,o=0;for(let f=0,p=h.length;f<p;f+=4)if(h[f]>0){o=Li-Math.floor(f/4/Li);break}n.canvas.width=n.canvas.height=0,n.font=i;const d=o?o/(o+c):tX;return v(this,bh).set(s,d),d},B(_s,vf),B(_s,zA),B(_s,bh,new Map),B(_s,xh,new Map),B(_s,yf,new Set),_s);function eX(){l3("`renderTextLayer`, please use `TextLayer` instead.");const{textContentSource:s,container:t,viewport:e,...n}=arguments[0],i=Object.keys(n);i.length>0&&ue("Ignoring `renderTextLayer` parameters: "+i.join(", "));const r=new hb({textContentSource:s,container:t,viewport:e}),{textDivs:o,textContentItemsStr:c}=r;return{promise:r.render(),textDivs:o,textContentItemsStr:c}}function nX(){l3("`updateTextLayer`, please use `TextLayer` instead.")}class lg{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function i(r){var o;if(!r)return;let c=null;const h=r.name;if(h==="#text")c=r.value;else if(lg.shouldBuildText(h))(o=r?.attributes)!=null&&o.textContent?c=r.attributes.textContent:r.value&&(c=r.value);else return;if(c!==null&&e.push({str:c}),!!r.children)for(const d of r.children)i(d)}return i(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const iX=65536,sX=100,rX=5e3,aX=mi?gY:Jq,oX=mi?mY:a3,lX=mi?pY:Qq,cX=mi?yY:o3;function hX(s){if(typeof s=="string"||s instanceof URL?s={url:s}:(s instanceof ArrayBuffer||ArrayBuffer.isView(s))&&(s={data:s}),typeof s!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!s.url&&!s.data&&!s.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const t=new fX,{docId:e}=t,n=s.url?uX(s.url):null,i=s.data?dX(s.data):null,r=s.httpHeaders||null,o=s.withCredentials===!0,c=s.password??null,h=s.range instanceof K3?s.range:null,d=Number.isInteger(s.rangeChunkSize)&&s.rangeChunkSize>0?s.rangeChunkSize:iX;let f=s.worker instanceof Iy?s.worker:null;const p=s.verbosity,m=typeof s.docBaseUrl=="string"&&!lC(s.docBaseUrl)?s.docBaseUrl:null,y=typeof s.cMapUrl=="string"?s.cMapUrl:null,w=s.cMapPacked!==!1,b=s.CMapReaderFactory||oX,E=typeof s.standardFontDataUrl=="string"?s.standardFontDataUrl:null,_=s.StandardFontDataFactory||cX,k=s.stopAtErrors!==!0,T=Number.isInteger(s.maxImageSize)&&s.maxImageSize>-1?s.maxImageSize:-1,R=s.isEvalSupported!==!1,D=typeof s.isOffscreenCanvasSupported=="boolean"?s.isOffscreenCanvasSupported:!mi,F=Number.isInteger(s.canvasMaxAreaInBytes)?s.canvasMaxAreaInBytes:-1,j=typeof s.disableFontFace=="boolean"?s.disableFontFace:mi,I=s.fontExtraProperties===!0,O=s.enableXfa===!0,X=s.ownerDocument||globalThis.document,Q=s.disableRange===!0,H=s.disableStream===!0,J=s.disableAutoFetch===!0,N=s.pdfBug===!0,tt=h?h.length:s.length??NaN,$=typeof s.useSystemFonts=="boolean"?s.useSystemFonts:!mi&&!j,G=typeof s.useWorkerFetch=="boolean"?s.useWorkerFetch:b===a3&&_===o3&&y&&E&&Lf(y,document.baseURI)&&Lf(E,document.baseURI),gt=s.canvasFactory||new aX({ownerDocument:X}),nt=s.filterFactory||new lX({docId:e,ownerDocument:X}),Tt=null;Uq(p);const U={canvasFactory:gt,filterFactory:nt};if(G||(U.cMapReaderFactory=new b({baseUrl:y,isCompressed:w}),U.standardFontDataFactory=new _({baseUrl:E})),!f){const lt={verbosity:p,port:qo.workerPort};f=lt.port?Iy.fromPort(lt):new Iy(lt),t._worker=f}const W={docId:e,apiVersion:"4.3.136",data:i,password:c,disableAutoFetch:J,rangeChunkSize:d,length:tt,docBaseUrl:m,enableXfa:O,evaluatorOptions:{maxImageSize:T,disableFontFace:j,ignoreErrors:k,isEvalSupported:R,isOffscreenCanvasSupported:D,canvasMaxAreaInBytes:F,fontExtraProperties:I,useSystemFonts:$,cMapUrl:G?y:null,standardFontDataUrl:G?E:null}},st={disableFontFace:j,fontExtraProperties:I,ownerDocument:X,pdfBug:N,styleElement:Tt,loadingParams:{disableAutoFetch:J,enableXfa:O}};return f.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const lt=f.messageHandler.sendWithPromise("GetDocRequest",W,i?[i.buffer]:null);let ut;return h?ut=new IY(h,{disableRange:Q,disableStream:H}):i||(ut=(Rt=>mi?(function(){return typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype})()&&Lf(Rt.url)?new NL(Rt):new YY(Rt):Lf(Rt.url)?new NL(Rt):new GY(Rt))({url:n,length:tt,httpHeaders:r,withCredentials:o,rangeChunkSize:d,disableRange:Q,disableStream:H})),lt.then(Rt=>{if(t.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const St=new qf(e,Rt,f.port),Ct=new yX(St,t,ut,st,U);t._transport=Ct,St.send("Ready",null)})}).catch(t._capability.reject),t}function uX(s){if(s instanceof URL)return s.href;try{return new URL(s,window.location).href}catch{if(mi&&typeof s=="string")return s}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function dX(s){if(mi&&typeof LS<"u"&&s instanceof LS)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength)return s;if(typeof s=="string")return f1(s);if(s instanceof ArrayBuffer||ArrayBuffer.isView(s)||typeof s=="object"&&!isNaN(s?.length))return new Uint8Array(s);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function FL(s){return typeof s=="object"&&Number.isInteger(s?.num)&&s.num>=0&&Number.isInteger(s?.gen)&&s.gen>=0}var F_;const Y3=class X3{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${js(X3,F_)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var t,e,n;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(i){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,i}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};F_=new WeakMap,B(Y3,F_,0);let fX=Y3,K3=class{constructor(s,t,e=!1,n=null){this.length=s,this.initialData=t,this.progressiveDone=e,this.contentDispositionFilename=n,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(s){this._rangeListeners.push(s)}addProgressListener(s){this._progressListeners.push(s)}addProgressiveReadListener(s){this._progressiveReadListeners.push(s)}addProgressiveDoneListener(s){this._progressiveDoneListeners.push(s)}onDataRange(s,t){for(const e of this._rangeListeners)e(s,t)}onDataProgress(s,t){this._readyCapability.promise.then(()=>{for(const e of this._progressListeners)e(s,t)})}onDataProgressiveRead(s){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(s)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const s of this._progressiveDoneListeners)s()})}transportReady(){this._readyCapability.resolve()}requestDataRange(s,t){He("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class pX{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Ee(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var kl,No,Gl,pu,Dp,ub;class gX{constructor(t,e,n,i=!1){B(this,Gl),B(this,Dp),B(this,kl,null),B(this,No,!1),this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=i?new mL:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new Z3,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:r=!1}={}){return new xg({viewBox:this.view,scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:r})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Ee(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:n="display",annotationMode:i=Po.ENABLE,transform:r=null,background:o=null,optionalContentConfigPromise:c=null,annotationCanvasMap:h=null,pageColors:d=null,printAnnotationStorage:f=null}){var p,m;(p=this._stats)==null||p.time("Overall");const y=this._transport.getRenderingIntent(n,i,f),{renderingIntent:w,cacheKey:b}=y;Y(this,No,!1),q(this,Dp,ub).call(this),c||(c=this._transport.getOptionalContentConfig(w));let E=this._intentStates.get(b);E||(E=Object.create(null),this._intentStates.set(b,E)),E.streamReaderCancelTimeout&&(clearTimeout(E.streamReaderCancelTimeout),E.streamReaderCancelTimeout=null);const _=!!(w&Ds.PRINT);E.displayReadyCapability||(E.displayReadyCapability=Promise.withResolvers(),E.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(m=this._stats)==null||m.time("Page Request"),this._pumpOperatorList(y));const k=D=>{var F;E.renderTasks.delete(T),(this._maybeCleanupAfterRender||_)&&Y(this,No,!0),q(this,Gl,pu).call(this,!_),D?(T.capability.reject(D),this._abortOperatorList({intentState:E,reason:D instanceof Error?D:new Error(D)})):T.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(F=globalThis.Stats)!=null&&F.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},T=new bX({callback:k,params:{canvasContext:t,viewport:e,transform:r,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:h,operatorList:E.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!_,pdfBug:this._pdfBug,pageColors:d});(E.renderTasks||(E.renderTasks=new Set)).add(T);const R=T.task;return Promise.all([E.displayReadyCapability.promise,c]).then(([D,F])=>{var j;if(this.destroyed){k();return}if((j=this._stats)==null||j.time("Rendering"),!(F.renderingIntent&w))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");T.initializeGraphics({transparency:D,optionalContentConfig:F}),T.operatorListChanged()}).catch(k),R}getOperatorList({intent:t="display",annotationMode:e=Po.ENABLE,printAnnotationStorage:n=null}={}){var i;function r(){c.operatorList.lastChunk&&(c.opListReadCapability.resolve(c.operatorList),c.renderTasks.delete(h))}const o=this._transport.getRenderingIntent(t,e,n,!0);let c=this._intentStates.get(o.cacheKey);c||(c=Object.create(null),this._intentStates.set(o.cacheKey,c));let h;return c.opListReadCapability||(h=Object.create(null),h.operatorListChanged=r,c.opListReadCapability=Promise.withResolvers(),(c.renderTasks||(c.renderTasks=new Set)).add(h),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(i=this._stats)==null||i.time("Page Request"),this._pumpOperatorList(o)),c.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(n){return n.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>lg.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,i){function r(){o.read().then(function({value:h,done:d}){if(d){n(c);return}c.lang??(c.lang=h.lang),Object.assign(c.styles,h.styles),c.items.push(...h.items),r()},i)}const o=e.getReader(),c={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),Y(this,No,!1),q(this,Dp,ub).call(this),Promise.all(t)}cleanup(t=!1){Y(this,No,!0);const e=q(this,Gl,pu).call(this,!1);return t&&e&&this._stats&&(this._stats=new mL),e}_startRenderPage(t,e){var n,i;const r=this._intentStates.get(e);r&&((n=this._stats)==null||n.timeEnd("Page Request"),(i=r.displayReadyCapability)==null||i.resolve(t))}_renderPageChunk(t,e){for(let n=0,i=t.length;n<i;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&q(this,Gl,pu).call(this,!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n}){const{map:i,transfer:r}=n,o=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:i},r).getReader(),c=this._intentStates.get(e);c.streamReader=o;const h=()=>{o.read().then(({value:d,done:f})=>{if(f){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,c),h())},d=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(const f of c.renderTasks)f.operatorListChanged();q(this,Gl,pu).call(this,!0)}if(c.displayReadyCapability)c.displayReadyCapability.reject(d);else if(c.opListReadCapability)c.opListReadCapability.reject(d);else throw d}})};h()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof oC){let i=sX;e.extraDelay>0&&e.extraDelay<1e3&&(i+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},i);return}}if(t.streamReader.cancel(new kc(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[i,r]of this._intentStates)if(r===t){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}kl=new WeakMap,No=new WeakMap,Gl=new WeakSet,pu=function(s=!1){if(q(this,Dp,ub).call(this),!v(this,No)||this.destroyed)return!1;if(s)return Y(this,kl,setTimeout(()=>{Y(this,kl,null),q(this,Gl,pu).call(this,!1)},rX)),!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),Y(this,No,!1),!0},Dp=new WeakSet,ub=function(){v(this,kl)&&(clearTimeout(v(this,kl)),Y(this,kl,null))};var Gh,z_;class mX{constructor(){B(this,Gh,new Set),B(this,z_,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};v(this,z_).then(()=>{for(const i of v(this,Gh))i.call(this,n)})}addEventListener(t,e){v(this,Gh).add(e)}removeEventListener(t,e){v(this,Gh).delete(e)}terminate(){v(this,Gh).clear()}}Gh=new WeakMap,z_=new WeakMap;const wa={isWorkerDisabled:!1,fakeWorkerId:0};mi&&(wa.isWorkerDisabled=!0,qo.workerSrc||(qo.workerSrc="./pdf.worker.mjs")),wa.isSameOrigin=function(s,t){let e;try{if(e=new URL(s),!e.origin||e.origin==="null")return!1}catch{return!1}const n=new URL(t,e);return e.origin===n.origin},wa.createCDNWrapper=function(s){const t=`await import("${s}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};var Vl,Np,Oy;const U_=class ua{constructor({name:t=null,port:e=null,verbosity:n=Hq()}={}){var i;if(this.name=t,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((i=v(ua,Vl))!=null&&i.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(v(ua,Vl)||Y(ua,Vl,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return mi?Promise.all([Lr.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new qf("main","worker",t),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!wa.isWorkerDisabled&&!v(ua,Np,Oy)){let{workerSrc:t}=ua;try{wa.isSameOrigin(window.location.href,t)||(t=wa.createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new qf("main","worker",e),i=()=>{e.removeEventListener("error",r),n.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=()=>{this._webWorker||i()};e.addEventListener("error",r),n.on("test",c=>{if(e.removeEventListener("error",r),this.destroyed){i();return}c?(this._messageHandler=n,this._port=e,this._webWorker=e,this._readyCapability.resolve(),n.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),n.destroy(),e.terminate())}),n.on("ready",c=>{if(e.removeEventListener("error",r),this.destroyed){i();return}try{o()}catch{this._setupFakeWorker()}});const o=()=>{const c=new Uint8Array;n.send("test",c,[c.buffer])};o();return}catch{u1("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){wa.isWorkerDisabled||(ue("Setting up fake worker."),wa.isWorkerDisabled=!0),ua._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new mX;this._port=e;const n=`fake${wa.fakeWorkerId++}`,i=new qf(n+"_worker",n,e);t.setup(i,e);const r=new qf(n,n+"_worker",e);this._messageHandler=r,this._readyCapability.resolve(),r.send("configure",{verbosity:this.verbosity})}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(t=v(ua,Vl))==null||t.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){var e;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const n=(e=v(this,Vl))==null?void 0:e.get(t.port);if(n){if(n._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return n}return new ua(t)}static get workerSrc(){if(qo.workerSrc)return qo.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Ee(this,"_setupFakeWorkerGlobal",(async()=>v(this,Np,Oy)?v(this,Np,Oy):(await import(this.workerSrc)).WorkerMessageHandler)())}};Vl=new WeakMap,Np=new WeakSet,Oy=function(){var s;try{return((s=globalThis.pdfjsWorker)==null?void 0:s.WorkerMessageHandler)||null}catch{return null}},B(U_,Np),B(U_,Vl,void 0);let Iy=U_;var Oo,da,Zf,Qf,fa,Vh,Jf;class yX{constructor(t,e,n,i,r){B(this,Vh),B(this,Oo,new Map),B(this,da,new Map),B(this,Zf,new Map),B(this,Qf,new Map),B(this,fa,null),this.messageHandler=t,this.loadingTask=e,this.commonObjs=new Z3,this.fontLoader=new dY({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Ee(this,"annotationStorage",new uC)}getRenderingIntent(t,e=Po.ENABLE,n=null,i=!1){let r=Ds.DISPLAY,o=R_;switch(t){case"any":r=Ds.ANY;break;case"display":break;case"print":r=Ds.PRINT;break;default:ue(`getRenderingIntent - invalid intent: ${t}`)}switch(e){case Po.DISABLE:r+=Ds.ANNOTATIONS_DISABLE;break;case Po.ENABLE:break;case Po.ENABLE_FORMS:r+=Ds.ANNOTATIONS_FORMS;break;case Po.ENABLE_STORAGE:r+=Ds.ANNOTATIONS_STORAGE,o=(r&Ds.PRINT&&n instanceof N3?n:this.annotationStorage).serializable;break;default:ue(`getRenderingIntent - invalid annotationMode: ${e}`)}return i&&(r+=Ds.OPLIST),{renderingIntent:r,cacheKey:`${r}_${o.hash}`,annotationStorageSerializable:o}}destroy(){var t;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(t=v(this,fa))==null||t.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of v(this,da).values())e.push(i._destroy());v(this,da).clear(),v(this,Zf).clear(),v(this,Qf).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return e.push(n),Promise.all(e).then(()=>{var i;this.commonObjs.clear(),this.fontLoader.clear(),v(this,Oo).clear(),this.filterFactory.destroy(),hb.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new kc("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,i)=>{Mn(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},i.onPull=()=>{this._fullReader.read().then(function({value:r,done:o}){if(o){i.close();return}Mn(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{i.error(r)})},i.onCancel=r=>{this._fullReader.cancel(r),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",n=>{const i=Promise.withResolvers(),r=this._fullReader;return r.headersReady.then(()=>{var o;(!r.isStreamingSupported||!r.isRangeSupported)&&(this._lastProgress&&((o=e.onProgress)==null||o.call(e,this._lastProgress)),r.onProgress=c=>{var h;(h=e.onProgress)==null||h.call(e,{loaded:c.loaded,total:c.total})}),i.resolve({isStreamingSupported:r.isStreamingSupported,isRangeSupported:r.isRangeSupported,contentLength:r.contentLength})},i.reject),i.promise}),t.on("GetRangeReader",(n,i)=>{Mn(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(n.begin,n.end);if(!r){i.close();return}i.onPull=()=>{r.read().then(function({value:o,done:c}){if(c){i.close();return}Mn(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{r.cancel(o),i.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new pX(n,this))}),t.on("DocException",function(n){let i;switch(n.name){case"PasswordException":i=new OS(n.message,n.code);break;case"InvalidPDFException":i=new n3(n.message);break;case"MissingPDFException":i=new Cc(n.message);break;case"UnexpectedResponseException":i=new d1(n.message,n.status);break;case"UnknownErrorException":i=new IS(n.message,n.details);break;default:He("DocException - expected a valid Error.")}e._capability.reject(i)}),t.on("PasswordRequest",n=>{if(Y(this,fa,Promise.withResolvers()),e.onPassword){const i=r=>{r instanceof Error?v(this,fa).reject(r):v(this,fa).resolve({password:r})};try{e.onPassword(i,n.code)}catch(r){v(this,fa).reject(r)}}else v(this,fa).reject(new OS(n.message,n.code));return v(this,fa).promise}),t.on("DataLoaded",n=>{var i;(i=e.onProgress)==null||i.call(e,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{this.destroyed||v(this,da).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,i,r])=>{var o;if(this.destroyed||this.commonObjs.has(n))return null;switch(i){case"Font":const{disableFontFace:c,fontExtraProperties:h,pdfBug:d}=this._params;if("error"in r){const y=r.error;ue(`Error during font loading: ${y}`),this.commonObjs.resolve(n,y);break}const f=d&&(o=globalThis.FontInspector)!=null&&o.enabled?(y,w)=>globalThis.FontInspector.fontAdded(y,w):null,p=new fY(r,{disableFontFace:c,inspectFont:f});this.fontLoader.bind(p).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!h&&p.data&&(p.data=null),this.commonObjs.resolve(n,p)});break;case"CopyLocalImage":const{imageRef:m}=r;Mn(m,"The imageRef must be defined.");for(const y of v(this,da).values())for(const[,w]of y.objs)if(w?.ref===m)return w.dataLen?(this.commonObjs.resolve(n,structuredClone(w)),w.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,r);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),t.on("obj",([n,i,r,o])=>{var c;if(this.destroyed)return;const h=v(this,da).get(i);if(!h.objs.has(n)){if(h._intentStates.size===0){(c=o?.bitmap)==null||c.close();return}switch(r){case"Image":h.objs.resolve(n,o),o?.dataLen>jq&&(h._maybeCleanupAfterRender=!0);break;case"Pattern":h.objs.resolve(n,o);break;default:throw new Error(`Got unknown object type ${r}`)}}}),t.on("DocProgress",n=>{var i;this.destroyed||(i=e.onProgress)==null||i.call(e,{loaded:n.loaded,total:n.total})}),t.on("FetchBuiltInCMap",n=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(n):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),t.on("FetchStandardFontData",n=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(n):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var t;this.annotationStorage.size<=0&&ue("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:n}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((t=this._fullReader)==null?void 0:t.filename)??null},n).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=v(this,Zf).get(e);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&v(this,Qf).set(r.refStr,t);const o=new gX(e,r,this,this._params.pdfBug);return v(this,da).set(e,o),o});return v(this,Zf).set(e,i),i}getPageIndex(t){return FL(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return q(this,Vh,Jf).call(this,"GetFieldObjects")}hasJSActions(){return q(this,Vh,Jf).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return q(this,Vh,Jf).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return q(this,Vh,Jf).call(this,"GetOptionalContentConfig").then(e=>new OY(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=v(this,Oo).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(i=>{var r,o;return{info:i[0],metadata:i[1]?new DY(i[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return v(this,Oo).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of v(this,da).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),v(this,Oo).clear(),this.filterFactory.destroy(!0),hb.cleanup()}}cachedPageNumber(t){if(!FL(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return v(this,Qf).get(e)??null}}Oo=new WeakMap,da=new WeakMap,Zf=new WeakMap,Qf=new WeakMap,fa=new WeakMap,Vh=new WeakSet,Jf=function(s,t=null){const e=v(this,Oo).get(s);if(e)return e;const n=this.messageHandler.sendWithPromise(s,t);return v(this,Oo).set(s,n),n};const jy=Symbol("INITIAL_DATA");var mr,By,H_;class Z3{constructor(){B(this,By),B(this,mr,Object.create(null))}get(t,e=null){if(e){const i=q(this,By,H_).call(this,t);return i.promise.then(()=>e(i.data)),null}const n=v(this,mr)[t];if(!n||n.data===jy)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=v(this,mr)[t];return!!e&&e.data!==jy}resolve(t,e=null){const n=q(this,By,H_).call(this,t);n.data=e,n.resolve()}clear(){var t;for(const e in v(this,mr)){const{data:n}=v(this,mr)[e];(t=n?.bitmap)==null||t.close()}Y(this,mr,Object.create(null))}*[Symbol.iterator](){for(const t in v(this,mr)){const{data:e}=v(this,mr)[t];e!==jy&&(yield[t,e])}}}mr=new WeakMap,By=new WeakSet,H_=function(s){var t;return(t=v(this,mr))[s]||(t[s]={...Promise.withResolvers(),data:jy})};var Tl;class vX{constructor(t){B(this,Tl,null),Y(this,Tl,t),this.onContinue=null}get promise(){return v(this,Tl).capability.promise}cancel(t=0){v(this,Tl).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=v(this,Tl).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=v(this,Tl);return t.form||t.canvas&&e?.size>0}}Tl=new WeakMap;var gu;const Q3=class tp{constructor({callback:t,params:e,objs:n,commonObjs:i,annotationCanvasMap:r,operatorList:o,pageIndex:c,canvasFactory:h,filterFactory:d,useRequestAnimationFrame:f=!1,pdfBug:p=!1,pageColors:m=null}){this.callback=t,this.params=e,this.objs=n,this.commonObjs=i,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=c,this.canvasFactory=h,this.filterFactory=d,this._pdfBug=p,this.pageColors=m,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=f===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new vX(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var n,i;if(this.cancelled)return;if(this._canvas){if(v(tp,gu).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");v(tp,gu).add(this._canvas)}this._pdfBug&&(n=globalThis.StepperManager)!=null&&n.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:r,viewport:o,transform:c,background:h}=this.params;this.gfx=new Ry(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:c,viewport:o,transparency:t,background:h}),this.operatorListIdx=0,this.graphicsReady=!0,(i=this.graphicsReadyCallback)==null||i.call(this)}cancel(t=null,e=0){var n;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),v(tp,gu).delete(this._canvas),this.callback(t||new oC(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),v(tp,gu).delete(this._canvas),this.callback())))}};gu=new WeakMap,B(Q3,gu,new WeakSet);let bX=Q3;const xX="4.3.136",wX="0cec64437";function zL(s){return Math.floor(Math.max(0,Math.min(1,s))*255).toString(16).padStart(2,"0")}function bf(s){return Math.max(0,Math.min(255,255*s))}class UL{static CMYK_G([t,e,n,i]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+i)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=bf(t),[t,t,t]}static G_HTML([t]){const e=zL(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(bf)}static RGB_HTML(t){return`#${t.map(zL).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,i]){return["RGB",1-Math.min(1,t+i),1-Math.min(1,n+i),1-Math.min(1,e+i)]}static CMYK_rgb([t,e,n,i]){return[bf(1-Math.min(1,t+i)),bf(1-Math.min(1,n+i)),bf(1-Math.min(1,e+i))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const i=1-t,r=1-e,o=1-n,c=Math.min(i,r,o);return["CMYK",i,r,o,c]}}class J3{static setupStorage(t,e,n,i,r){const o=i.getValue(e,{value:null});switch(n.name){case"textarea":if(o.value!==null&&(t.textContent=o.value),r==="print")break;t.addEventListener("input",c=>{i.setValue(e,{value:c.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(o.value===n.attributes.xfaOn?t.setAttribute("checked",!0):o.value===n.attributes.xfaOff&&t.removeAttribute("checked"),r==="print")break;t.addEventListener("change",c=>{i.setValue(e,{value:c.target.checked?c.target.getAttribute("xfaOn"):c.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&t.setAttribute("value",o.value),r==="print")break;t.addEventListener("input",c=>{i.setValue(e,{value:c.target.value})})}break;case"select":if(o.value!==null){t.setAttribute("value",o.value);for(const c of n.children)c.attributes.value===o.value?c.attributes.selected=!0:c.attributes.hasOwnProperty("selected")&&delete c.attributes.selected}t.addEventListener("input",c=>{const h=c.target.options,d=h.selectedIndex===-1?"":h[h.selectedIndex].value;i.setValue(e,{value:d})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:i,linkService:r}){const{attributes:o}=e,c=t instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${i}`);for(const[h,d]of Object.entries(o))if(d!=null)switch(h){case"class":d.length&&t.setAttribute(h,d.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",d);break;case"style":Object.assign(t.style,d);break;case"textContent":t.textContent=d;break;default:(!c||h!=="href"&&h!=="newWindow")&&t.setAttribute(h,d)}c&&r.addLinkAttributes(t,o.href,o.newWindow),n&&o.dataId&&this.setupStorage(t,o.dataId,e,n)}static render(t){var e,n;const i=t.annotationStorage,r=t.linkService,o=t.xfaHtml,c=t.intent||"display",h=document.createElement(o.name);o.attributes&&this.setAttributes({html:h,element:o,intent:c,linkService:r});const d=c!=="richText",f=t.div;if(f.append(h),t.viewport){const y=`matrix(${t.viewport.transform.join(",")})`;f.style.transform=y}d&&f.setAttribute("class","xfaLayer xfaFont");const p=[];if(o.children.length===0){if(o.value){const y=document.createTextNode(o.value);h.append(y),d&&lg.shouldBuildText(o.name)&&p.push(y)}return{textDivs:p}}const m=[[o,-1,h]];for(;m.length>0;){const[y,w,b]=m.at(-1);if(w+1===y.children.length){m.pop();continue}const E=y.children[++m.at(-1)[1]];if(E===null)continue;const{name:_}=E;if(_==="#text"){const T=document.createTextNode(E.value);p.push(T),b.append(T);continue}const k=(e=E?.attributes)!=null&&e.xmlns?document.createElementNS(E.attributes.xmlns,_):document.createElement(_);if(b.append(k),E.attributes&&this.setAttributes({html:k,element:E,storage:i,intent:c,linkService:r}),((n=E.children)==null?void 0:n.length)>0)m.push([E,-1,k]);else if(E.value){const T=document.createTextNode(E.value);d&&lg.shouldBuildText(_)&&p.push(T),k.append(T)}}for(const y of f.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))y.setAttribute("readOnly",!0);return{textDivs:p}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const Sg=1e3,AX=9,vc=new WeakSet;function Ia(s){return{width:s[2]-s[0],height:s[3]-s[1]}}class SX{static create(t){switch(t.data.annotationType){case kn.LINK:return new iI(t);case kn.TEXT:return new EX(t);case kn.WIDGET:switch(t.data.fieldType){case"Tx":return new CX(t);case"Btn":return t.data.radioButton?new sI(t):t.data.checkBox?new TX(t):new MX(t);case"Ch":return new RX(t);case"Sig":return new kX(t)}return new Tc(t);case kn.POPUP:return new $_(t);case kn.FREETEXT:return new oI(t);case kn.LINE:return new LX(t);case kn.SQUARE:return new DX(t);case kn.CIRCLE:return new NX(t);case kn.POLYLINE:return new lI(t);case kn.CARET:return new IX(t);case kn.INK:return new cI(t);case kn.POLYGON:return new OX(t);case kn.HIGHLIGHT:return new jX(t);case kn.UNDERLINE:return new BX(t);case kn.SQUIGGLY:return new FX(t);case kn.STRIKEOUT:return new zX(t);case kn.STAMP:return new hI(t);case kn.FILEATTACHMENT:return new UX(t);default:return new Rn(t)}}}var Ml,ep,np,Fy,W_;const _X=class tI{constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}={}){B(this,Fy),B(this,Ml,null),B(this,ep,!1),B(this,np,null),this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:n}){return!!(t!=null&&t.str||e!=null&&e.str||n!=null&&n.str)}get hasPopupData(){return tI._hasPopupData(this.data)}updateEdited(t){var e;if(!this.container)return;v(this,Ml)||Y(this,Ml,{rect:this.data.rect.slice(0)});const{rect:n}=t;n&&q(this,Fy,W_).call(this,n),(e=v(this,np))==null||e.popup.updateEdited(t)}resetEdited(){var t;v(this,Ml)&&(q(this,Fy,W_).call(this,v(this,Ml).rect),(t=v(this,np))==null||t.popup.resetEdited(),Y(this,Ml,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:i}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),this instanceof Tc||(r.tabIndex=Sg);const{style:o}=r;if(o.zIndex=this.parent.zIndex++,e.popupRef&&r.setAttribute("aria-haspopup","dialog"),e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof $_){const{rotation:b}=e;return!e.hasOwnCanvas&&b!==0&&this.setRotation(b,r),r}const{width:c,height:h}=Ia(e.rect);if(!t&&e.borderStyle.width>0){o.borderWidth=`${e.borderStyle.width}px`;const b=e.borderStyle.horizontalCornerRadius,E=e.borderStyle.verticalCornerRadius;if(b>0||E>0){const k=`calc(${b}px * var(--scale-factor)) / calc(${E}px * var(--scale-factor))`;o.borderRadius=k}else if(this instanceof sI){const k=`calc(${c}px * var(--scale-factor)) / calc(${h}px * var(--scale-factor))`;o.borderRadius=k}switch(e.borderStyle.style){case cf.SOLID:o.borderStyle="solid";break;case cf.DASHED:o.borderStyle="dashed";break;case cf.BEVELED:ue("Unimplemented border style: beveled");break;case cf.INSET:ue("Unimplemented border style: inset");break;case cf.UNDERLINE:o.borderBottomStyle="solid";break}const _=e.borderColor||null;_?(Y(this,ep,!0),o.borderColor=qt.makeHexColor(_[0]|0,_[1]|0,_[2]|0)):o.borderWidth=0}const d=qt.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:f,pageHeight:p,pageX:m,pageY:y}=i.rawDims;o.left=`${100*(d[0]-m)/f}%`,o.top=`${100*(d[1]-y)/p}%`;const{rotation:w}=e;return e.hasOwnCanvas||w===0?(o.width=`${100*c/f}%`,o.height=`${100*h/p}%`):this.setRotation(w,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims,{width:r,height:o}=Ia(this.data.rect);let c,h;t%180===0?(c=100*r/n,h=100*o/i):(c=100*o/n,h=100*r/i),e.style.width=`${c}%`,e.style.height=`${h}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,i)=>{const r=i.detail[e],o=r[0],c=r.slice(1);i.target.style[n]=UL[`${o}_HTML`](c),this.annotationStorage.setValue(this.data.id,{[n]:UL[`${o}_rgb`](c)})};return Ee(this,"_commonActions",{display:e=>{const{display:n}=e.detail,i=n%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const i of Object.keys(e.detail)){const r=t[i]||n[i];r?.(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[i,r]of Object.entries(e)){const o=n[i];if(o){const c={detail:{[i]:r},target:t};o(c),delete e[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,i,r]=this.data.rect;if(t.length===1){const[,{x:b,y:E},{x:_,y:k}]=t[0];if(i===b&&r===E&&e===_&&n===k)return}const{style:o}=this.container;let c;if(v(this,ep)){const{borderColor:b,borderWidth:E}=o;o.borderWidth=0,c=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${b}" stroke-width="${E}">`],this.container.classList.add("hasBorder")}const h=i-e,d=r-n,{svgFactory:f}=this,p=f.createElement("svg");p.classList.add("quadrilateralsContainer"),p.setAttribute("width",0),p.setAttribute("height",0);const m=f.createElement("defs");p.append(m);const y=f.createElement("clipPath"),w=`clippath_${this.data.id}`;y.setAttribute("id",w),y.setAttribute("clipPathUnits","objectBoundingBox"),m.append(y);for(const[,{x:b,y:E},{x:_,y:k}]of t){const T=f.createElement("rect"),R=(_-e)/h,D=(r-E)/d,F=(b-_)/h,j=(E-k)/d;T.setAttribute("x",R),T.setAttribute("y",D),T.setAttribute("width",F),T.setAttribute("height",j),y.append(T),c?.push(`<rect vector-effect="non-scaling-stroke" x="${R}" y="${D}" width="${F}" height="${j}"/>`)}v(this,ep)&&(c.push("</g></svg>')"),o.backgroundImage=c.join("")),this.container.append(p),this.container.style.clipPath=`url(#${w})`}_createPopup(){const{container:t,data:e}=this;t.setAttribute("aria-haspopup","dialog");const n=Y(this,np,new $_({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(n.render())}render(){He("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const i=this._fieldObjects[t];if(i)for(const{page:r,id:o,exportValues:c}of i){if(r===-1||o===e)continue;const h=typeof c=="string"?c:null,d=document.querySelector(`[data-element-id="${o}"]`);if(d&&!vc.has(d)){ue(`_getElementsByName - element not allowed: ${o}`);continue}n.push({id:o,exportValue:h,domElement:d})}return n}for(const i of document.getElementsByName(t)){const{exportValue:r}=i,o=i.getAttribute("data-element-id");o!==e&&vc.has(i)&&n.push({id:o,exportValue:r,domElement:i})}return n}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}};Ml=new WeakMap,ep=new WeakMap,np=new WeakMap,Fy=new WeakSet,W_=function(s){const{container:{style:t},data:{rect:e,rotation:n},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:r,pageX:o,pageY:c}}}}=this;e?.splice(0,4,...s);const{width:h,height:d}=Ia(s);t.left=`${100*(s[0]-o)/i}%`,t.top=`${100*(r-s[3]+c)/r}%`,n===0?(t.width=`${100*h/i}%`,t.height=`${100*d/r}%`):this.setRotation(n)};let Rn=_X;var Io,tc,G_,eI,V_,nI;class iI extends Rn{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!(e!=null&&e.ignoreBorder),createQuadrilaterals:!0}),B(this,Io),B(this,G_),B(this,V_),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,n=document.createElement("a");n.setAttribute("data-element-id",t.id);let i=!1;return t.url?(e.addLinkAttributes(n,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(n,t.action),i=!0):t.attachment?(q(this,G_,eI).call(this,n,t.attachment,t.attachmentDest),i=!0):t.setOCGState?(q(this,V_,nI).call(this,n,t.setOCGState),i=!0):t.dest?(this._bindLink(n,t.dest),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,t),i=!0),t.resetForm?(this._bindResetFormAction(n,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(n,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(n),this.container}_bindLink(t,e){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&q(this,Io,tc).call(this)}_bindNamedAction(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),q(this,Io,tc).call(this)}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(e.actions)){const r=n.get(i);r&&(t[r]=()=>{var o;return(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:i}}),!1})}t.onclick||(t.onclick=()=>!1),q(this,Io,tc).call(this)}_bindResetFormAction(t,e){const n=t.onclick;if(n||(t.href=this.linkService.getAnchorUrl("")),q(this,Io,tc).call(this),!this._fieldObjects){ue('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(t.onclick=()=>!1);return}t.onclick=()=>{var i;n?.();const{fields:r,refs:o,include:c}=e,h=[];if(r.length!==0||o.length!==0){const p=new Set(o);for(const m of r){const y=this._fieldObjects[m]||[];for(const{id:w}of y)p.add(w)}for(const m of Object.values(this._fieldObjects))for(const y of m)p.has(y.id)===c&&h.push(y)}else for(const p of Object.values(this._fieldObjects))h.push(...p);const d=this.annotationStorage,f=[];for(const p of h){const{id:m}=p;switch(f.push(m),p.type){case"text":{const w=p.defaultValue||"";d.setValue(m,{value:w});break}case"checkbox":case"radiobutton":{const w=p.defaultValue===p.exportValues;d.setValue(m,{value:w});break}case"combobox":case"listbox":{const w=p.defaultValue||"";d.setValue(m,{value:w});break}default:continue}const y=document.querySelector(`[data-element-id="${m}"]`);if(y){if(!vc.has(y)){ue(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((i=this.linkService.eventBus)==null||i.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}})),!1}}}Io=new WeakSet,tc=function(){this.container.setAttribute("data-internal-link","")},G_=new WeakSet,eI=function(s,t,e=null){s.href=this.linkService.getAnchorUrl(""),t.description&&(s.title=t.description),s.onclick=()=>{var n;return(n=this.downloadManager)==null||n.openOrDownloadData(t.content,t.filename,e),!1},q(this,Io,tc).call(this)},V_=new WeakSet,nI=function(s,t){s.href=this.linkService.getAnchorUrl(""),s.onclick=()=>(this.linkService.executeSetOCGState(t),!1),q(this,Io,tc).call(this)};class EX extends Rn{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Tc extends Rn{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Wi.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,i,r){n.includes("mouse")?t.addEventListener(n,o=>{var c;(c=this.linkService.eventBus)==null||c.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):t.addEventListener(n,o=>{var c;if(n==="blur"){if(!e.focused||!o.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}r&&((c=this.linkService.eventBus)==null||c.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(o)}}))})}_setEventListeners(t,e,n,i){var r,o,c;for(const[h,d]of n)(d==="Action"||(r=this.data.actions)!=null&&r[d])&&((d==="Focus"||d==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,h,d,i),d==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(t,e,"blur","Blur",null):d==="Blur"&&!((c=this.data.actions)!=null&&c.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":qt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||AX,r=t.style;let o;const c=2,h=d=>Math.round(10*d)/10;if(this.data.multiLine){const d=Math.abs(this.data.rect[3]-this.data.rect[1]-c),f=Math.round(d/(TA*i))||1,p=d/f;o=Math.min(i,h(p/TA))}else{const d=Math.abs(this.data.rect[3]-this.data.rect[1]-c);o=Math.min(i,h(d/TA))}r.fontSize=`calc(${o}px * var(--scale-factor))`,r.color=qt.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class CX extends Tc{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,i){const r=this.annotationStorage;for(const o of this._getElementsByName(t.name,t.id))o.domElement&&(o.domElement[e]=n),r.setValue(o.id,{[i]:n})}render(){var t,e;const n=this.annotationStorage,i=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const o=n.getValue(i,{value:this.data.fieldValue});let c=o.value||"";const h=n.getValue(i,{charLimit:this.data.maxLen}).charLimit;h&&c.length>h&&(c=c.slice(0,h));let d=o.formattedValue||((t=this.data.textContent)==null?void 0:t.join(`
`))||null;d&&this.data.comb&&(d=d.replaceAll(/\s+/g,""));const f={userValue:c,formattedValue:d,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=d??c,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type="text",r.setAttribute("value",d??c),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),vc.add(r),r.setAttribute("data-element-id",i),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=Sg,this._setRequired(r,this.data.required),h&&(r.maxLength=h),r.addEventListener("input",m=>{n.setValue(i,{value:m.target.value}),this.setPropertyOnSiblings(r,"value",m.target.value,"value"),f.formattedValue=null}),r.addEventListener("resetform",m=>{const y=this.data.defaultFieldValue??"";r.value=f.userValue=y,f.formattedValue=null});let p=m=>{const{formattedValue:y}=f;y!=null&&(m.target.value=y),m.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",y=>{var w;if(f.focused)return;const{target:b}=y;f.userValue&&(b.value=f.userValue),f.lastCommittedValue=b.value,f.commitKey=1,(w=this.data.actions)!=null&&w.Focus||(f.focused=!0)}),r.addEventListener("updatefromsandbox",y=>{this.showElementAndHideCanvas(y.target);const w={value(b){f.userValue=b.detail.value??"",n.setValue(i,{value:f.userValue.toString()}),b.target.value=f.userValue},formattedValue(b){const{formattedValue:E}=b.detail;f.formattedValue=E,E!=null&&b.target!==document.activeElement&&(b.target.value=E),n.setValue(i,{formattedValue:E})},selRange(b){b.target.setSelectionRange(...b.detail.selRange)},charLimit:b=>{var E;const{charLimit:_}=b.detail,{target:k}=b;if(_===0){k.removeAttribute("maxLength");return}k.setAttribute("maxLength",_);let T=f.userValue;!T||T.length<=_||(T=T.slice(0,_),k.value=f.userValue=T,n.setValue(i,{value:T}),(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:T,willCommit:!0,commitKey:1,selStart:k.selectionStart,selEnd:k.selectionEnd}}))}};this._dispatchEventFromSandbox(w,y)}),r.addEventListener("keydown",y=>{var w;f.commitKey=1;let b=-1;if(y.key==="Escape"?b=0:y.key==="Enter"&&!this.data.multiLine?b=2:y.key==="Tab"&&(f.commitKey=3),b===-1)return;const{value:E}=y.target;f.lastCommittedValue!==E&&(f.lastCommittedValue=E,f.userValue=E,(w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:E,willCommit:!0,commitKey:b,selStart:y.target.selectionStart,selEnd:y.target.selectionEnd}}))});const m=p;p=null,r.addEventListener("blur",y=>{var w,b;if(!f.focused||!y.relatedTarget)return;(w=this.data.actions)!=null&&w.Blur||(f.focused=!1);const{value:E}=y.target;f.userValue=E,f.lastCommittedValue!==E&&((b=this.linkService.eventBus)==null||b.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:E,willCommit:!0,commitKey:f.commitKey,selStart:y.target.selectionStart,selEnd:y.target.selectionEnd}})),m(y)}),(e=this.data.actions)!=null&&e.Keystroke&&r.addEventListener("beforeinput",y=>{var w;f.lastCommittedValue=null;const{data:b,target:E}=y,{value:_,selectionStart:k,selectionEnd:T}=E;let R=k,D=T;switch(y.inputType){case"deleteWordBackward":{const F=_.substring(0,k).match(/\w*[^\w]*$/);F&&(R-=F[0].length);break}case"deleteWordForward":{const F=_.substring(k).match(/^[^\w]*\w*/);F&&(D+=F[0].length);break}case"deleteContentBackward":k===T&&(R-=1);break;case"deleteContentForward":k===T&&(D+=1);break}y.preventDefault(),(w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:_,change:b||"",willCommit:!1,selStart:R,selEnd:D}})}),this._setEventListeners(r,f,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],y=>y.target.value)}if(p&&r.addEventListener("blur",p),this.data.comb){const m=(this.data.rect[2]-this.data.rect[0])/h;r.classList.add("comb"),r.style.letterSpacing=`calc(${m}px * var(--scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class kX extends Tc{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class TX extends Tc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let i=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",t.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return vc.add(r),r.setAttribute("data-element-id",n),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,i&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=Sg,r.addEventListener("change",o=>{const{name:c,checked:h}=o.target;for(const d of this._getElementsByName(c,n)){const f=h&&d.exportValue===e.exportValue;d.domElement&&(d.domElement.checked=f),t.setValue(d.id,{value:f})}t.setValue(n,{value:h})}),r.addEventListener("resetform",o=>{const c=e.defaultFieldValue||"Off";o.target.checked=c===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",o=>{const c={value(h){h.target.checked=h.detail.value!=="Off",t.setValue(n,{value:h.target.checked})}};this._dispatchEventFromSandbox(c,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class sI extends Tc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let i=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof i=="string"&&(i=i!==e.buttonValue,t.setValue(n,{value:i})),i)for(const o of this._getElementsByName(e.fieldName,n))t.setValue(o.id,{value:!1});const r=document.createElement("input");if(vc.add(r),r.setAttribute("data-element-id",n),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,i&&r.setAttribute("checked",!0),r.tabIndex=Sg,r.addEventListener("change",o=>{const{name:c,checked:h}=o.target;for(const d of this._getElementsByName(c,n))t.setValue(d.id,{value:!1});t.setValue(n,{value:h})}),r.addEventListener("resetform",o=>{const c=e.defaultFieldValue;o.target.checked=c!=null&&c===e.buttonValue}),this.enableScripting&&this.hasJSActions){const o=e.buttonValue;r.addEventListener("updatefromsandbox",c=>{const h={value:d=>{const f=o===d.detail.value;for(const p of this._getElementsByName(d.target.name)){const m=f&&p.id===n;p.domElement&&(p.domElement.checked=m),t.setValue(p.id,{value:m})}}};this._dispatchEventFromSandbox(h,c)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class MX extends iI{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class RX extends Tc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),i=document.createElement("select");vc.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=Sg;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",f=>{const p=this.data.defaultFieldValue;for(const m of i.options)m.selected=m.value===p});for(const f of this.data.options){const p=document.createElement("option");p.textContent=f.displayValue,p.value=f.exportValue,n.value.includes(f.exportValue)&&(p.setAttribute("selected",!0),r=!1),i.append(p)}let o=null;if(r){const f=document.createElement("option");f.value=" ",f.setAttribute("hidden",!0),f.setAttribute("selected",!0),i.prepend(f),o=()=>{f.remove(),i.removeEventListener("input",o),o=null},i.addEventListener("input",o)}const c=f=>{const p=f?"value":"textContent",{options:m,multiple:y}=i;return y?Array.prototype.filter.call(m,w=>w.selected).map(w=>w[p]):m.selectedIndex===-1?null:m[m.selectedIndex][p]};let h=c(!1);const d=f=>{const p=f.target.options;return Array.prototype.map.call(p,m=>({displayValue:m.textContent,exportValue:m.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",f=>{const p={value(m){o?.();const y=m.detail.value,w=new Set(Array.isArray(y)?y:[y]);for(const b of i.options)b.selected=w.has(b.value);t.setValue(e,{value:c(!0)}),h=c(!1)},multipleSelection(m){i.multiple=!0},remove(m){const y=i.options,w=m.detail.remove;y[w].selected=!1,i.remove(w),y.length>0&&Array.prototype.findIndex.call(y,b=>b.selected)===-1&&(y[0].selected=!0),t.setValue(e,{value:c(!0),items:d(m)}),h=c(!1)},clear(m){for(;i.length!==0;)i.remove(0);t.setValue(e,{value:null,items:[]}),h=c(!1)},insert(m){const{index:y,displayValue:w,exportValue:b}=m.detail.insert,E=i.children[y],_=document.createElement("option");_.textContent=w,_.value=b,E?E.before(_):i.append(_),t.setValue(e,{value:c(!0),items:d(m)}),h=c(!1)},items(m){const{items:y}=m.detail;for(;i.length!==0;)i.remove(0);for(const w of y){const{displayValue:b,exportValue:E}=w,_=document.createElement("option");_.textContent=b,_.value=E,i.append(_)}i.options.length>0&&(i.options[0].selected=!0),t.setValue(e,{value:c(!0),items:d(m)}),h=c(!1)},indices(m){const y=new Set(m.detail.indices);for(const w of m.target.options)w.selected=y.has(w.index);t.setValue(e,{value:c(!0)}),h=c(!1)},editable(m){m.target.disabled=!m.detail.editable}};this._dispatchEventFromSandbox(p,f)}),i.addEventListener("input",f=>{var p;const m=c(!0),y=c(!1);t.setValue(e,{value:m}),f.preventDefault(),(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:h,change:y,changeEx:m,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],f=>f.target.value)):i.addEventListener("input",function(f){t.setValue(e,{value:c(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class $_ extends Rn{constructor(t){const{data:e,elements:n}=t;super(t,{isRenderable:Rn._hasPopupData(e)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new PX({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const n of this.elements)n.popup=t,e.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(n=>`${s3}${n}`).join(",")),this.container}}var Op,q_,Y_,Ip,$h,gn,Mo,qh,db,fb,jp,bo,yr,jo,pb,Bo,zy,Rl,Yh,Bp,Uy,Hy,UA,X_,HL,K_,rI,Z_,aI,Q_,WL,Fp,gb,zp,mb,yb,J_;class PX{constructor({container:t,color:e,elements:n,titleObj:i,modificationDate:r,contentsObj:o,richText:c,parent:h,rect:d,parentRect:f,open:p}){B(this,Bp),B(this,Hy),B(this,X_),B(this,K_),B(this,Z_),B(this,Q_),B(this,Fp),B(this,zp),B(this,yb),B(this,Op,q(this,Z_,aI).bind(this)),B(this,q_,q(this,yb,J_).bind(this)),B(this,Y_,q(this,zp,mb).bind(this)),B(this,Ip,q(this,Fp,gb).bind(this)),B(this,$h,null),B(this,gn,null),B(this,Mo,null),B(this,qh,null),B(this,db,null),B(this,fb,null),B(this,jp,null),B(this,bo,!1),B(this,yr,null),B(this,jo,null),B(this,pb,null),B(this,Bo,null),B(this,zy,null),B(this,Rl,null),B(this,Yh,!1);var m;Y(this,gn,t),Y(this,zy,i),Y(this,Mo,o),Y(this,Bo,c),Y(this,fb,h),Y(this,$h,e),Y(this,pb,d),Y(this,jp,f),Y(this,db,n),Y(this,qh,c3.toDateObject(r)),this.trigger=n.flatMap(y=>y.getElementsToTriggerPopup());for(const y of this.trigger)y.addEventListener("click",v(this,Ip)),y.addEventListener("mouseenter",v(this,Y_)),y.addEventListener("mouseleave",v(this,q_)),y.classList.add("popupTriggerArea");for(const y of n)(m=y.container)==null||m.addEventListener("keydown",v(this,Op));v(this,gn).hidden=!0,p&&q(this,Fp,gb).call(this)}render(){if(v(this,yr))return;const t=Y(this,yr,document.createElement("div"));if(t.className="popup",v(this,$h)){const r=t.style.outlineColor=qt.makeHexColor(...v(this,$h));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`:t.style.backgroundColor=qt.makeHexColor(...v(this,$h).map(o=>Math.floor(.7*(255-o)+o)))}const e=document.createElement("span");e.className="header";const n=document.createElement("h1");if(e.append(n),{dir:n.dir,str:n.textContent}=v(this,zy),t.append(e),v(this,qh)){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),r.setAttribute("data-l10n-args",JSON.stringify({date:v(this,qh).toLocaleDateString(),time:v(this,qh).toLocaleTimeString()})),e.append(r)}const i=v(this,Bp,Uy);if(i)J3.render({xfaHtml:i,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(v(this,Mo));t.append(r)}v(this,gn).append(t)}_formatContents({str:t,dir:e}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=e;const i=t.split(/(?:\r\n?|\n)/);for(let r=0,o=i.length;r<o;++r){const c=i[r];n.append(document.createTextNode(c)),r<o-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:t,popupContent:e}){var n;v(this,Rl)||Y(this,Rl,{contentsObj:v(this,Mo),richText:v(this,Bo)}),t&&Y(this,jo,null),e&&(Y(this,Bo,q(this,K_,rI).call(this,e)),Y(this,Mo,null)),(n=v(this,yr))==null||n.remove(),Y(this,yr,null)}resetEdited(){var t;v(this,Rl)&&({contentsObj:js(this,Mo)._,richText:js(this,Bo)._}=v(this,Rl),Y(this,Rl,null),(t=v(this,yr))==null||t.remove(),Y(this,yr,null),Y(this,jo,null))}forceHide(){Y(this,Yh,this.isVisible),v(this,Yh)&&(v(this,gn).hidden=!0)}maybeShow(){v(this,Yh)&&(v(this,yr)||q(this,zp,mb).call(this),Y(this,Yh,!1),v(this,gn).hidden=!1)}get isVisible(){return v(this,gn).hidden===!1}}Op=new WeakMap,q_=new WeakMap,Y_=new WeakMap,Ip=new WeakMap,$h=new WeakMap,gn=new WeakMap,Mo=new WeakMap,qh=new WeakMap,db=new WeakMap,fb=new WeakMap,jp=new WeakMap,bo=new WeakMap,yr=new WeakMap,jo=new WeakMap,pb=new WeakMap,Bo=new WeakMap,zy=new WeakMap,Rl=new WeakMap,Yh=new WeakMap,Bp=new WeakSet,Uy=function(){const s=v(this,Bo),t=v(this,Mo);return s!=null&&s.str&&(!(t!=null&&t.str)||t.str===s.str)&&v(this,Bo).html||null},Hy=new WeakSet,UA=function(){var s,t,e;return((e=(t=(s=v(this,Bp,Uy))==null?void 0:s.attributes)==null?void 0:t.style)==null?void 0:e.fontSize)||0},X_=new WeakSet,HL=function(){var s,t,e;return((e=(t=(s=v(this,Bp,Uy))==null?void 0:s.attributes)==null?void 0:t.style)==null?void 0:e.color)||null},K_=new WeakSet,rI=function(s){const t=[],e={str:s,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},n={style:{color:v(this,X_,HL),fontSize:v(this,Hy,UA)?`calc(${v(this,Hy,UA)}px * var(--scale-factor))`:""}};for(const i of s.split(`
`))t.push({name:"span",value:i,attributes:n});return e},Z_=new WeakSet,aI=function(s){s.altKey||s.shiftKey||s.ctrlKey||s.metaKey||(s.key==="Enter"||s.key==="Escape"&&v(this,bo))&&q(this,Fp,gb).call(this)},Q_=new WeakSet,WL=function(){if(v(this,jo)!==null)return;const{page:{view:s},viewport:{rawDims:{pageWidth:t,pageHeight:e,pageX:n,pageY:i}}}=v(this,fb);let r=!!v(this,jp),o=r?v(this,jp):v(this,pb);for(const m of v(this,db))if(!o||qt.intersect(m.data.rect,o)!==null){o=m.data.rect,r=!0;break}const c=qt.normalizeRect([o[0],s[3]-o[1]+s[1],o[2],s[3]-o[3]+s[1]]),h=r?o[2]-o[0]+5:0,d=c[0]+h,f=c[1];Y(this,jo,[100*(d-n)/t,100*(f-i)/e]);const{style:p}=v(this,gn);p.left=`${v(this,jo)[0]}%`,p.top=`${v(this,jo)[1]}%`},Fp=new WeakSet,gb=function(){Y(this,bo,!v(this,bo)),v(this,bo)?(q(this,zp,mb).call(this),v(this,gn).addEventListener("click",v(this,Ip)),v(this,gn).addEventListener("keydown",v(this,Op))):(q(this,yb,J_).call(this),v(this,gn).removeEventListener("click",v(this,Ip)),v(this,gn).removeEventListener("keydown",v(this,Op)))},zp=new WeakSet,mb=function(){v(this,yr)||this.render(),this.isVisible?v(this,bo)&&v(this,gn).classList.add("focused"):(q(this,Q_,WL).call(this),v(this,gn).hidden=!1,v(this,gn).style.zIndex=parseInt(v(this,gn).style.zIndex)+1e3)},yb=new WeakSet,J_=function(){v(this,gn).classList.remove("focused"),!(v(this,bo)||!this.isVisible)&&(v(this,gn).hidden=!0,v(this,gn).style.zIndex=parseInt(v(this,gn).style.zIndex)-1e3)};class oI extends Rn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Se.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}var Wy;class LX extends Rn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),B(this,Wy,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:e,height:n}=Ia(t.rect),i=this.svgFactory.create(e,n,!0),r=Y(this,Wy,this.svgFactory.createElement("svg:line"));return r.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),r.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),r.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),r.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),r.setAttribute("stroke-width",t.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),i.append(r),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return v(this,Wy)}addHighlightArea(){this.container.classList.add("highlightArea")}}Wy=new WeakMap;var Gy;class DX extends Rn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),B(this,Gy,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:e,height:n}=Ia(t.rect),i=this.svgFactory.create(e,n,!0),r=t.borderStyle.width,o=Y(this,Gy,this.svgFactory.createElement("svg:rect"));return o.setAttribute("x",r/2),o.setAttribute("y",r/2),o.setAttribute("width",e-r),o.setAttribute("height",n-r),o.setAttribute("stroke-width",r||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return v(this,Gy)}addHighlightArea(){this.container.classList.add("highlightArea")}}Gy=new WeakMap;var Vy;class NX extends Rn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),B(this,Vy,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:e,height:n}=Ia(t.rect),i=this.svgFactory.create(e,n,!0),r=t.borderStyle.width,o=Y(this,Vy,this.svgFactory.createElement("svg:ellipse"));return o.setAttribute("cx",e/2),o.setAttribute("cy",n/2),o.setAttribute("rx",e/2-r/2),o.setAttribute("ry",n/2-r/2),o.setAttribute("stroke-width",r||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return v(this,Vy)}addHighlightArea(){this.container.classList.add("highlightArea")}}Vy=new WeakMap;var $y;class lI extends Rn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),B(this,$y,null),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const t=this.data,{width:e,height:n}=Ia(t.rect),i=this.svgFactory.create(e,n,!0);let r=[];for(const c of t.vertices){const h=c.x-t.rect[0],d=t.rect[3]-c.y;r.push(h+","+d)}r=r.join(" ");const o=Y(this,$y,this.svgFactory.createElement(this.svgElementName));return o.setAttribute("points",r),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return v(this,$y)}addHighlightArea(){this.container.classList.add("highlightArea")}}$y=new WeakMap;class OX extends lI{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class IX extends Rn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var qy;class cI extends Rn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),B(this,qy,[]),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=Se.INK}render(){this.container.classList.add(this.containerClassName);const t=this.data,{width:e,height:n}=Ia(t.rect),i=this.svgFactory.create(e,n,!0);for(const r of t.inkLists){let o=[];for(const h of r){const d=h.x-t.rect[0],f=t.rect[3]-h.y;o.push(`${d},${f}`)}o=o.join(" ");const c=this.svgFactory.createElement(this.svgElementName);v(this,qy).push(c),c.setAttribute("points",o),c.setAttribute("stroke-width",t.borderStyle.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),!t.popupRef&&this.hasPopupData&&this._createPopup(),i.append(c)}return this.container.append(i),this.container}getElementsToTriggerPopup(){return v(this,qy)}addHighlightArea(){this.container.classList.add("highlightArea")}}qy=new WeakMap;class jX extends Rn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class BX extends Rn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class FX extends Rn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class zX extends Rn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class hI extends Rn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Yy,Xy,tE;class UX extends Rn{constructor(t){var e;super(t,{isRenderable:!0}),B(this,Xy),B(this,Yy,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(e=this.linkService.eventBus)==null||e.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let n;e.hasAppearance||e.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),n.addEventListener("dblclick",q(this,Xy,tE).bind(this)),Y(this,Yy,n);const{isMac:i}=Wi.platform;return t.addEventListener("keydown",r=>{r.key==="Enter"&&(i?r.metaKey:r.ctrlKey)&&q(this,Xy,tE).call(this)}),!e.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),t.append(n),t}getElementsToTriggerPopup(){return v(this,Yy)}addHighlightArea(){this.container.classList.add("highlightArea")}}Yy=new WeakMap,Xy=new WeakSet,tE=function(){var s;(s=this.downloadManager)==null||s.openOrDownloadData(this.content,this.filename)};var x0,wh,xf,HA,GL,w0,WA,VL;let HX=(VL=class{constructor({div:s,accessibilityManager:t,annotationCanvasMap:e,annotationEditorUIManager:n,page:i,viewport:r}){B(this,HA),B(this,w0),B(this,x0,null),B(this,wh,null),B(this,xf,new Map),this.div=s,Y(this,x0,t),Y(this,wh,e),this.page=i,this.viewport=r,this.zIndex=0,this._annotationEditorUIManager=n}async render(s){var t;const{annotations:e}=s,n=this.div;yc(n,this.viewport);const i=new Map,r={data:null,layer:n,linkService:s.linkService,downloadManager:s.downloadManager,imageResourcesPath:s.imageResourcesPath||"",renderForms:s.renderForms!==!1,svgFactory:new aC,annotationStorage:s.annotationStorage||new uC,enableScripting:s.enableScripting===!0,hasJSActions:s.hasJSActions,fieldObjects:s.fieldObjects,parent:this,elements:null};for(const o of e){if(o.noHTML)continue;const c=o.annotationType===kn.POPUP;if(c){const f=i.get(o.id);if(!f)continue;r.elements=f}else{const{width:f,height:p}=Ia(o.rect);if(f<=0||p<=0)continue}r.data=o;const h=SX.create(r);if(!h.isRenderable)continue;if(!c&&o.popupRef){const f=i.get(o.popupRef);f?f.push(h):i.set(o.popupRef,[h])}const d=h.render();o.hidden&&(d.style.visibility="hidden"),q(this,HA,GL).call(this,d,o.id),h.annotationEditorType>0&&(v(this,xf).set(h.data.id,h),(t=this._annotationEditorUIManager)==null||t.renderAnnotationElement(h))}q(this,w0,WA).call(this)}update({viewport:s}){const t=this.div;this.viewport=s,yc(t,{rotation:s.rotation}),q(this,w0,WA).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(v(this,xf).values())}getEditableAnnotation(s){return v(this,xf).get(s)}},x0=new WeakMap,wh=new WeakMap,xf=new WeakMap,HA=new WeakSet,GL=function(s,t){var e;const n=s.firstChild||s;n.id=`${s3}${t}`,this.div.append(s),(e=v(this,x0))==null||e.moveElementInDOM(this.div,s,n,!1)},w0=new WeakSet,WA=function(){if(!v(this,wh))return;const s=this.div;for(const[t,e]of v(this,wh)){const n=s.querySelector(`[data-annotation-id="${t}"]`);if(!n)continue;e.className="annotationContent";const{firstChild:i}=n;i?i.nodeName==="CANVAS"?i.replaceWith(e):i.classList.contains("annotationContent")?i.after(e):i.before(e):n.append(e)}v(this,wh).clear()},VL);const Ky=/\r\n?|\n/g;var Zy,Qy,Jy,tv,ev,Cr,Ns,nv,Os,Up,eE,uI,nE,dI,iE,fI,Hp,vb,Wp,bb,ip,iv,sE,pI,xb,rE,aE,gI;const dr=class Qn extends Ye{constructor(t){super({...t,name:"freeTextEditor"}),B(this,eE),B(this,nE),B(this,iE),B(this,Hp),B(this,ip),B(this,sE),B(this,aE),B(this,Zy,this.editorDivBlur.bind(this)),B(this,Qy,this.editorDivFocus.bind(this)),B(this,Jy,this.editorDivInput.bind(this)),B(this,tv,this.editorDivKeydown.bind(this)),B(this,ev,this.editorDivPaste.bind(this)),B(this,Cr,void 0),B(this,Ns,""),B(this,nv,`${this.id}-editor`),B(this,Os,void 0),B(this,Up,null),Y(this,Cr,t.color||Qn._defaultColor||Ye._defaultLineColor),Y(this,Os,t.fontSize||Qn._defaultFontSize)}static get _keyboardManager(){const t=Qn.prototype,e=r=>r.isEmpty(),n=og.TRANSLATE_SMALL,i=og.TRANSLATE_BIG;return Ee(this,"_keyboardManager",new wg([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-n,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[n,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-n],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,n],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:e}]]))}static initialize(t,e){Ye.initialize(t,e,{strings:["pdfjs-free-text-default-content"]});const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case ee.FREETEXT_SIZE:Qn._defaultFontSize=e;break;case ee.FREETEXT_COLOR:Qn._defaultColor=e;break}}updateParams(t,e){switch(t){case ee.FREETEXT_SIZE:q(this,eE,uI).call(this,e);break;case ee.FREETEXT_COLOR:q(this,nE,dI).call(this,e);break}}static get defaultPropertiesToUpdate(){return[[ee.FREETEXT_SIZE,Qn._defaultFontSize],[ee.FREETEXT_COLOR,Qn._defaultColor||Ye._defaultLineColor]]}get propertiesToUpdate(){return[[ee.FREETEXT_SIZE,v(this,Os)],[ee.FREETEXT_COLOR,v(this,Cr)]]}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-Qn._internalPadding*t,-(Qn._internalPadding+v(this,Os))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(Se.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",v(this,tv)),this.editorDiv.addEventListener("focus",v(this,Qy)),this.editorDiv.addEventListener("blur",v(this,Zy)),this.editorDiv.addEventListener("input",v(this,Jy)),this.editorDiv.addEventListener("paste",v(this,ev)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",v(this,nv)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",v(this,tv)),this.editorDiv.removeEventListener("focus",v(this,Qy)),this.editorDiv.removeEventListener("blur",v(this,Zy)),this.editorDiv.removeEventListener("input",v(this,Jy)),this.editorDiv.removeEventListener("paste",v(this,ev)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var t;this.width||(this.enableEditMode(),this.editorDiv.focus(),(t=this._initialOptions)!=null&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=v(this,Ns),e=Y(this,Ns,q(this,iE,fI).call(this).trimEnd());if(t===e)return;const n=i=>{if(Y(this,Ns,i),!i){this.remove();return}q(this,ip,iv).call(this),this._uiManager.rebuild(this),q(this,Hp,vb).call(this)};this.addCommands({cmd:()=>{n(e)},undo:()=>{n(t)},mustExec:!1}),q(this,Hp,vb).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Qn._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,e;this.width&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",v(this,nv)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),Ye._l10nPromise.get("pdfjs-free-text-default-content").then(i=>{var r;return(r=this.editorDiv)==null?void 0:r.setAttribute("default-content",i)}),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${v(this,Os)}px * var(--scale-factor))`,n.color=v(this,Cr),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Kv(this,this.div,["dblclick","keydown"]),this.width){const[i,r]=this.parentDimensions;if(this.annotationElementId){const{position:o}=v(this,Up);let[c,h]=this.getInitialTranslation();[c,h]=this.pageTranslationToScreen(c,h);const[d,f]=this.pageDimensions,[p,m]=this.pageTranslation;let y,w;switch(this.rotation){case 0:y=t+(o[0]-p)/d,w=e+this.height-(o[1]-m)/f;break;case 90:y=t+(o[0]-p)/d,w=e-(o[1]-m)/f,[c,h]=[h,-c];break;case 180:y=t-this.width+(o[0]-p)/d,w=e-(o[1]-m)/f,[c,h]=[-c,-h];break;case 270:y=t+(o[0]-p-this.height*f)/d,w=e+(o[1]-m-this.width*d)/f,[c,h]=[-h,c];break}this.setAt(y*i,w*r,c,h)}else this.setAt(t*i,e*r,this.width*i,this.height*r);q(this,ip,iv).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var e,n,i;const r=t.clipboardData||window.clipboardData,{types:o}=r;if(o.length===1&&o[0]==="text/plain")return;t.preventDefault();const c=q(e=Qn,xb,rE).call(e,r.getData("text")||"").replaceAll(Ky,`
`);if(!c)return;const h=window.getSelection();if(!h.rangeCount)return;this.editorDiv.normalize(),h.deleteFromDocument();const d=h.getRangeAt(0);if(!c.includes(`
`)){d.insertNode(document.createTextNode(c)),this.editorDiv.normalize(),h.collapseToStart();return}const{startContainer:f,startOffset:p}=d,m=[],y=[];if(f.nodeType===Node.TEXT_NODE){const E=f.parentElement;if(y.push(f.nodeValue.slice(p).replaceAll(Ky,"")),E!==this.editorDiv){let _=m;for(const k of this.editorDiv.childNodes){if(k===E){_=y;continue}_.push(q(n=Qn,Wp,bb).call(n,k))}}m.push(f.nodeValue.slice(0,p).replaceAll(Ky,""))}else if(f===this.editorDiv){let E=m,_=0;for(const k of this.editorDiv.childNodes)_++===p&&(E=y),E.push(q(i=Qn,Wp,bb).call(i,k))}Y(this,Ns,`${m.join(`
`)}${c}${y.join(`
`)}`),q(this,ip,iv).call(this);const w=new Range;let b=m.reduce((E,_)=>E+_.length,0);for(const{firstChild:E}of this.editorDiv.childNodes)if(E.nodeType===Node.TEXT_NODE){const _=E.nodeValue.length;if(b<=_){w.setStart(E,b),w.setEnd(E,b);break}b-=_}h.removeAllRanges(),h.addRange(w)}get contentDiv(){return this.editorDiv}static deserialize(t,e,n){var i;let r=null;if(t instanceof oI){const{data:{defaultAppearanceData:{fontSize:c,fontColor:h},rect:d,rotation:f,id:p},textContent:m,textPosition:y,parent:{page:{pageNumber:w}}}=t;if(!m||m.length===0)return null;r=t={annotationType:Se.FREETEXT,color:Array.from(h),fontSize:c,value:m.join(`
`),position:y,pageIndex:w-1,rect:d.slice(0),rotation:f,id:p,deleted:!1}}const o=super.deserialize(t,e,n);return Y(o,Os,t.fontSize),Y(o,Cr,qt.makeHexColor(...t.color)),Y(o,Ns,q(i=Qn,xb,rE).call(i,t.value)),o.annotationElementId=t.id||null,Y(o,Up,r),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const e=Qn._internalPadding*this.parentScale,n=this.getRect(e,e),i=Ye._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:v(this,Cr)),r={annotationType:Se.FREETEXT,color:i,fontSize:v(this,Os),value:q(this,sE,pI).call(this),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?r:this.annotationElementId&&!q(this,aE,gI).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(this.deleted)return e;const{style:n}=e;n.fontSize=`calc(${v(this,Os)}px * var(--scale-factor))`,n.color=v(this,Cr),e.replaceChildren();for(const r of v(this,Ns).split(`
`)){const o=document.createElement("div");o.append(r?document.createTextNode(r):document.createElement("br")),e.append(o)}const i=Qn._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(i,i),popupContent:v(this,Ns)}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Zy=new WeakMap,Qy=new WeakMap,Jy=new WeakMap,tv=new WeakMap,ev=new WeakMap,Cr=new WeakMap,Ns=new WeakMap,nv=new WeakMap,Os=new WeakMap,Up=new WeakMap,eE=new WeakSet,uI=function(s){const t=n=>{this.editorDiv.style.fontSize=`calc(${n}px * var(--scale-factor))`,this.translate(0,-(n-v(this,Os))*this.parentScale),Y(this,Os,n),q(this,Hp,vb).call(this)},e=v(this,Os);this.addCommands({cmd:t.bind(this,s),undo:t.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ee.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},nE=new WeakSet,dI=function(s){const t=n=>{Y(this,Cr,this.editorDiv.style.color=n)},e=v(this,Cr);this.addCommands({cmd:t.bind(this,s),undo:t.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ee.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},iE=new WeakSet,fI=function(){var s;const t=[];this.editorDiv.normalize();for(const e of this.editorDiv.childNodes)t.push(q(s=dr,Wp,bb).call(s,e));return t.join(`
`)},Hp=new WeakSet,vb=function(){const[s,t]=this.parentDimensions;let e;if(this.isAttachedToDOM)e=this.div.getBoundingClientRect();else{const{currentLayer:n,div:i}=this,r=i.style.display,o=i.classList.contains("hidden");i.classList.remove("hidden"),i.style.display="hidden",n.div.append(this.div),e=i.getBoundingClientRect(),i.remove(),i.style.display=r,i.classList.toggle("hidden",o)}this.rotation%180===this.parentRotation%180?(this.width=e.width/s,this.height=e.height/t):(this.width=e.height/s,this.height=e.width/t),this.fixAndSetPosition()},Wp=new WeakSet,bb=function(s){return(s.nodeType===Node.TEXT_NODE?s.nodeValue:s.innerText).replaceAll(Ky,"")},ip=new WeakSet,iv=function(){if(this.editorDiv.replaceChildren(),!!v(this,Ns))for(const s of v(this,Ns).split(`
`)){const t=document.createElement("div");t.append(s?document.createTextNode(s):document.createElement("br")),this.editorDiv.append(t)}},sE=new WeakSet,pI=function(){return v(this,Ns).replaceAll(""," ")},xb=new WeakSet,rE=function(s){return s.replaceAll(" ","")},aE=new WeakSet,gI=function(s){const{value:t,fontSize:e,color:n,pageIndex:i}=v(this,Up);return this._hasBeenMoved||s.value!==t||s.fontSize!==e||s.color.some((r,o)=>r!==n[o])||s.pageIndex!==i},B(dr,Wp),B(dr,xb),oe(dr,"_freeTextDefaultContent",""),oe(dr,"_internalPadding",0),oe(dr,"_defaultColor",null),oe(dr,"_defaultFontSize",10),oe(dr,"_type","freetext"),oe(dr,"_editorType",Se.FREETEXT);let WX=dr;var wb,Pl,fr,oE,mI,sp,A0,lE,yI,cE,vI,sv,hE;class uE{constructor(t,e=0,n=0,i=!0){B(this,oE),B(this,sp),B(this,lE),B(this,cE),B(this,sv),B(this,wb,void 0),B(this,Pl,[]),B(this,fr,[]);let r=1/0,o=-1/0,c=1/0,h=-1/0;const d=10**-4;for(const{x:E,y:_,width:k,height:T}of t){const R=Math.floor((E-e)/d)*d,D=Math.ceil((E+k+e)/d)*d,F=Math.floor((_-e)/d)*d,j=Math.ceil((_+T+e)/d)*d,I=[R,F,j,!0],O=[D,F,j,!1];v(this,Pl).push(I,O),r=Math.min(r,R),o=Math.max(o,D),c=Math.min(c,F),h=Math.max(h,j)}const f=o-r+2*n,p=h-c+2*n,m=r-n,y=c-n,w=v(this,Pl).at(i?-1:-2),b=[w[0],w[2]];for(const E of v(this,Pl)){const[_,k,T]=E;E[0]=(_-m)/f,E[1]=(k-y)/p,E[2]=(T-y)/p}Y(this,wb,{x:m,y,width:f,height:p,lastPoint:b})}getOutlines(){v(this,Pl).sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of v(this,Pl))e[3]?(t.push(...q(this,sv,hE).call(this,e)),q(this,lE,yI).call(this,e)):(q(this,cE,vI).call(this,e),t.push(...q(this,sv,hE).call(this,e)));return q(this,oE,mI).call(this,t)}}wb=new WeakMap,Pl=new WeakMap,fr=new WeakMap,oE=new WeakSet,mI=function(s){const t=[],e=new Set;for(const r of s){const[o,c,h]=r;t.push([o,c,r],[o,h,r])}t.sort((r,o)=>r[1]-o[1]||r[0]-o[0]);for(let r=0,o=t.length;r<o;r+=2){const c=t[r][2],h=t[r+1][2];c.push(h),h.push(c),e.add(c),e.add(h)}const n=[];let i;for(;e.size>0;){const r=e.values().next().value;let[o,c,h,d,f]=r;e.delete(r);let p=o,m=c;for(i=[o,h],n.push(i);;){let y;if(e.has(d))y=d;else if(e.has(f))y=f;else break;e.delete(y),[o,c,h,d,f]=y,p!==o&&(i.push(p,m,o,m===c?c:h),p=o),m=m===c?h:c}i.push(p,m)}return new GX(n,v(this,wb))},sp=new WeakSet,A0=function(s){const t=v(this,fr);let e=0,n=t.length-1;for(;e<=n;){const i=e+n>>1,r=t[i][0];if(r===s)return i;r<s?e=i+1:n=i-1}return n+1},lE=new WeakSet,yI=function([,s,t]){const e=q(this,sp,A0).call(this,s);v(this,fr).splice(e,0,[s,t])},cE=new WeakSet,vI=function([,s,t]){const e=q(this,sp,A0).call(this,s);for(let n=e;n<v(this,fr).length;n++){const[i,r]=v(this,fr)[n];if(i!==s)break;if(i===s&&r===t){v(this,fr).splice(n,1);return}}for(let n=e-1;n>=0;n--){const[i,r]=v(this,fr)[n];if(i!==s)break;if(i===s&&r===t){v(this,fr).splice(n,1);return}}},sv=new WeakSet,hE=function(s){const[t,e,n]=s,i=[[t,e,n]],r=q(this,sp,A0).call(this,n);for(let o=0;o<r;o++){const[c,h]=v(this,fr)[o];for(let d=0,f=i.length;d<f;d++){const[,p,m]=i[d];if(!(h<=p||m<=c)){if(p>=c){if(m>h)i[d][1]=h;else{if(f===1)return[];i.splice(d,1),d--,f--}continue}i[d][2]=c,m>h&&i.push([t,h,m])}}}return i};class bI{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(t,e){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof mE}}var rv,rp;class GX extends bI{constructor(t,e){super(),B(this,rv,void 0),B(this,rp,void 0),Y(this,rp,t),Y(this,rv,e)}toSVGPath(){const t=[];for(const e of v(this,rp)){let[n,i]=e;t.push(`M${n} ${i}`);for(let r=2;r<e.length;r+=2){const o=e[r],c=e[r+1];o===n?(t.push(`V${c}`),i=c):c===i&&(t.push(`H${o}`),n=o)}t.push("Z")}return t.join(" ")}serialize([t,e,n,i],r){const o=[],c=n-t,h=i-e;for(const d of v(this,rp)){const f=new Array(d.length);for(let p=0;p<d.length;p+=2)f[p]=t+d[p]*c,f[p+1]=i-d[p+1]*h;o.push(f)}return o}get box(){return v(this,rv)}}rv=new WeakMap,rp=new WeakMap;var va,xo,ap,op,pa,Ae,Du,Nu,av,ov,lp,cp,Ll,lv,GA,dE,cv,fE;const Xh=class pE{constructor({x:t,y:e},n,i,r,o,c=0){B(this,cv),B(this,va,void 0),B(this,xo,[]),B(this,ap,void 0),B(this,op,void 0),B(this,pa,[]),B(this,Ae,new Float64Array(18)),B(this,Du,void 0),B(this,Nu,void 0),B(this,av,void 0),B(this,ov,void 0),B(this,lp,void 0),B(this,cp,void 0),B(this,Ll,[]),Y(this,va,n),Y(this,cp,r*i),Y(this,op,o),v(this,Ae).set([NaN,NaN,NaN,NaN,t,e],6),Y(this,ap,c),Y(this,ov,v(pE,lv)*i),Y(this,av,v(pE,dE)*i),Y(this,lp,i),v(this,Ll).push(t,e)}get free(){return!0}isEmpty(){return isNaN(v(this,Ae)[8])}add({x:t,y:e}){var n;Y(this,Du,t),Y(this,Nu,e);const[i,r,o,c]=v(this,va);let[h,d,f,p]=v(this,Ae).subarray(8,12);const m=t-f,y=e-p,w=Math.hypot(m,y);if(w<v(this,av))return!1;const b=w-v(this,ov),E=b/w,_=E*m,k=E*y;let T=h,R=d;h=f,d=p,f+=_,p+=k,(n=v(this,Ll))==null||n.push(t,e);const D=-k/b,F=_/b,j=D*v(this,cp),I=F*v(this,cp);return v(this,Ae).set(v(this,Ae).subarray(2,8),0),v(this,Ae).set([f+j,p+I],4),v(this,Ae).set(v(this,Ae).subarray(14,18),12),v(this,Ae).set([f-j,p-I],16),isNaN(v(this,Ae)[6])?(v(this,pa).length===0&&(v(this,Ae).set([h+j,d+I],2),v(this,pa).push(NaN,NaN,NaN,NaN,(h+j-i)/o,(d+I-r)/c),v(this,Ae).set([h-j,d-I],14),v(this,xo).push(NaN,NaN,NaN,NaN,(h-j-i)/o,(d-I-r)/c)),v(this,Ae).set([T,R,h,d,f,p],6),!this.isEmpty()):(v(this,Ae).set([T,R,h,d,f,p],6),Math.abs(Math.atan2(R-d,T-h)-Math.atan2(k,_))<Math.PI/2?([h,d,f,p]=v(this,Ae).subarray(2,6),v(this,pa).push(NaN,NaN,NaN,NaN,((h+f)/2-i)/o,((d+p)/2-r)/c),[h,d,T,R]=v(this,Ae).subarray(14,18),v(this,xo).push(NaN,NaN,NaN,NaN,((T+h)/2-i)/o,((R+d)/2-r)/c),!0):([T,R,h,d,f,p]=v(this,Ae).subarray(0,6),v(this,pa).push(((T+5*h)/6-i)/o,((R+5*d)/6-r)/c,((5*h+f)/6-i)/o,((5*d+p)/6-r)/c,((h+f)/2-i)/o,((d+p)/2-r)/c),[f,p,h,d,T,R]=v(this,Ae).subarray(12,18),v(this,xo).push(((T+5*h)/6-i)/o,((R+5*d)/6-r)/c,((5*h+f)/6-i)/o,((5*d+p)/6-r)/c,((h+f)/2-i)/o,((d+p)/2-r)/c),!0))}toSVGPath(){if(this.isEmpty())return"";const t=v(this,pa),e=v(this,xo),n=v(this,Ae).subarray(4,6),i=v(this,Ae).subarray(16,18),[r,o,c,h]=v(this,va),[d,f,p,m]=q(this,cv,fE).call(this);if(isNaN(v(this,Ae)[6])&&!this.isEmpty())return`M${(v(this,Ae)[2]-r)/c} ${(v(this,Ae)[3]-o)/h} L${(v(this,Ae)[4]-r)/c} ${(v(this,Ae)[5]-o)/h} L${d} ${f} L${p} ${m} L${(v(this,Ae)[16]-r)/c} ${(v(this,Ae)[17]-o)/h} L${(v(this,Ae)[14]-r)/c} ${(v(this,Ae)[15]-o)/h} Z`;const y=[];y.push(`M${t[4]} ${t[5]}`);for(let w=6;w<t.length;w+=6)isNaN(t[w])?y.push(`L${t[w+4]} ${t[w+5]}`):y.push(`C${t[w]} ${t[w+1]} ${t[w+2]} ${t[w+3]} ${t[w+4]} ${t[w+5]}`);y.push(`L${(n[0]-r)/c} ${(n[1]-o)/h} L${d} ${f} L${p} ${m} L${(i[0]-r)/c} ${(i[1]-o)/h}`);for(let w=e.length-6;w>=6;w-=6)isNaN(e[w])?y.push(`L${e[w+4]} ${e[w+5]}`):y.push(`C${e[w]} ${e[w+1]} ${e[w+2]} ${e[w+3]} ${e[w+4]} ${e[w+5]}`);return y.push(`L${e[4]} ${e[5]} Z`),y.join(" ")}getOutlines(){var t;const e=v(this,pa),n=v(this,xo),i=v(this,Ae),r=i.subarray(4,6),o=i.subarray(16,18),[c,h,d,f]=v(this,va),p=new Float64Array((((t=v(this,Ll))==null?void 0:t.length)??0)+2);for(let k=0,T=p.length-2;k<T;k+=2)p[k]=(v(this,Ll)[k]-c)/d,p[k+1]=(v(this,Ll)[k+1]-h)/f;p[p.length-2]=(v(this,Du)-c)/d,p[p.length-1]=(v(this,Nu)-h)/f;const[m,y,w,b]=q(this,cv,fE).call(this);if(isNaN(i[6])&&!this.isEmpty()){const k=new Float64Array(36);return k.set([NaN,NaN,NaN,NaN,(i[2]-c)/d,(i[3]-h)/f,NaN,NaN,NaN,NaN,(i[4]-c)/d,(i[5]-h)/f,NaN,NaN,NaN,NaN,m,y,NaN,NaN,NaN,NaN,w,b,NaN,NaN,NaN,NaN,(i[16]-c)/d,(i[17]-h)/f,NaN,NaN,NaN,NaN,(i[14]-c)/d,(i[15]-h)/f],0),new mE(k,p,v(this,va),v(this,lp),v(this,ap),v(this,op))}const E=new Float64Array(v(this,pa).length+24+v(this,xo).length);let _=e.length;for(let k=0;k<_;k+=2){if(isNaN(e[k])){E[k]=E[k+1]=NaN;continue}E[k]=e[k],E[k+1]=e[k+1]}E.set([NaN,NaN,NaN,NaN,(r[0]-c)/d,(r[1]-h)/f,NaN,NaN,NaN,NaN,m,y,NaN,NaN,NaN,NaN,w,b,NaN,NaN,NaN,NaN,(o[0]-c)/d,(o[1]-h)/f],_),_+=24;for(let k=n.length-6;k>=6;k-=6)for(let T=0;T<6;T+=2){if(isNaN(n[k+T])){E[_]=E[_+1]=NaN,_+=2;continue}E[_]=n[k+T],E[_+1]=n[k+T+1],_+=2}return E.set([NaN,NaN,NaN,NaN,n[4],n[5]],_),new mE(E,p,v(this,va),v(this,lp),v(this,ap),v(this,op))}};va=new WeakMap,xo=new WeakMap,ap=new WeakMap,op=new WeakMap,pa=new WeakMap,Ae=new WeakMap,Du=new WeakMap,Nu=new WeakMap,av=new WeakMap,ov=new WeakMap,lp=new WeakMap,cp=new WeakMap,Ll=new WeakMap,lv=new WeakMap,GA=new WeakMap,dE=new WeakMap,cv=new WeakSet,fE=function(){const s=v(this,Ae).subarray(4,6),t=v(this,Ae).subarray(16,18),[e,n,i,r]=v(this,va);return[(v(this,Du)+(s[0]-t[0])/2-e)/i,(v(this,Nu)+(s[1]-t[1])/2-n)/r,(v(this,Du)+(t[0]-s[0])/2-e)/i,(v(this,Nu)+(t[1]-s[1])/2-n)/r]},B(Xh,lv,8),B(Xh,GA,2),B(Xh,dE,v(Xh,lv)+v(Xh,GA));let xI=Xh;var hp,mu,Fo,hv,Rs,uv,Sn,Kh,up,Zh,dp,gE,wI;class mE extends bI{constructor(t,e,n,i,r,o){super(),B(this,Kh),B(this,Zh),B(this,gE),B(this,hp,void 0),B(this,mu,null),B(this,Fo,void 0),B(this,hv,void 0),B(this,Rs,void 0),B(this,uv,void 0),B(this,Sn,void 0),Y(this,Sn,t),Y(this,Rs,e),Y(this,hp,n),Y(this,uv,i),Y(this,Fo,r),Y(this,hv,o),q(this,gE,wI).call(this,o);const{x:c,y:h,width:d,height:f}=v(this,mu);for(let p=0,m=t.length;p<m;p+=2)t[p]=(t[p]-c)/d,t[p+1]=(t[p+1]-h)/f;for(let p=0,m=e.length;p<m;p+=2)e[p]=(e[p]-c)/d,e[p+1]=(e[p+1]-h)/f}toSVGPath(){const t=[`M${v(this,Sn)[4]} ${v(this,Sn)[5]}`];for(let e=6,n=v(this,Sn).length;e<n;e+=6){if(isNaN(v(this,Sn)[e])){t.push(`L${v(this,Sn)[e+4]} ${v(this,Sn)[e+5]}`);continue}t.push(`C${v(this,Sn)[e]} ${v(this,Sn)[e+1]} ${v(this,Sn)[e+2]} ${v(this,Sn)[e+3]} ${v(this,Sn)[e+4]} ${v(this,Sn)[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,n,i],r){const o=n-t,c=i-e;let h,d;switch(r){case 0:h=q(this,Kh,up).call(this,v(this,Sn),t,i,o,-c),d=q(this,Kh,up).call(this,v(this,Rs),t,i,o,-c);break;case 90:h=q(this,Zh,dp).call(this,v(this,Sn),t,e,o,c),d=q(this,Zh,dp).call(this,v(this,Rs),t,e,o,c);break;case 180:h=q(this,Kh,up).call(this,v(this,Sn),n,e,-o,c),d=q(this,Kh,up).call(this,v(this,Rs),n,e,-o,c);break;case 270:h=q(this,Zh,dp).call(this,v(this,Sn),n,i,-o,-c),d=q(this,Zh,dp).call(this,v(this,Rs),n,i,-o,-c);break}return{outline:Array.from(h),points:[Array.from(d)]}}get box(){return v(this,mu)}getNewOutline(t,e){const{x:n,y:i,width:r,height:o}=v(this,mu),[c,h,d,f]=v(this,hp),p=r*d,m=o*f,y=n*d+c,w=i*f+h,b=new xI({x:v(this,Rs)[0]*p+y,y:v(this,Rs)[1]*m+w},v(this,hp),v(this,uv),t,v(this,hv),e??v(this,Fo));for(let E=2;E<v(this,Rs).length;E+=2)b.add({x:v(this,Rs)[E]*p+y,y:v(this,Rs)[E+1]*m+w});return b.getOutlines()}}hp=new WeakMap,mu=new WeakMap,Fo=new WeakMap,hv=new WeakMap,Rs=new WeakMap,uv=new WeakMap,Sn=new WeakMap,Kh=new WeakSet,up=function(s,t,e,n,i){const r=new Float64Array(s.length);for(let o=0,c=s.length;o<c;o+=2)r[o]=t+s[o]*n,r[o+1]=e+s[o+1]*i;return r},Zh=new WeakSet,dp=function(s,t,e,n,i){const r=new Float64Array(s.length);for(let o=0,c=s.length;o<c;o+=2)r[o]=t+s[o+1]*n,r[o+1]=e+s[o]*i;return r},gE=new WeakSet,wI=function(s){const t=v(this,Sn);let e=t[4],n=t[5],i=e,r=n,o=e,c=n,h=e,d=n;const f=s?Math.max:Math.min;for(let b=6,E=t.length;b<E;b+=6){if(isNaN(t[b]))i=Math.min(i,t[b+4]),r=Math.min(r,t[b+5]),o=Math.max(o,t[b+4]),c=Math.max(c,t[b+5]),d<t[b+5]?(h=t[b+4],d=t[b+5]):d===t[b+5]&&(h=f(h,t[b+4]));else{const _=qt.bezierBoundingBox(e,n,...t.slice(b,b+6));i=Math.min(i,_[0]),r=Math.min(r,_[1]),o=Math.max(o,_[2]),c=Math.max(c,_[3]),d<_[3]?(h=_[2],d=_[3]):d===_[3]&&(h=f(h,_[2]))}e=t[b+4],n=t[b+5]}const p=i-v(this,Fo),m=r-v(this,Fo),y=o-i+2*v(this,Fo),w=c-r+2*v(this,Fo);Y(this,mu,{x:p,y:m,width:y,height:w,lastPoint:[h,d]})};var Ab,Sb,vr,Qh,Gp,Fn,_b,fp,dv,Eb,$l,Vp,Cb,yE,kb,vE,bE,AI,wo,Dl,xE,SI,ba,Ro;const _I=class Nl{constructor({editor:t=null,uiManager:e=null}){B(this,Cb),B(this,kb),B(this,bE),B(this,wo),B(this,xE),B(this,ba),B(this,Ab,q(this,bE,AI).bind(this)),B(this,Sb,q(this,xE,SI).bind(this)),B(this,vr,null),B(this,Qh,null),B(this,Gp,void 0),B(this,Fn,null),B(this,_b,!1),B(this,fp,!1),B(this,dv,null),B(this,Eb,void 0),B(this,$l,null),B(this,Vp,void 0);var n;t?(Y(this,fp,!1),Y(this,Vp,ee.HIGHLIGHT_COLOR),Y(this,dv,t)):(Y(this,fp,!0),Y(this,Vp,ee.HIGHLIGHT_DEFAULT_COLOR)),Y(this,$l,t?._uiManager||e),Y(this,Eb,v(this,$l)._eventBus),Y(this,Gp,t?.color||((n=v(this,$l))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98")}static get _keyboardManager(){return Ee(this,"_keyboardManager",new wg([[["Escape","mac+Escape"],Nl.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Nl.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Nl.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Nl.prototype._moveToPrevious],[["Home","mac+Home"],Nl.prototype._moveToBeginning],[["End","mac+End"],Nl.prototype._moveToEnd]]))}renderButton(){const t=Y(this,vr,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0),t.addEventListener("click",q(this,wo,Dl).bind(this)),t.addEventListener("keydown",v(this,Ab));const e=Y(this,Qh,document.createElement("span"));return e.className="swatch",e.setAttribute("aria-hidden",!0),e.style.backgroundColor=v(this,Gp),t.append(e),t}renderMainDropdown(){const t=Y(this,Fn,q(this,Cb,yE).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===v(this,vr)){q(this,wo,Dl).call(this,t);return}const e=t.target.getAttribute("data-color");e&&q(this,kb,vE).call(this,e,t)}_moveToNext(t){var e,n;if(!v(this,ba,Ro)){q(this,wo,Dl).call(this,t);return}if(t.target===v(this,vr)){(e=v(this,Fn).firstChild)==null||e.focus();return}(n=t.target.nextSibling)==null||n.focus()}_moveToPrevious(t){var e,n;if(t.target===((e=v(this,Fn))==null?void 0:e.firstChild)||t.target===v(this,vr)){v(this,ba,Ro)&&this._hideDropdownFromKeyboard();return}v(this,ba,Ro)||q(this,wo,Dl).call(this,t),(n=t.target.previousSibling)==null||n.focus()}_moveToBeginning(t){var e;if(!v(this,ba,Ro)){q(this,wo,Dl).call(this,t);return}(e=v(this,Fn).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!v(this,ba,Ro)){q(this,wo,Dl).call(this,t);return}(e=v(this,Fn).lastChild)==null||e.focus()}hideDropdown(){var t;(t=v(this,Fn))==null||t.classList.add("hidden"),window.removeEventListener("pointerdown",v(this,Sb))}_hideDropdownFromKeyboard(){var t;if(!v(this,fp)){if(!v(this,ba,Ro)){(t=v(this,dv))==null||t.unselect();return}this.hideDropdown(),v(this,vr).focus({preventScroll:!0,focusVisible:v(this,_b)})}}updateColor(t){if(v(this,Qh)&&(v(this,Qh).style.backgroundColor=t),!v(this,Fn))return;const e=v(this,$l).highlightColors.values();for(const n of v(this,Fn).children)n.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=v(this,vr))==null||t.remove(),Y(this,vr,null),Y(this,Qh,null),(e=v(this,Fn))==null||e.remove(),Y(this,Fn,null)}};Ab=new WeakMap,Sb=new WeakMap,vr=new WeakMap,Qh=new WeakMap,Gp=new WeakMap,Fn=new WeakMap,_b=new WeakMap,fp=new WeakMap,dv=new WeakMap,Eb=new WeakMap,$l=new WeakMap,Vp=new WeakMap,Cb=new WeakSet,yE=function(){const s=document.createElement("div");s.addEventListener("contextmenu",Hi),s.className="dropdown",s.role="listbox",s.setAttribute("aria-multiselectable",!1),s.setAttribute("aria-orientation","vertical"),s.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[t,e]of v(this,$l).highlightColors){const n=document.createElement("button");n.tabIndex="0",n.role="option",n.setAttribute("data-color",e),n.title=t,n.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${t}`);const i=document.createElement("span");n.append(i),i.className="swatch",i.style.backgroundColor=e,n.setAttribute("aria-selected",e===v(this,Gp)),n.addEventListener("click",q(this,kb,vE).bind(this,e)),s.append(n)}return s.addEventListener("keydown",v(this,Ab)),s},kb=new WeakSet,vE=function(s,t){t.stopPropagation(),v(this,Eb).dispatch("switchannotationeditorparams",{source:this,type:v(this,Vp),value:s})},bE=new WeakSet,AI=function(s){_I._keyboardManager.exec(this,s)},wo=new WeakSet,Dl=function(s){if(v(this,ba,Ro)){this.hideDropdown();return}if(Y(this,_b,s.detail===0),window.addEventListener("pointerdown",v(this,Sb)),v(this,Fn)){v(this,Fn).classList.remove("hidden");return}const t=Y(this,Fn,q(this,Cb,yE).call(this));v(this,vr).append(t)},xE=new WeakSet,SI=function(s){var t;(t=v(this,Fn))!=null&&t.contains(s.target)||this.hideDropdown()},ba=new WeakSet,Ro=function(){return v(this,Fn)&&!v(this,Fn).classList.contains("hidden")};let EI=_I;var $p,Tb,ec,yu,qp,Vs,Mb,Rb,Ou,br,Ii,Is,wE,Yp,vu,zn,pp,Ea,fv,pv,AE,Pb,SE,_E,CI,EE,kI,CE,$L,gv,kE,Jh,gp,nc,Iu,TE,TI,mp,mv,bu,Xp,ME,MI,RE,RI,PE,PI,LE,LI;const si=class ri extends Ye{constructor(t){super({...t,name:"highlightEditor"}),B(this,pv),B(this,Pb),B(this,_E),B(this,EE),B(this,CE),B(this,gv),B(this,Jh),B(this,TE),B(this,mp),B(this,bu),B(this,ME),B(this,RE),B(this,$p,null),B(this,Tb,0),B(this,ec,void 0),B(this,yu,null),B(this,qp,null),B(this,Vs,null),B(this,Mb,null),B(this,Rb,0),B(this,Ou,null),B(this,br,null),B(this,Ii,null),B(this,Is,!1),B(this,wE,q(this,TE,TI).bind(this)),B(this,Yp,null),B(this,vu,void 0),B(this,zn,null),B(this,pp,""),B(this,Ea,void 0),B(this,fv,""),this.color=t.color||ri._defaultColor,Y(this,Ea,t.thickness||ri._defaultThickness),Y(this,vu,t.opacity||ri._defaultOpacity),Y(this,ec,t.boxes||null),Y(this,fv,t.methodOfCreation||""),Y(this,pp,t.text||""),this._isDraggable=!1,t.highlightId>-1?(Y(this,Is,!0),q(this,Pb,SE).call(this,t),q(this,Jh,gp).call(this)):(Y(this,$p,t.anchorNode),Y(this,Tb,t.anchorOffset),Y(this,Mb,t.focusNode),Y(this,Rb,t.focusOffset),q(this,pv,AE).call(this),q(this,Jh,gp).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=ri.prototype;return Ee(this,"_keyboardManager",new wg([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:v(this,Is)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:v(this,Ea),methodOfCreation:v(this,fv)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,e){var n;Ye.initialize(t,e),ri._defaultColor||(ri._defaultColor=((n=e.highlightColors)==null?void 0:n.values().next().value)||"#fff066")}static updateDefaultParams(t,e){switch(t){case ee.HIGHLIGHT_DEFAULT_COLOR:ri._defaultColor=e;break;case ee.HIGHLIGHT_THICKNESS:ri._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return v(this,Yp)}updateParams(t,e){switch(t){case ee.HIGHLIGHT_COLOR:q(this,_E,CI).call(this,e);break;case ee.HIGHLIGHT_THICKNESS:q(this,EE,kI).call(this,e);break}}static get defaultPropertiesToUpdate(){return[[ee.HIGHLIGHT_DEFAULT_COLOR,ri._defaultColor],[ee.HIGHLIGHT_THICKNESS,ri._defaultThickness]]}get propertiesToUpdate(){return[[ee.HIGHLIGHT_COLOR,this.color||ri._defaultColor],[ee.HIGHLIGHT_THICKNESS,v(this,Ea)||ri._defaultThickness],[ee.HIGHLIGHT_FREE,v(this,Is)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(Y(this,qp,new EI({editor:this})),t.addColorPicker(v(this,qp))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(q(this,bu,Xp).call(this))}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,q(this,bu,Xp).call(this))}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){q(this,gv,kE).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(q(this,Jh,gp).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var e;let n=!1;this.parent&&!t?q(this,gv,kE).call(this):t&&(q(this,Jh,gp).call(this,t),n=!this.parent&&((e=this.div)==null?void 0:e.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),n&&this.select()}rotate(t){var e,n,i;const{drawLayer:r}=this.parent;let o;v(this,Is)?(t=(t-this.rotation+360)%360,o=q(e=ri,nc,Iu).call(e,v(this,br).box,t)):o=q(n=ri,nc,Iu).call(n,this,t),r.rotate(v(this,Ii),t),r.rotate(v(this,zn),t),r.updateBox(v(this,Ii),o),r.updateBox(v(this,zn),q(i=ri,nc,Iu).call(i,v(this,Vs).box,t))}render(){if(this.div)return this.div;const t=super.render();v(this,pp)&&(t.setAttribute("aria-label",v(this,pp)),t.setAttribute("role","mark")),v(this,Is)?t.classList.add("free"):this.div.addEventListener("keydown",v(this,wE));const e=Y(this,Ou,document.createElement("div"));t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=v(this,yu);const[n,i]=this.parentDimensions;return this.setDims(this.width*n,this.height*i),Kv(this,v(this,Ou),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.parent.drawLayer.addClass(v(this,zn),"hovered")}pointerleave(){this.parent.drawLayer.removeClass(v(this,zn),"hovered")}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:q(this,mp,mv).call(this,!0);break;case 1:case 3:q(this,mp,mv).call(this,!1);break}}select(){var t,e;super.select(),v(this,zn)&&((t=this.parent)==null||t.drawLayer.removeClass(v(this,zn),"hovered"),(e=this.parent)==null||e.drawLayer.addClass(v(this,zn),"selected"))}unselect(){var t;super.unselect(),v(this,zn)&&((t=this.parent)==null||t.drawLayer.removeClass(v(this,zn),"selected"),v(this,Is)||q(this,mp,mv).call(this,!1))}get _mustFixPosition(){return!v(this,Is)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.show(v(this,Ii),t),this.parent.drawLayer.show(v(this,zn),t))}static startHighlighting(t,e,{target:n,x:i,y:r}){const{x:o,y:c,width:h,height:d}=n.getBoundingClientRect(),f=w=>{q(this,PE,PI).call(this,t,w)},p={capture:!0,passive:!1},m=w=>{w.preventDefault(),w.stopPropagation()},y=w=>{n.removeEventListener("pointermove",f),window.removeEventListener("blur",y),window.removeEventListener("pointerup",y),window.removeEventListener("pointerdown",m,p),window.removeEventListener("contextmenu",Hi),q(this,LE,LI).call(this,t,w)};window.addEventListener("blur",y),window.addEventListener("pointerup",y),window.addEventListener("pointerdown",m,p),window.addEventListener("contextmenu",Hi),n.addEventListener("pointermove",f),this._freeHighlight=new xI({x:i,y:r},[o,c,h,d],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static deserialize(t,e,n){var i;const r=super.deserialize(t,e,n),{rect:[o,c,h,d],color:f,quadPoints:p}=t;r.color=qt.makeHexColor(...f),Y(r,vu,t.opacity);const[m,y]=r.pageDimensions;r.width=(h-o)/m,r.height=(d-c)/y;const w=Y(r,ec,[]);for(let b=0;b<p.length;b+=8)w.push({x:(p[4]-h)/m,y:(d-(1-p[b+5]))/y,width:(p[b+2]-p[b])/m,height:(p[b+5]-p[b+1])/y});return q(i=r,pv,AE).call(i),r}serialize(t=!1){if(this.isEmpty()||t)return null;const e=this.getRect(0,0),n=Ye._colorManager.convert(this.color);return{annotationType:Se.HIGHLIGHT,color:n,opacity:v(this,vu),thickness:v(this,Ea),quadPoints:q(this,ME,MI).call(this),outlines:q(this,RE,RI).call(this,e),pageIndex:this.pageIndex,rect:e,rotation:q(this,bu,Xp).call(this),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}};$p=new WeakMap,Tb=new WeakMap,ec=new WeakMap,yu=new WeakMap,qp=new WeakMap,Vs=new WeakMap,Mb=new WeakMap,Rb=new WeakMap,Ou=new WeakMap,br=new WeakMap,Ii=new WeakMap,Is=new WeakMap,wE=new WeakMap,Yp=new WeakMap,vu=new WeakMap,zn=new WeakMap,pp=new WeakMap,Ea=new WeakMap,fv=new WeakMap,pv=new WeakSet,AE=function(){const s=new uE(v(this,ec),.001);Y(this,br,s.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=v(this,br).box;const t=new uE(v(this,ec),.0025,.001,this._uiManager.direction==="ltr");Y(this,Vs,t.getOutlines());const{lastPoint:e}=v(this,Vs).box;Y(this,Yp,[(e[0]-this.x)/this.width,(e[1]-this.y)/this.height])},Pb=new WeakSet,SE=function({highlightOutlines:s,highlightId:t,clipPathId:e}){var n,i;if(Y(this,br,s),Y(this,Vs,s.getNewOutline(v(this,Ea)/2+1.5,.0025)),t>=0)Y(this,Ii,t),Y(this,yu,e),this.parent.drawLayer.finalizeLine(t,s),Y(this,zn,this.parent.drawLayer.highlightOutline(v(this,Vs)));else if(this.parent){const f=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(v(this,Ii),s),this.parent.drawLayer.updateBox(v(this,Ii),q(n=si,nc,Iu).call(n,v(this,br).box,(f-this.rotation+360)%360)),this.parent.drawLayer.updateLine(v(this,zn),v(this,Vs)),this.parent.drawLayer.updateBox(v(this,zn),q(i=si,nc,Iu).call(i,v(this,Vs).box,f))}const{x:r,y:o,width:c,height:h}=s.box;switch(this.rotation){case 0:this.x=r,this.y=o,this.width=c,this.height=h;break;case 90:{const[f,p]=this.parentDimensions;this.x=o,this.y=1-r,this.width=c*p/f,this.height=h*f/p;break}case 180:this.x=1-r,this.y=1-o,this.width=c,this.height=h;break;case 270:{const[f,p]=this.parentDimensions;this.x=1-o,this.y=r,this.width=c*p/f,this.height=h*f/p;break}}const{lastPoint:d}=v(this,Vs).box;Y(this,Yp,[(d[0]-r)/c,(d[1]-o)/h])},_E=new WeakSet,CI=function(s){const t=n=>{var i,r;this.color=n,(i=this.parent)==null||i.drawLayer.changeColor(v(this,Ii),n),(r=v(this,qp))==null||r.updateColor(n)},e=this.color;this.addCommands({cmd:t.bind(this,s),undo:t.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ee.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(s)},!0)},EE=new WeakSet,kI=function(s){const t=v(this,Ea),e=n=>{Y(this,Ea,n),q(this,CE,$L).call(this,n)};this.addCommands({cmd:e.bind(this,s),undo:e.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ee.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:s},!0)},CE=new WeakSet,$L=function(s){if(!v(this,Is))return;q(this,Pb,SE).call(this,{highlightOutlines:v(this,br).getNewOutline(s/2)}),this.fixAndSetPosition();const[t,e]=this.parentDimensions;this.setDims(this.width*t,this.height*e)},gv=new WeakSet,kE=function(){v(this,Ii)===null||!this.parent||(this.parent.drawLayer.remove(v(this,Ii)),Y(this,Ii,null),this.parent.drawLayer.remove(v(this,zn)),Y(this,zn,null))},Jh=new WeakSet,gp=function(s=this.parent){v(this,Ii)===null&&({id:js(this,Ii)._,clipPathId:js(this,yu)._}=s.drawLayer.highlight(v(this,br),this.color,v(this,vu)),Y(this,zn,s.drawLayer.highlightOutline(v(this,Vs))),v(this,Ou)&&(v(this,Ou).style.clipPath=v(this,yu)))},nc=new WeakSet,Iu=function({x:s,y:t,width:e,height:n},i){switch(i){case 90:return{x:1-t-n,y:s,width:n,height:e};case 180:return{x:1-s-e,y:1-t-n,width:e,height:n};case 270:return{x:t,y:1-s-e,width:n,height:e}}return{x:s,y:t,width:e,height:n}},TE=new WeakSet,TI=function(s){si._keyboardManager.exec(this,s)},mp=new WeakSet,mv=function(s){if(!v(this,$p))return;const t=window.getSelection();s?t.setPosition(v(this,$p),v(this,Tb)):t.setPosition(v(this,Mb),v(this,Rb))},bu=new WeakSet,Xp=function(){return v(this,Is)?this.rotation:0},ME=new WeakSet,MI=function(){if(v(this,Is))return null;const[s,t]=this.pageDimensions,e=v(this,ec),n=new Array(e.length*8);let i=0;for(const{x:r,y:o,width:c,height:h}of e){const d=r*s,f=(1-o-h)*t;n[i]=n[i+4]=d,n[i+1]=n[i+3]=f,n[i+2]=n[i+6]=d+c*s,n[i+5]=n[i+7]=f+h*t,i+=8}return n},RE=new WeakSet,RI=function(s){return v(this,br).serialize(s,q(this,bu,Xp).call(this))},PE=new WeakSet,PI=function(s,t){this._freeHighlight.add(t)&&s.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},LE=new WeakSet,LI=function(s,t){this._freeHighlight.isEmpty()?s.drawLayer.removeFreeHighlight(this._freeHighlightId):s.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},B(si,nc),B(si,PE),B(si,LE),oe(si,"_defaultColor",null),oe(si,"_defaultOpacity",1),oe(si,"_defaultThickness",12),oe(si,"_l10nPromise"),oe(si,"_type","highlight"),oe(si,"_editorType",Se.HIGHLIGHT),oe(si,"_freeHighlightId",-1),oe(si,"_freeHighlight",null),oe(si,"_freeHighlightClipId","");let qL=si;var xu,wu,yv,vv,bv,ju,Ca,Ao,qs,tu,Au,Bu,Su,_u,Ol,DE,DI,NE,NI,OE,OI,IE,II,xv,VA,jE,jI,Lb,BE,FE,YL,zE,XL,UE,KL,HE,ZL,WE,QL,zo,ql,wv,GE,Kp,Db,Zp,Nb,ic,Fu,Av,VE,yp,S0,$E,BI,_0,$A,qE,FI,YE,zI,Ob,XE,vp,E0,zu,Qp;const Di=class Ws extends Ye{constructor(t){super({...t,name:"inkEditor"}),B(this,DE),B(this,NE),B(this,OE),B(this,IE),B(this,xv),B(this,jE),B(this,Lb),B(this,FE),B(this,zE),B(this,UE),B(this,HE),B(this,WE),B(this,zo),B(this,wv),B(this,Kp),B(this,Zp),B(this,ic),B(this,Av),B(this,yp),B(this,YE),B(this,Ob),B(this,vp),B(this,zu),B(this,xu,0),B(this,wu,0),B(this,yv,this.canvasPointermove.bind(this)),B(this,vv,this.canvasPointerleave.bind(this)),B(this,bv,this.canvasPointerup.bind(this)),B(this,ju,this.canvasPointerdown.bind(this)),B(this,Ca,null),B(this,Ao,new Path2D),B(this,qs,!1),B(this,tu,!1),B(this,Au,!1),B(this,Bu,null),B(this,Su,0),B(this,_u,0),B(this,Ol,null),this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,e){Ye.initialize(t,e)}static updateDefaultParams(t,e){switch(t){case ee.INK_THICKNESS:Ws._defaultThickness=e;break;case ee.INK_COLOR:Ws._defaultColor=e;break;case ee.INK_OPACITY:Ws._defaultOpacity=e/100;break}}updateParams(t,e){switch(t){case ee.INK_THICKNESS:q(this,DE,DI).call(this,e);break;case ee.INK_COLOR:q(this,NE,NI).call(this,e);break;case ee.INK_OPACITY:q(this,OE,OI).call(this,e);break}}static get defaultPropertiesToUpdate(){return[[ee.INK_THICKNESS,Ws._defaultThickness],[ee.INK_COLOR,Ws._defaultColor||Ye._defaultLineColor],[ee.INK_OPACITY,Math.round(Ws._defaultOpacity*100)]]}get propertiesToUpdate(){return[[ee.INK_THICKNESS,this.thickness||Ws._defaultThickness],[ee.INK_COLOR,this.color||Ws._defaultColor||Ye._defaultLineColor],[ee.INK_OPACITY,Math.round(100*(this.opacity??Ws._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(q(this,Kp,Db).call(this),q(this,Zp,Nb).call(this)),this.isAttachedToDOM||(this.parent.add(this),q(this,ic,Fu).call(this)),q(this,zu,Qp).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,v(this,Ca)&&(clearTimeout(v(this,Ca)),Y(this,Ca,null)),v(this,Bu).disconnect(),Y(this,Bu,null),super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,e]=this.parentDimensions,n=this.width*t,i=this.height*e;this.setDimensions(n,i)}enableEditMode(){v(this,qs)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",v(this,ju)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",v(this,ju)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){v(this,qs)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),Y(this,qs,!0),this.div.classList.add("disabled"),q(this,zu,Qp).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||v(this,qs)||(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),q(this,jE,jI).call(this,t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),q(this,Lb,BE).call(this,t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),q(this,wv,GE).call(this,t)}canvasPointerleave(t){q(this,wv,GE).call(this,t)}get isResizable(){return!this.isEmpty()&&v(this,qs)}render(){if(this.div)return this.div;let t,e;this.width&&(t=this.x,e=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[n,i,r,o]=q(this,IE,II).call(this);if(this.setAt(n,i,0,0),this.setDims(r,o),q(this,Kp,Db).call(this),this.width){const[c,h]=this.parentDimensions;this.setAspectRatio(this.width*c,this.height*h),this.setAt(t*c,e*h,this.width*c,this.height*h),Y(this,Au,!0),q(this,ic,Fu).call(this),this.setDims(this.width*c,this.height*h),q(this,zo,ql).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return q(this,Zp,Nb).call(this),this.div}setDimensions(t,e){const n=Math.round(t),i=Math.round(e);if(v(this,Su)===n&&v(this,_u)===i)return;Y(this,Su,n),Y(this,_u,i),this.canvas.style.visibility="hidden";const[r,o]=this.parentDimensions;this.width=t/r,this.height=e/o,this.fixAndSetPosition(),v(this,qs)&&q(this,Av,VE).call(this,t,e),q(this,ic,Fu).call(this),q(this,zo,ql).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(t,e,n){var i,r,o;if(t instanceof cI)return null;const c=super.deserialize(t,e,n);c.thickness=t.thickness,c.color=qt.makeHexColor(...t.color),c.opacity=t.opacity;const[h,d]=c.pageDimensions,f=c.width*h,p=c.height*d,m=c.parentScale,y=t.thickness/2;Y(c,qs,!0),Y(c,Su,Math.round(f)),Y(c,_u,Math.round(p));const{paths:w,rect:b,rotation:E}=t;for(let{bezier:k}of w){k=q(i=Ws,qE,FI).call(i,k,b,E);const T=[];c.paths.push(T);let R=m*(k[0]-y),D=m*(k[1]-y);for(let j=2,I=k.length;j<I;j+=6){const O=m*(k[j]-y),X=m*(k[j+1]-y),Q=m*(k[j+2]-y),H=m*(k[j+3]-y),J=m*(k[j+4]-y),N=m*(k[j+5]-y);T.push([[R,D],[O,X],[Q,H],[J,N]]),R=J,D=N}const F=q(this,$E,BI).call(this,T);c.bezierPath2D.push(F)}const _=q(r=c,Ob,XE).call(r);return Y(c,wu,Math.max(Ye.MIN_SIZE,_[2]-_[0])),Y(c,xu,Math.max(Ye.MIN_SIZE,_[3]-_[1])),q(o=c,Av,VE).call(o,f,p),c}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),e=Ye._colorManager.convert(this.ctx.strokeStyle);return{annotationType:Se.INK,color:e,thickness:this.thickness,opacity:this.opacity,paths:q(this,YE,zI).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};xu=new WeakMap,wu=new WeakMap,yv=new WeakMap,vv=new WeakMap,bv=new WeakMap,ju=new WeakMap,Ca=new WeakMap,Ao=new WeakMap,qs=new WeakMap,tu=new WeakMap,Au=new WeakMap,Bu=new WeakMap,Su=new WeakMap,_u=new WeakMap,Ol=new WeakMap,DE=new WeakSet,DI=function(s){const t=n=>{this.thickness=n,q(this,zu,Qp).call(this)},e=this.thickness;this.addCommands({cmd:t.bind(this,s),undo:t.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ee.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},NE=new WeakSet,NI=function(s){const t=n=>{this.color=n,q(this,zo,ql).call(this)},e=this.color;this.addCommands({cmd:t.bind(this,s),undo:t.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ee.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},OE=new WeakSet,OI=function(s){const t=n=>{this.opacity=n,q(this,zo,ql).call(this)};s/=100;const e=this.opacity;this.addCommands({cmd:t.bind(this,s),undo:t.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ee.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},IE=new WeakSet,II=function(){const{parentRotation:s,parentDimensions:[t,e]}=this;switch(s){case 90:return[0,e,e,t];case 180:return[t,e,t,e];case 270:return[t,0,e,t];default:return[0,0,t,e]}},xv=new WeakSet,VA=function(){const{ctx:s,color:t,opacity:e,thickness:n,parentScale:i,scaleFactor:r}=this;s.lineWidth=n*i/r,s.lineCap="round",s.lineJoin="round",s.miterLimit=10,s.strokeStyle=`${t}${aY(e)}`},jE=new WeakSet,jI=function(s,t){this.canvas.addEventListener("contextmenu",Hi),this.canvas.addEventListener("pointerleave",v(this,vv)),this.canvas.addEventListener("pointermove",v(this,yv)),this.canvas.addEventListener("pointerup",v(this,bv)),this.canvas.removeEventListener("pointerdown",v(this,ju)),this.isEditing=!0,v(this,Au)||(Y(this,Au,!0),q(this,ic,Fu).call(this),this.thickness||(this.thickness=Di._defaultThickness),this.color||(this.color=Di._defaultColor||Ye._defaultLineColor),this.opacity??(this.opacity=Di._defaultOpacity)),this.currentPath.push([s,t]),Y(this,tu,!1),q(this,xv,VA).call(this),Y(this,Ol,()=>{q(this,UE,KL).call(this),v(this,Ol)&&window.requestAnimationFrame(v(this,Ol))}),window.requestAnimationFrame(v(this,Ol))},Lb=new WeakSet,BE=function(s,t){const[e,n]=this.currentPath.at(-1);if(this.currentPath.length>1&&s===e&&t===n)return;const i=this.currentPath;let r=v(this,Ao);if(i.push([s,t]),Y(this,tu,!0),i.length<=2){r.moveTo(...i[0]),r.lineTo(s,t);return}i.length===3&&(Y(this,Ao,r=new Path2D),r.moveTo(...i[0])),q(this,HE,ZL).call(this,r,...i.at(-3),...i.at(-2),s,t)},FE=new WeakSet,YL=function(){if(this.currentPath.length===0)return;const s=this.currentPath.at(-1);v(this,Ao).lineTo(...s)},zE=new WeakSet,XL=function(s,t){Y(this,Ol,null),s=Math.min(Math.max(s,0),this.canvas.width),t=Math.min(Math.max(t,0),this.canvas.height),q(this,Lb,BE).call(this,s,t),q(this,FE,YL).call(this);let e;if(this.currentPath.length!==1)e=q(this,WE,QL).call(this);else{const c=[s,t];e=[[c,c.slice(),c.slice(),c]]}const n=v(this,Ao),i=this.currentPath;this.currentPath=[],Y(this,Ao,new Path2D);const r=()=>{this.allRawPaths.push(i),this.paths.push(e),this.bezierPath2D.push(n),this._uiManager.rebuild(this)},o=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(q(this,Kp,Db).call(this),q(this,Zp,Nb).call(this)),q(this,zu,Qp).call(this))};this.addCommands({cmd:r,undo:o,mustExec:!0})},UE=new WeakSet,KL=function(){if(!v(this,tu))return;Y(this,tu,!1);const s=Math.ceil(this.thickness*this.parentScale),t=this.currentPath.slice(-3),e=t.map(r=>r[0]),n=t.map(r=>r[1]);Math.min(...e)-s,Math.max(...e)+s,Math.min(...n)-s,Math.max(...n)+s;const{ctx:i}=this;i.save(),i.clearRect(0,0,this.canvas.width,this.canvas.height);for(const r of this.bezierPath2D)i.stroke(r);i.stroke(v(this,Ao)),i.restore()},HE=new WeakSet,ZL=function(s,t,e,n,i,r,o){const c=(t+n)/2,h=(e+i)/2,d=(n+r)/2,f=(i+o)/2;s.bezierCurveTo(c+2*(n-c)/3,h+2*(i-h)/3,d+2*(n-d)/3,f+2*(i-f)/3,d,f)},WE=new WeakSet,QL=function(){const s=this.currentPath;if(s.length<=2)return[[s[0],s[0],s.at(-1),s.at(-1)]];const t=[];let e,[n,i]=s[0];for(e=1;e<s.length-2;e++){const[p,m]=s[e],[y,w]=s[e+1],b=(p+y)/2,E=(m+w)/2,_=[n+2*(p-n)/3,i+2*(m-i)/3],k=[b+2*(p-b)/3,E+2*(m-E)/3];t.push([[n,i],_,k,[b,E]]),[n,i]=[b,E]}const[r,o]=s[e],[c,h]=s[e+1],d=[n+2*(r-n)/3,i+2*(o-i)/3],f=[c+2*(r-c)/3,h+2*(o-h)/3];return t.push([[n,i],d,f,[c,h]]),t},zo=new WeakSet,ql=function(){if(this.isEmpty()){q(this,yp,S0).call(this);return}q(this,xv,VA).call(this);const{canvas:s,ctx:t}=this;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,s.width,s.height),q(this,yp,S0).call(this);for(const e of this.bezierPath2D)t.stroke(e)},wv=new WeakSet,GE=function(s){this.canvas.removeEventListener("pointerleave",v(this,vv)),this.canvas.removeEventListener("pointermove",v(this,yv)),this.canvas.removeEventListener("pointerup",v(this,bv)),this.canvas.addEventListener("pointerdown",v(this,ju)),v(this,Ca)&&clearTimeout(v(this,Ca)),Y(this,Ca,setTimeout(()=>{Y(this,Ca,null),this.canvas.removeEventListener("contextmenu",Hi)},10)),q(this,zE,XL).call(this,s.offsetX,s.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Kp=new WeakSet,Db=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Zp=new WeakSet,Nb=function(){Y(this,Bu,new ResizeObserver(s=>{const t=s[0].contentRect;t.width&&t.height&&this.setDimensions(t.width,t.height)})),v(this,Bu).observe(this.div)},ic=new WeakSet,Fu=function(){if(!v(this,Au))return;const[s,t]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*s),this.canvas.height=Math.ceil(this.height*t),q(this,yp,S0).call(this)},Av=new WeakSet,VE=function(s,t){const e=q(this,vp,E0).call(this),n=(s-e)/v(this,wu),i=(t-e)/v(this,xu);this.scaleFactor=Math.min(n,i)},yp=new WeakSet,S0=function(){const s=q(this,vp,E0).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+s,this.translationY*this.scaleFactor+s)},$E=new WeakSet,BI=function(s){const t=new Path2D;for(let e=0,n=s.length;e<n;e++){const[i,r,o,c]=s[e];e===0&&t.moveTo(...i),t.bezierCurveTo(r[0],r[1],o[0],o[1],c[0],c[1])}return t},_0=new WeakSet,$A=function(s,t,e){const[n,i,r,o]=t;switch(e){case 0:for(let c=0,h=s.length;c<h;c+=2)s[c]+=n,s[c+1]=o-s[c+1];break;case 90:for(let c=0,h=s.length;c<h;c+=2){const d=s[c];s[c]=s[c+1]+n,s[c+1]=d+i}break;case 180:for(let c=0,h=s.length;c<h;c+=2)s[c]=r-s[c],s[c+1]+=i;break;case 270:for(let c=0,h=s.length;c<h;c+=2){const d=s[c];s[c]=r-s[c+1],s[c+1]=o-d}break;default:throw new Error("Invalid rotation")}return s},qE=new WeakSet,FI=function(s,t,e){const[n,i,r,o]=t;switch(e){case 0:for(let c=0,h=s.length;c<h;c+=2)s[c]-=n,s[c+1]=o-s[c+1];break;case 90:for(let c=0,h=s.length;c<h;c+=2){const d=s[c];s[c]=s[c+1]-i,s[c+1]=d-n}break;case 180:for(let c=0,h=s.length;c<h;c+=2)s[c]=r-s[c],s[c+1]-=i;break;case 270:for(let c=0,h=s.length;c<h;c+=2){const d=s[c];s[c]=o-s[c+1],s[c+1]=r-d}break;default:throw new Error("Invalid rotation")}return s},YE=new WeakSet,zI=function(s,t,e,n){var i,r;const o=[],c=this.thickness/2,h=s*t+c,d=s*e+c;for(const f of this.paths){const p=[],m=[];for(let y=0,w=f.length;y<w;y++){const[b,E,_,k]=f[y];if(b[0]===k[0]&&b[1]===k[1]&&w===1){const Q=s*b[0]+h,H=s*b[1]+d;p.push(Q,H),m.push(Q,H);break}const T=s*b[0]+h,R=s*b[1]+d,D=s*E[0]+h,F=s*E[1]+d,j=s*_[0]+h,I=s*_[1]+d,O=s*k[0]+h,X=s*k[1]+d;y===0&&(p.push(T,R),m.push(T,R)),p.push(D,F,j,I,O,X),m.push(D,F),y===w-1&&m.push(O,X)}o.push({bezier:q(i=Di,_0,$A).call(i,p,n,this.rotation),points:q(r=Di,_0,$A).call(r,m,n,this.rotation)})}return o},Ob=new WeakSet,XE=function(){let s=1/0,t=-1/0,e=1/0,n=-1/0;for(const i of this.paths)for(const[r,o,c,h]of i){const d=qt.bezierBoundingBox(...r,...o,...c,...h);s=Math.min(s,d[0]),e=Math.min(e,d[1]),t=Math.max(t,d[2]),n=Math.max(n,d[3])}return[s,e,t,n]},vp=new WeakSet,E0=function(){return v(this,qs)?Math.ceil(this.thickness*this.parentScale):0},zu=new WeakSet,Qp=function(s=!1){if(this.isEmpty())return;if(!v(this,qs)){q(this,zo,ql).call(this);return}const t=q(this,Ob,XE).call(this),e=q(this,vp,E0).call(this);Y(this,wu,Math.max(Ye.MIN_SIZE,t[2]-t[0])),Y(this,xu,Math.max(Ye.MIN_SIZE,t[3]-t[1]));const n=Math.ceil(e+v(this,wu)*this.scaleFactor),i=Math.ceil(e+v(this,xu)*this.scaleFactor),[r,o]=this.parentDimensions;this.width=n/r,this.height=i/o,this.setAspectRatio(n,i);const c=this.translationX,h=this.translationY;this.translationX=-t[0],this.translationY=-t[1],q(this,ic,Fu).call(this),q(this,zo,ql).call(this),Y(this,Su,n),Y(this,_u,i),this.setDims(n,i);const d=s?e/this.scaleFactor/2:0;this.translate(c-this.translationX-d,h-this.translationY-d)},B(Di,$E),B(Di,_0),B(Di,qE),oe(Di,"_defaultColor",null),oe(Di,"_defaultOpacity",1),oe(Di,"_defaultThickness",1),oe(Di,"_type","ink"),oe(Di,"_editorType",Se.INK);let VX=Di;var oi,ci,Yl,Vo,sc,bp,ka,Uu,Ta,Pr,Sv,eu,wf,nu,Af,xp,_v,Ib,KE,ZE,JL,QE,tD,Ev,qA,wp,Cv,JE,eD;const kv=class extends Ye{constructor(t){super({...t,name:"stampEditor"}),B(this,eu),B(this,nu),B(this,xp),B(this,Ib),B(this,ZE),B(this,QE),B(this,Ev),B(this,wp),B(this,JE),B(this,oi,null),B(this,ci,null),B(this,Yl,null),B(this,Vo,null),B(this,sc,null),B(this,bp,""),B(this,ka,null),B(this,Uu,null),B(this,Ta,null),B(this,Pr,!1),B(this,Sv,!1),Y(this,Vo,t.bitmapUrl),Y(this,sc,t.bitmapFile)}static initialize(t,e){Ye.initialize(t,e)}static get supportedTypes(){return Ee(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(t=>`image/${t}`))}static get supportedTypesStr(){return Ee(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,e){e.pasteEditor(Se.STAMP,{bitmapFile:t.getAsFile()})}remove(){var t,e;v(this,ci)&&(Y(this,oi,null),this._uiManager.imageManager.deleteId(v(this,ci)),(t=v(this,ka))==null||t.remove(),Y(this,ka,null),(e=v(this,Uu))==null||e.disconnect(),Y(this,Uu,null),v(this,Ta)&&(clearTimeout(v(this,Ta)),Y(this,Ta,null))),super.remove()}rebuild(){if(!this.parent){v(this,ci)&&q(this,xp,_v).call(this);return}super.rebuild(),this.div!==null&&(v(this,ci)&&v(this,ka)===null&&q(this,xp,_v).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(v(this,Yl)||v(this,oi)||v(this,Vo)||v(this,sc)||v(this,ci))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;if(this.width&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),v(this,oi)?q(this,Ib,KE).call(this):q(this,xp,_v).call(this),this.width){const[n,i]=this.parentDimensions;this.setAt(t*n,e*i,this.width*n,this.height*i)}return this.div}getImageForAltText(){return v(this,ka)}static deserialize(t,e,n){if(t instanceof hI)return null;const i=super.deserialize(t,e,n),{rect:r,bitmapUrl:o,bitmapId:c,isSvg:h,accessibilityData:d}=t;c&&n.imageManager.isValidId(c)?Y(i,ci,c):Y(i,Vo,o),Y(i,Pr,h);const[f,p]=i.pageDimensions;return i.width=(r[2]-r[0])/f,i.height=(r[3]-r[1])/p,d&&(i.altTextData=d),i}serialize(t=!1,e=null){if(this.isEmpty())return null;const n={annotationType:Se.STAMP,bitmapId:v(this,ci),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:v(this,Pr),structTreeParentId:this._structTreeParentId};if(t)return n.bitmapUrl=q(this,wp,Cv).call(this,!0),n.accessibilityData=this.altTextData,n;const{decorative:i,altText:r}=this.altTextData;if(!i&&r&&(n.accessibilityData={type:"Figure",alt:r}),e===null)return n;e.stamps||(e.stamps=new Map);const o=v(this,Pr)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!e.stamps.has(v(this,ci)))e.stamps.set(v(this,ci),{area:o,serialized:n}),n.bitmap=q(this,wp,Cv).call(this,!1);else if(v(this,Pr)){const c=e.stamps.get(v(this,ci));o>c.area&&(c.area=o,c.serialized.bitmap.close(),c.serialized.bitmap=q(this,wp,Cv).call(this,!1))}return n}};oi=new WeakMap,ci=new WeakMap,Yl=new WeakMap,Vo=new WeakMap,sc=new WeakMap,bp=new WeakMap,ka=new WeakMap,Uu=new WeakMap,Ta=new WeakMap,Pr=new WeakMap,Sv=new WeakMap,eu=new WeakSet,wf=function(s,t=!1){if(!s){this.remove();return}Y(this,oi,s.bitmap),t||(Y(this,ci,s.id),Y(this,Pr,s.isSvg)),s.file&&Y(this,bp,s.file.name),q(this,Ib,KE).call(this)},nu=new WeakSet,Af=function(){Y(this,Yl,null),this._uiManager.enableWaiting(!1),v(this,ka)&&this.div.focus()},xp=new WeakSet,_v=function(){if(v(this,ci)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(v(this,ci)).then(t=>q(this,eu,wf).call(this,t,!0)).finally(()=>q(this,nu,Af).call(this));return}if(v(this,Vo)){const t=v(this,Vo);Y(this,Vo,null),this._uiManager.enableWaiting(!0),Y(this,Yl,this._uiManager.imageManager.getFromUrl(t).then(e=>q(this,eu,wf).call(this,e)).finally(()=>q(this,nu,Af).call(this)));return}if(v(this,sc)){const t=v(this,sc);Y(this,sc,null),this._uiManager.enableWaiting(!0),Y(this,Yl,this._uiManager.imageManager.getFromFile(t).then(e=>q(this,eu,wf).call(this,e)).finally(()=>q(this,nu,Af).call(this)));return}const s=document.createElement("input");s.type="file",s.accept=kv.supportedTypesStr,Y(this,Yl,new Promise(t=>{s.addEventListener("change",async()=>{if(!s.files||s.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const e=await this._uiManager.imageManager.getFromFile(s.files[0]);q(this,eu,wf).call(this,e)}t()}),s.addEventListener("cancel",()=>{this.remove(),t()})}).finally(()=>q(this,nu,Af).call(this))),s.click()},Ib=new WeakSet,KE=function(){const{div:s}=this;let{width:t,height:e}=v(this,oi);const[n,i]=this.pageDimensions,r=.75;if(this.width)t=this.width*n,e=this.height*i;else if(t>r*n||e>r*i){const d=Math.min(r*n/t,r*i/e);t*=d,e*=d}const[o,c]=this.parentDimensions;this.setDims(t*o/n,e*c/i),this._uiManager.enableWaiting(!1);const h=Y(this,ka,document.createElement("canvas"));s.append(h),s.hidden=!1,q(this,Ev,qA).call(this,t,e),q(this,JE,eD).call(this),v(this,Sv)||(this.parent.addUndoableEditor(this),Y(this,Sv,!0)),this._reportTelemetry({action:"inserted_image"}),v(this,bp)&&h.setAttribute("aria-label",v(this,bp))},ZE=new WeakSet,JL=function(s,t){var e;const[n,i]=this.parentDimensions;this.width=s/n,this.height=t/i,this.setDims(s,t),(e=this._initialOptions)!=null&&e.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,v(this,Ta)!==null&&clearTimeout(v(this,Ta)),Y(this,Ta,setTimeout(()=>{Y(this,Ta,null),q(this,Ev,qA).call(this,s,t)},200))},QE=new WeakSet,tD=function(s,t){const{width:e,height:n}=v(this,oi);let i=e,r=n,o=v(this,oi);for(;i>2*s||r>2*t;){const c=i,h=r;i>2*s&&(i=i>=16384?Math.floor(i/2)-1:Math.ceil(i/2)),r>2*t&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2));const d=new OffscreenCanvas(i,r);d.getContext("2d").drawImage(o,0,0,c,h,0,0,i,r),o=d.transferToImageBitmap()}return o},Ev=new WeakSet,qA=function(s,t){s=Math.ceil(s),t=Math.ceil(t);const e=v(this,ka);if(!e||e.width===s&&e.height===t)return;e.width=s,e.height=t;const n=v(this,Pr)?v(this,oi):q(this,QE,tD).call(this,s,t);if(this._uiManager.hasMLManager&&!this.hasAltText()){const r=new OffscreenCanvas(s,t).getContext("2d");r.drawImage(n,0,0,n.width,n.height,0,0,s,t),this._uiManager.mlGuess({service:"image-to-text",request:{data:r.getImageData(0,0,s,t).data,width:s,height:t,channels:4}}).then(o=>{const c=o?.output||"";this.parent&&c&&!this.hasAltText()&&(this.altTextData={altText:c,decorative:!1})})}const i=e.getContext("2d");i.filter=this._uiManager.hcmFilter,i.drawImage(n,0,0,n.width,n.height,0,0,s,t)},wp=new WeakSet,Cv=function(s){if(s){if(v(this,Pr)){const e=this._uiManager.imageManager.getSvgUrl(v(this,ci));if(e)return e}const t=document.createElement("canvas");return{width:t.width,height:t.height}=v(this,oi),t.getContext("2d").drawImage(v(this,oi),0,0),t.toDataURL()}if(v(this,Pr)){const[t,e]=this.pageDimensions,n=Math.round(this.width*t*Ju.PDF_TO_CSS_UNITS),i=Math.round(this.height*e*Ju.PDF_TO_CSS_UNITS),r=new OffscreenCanvas(n,i);return r.getContext("2d").drawImage(v(this,oi),0,0,v(this,oi).width,v(this,oi).height,0,0,n,i),r.transferToImageBitmap()}return structuredClone(v(this,oi))},JE=new WeakSet,eD=function(){Y(this,Uu,new ResizeObserver(s=>{const t=s[0].contentRect;t.width&&t.height&&q(this,ZE,JL).call(this,t.width,t.height)})),v(this,Uu).observe(this.div)},oe(kv,"_type","stamp"),oe(kv,"_editorType",Se.STAMP);let $X=kv;var iu,Ap,ga,su,So,_o,Eo,Ps,Il,Jp,Sp,Fi,Qt,rc,t2,UI,jb,e2,Tv,n2,Mv,i2,_p,Rv;const Pv=class jl{constructor({uiManager:t,pageIndex:e,div:n,accessibilityManager:i,annotationLayer:r,drawLayer:o,textLayer:c,viewport:h,l10n:d}){B(this,t2),B(this,jb),B(this,Tv),B(this,Mv),B(this,_p),B(this,iu,void 0),B(this,Ap,!1),B(this,ga,null),B(this,su,null),B(this,So,null),B(this,_o,null),B(this,Eo,null),B(this,Ps,new Map),B(this,Il,!1),B(this,Jp,!1),B(this,Sp,!1),B(this,Fi,null),B(this,Qt,void 0);const f=[...v(jl,rc).values()];if(!jl._initialized){jl._initialized=!0;for(const p of f)p.initialize(d,t)}t.registerEditorTypes(f),Y(this,Qt,t),this.pageIndex=e,this.div=n,Y(this,iu,i),Y(this,ga,r),this.viewport=h,Y(this,Fi,c),this.drawLayer=o,v(this,Qt).addLayer(this)}get isEmpty(){return v(this,Ps).size===0}get isInvisible(){return this.isEmpty&&v(this,Qt).getMode()===Se.NONE}updateToolbar(t){v(this,Qt).updateToolbar(t)}updateMode(t=v(this,Qt).getMode()){switch(q(this,_p,Rv).call(this),t){case Se.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Se.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case Se.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const n of v(jl,rc).values())e.toggle(`${n._type}Editing`,t===n._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=v(this,Fi))==null?void 0:e.div)}addInkEditorIfNeeded(t){if(v(this,Qt).getMode()===Se.INK){if(!t){for(const e of v(this,Ps).values())if(e.isEmpty()){e.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}}setEditingState(t){v(this,Qt).setEditingState(t)}addCommands(t){v(this,Qt).addCommands(t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=v(this,ga))==null||e.div.classList.toggle("disabled",!t)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const n of v(this,Ps).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(v(this,Qt).removeChangedExistingAnnotation(n),t.add(n.annotationElementId));if(!v(this,ga))return;const e=v(this,ga).getEditableAnnotations();for(const n of e){if(n.hide(),v(this,Qt).isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;const i=this.deserialize(n);i&&(this.addOrRebuild(i),i.enableEditing())}}disable(){var t;Y(this,Sp,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,n=new Map;for(const r of v(this,Ps).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){e.set(r.annotationElementId,r);continue}else n.set(r.annotationElementId,r);(t=this.getEditableAnnotation(r.annotationElementId))==null||t.show(),r.remove()}if(v(this,ga)){const r=v(this,ga).getEditableAnnotations();for(const o of r){const{id:c}=o.data;if(v(this,Qt).isDeletedAnnotationElement(c))continue;let h=n.get(c);if(h){h.resetAnnotationElement(o),h.show(!1),o.show();continue}h=e.get(c),h&&(v(this,Qt).addChangedExistingAnnotation(h),h.renderAnnotationElement(o),h.show(!1)),o.show()}}q(this,_p,Rv).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const r of v(jl,rc).values())i.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),Y(this,Sp,!1)}getEditableAnnotation(t){var e;return((e=v(this,ga))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){v(this,Qt).getActive()!==t&&v(this,Qt).setActiveEditor(t)}enableTextSelection(){var t;this.div.tabIndex=-1,(t=v(this,Fi))!=null&&t.div&&!v(this,_o)&&(Y(this,_o,q(this,t2,UI).bind(this)),v(this,Fi).div.addEventListener("pointerdown",v(this,_o)),v(this,Fi).div.classList.add("highlighting"))}disableTextSelection(){var t;this.div.tabIndex=0,(t=v(this,Fi))!=null&&t.div&&v(this,_o)&&(v(this,Fi).div.removeEventListener("pointerdown",v(this,_o)),Y(this,_o,null),v(this,Fi).div.classList.remove("highlighting"))}enableClick(){v(this,So)||(Y(this,So,this.pointerdown.bind(this)),Y(this,su,this.pointerup.bind(this)),this.div.addEventListener("pointerdown",v(this,So)),this.div.addEventListener("pointerup",v(this,su)))}disableClick(){v(this,So)&&(this.div.removeEventListener("pointerdown",v(this,So)),this.div.removeEventListener("pointerup",v(this,su)),Y(this,So,null),Y(this,su,null))}attach(t){v(this,Ps).set(t.id,t);const{annotationElementId:e}=t;e&&v(this,Qt).isDeletedAnnotationElement(e)&&v(this,Qt).removeDeletedAnnotationElement(t)}detach(t){var e;v(this,Ps).delete(t.id),(e=v(this,iu))==null||e.removePointerInTextLayer(t.contentDiv),!v(this,Sp)&&t.annotationElementId&&v(this,Qt).addDeletedAnnotationElement(t)}remove(t){this.detach(t),v(this,Qt).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1,v(this,Jp)||this.addInkEditorIfNeeded(!1)}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(v(this,Qt).addDeletedAnnotationElement(t.annotationElementId),Ye.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),v(this,Qt).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),v(this,Qt).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var e;if(!t.isAttachedToDOM)return;const{activeElement:n}=document;t.div.contains(n)&&!v(this,Eo)&&(t._focusEventsAllowed=!1,Y(this,Eo,setTimeout(()=>{Y(this,Eo,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0}),n.focus())},0))),t._structTreeParentId=(e=v(this,iu))==null?void 0:e.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getNextId(){return v(this,Qt).getId()}canCreateNewEmptyEditor(){var t;return(t=v(this,jb,e2))==null?void 0:t.canCreateNewEmptyEditor()}pasteEditor(t,e){v(this,Qt).updateToolbar(t),v(this,Qt).updateMode(t);const{offsetX:n,offsetY:i}=q(this,Mv,i2).call(this),r=this.getNextId(),o=q(this,Tv,n2).call(this,{parent:this,id:r,x:n,y:i,uiManager:v(this,Qt),isCentered:!0,...e});o&&this.add(o)}deserialize(t){var e;return((e=v(jl,rc).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,v(this,Qt)))||null}createAndAddNewEditor(t,e,n={}){const i=this.getNextId(),r=q(this,Tv,n2).call(this,{parent:this,id:i,x:t.offsetX,y:t.offsetY,uiManager:v(this,Qt),isCentered:e,...n});return r&&this.add(r),r}addNewEditor(){this.createAndAddNewEditor(q(this,Mv,i2).call(this),!0)}setSelected(t){v(this,Qt).setSelected(t)}toggleSelected(t){v(this,Qt).toggleSelected(t)}isSelected(t){return v(this,Qt).isSelected(t)}unselect(t){v(this,Qt).unselect(t)}pointerup(t){const{isMac:e}=Wi.platform;if(!(t.button!==0||t.ctrlKey&&e)&&t.target===this.div&&v(this,Il)){if(Y(this,Il,!1),!v(this,Ap)){Y(this,Ap,!0);return}if(v(this,Qt).getMode()===Se.STAMP){v(this,Qt).unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){if(v(this,Qt).getMode()===Se.HIGHLIGHT&&this.enableTextSelection(),v(this,Il)){Y(this,Il,!1);return}const{isMac:e}=Wi.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;Y(this,Il,!0);const n=v(this,Qt).getActive();Y(this,Ap,!n||n.isEmpty())}findNewParent(t,e,n){const i=v(this,Qt).findParent(e,n);return i===null||i===this?!1:(i.changeParent(t),!0)}destroy(){var t,e;((t=v(this,Qt).getActive())==null?void 0:t.parent)===this&&(v(this,Qt).commitOrRemove(),v(this,Qt).setActiveEditor(null)),v(this,Eo)&&(clearTimeout(v(this,Eo)),Y(this,Eo,null));for(const n of v(this,Ps).values())(e=v(this,iu))==null||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,v(this,Ps).clear(),v(this,Qt).removeLayer(this)}render({viewport:t}){this.viewport=t,yc(this.div,t);for(const e of v(this,Qt).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){v(this,Qt).commitOrRemove(),q(this,_p,Rv).call(this);const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,yc(this.div,{rotation:n}),e!==n)for(const i of v(this,Ps).values())i.rotate(n);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return v(this,Qt).viewParameters.realScale}};iu=new WeakMap,Ap=new WeakMap,ga=new WeakMap,su=new WeakMap,So=new WeakMap,_o=new WeakMap,Eo=new WeakMap,Ps=new WeakMap,Il=new WeakMap,Jp=new WeakMap,Sp=new WeakMap,Fi=new WeakMap,Qt=new WeakMap,rc=new WeakMap,t2=new WeakSet,UI=function(s){if(v(this,Qt).unselectAll(),s.target===v(this,Fi).div){const{isMac:t}=Wi.platform;if(s.button!==0||s.ctrlKey&&t)return;v(this,Qt).showAllEditors("highlight",!0,!0),v(this,Fi).div.classList.add("free"),qL.startHighlighting(this,v(this,Qt).direction==="ltr",s),v(this,Fi).div.addEventListener("pointerup",()=>{v(this,Fi).div.classList.remove("free")},{once:!0}),s.preventDefault()}},jb=new WeakSet,e2=function(){return v(Pv,rc).get(v(this,Qt).getMode())},Tv=new WeakSet,n2=function(s){const t=v(this,jb,e2);return t?new t.prototype.constructor(s):null},Mv=new WeakSet,i2=function(){const{x:s,y:t,width:e,height:n}=this.div.getBoundingClientRect(),i=Math.max(0,s),r=Math.max(0,t),o=Math.min(window.innerWidth,s+e),c=Math.min(window.innerHeight,t+n),h=(i+o)/2-s,d=(r+c)/2-t,[f,p]=this.viewport.rotation%180===0?[h,d]:[d,h];return{offsetX:f,offsetY:p}},_p=new WeakSet,Rv=function(){Y(this,Jp,!0);for(const s of v(this,Ps).values())s.isEmpty()&&s.remove();Y(this,Jp,!1)},oe(Pv,"_initialized",!1),B(Pv,rc,new Map([WX,VX,$X,qL].map(s=>[s._editorType,s])));let qX=Pv;var xa,Lv,On,Bl,Dv,s2,Nv,r2,a2,HI;const ru=class Gs{constructor({pageIndex:t}){B(this,Nv),B(this,a2),B(this,xa,null),B(this,Lv,0),B(this,On,new Map),B(this,Bl,new Map),this.pageIndex=t}setParent(t){if(!v(this,xa)){Y(this,xa,t);return}if(v(this,xa)!==t){if(v(this,On).size>0)for(const e of v(this,On).values())e.remove(),t.append(e);Y(this,xa,t)}}static get _svgFactory(){return Ee(this,"_svgFactory",new aC)}highlight(t,e,n,i=!1){const r=js(this,Lv)._++,o=q(this,Nv,r2).call(this,t.box);o.classList.add("highlight"),t.free&&o.classList.add("free");const c=Gs._svgFactory.createElement("defs");o.append(c);const h=Gs._svgFactory.createElement("path");c.append(h);const d=`path_p${this.pageIndex}_${r}`;h.setAttribute("id",d),h.setAttribute("d",t.toSVGPath()),i&&v(this,Bl).set(r,h);const f=q(this,a2,HI).call(this,c,d),p=Gs._svgFactory.createElement("use");return o.append(p),o.setAttribute("fill",e),o.setAttribute("fill-opacity",n),p.setAttribute("href",`#${d}`),v(this,On).set(r,o),{id:r,clipPathId:`url(#${f})`}}highlightOutline(t){const e=js(this,Lv)._++,n=q(this,Nv,r2).call(this,t.box);n.classList.add("highlightOutline");const i=Gs._svgFactory.createElement("defs");n.append(i);const r=Gs._svgFactory.createElement("path");i.append(r);const o=`path_p${this.pageIndex}_${e}`;r.setAttribute("id",o),r.setAttribute("d",t.toSVGPath()),r.setAttribute("vector-effect","non-scaling-stroke");let c;if(t.free){n.classList.add("free");const f=Gs._svgFactory.createElement("mask");i.append(f),c=`mask_p${this.pageIndex}_${e}`,f.setAttribute("id",c),f.setAttribute("maskUnits","objectBoundingBox");const p=Gs._svgFactory.createElement("rect");f.append(p),p.setAttribute("width","1"),p.setAttribute("height","1"),p.setAttribute("fill","white");const m=Gs._svgFactory.createElement("use");f.append(m),m.setAttribute("href",`#${o}`),m.setAttribute("stroke","none"),m.setAttribute("fill","black"),m.setAttribute("fill-rule","nonzero"),m.classList.add("mask")}const h=Gs._svgFactory.createElement("use");n.append(h),h.setAttribute("href",`#${o}`),c&&h.setAttribute("mask",`url(#${c})`);const d=h.cloneNode();return n.append(d),h.classList.add("mainOutline"),d.classList.add("secondaryOutline"),v(this,On).set(e,n),e}finalizeLine(t,e){const n=v(this,Bl).get(t);v(this,Bl).delete(t),this.updateBox(t,e.box),n.setAttribute("d",e.toSVGPath())}updateLine(t,e){v(this,On).get(t).firstChild.firstChild.setAttribute("d",e.toSVGPath())}removeFreeHighlight(t){this.remove(t),v(this,Bl).delete(t)}updatePath(t,e){v(this,Bl).get(t).setAttribute("d",e.toSVGPath())}updateBox(t,e){var n;q(n=Gs,Dv,s2).call(n,v(this,On).get(t),e)}show(t,e){v(this,On).get(t).classList.toggle("hidden",!e)}rotate(t,e){v(this,On).get(t).setAttribute("data-main-rotation",e)}changeColor(t,e){v(this,On).get(t).setAttribute("fill",e)}changeOpacity(t,e){v(this,On).get(t).setAttribute("fill-opacity",e)}addClass(t,e){v(this,On).get(t).classList.add(e)}removeClass(t,e){v(this,On).get(t).classList.remove(e)}remove(t){v(this,xa)!==null&&(v(this,On).get(t).remove(),v(this,On).delete(t))}destroy(){Y(this,xa,null);for(const t of v(this,On).values())t.remove();v(this,On).clear()}};xa=new WeakMap,Lv=new WeakMap,On=new WeakMap,Bl=new WeakMap,Dv=new WeakSet,s2=function(s,{x:t=0,y:e=0,width:n=1,height:i=1}={}){const{style:r}=s;r.top=`${100*e}%`,r.left=`${100*t}%`,r.width=`${100*n}%`,r.height=`${100*i}%`},Nv=new WeakSet,r2=function(s){var t;const e=ru._svgFactory.create(1,1,!0);return v(this,xa).append(e),e.setAttribute("aria-hidden",!0),q(t=ru,Dv,s2).call(t,e,s),e},a2=new WeakSet,HI=function(s,t){const e=ru._svgFactory.createElement("clipPath");s.append(e);const n=`clip_${t}`;e.setAttribute("id",n),e.setAttribute("clipPathUnits","objectBoundingBox");const i=ru._svgFactory.createElement("use");return e.append(i),i.setAttribute("href",`#${t}`),i.classList.add("clip"),n},B(ru,Dv);let YX=ru;var XX=te.AbortException,KX=te.AnnotationEditorLayer,ZX=te.AnnotationEditorParamsType,QX=te.AnnotationEditorType,JX=te.AnnotationEditorUIManager,WI=te.AnnotationLayer,GI=te.AnnotationMode,tK=te.CMapCompressionType,eK=te.ColorPicker,nK=te.DOMSVGFactory,iK=te.DrawLayer,sK=te.FeatureTest,pC=te.GlobalWorkerOptions,rK=te.ImageKind,aK=te.InvalidPDFException,oK=te.MissingPDFException,lK=te.OPS,cK=te.Outliner,hK=te.PDFDataRangeTransport,uK=te.PDFDateString,dK=te.PDFWorker,fK=te.PasswordResponses,pK=te.PermissionFlag,gK=te.PixelsPerInch,mK=te.RenderingCancelledException,VI=te.TextLayer,yK=te.UnexpectedResponseException,vK=te.Util,bK=te.VerbosityLevel,xK=te.XfaLayer,wK=te.build,AK=te.createValidAbsoluteUrl,SK=te.fetchData,$I=te.getDocument,_K=te.getFilenameFromUrl,EK=te.getPdfFilenameFromUrl,CK=te.getXfaPageViewport,kK=te.isDataScheme,TK=te.isPdfFile,MK=te.noContextMenu,RK=te.normalizeUnicode,PK=te.renderTextLayer,LK=te.setLayerDimensions,DK=te.shadow,NK=te.updateTextLayer,qI=te.version;const OK=Object.freeze(Object.defineProperty({__proto__:null,AbortException:XX,AnnotationEditorLayer:KX,AnnotationEditorParamsType:ZX,AnnotationEditorType:QX,AnnotationEditorUIManager:JX,AnnotationLayer:WI,AnnotationMode:GI,CMapCompressionType:tK,ColorPicker:eK,DOMSVGFactory:nK,DrawLayer:iK,FeatureTest:sK,GlobalWorkerOptions:pC,ImageKind:rK,InvalidPDFException:aK,MissingPDFException:oK,OPS:lK,Outliner:cK,PDFDataRangeTransport:hK,PDFDateString:uK,PDFWorker:dK,PasswordResponses:fK,PermissionFlag:pK,PixelsPerInch:gK,RenderingCancelledException:mK,TextLayer:VI,UnexpectedResponseException:yK,Util:vK,VerbosityLevel:bK,XfaLayer:xK,build:wK,createValidAbsoluteUrl:AK,fetchData:SK,getDocument:$I,getFilenameFromUrl:_K,getPdfFilenameFromUrl:EK,getXfaPageViewport:CK,isDataScheme:kK,isPdfFile:TK,noContextMenu:MK,normalizeUnicode:RK,renderTextLayer:PK,setLayerDimensions:LK,shadow:DK,updateTextLayer:NK,version:qI},Symbol.toStringTag,{value:"Module"}));var Nn=function(s,t,e){for(var n=0,i=t.length,r;n<i;n++)(r||!(n in t))&&(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return s.concat(r||Array.prototype.slice.call(t))},IK=["onCopy","onCut","onPaste"],jK=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],BK=["onFocus","onBlur"],FK=["onInput","onInvalid","onReset","onSubmit"],zK=["onLoad","onError"],UK=["onKeyDown","onKeyPress","onKeyUp"],HK=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],WK=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],GK=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],VK=["onSelect"],$K=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],qK=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],YK=["onScroll"],XK=["onWheel"],KK=["onAnimationStart","onAnimationEnd","onAnimationIteration"],ZK=["onTransitionEnd"],QK=["onToggle"],JK=["onChange"],tZ=Nn(Nn(Nn(Nn(Nn(Nn(Nn(Nn(Nn(Nn(Nn(Nn(Nn(Nn(Nn(Nn(Nn(Nn([],IK,!0),jK,!0),BK,!0),FK,!0),zK,!0),UK,!0),HK,!0),WK,!0),GK,!0),VK,!0),$K,!0),qK,!0),YK,!0),XK,!0),KK,!0),ZK,!0),JK,!0),QK);function YI(s,t){var e={};return tZ.forEach(function(n){var i=s[n];i&&(t?e[n]=function(r){return i(r,t(n))}:e[n]=i)}),e}function _g(s){var t=!1,e=new Promise(function(n,i){s.then(function(r){return!t&&n(r)}).catch(function(r){return!t&&i(r)})});return{promise:e,cancel:function(){t=!0}}}function XI(s){var t,e,n="";if(typeof s=="string"||typeof s=="number")n+=s;else if(typeof s=="object")if(Array.isArray(s))for(t=0;t<s.length;t++)s[t]&&(e=XI(s[t]))&&(n&&(n+=" "),n+=e);else for(t in s)s[t]&&(n&&(n+=" "),n+=t);return n}function x1(){for(var s,t,e=0,n="";e<arguments.length;)(s=arguments[e++])&&(t=XI(s))&&(n&&(n+=" "),n+=t);return n}var eZ=se.env.NODE_ENV==="production",YA="Invariant failed";function qe(s,t){if(!s){if(eZ)throw new Error(YA);var e=typeof t=="function"?t():t,n=e?"".concat(YA,": ").concat(e):YA;throw new Error(n)}}var nZ=se.env.NODE_ENV!=="production",KI=function(){};if(nZ){var iZ=function(s,t){var e=arguments.length;t=new Array(e>1?e-1:0);for(var n=1;n<e;n++)t[n-1]=arguments[n];var i=0,r="Warning: "+s.replace(/%s/g,function(){return t[i++]});typeof console<"u"&&console.error(r);try{throw new Error(r)}catch{}};KI=function(s,t,e){var n=arguments.length;e=new Array(n>2?n-2:0);for(var i=2;i<n;i++)e[i-2]=arguments[i];if(t===void 0)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");s||iZ.apply(null,[t].concat(e))}}var sZ=KI;const pi=NN(sZ);var nD=Object.prototype.hasOwnProperty;function iD(s,t,e){for(e of s.keys())if(Hu(e,t))return e}function Hu(s,t){var e,n,i;if(s===t)return!0;if(s&&t&&(e=s.constructor)===t.constructor){if(e===Date)return s.getTime()===t.getTime();if(e===RegExp)return s.toString()===t.toString();if(e===Array){if((n=s.length)===t.length)for(;n--&&Hu(s[n],t[n]););return n===-1}if(e===Set){if(s.size!==t.size)return!1;for(n of s)if(i=n,i&&typeof i=="object"&&(i=iD(t,i),!i)||!t.has(i))return!1;return!0}if(e===Map){if(s.size!==t.size)return!1;for(n of s)if(i=n[0],i&&typeof i=="object"&&(i=iD(t,i),!i)||!Hu(n[1],t.get(i)))return!1;return!0}if(e===ArrayBuffer)s=new Uint8Array(s),t=new Uint8Array(t);else if(e===DataView){if((n=s.byteLength)===t.byteLength)for(;n--&&s.getInt8(n)===t.getInt8(n););return n===-1}if(ArrayBuffer.isView(s)){if((n=s.byteLength)===t.byteLength)for(;n--&&s[n]===t[n];);return n===-1}if(!e||typeof s=="object"){n=0;for(e in s)if(nD.call(s,e)&&++n&&!nD.call(t,e)||!(e in t)||!Hu(s[e],t[e]))return!1;return Object.keys(t).length===n}}return s!==s&&t!==t}const ZI=at.createContext(null);function Wu({children:s,type:t}){return A.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:s})}const rZ="noopener noreferrer nofollow";class aZ{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return qe(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(t){qe(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}goToDestination(t){return new Promise(e=>{qe(this.pdfDocument,"PDF document not loaded."),qe(t,"Destination is not specified."),typeof t=="string"?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)}).then(e=>{qe(Array.isArray(e),`"${e}" is not a valid destination array.`);const n=e[0];new Promise(i=>{qe(this.pdfDocument,"PDF document not loaded."),n instanceof Object?this.pdfDocument.getPageIndex(n).then(r=>{i(r)}).catch(()=>{qe(!1,`"${n}" is not a valid page reference.`)}):typeof n=="number"?i(n):qe(!1,`"${n}" is not a valid destination reference.`)}).then(i=>{const r=i+1;qe(this.pdfViewer,"PDF viewer is not initialized."),qe(r>=1&&r<=this.pagesCount,`"${r}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:i,pageNumber:r})})})}navigateTo(t){this.goToDestination(t)}goToPage(t){const e=t-1;qe(this.pdfViewer,"PDF viewer is not initialized."),qe(t>=1&&t<=this.pagesCount,`"${t}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:e,pageNumber:t})}addLinkAttributes(t,e,n){t.href=e,t.rel=this.externalLinkRel||rZ,t.target=n?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const sD={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},w1=typeof document<"u",QI=w1&&window.location.protocol==="file:";function oZ(s){return typeof s<"u"}function bl(s){return oZ(s)&&s!==null}function lZ(s){return typeof s=="string"}function cZ(s){return s instanceof ArrayBuffer}function hZ(s){return qe(w1,"isBlob can only be used in a browser environment"),s instanceof Blob}function o2(s){return lZ(s)&&/^data:/.test(s)}function rD(s){qe(o2(s),"Invalid data URI.");const[t="",e=""]=s.split(",");return t.split(";").indexOf("base64")!==-1?atob(e):unescape(e)}function uZ(){return w1&&window.devicePixelRatio||1}const JI="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function aD(){pi(!QI,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${JI}`)}function dZ(){pi(!QI,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${JI}`)}function bc(s){s&&s.cancel&&s.cancel()}function l2(s,t){return Object.defineProperty(s,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(s,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(s,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(s,"originalHeight",{get(){return this.view[3]},configurable:!0}),s}function fZ(s){return s.name==="RenderingCancelledException"}function pZ(s){return new Promise((t,e)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return e(new Error("Error while reading a file."));t(n.result)},n.onerror=i=>{if(!i.target)return e(new Error("Error while reading a file."));const{error:r}=i.target;if(!r)return e(new Error("Error while reading a file."));switch(r.code){case r.NOT_FOUND_ERR:return e(new Error("Error while reading a file: File not found."));case r.SECURITY_ERR:return e(new Error("Error while reading a file: Security error."));case r.ABORT_ERR:return e(new Error("Error while reading a file: Aborted."));default:return e(new Error("Error while reading a file."))}},n.readAsArrayBuffer(s)})}function gZ(s,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return s}}function td(){return at.useReducer(gZ,{value:void 0,error:void 0})}var mZ=function(s,t,e,n){function i(r){return r instanceof e?r:new e(function(o){o(r)})}return new(e||(e=Promise))(function(r,o){function c(f){try{d(n.next(f))}catch(p){o(p)}}function h(f){try{d(n.throw(f))}catch(p){o(p)}}function d(f){f.done?r(f.value):i(f.value).then(c,h)}d((n=n.apply(s,[])).next())})},oD=function(s,t){var e={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&t.indexOf(n)<0&&(e[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(s);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(s,n[i])&&(e[n[i]]=s[n[i]]);return e};const{PDFDataRangeTransport:yZ}=OK,vZ=(s,t)=>{switch(t){case sD.NEED_PASSWORD:{const e=prompt("Enter the password to open this PDF file.");s(e);break}case sD.INCORRECT_PASSWORD:{const e=prompt("Invalid password. Please try again.");s(e);break}}};function lD(s){return typeof s=="object"&&s!==null&&("data"in s||"range"in s||"url"in s)}const bZ=at.forwardRef(function(s,t){var{children:e,className:n,error:i="Failed to load PDF file.",externalLinkRel:r,externalLinkTarget:o,file:c,inputRef:h,imageResourcesPath:d,loading:f="Loading PDF",noData:p="No PDF file specified.",onItemClick:m,onLoadError:y,onLoadProgress:w,onLoadSuccess:b,onPassword:E=vZ,onSourceError:_,onSourceSuccess:k,options:T,renderMode:R,rotate:D}=s,F=oD(s,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[j,I]=td(),{value:O,error:X}=j,[Q,H]=td(),{value:J,error:N}=Q,tt=at.useRef(new aZ),$=at.useRef([]),G=at.useRef(void 0),gt=at.useRef(void 0);c&&c!==G.current&&lD(c)&&(pi(!Hu(c,G.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),G.current=c),T&&T!==gt.current&&(pi(!Hu(T,gt.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),gt.current=T);const nt=at.useRef({scrollPageIntoView:ft=>{const{dest:rt,pageNumber:K,pageIndex:Z=K-1}=ft;if(m){m({dest:rt,pageIndex:Z,pageNumber:K});return}const ot=$.current[Z];if(ot){ot.scrollIntoView();return}pi(!1,`An internal link leading to page ${K} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});at.useImperativeHandle(t,()=>({linkService:tt,pages:$,viewer:nt}),[]);function Tt(){k&&k()}function U(){X&&(pi(!1,X.toString()),_&&_(X))}function W(){I({type:"RESET"})}at.useEffect(W,[c,I]);const st=at.useCallback(()=>mZ(this,void 0,void 0,function*(){if(!c)return null;if(typeof c=="string")return o2(c)?{data:rD(c)}:(aD(),{url:c});if(c instanceof yZ)return{range:c};if(cZ(c))return{data:c};if(w1&&hZ(c))return{data:yield pZ(c)};if(qe(typeof c=="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),qe(lD(c),"Invalid parameter object: need either .data, .range or .url"),"url"in c&&typeof c.url=="string"){if(o2(c.url)){const{url:ft}=c,rt=oD(c,["url"]),K=rD(ft);return Object.assign({data:K},rt)}aD()}return c}),[c]);at.useEffect(()=>{const ft=_g(st());return ft.promise.then(rt=>{I({type:"RESOLVE",value:rt})}).catch(rt=>{I({type:"REJECT",error:rt})}),()=>{bc(ft)}},[st,I]),at.useEffect(()=>{if(!(typeof O>"u")){if(O===!1){U();return}Tt()}},[O]);function lt(){J&&(b&&b(J),$.current=new Array(J.numPages),tt.current.setDocument(J))}function ut(){N&&(pi(!1,N.toString()),y&&y(N))}function Rt(){H({type:"RESET"})}at.useEffect(Rt,[H,O]);function St(){if(!O)return;const ft=Object.assign(Object.assign({},O),T),rt=$I(ft);w&&(rt.onProgress=w),E&&(rt.onPassword=E);const K=rt;return K.promise.then(Z=>{H({type:"RESOLVE",value:Z})}).catch(Z=>{K.destroyed||H({type:"REJECT",error:Z})}),()=>{K.destroy()}}at.useEffect(St,[T,H,O]),at.useEffect(()=>{if(!(typeof J>"u")){if(J===!1){ut();return}lt()}},[J]);function Ct(){tt.current.setViewer(nt.current),tt.current.setExternalLinkRel(r),tt.current.setExternalLinkTarget(o)}at.useEffect(Ct,[r,o]);function xt(ft,rt){$.current[ft]=rt}function Bt(ft){delete $.current[ft]}const jt=at.useMemo(()=>({imageResourcesPath:d,linkService:tt.current,onItemClick:m,pdf:J,registerPage:xt,renderMode:R,rotate:D,unregisterPage:Bt}),[d,m,J,R,D]),Ut=at.useMemo(()=>YI(F,()=>J),[F,J]);function Ft(){return A.jsx(ZI.Provider,{value:jt,children:e})}function L(){return c?J==null?A.jsx(Wu,{type:"loading",children:typeof f=="function"?f():f}):J===!1?A.jsx(Wu,{type:"error",children:typeof i=="function"?i():i}):Ft():A.jsx(Wu,{type:"no-data",children:typeof p=="function"?p():p})}return A.jsx("div",Object.assign({className:x1("react-pdf__Document",n),ref:h,style:{"--scale-factor":"1"}},Ut,{children:L()}))});function t6(){return at.useContext(ZI)}function e6(){for(var s=[],t=0;t<arguments.length;t++)s[t]=arguments[t];var e=s.filter(Boolean);if(e.length<=1){var n=e[0];return n||null}return function(i){e.forEach(function(r){typeof r=="function"?r(i):r&&(r.current=i)})}}const n6=at.createContext(null),i6={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},xZ=/^H(\d+)$/;function wZ(s){return s in i6}function A1(s){return"children"in s}function s6(s){return A1(s)?s.children.length===1&&0 in s.children&&"id"in s.children[0]:!1}function AZ(s){const t={};if(A1(s)){const{role:e}=s,n=e.match(xZ);if(n)t.role="heading",t["aria-level"]=Number(n[1]);else if(wZ(e)){const i=i6[e];i&&(t.role=i)}}return t}function r6(s){const t={};if(A1(s)){if(s.alt!==void 0&&(t["aria-label"]=s.alt),s.lang!==void 0&&(t.lang=s.lang),s6(s)){const[e]=s.children;if(e){const n=r6(e);return Object.assign(Object.assign({},t),n)}}}else"id"in s&&(t["aria-owns"]=s.id);return t}function SZ(s){return s?Object.assign(Object.assign({},AZ(s)),r6(s)):null}function a6({className:s,node:t}){const e=at.useMemo(()=>SZ(t),[t]),n=at.useMemo(()=>!A1(t)||s6(t)?null:t.children.map((i,r)=>A.jsx(a6,{node:i},r)),[t]);return A.jsx("span",Object.assign({className:s},e,{children:n}))}function S1(){return at.useContext(n6)}function _Z(){const s=S1();qe(s,"Unable to find Page context.");const{onGetStructTreeError:t,onGetStructTreeSuccess:e}=s,[n,i]=td(),{value:r,error:o}=n,{customTextRenderer:c,page:h}=s;function d(){r&&e&&e(r)}function f(){o&&(pi(!1,o.toString()),t&&t(o))}function p(){i({type:"RESET"})}at.useEffect(p,[i,h]);function m(){if(c||!h)return;const y=_g(h.getStructTree()),w=y;return y.promise.then(b=>{i({type:"RESOLVE",value:b})}).catch(b=>{i({type:"REJECT",error:b})}),()=>bc(w)}return at.useEffect(m,[c,h,i]),at.useEffect(()=>{if(r!==void 0){if(r===!1){f();return}d()}},[r]),r?A.jsx(a6,{className:"react-pdf__Page__structTree structTree",node:r}):null}const cD=GI;function EZ(s){const t=S1();qe(t,"Unable to find Page context.");const e=Object.assign(Object.assign({},t),s),{_className:n,canvasBackground:i,devicePixelRatio:r=uZ(),onRenderError:o,onRenderSuccess:c,page:h,renderForms:d,renderTextLayer:f,rotate:p,scale:m}=e,{canvasRef:y}=s;qe(h,"Attempted to render page canvas, but no page was specified.");const w=at.useRef(null);function b(){h&&c&&c(l2(h,m))}function E(D){fZ(D)||(pi(!1,D.toString()),o&&o(D))}const _=at.useMemo(()=>h.getViewport({scale:m*r,rotation:p}),[r,h,p,m]),k=at.useMemo(()=>h.getViewport({scale:m,rotation:p}),[h,p,m]);function T(){if(!h)return;h.cleanup();const{current:D}=w;if(!D)return;D.width=_.width,D.height=_.height,D.style.width=`${Math.floor(k.width)}px`,D.style.height=`${Math.floor(k.height)}px`,D.style.visibility="hidden";const F={annotationMode:d?cD.ENABLE_FORMS:cD.ENABLE,canvasContext:D.getContext("2d",{alpha:!1}),viewport:_};i&&(F.background=i);const j=h.render(F),I=j;return j.promise.then(()=>{D.style.visibility="",b()}).catch(E),()=>bc(I)}at.useEffect(T,[i,w,r,h,d,_,k]);const R=at.useCallback(()=>{const{current:D}=w;D&&(D.width=0,D.height=0)},[w]);return at.useEffect(()=>R,[R]),A.jsx("canvas",{className:`${n}__canvas`,dir:"ltr",ref:e6(y,w),style:{display:"block",userSelect:"none"},children:f?A.jsx(_Z,{}):null})}function CZ(s){return"str"in s}function kZ(){const s=S1();qe(s,"Unable to find Page context.");const{customTextRenderer:t,onGetTextError:e,onGetTextSuccess:n,onRenderTextLayerError:i,onRenderTextLayerSuccess:r,page:o,pageIndex:c,pageNumber:h,rotate:d,scale:f}=s;qe(o,"Attempted to load page text content, but no page was specified.");const[p,m]=td(),{value:y,error:w}=p,b=at.useRef(null),E=at.useRef(void 0);pi(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function _(){y&&n&&n(y)}function k(){w&&(pi(!1,w.toString()),e&&e(w))}function T(){m({type:"RESET"})}at.useEffect(T,[o,m]);function R(){if(!o)return;const Q=_g(o.getTextContent()),H=Q;return Q.promise.then(J=>{m({type:"RESOLVE",value:J})}).catch(J=>{m({type:"REJECT",error:J})}),()=>bc(H)}at.useEffect(R,[o,m]),at.useEffect(()=>{if(y!==void 0){if(y===!1){k();return}_()}},[y]);const D=at.useCallback(()=>{r&&r()},[r]),F=at.useCallback(Q=>{pi(!1,Q.toString()),i&&i(Q)},[i]);function j(){const Q=E.current;Q&&Q.classList.add("active")}function I(){const Q=E.current;Q&&Q.classList.remove("active")}const O=at.useMemo(()=>o.getViewport({scale:f,rotation:d}),[o,d,f]);function X(){if(!o||!y)return;const{current:Q}=b;if(!Q)return;Q.innerHTML="";const H=o.streamTextContent({includeMarkedContent:!0}),J={container:Q,textContentSource:H,viewport:O},N=new VI(J),tt=N;return N.render().then(()=>{const $=document.createElement("div");$.className="endOfContent",Q.append($),E.current=$;const G=Q.querySelectorAll('[role="presentation"]');if(t){let gt=0;y.items.forEach((nt,Tt)=>{if(!CZ(nt))return;const U=G[gt];if(!U)return;const W=t(Object.assign({pageIndex:c,pageNumber:h,itemIndex:Tt},nt));U.innerHTML=W,gt+=nt.str&&nt.hasEOL?2:1})}D()}).catch(F),()=>bc(tt)}return at.useLayoutEffect(X,[t,F,D,o,c,h,y,O]),A.jsx("div",{className:x1("react-pdf__Page__textContent","textLayer"),onMouseUp:I,onMouseDown:j,ref:b})}function TZ(){const s=t6(),t=S1();qe(t,"Unable to find Page context.");const e=Object.assign(Object.assign({},s),t),{imageResourcesPath:n,linkService:i,onGetAnnotationsError:r,onGetAnnotationsSuccess:o,onRenderAnnotationLayerError:c,onRenderAnnotationLayerSuccess:h,page:d,pdf:f,renderForms:p,rotate:m,scale:y=1}=e;qe(f,"Attempted to load page annotations, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop."),qe(d,"Attempted to load page annotations, but no page was specified."),qe(i,"Attempted to load page annotations, but no linkService was specified.");const[w,b]=td(),{value:E,error:_}=w,k=at.useRef(null);pi(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function T(){E&&o&&o(E)}function R(){_&&(pi(!1,_.toString()),r&&r(_))}function D(){b({type:"RESET"})}at.useEffect(D,[b,d]);function F(){if(!d)return;const Q=_g(d.getAnnotations()),H=Q;return Q.promise.then(J=>{b({type:"RESOLVE",value:J})}).catch(J=>{b({type:"REJECT",error:J})}),()=>{bc(H)}}at.useEffect(F,[b,d,p]),at.useEffect(()=>{if(E!==void 0){if(E===!1){R();return}T()}},[E]);function j(){h&&h()}function I(Q){pi(!1,`${Q}`),c&&c(Q)}const O=at.useMemo(()=>d.getViewport({scale:y,rotation:m}),[d,m,y]);function X(){if(!f||!d||!i||!E)return;const{current:Q}=k;if(!Q)return;const H=O.clone({dontFlip:!0}),J={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:Q,l10n:null,page:d,viewport:H},N={annotations:E,annotationStorage:f.annotationStorage,div:Q,imageResourcesPath:n,linkService:i,page:d,renderForms:p,viewport:H};Q.innerHTML="";try{new WI(J).render(N),j()}catch(tt){I(tt)}return()=>{}}return at.useEffect(X,[E,n,i,d,p,O]),A.jsx("div",{className:x1("react-pdf__Page__annotations","annotationLayer"),ref:k})}var MZ=function(s,t){var e={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&t.indexOf(n)<0&&(e[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(s);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(s,n[i])&&(e[n[i]]=s[n[i]]);return e};const hD=1;function RZ(s){const t=t6(),e=Object.assign(Object.assign({},t),s),{_className:n="react-pdf__Page",_enableRegisterUnregisterPage:i=!0,canvasBackground:r,canvasRef:o,children:c,className:h,customRenderer:d,customTextRenderer:f,devicePixelRatio:p,error:m="Failed to load the page.",height:y,inputRef:w,loading:b="Loading page",noData:E="No page specified.",onGetAnnotationsError:_,onGetAnnotationsSuccess:k,onGetStructTreeError:T,onGetStructTreeSuccess:R,onGetTextError:D,onGetTextSuccess:F,onLoadError:j,onLoadSuccess:I,onRenderAnnotationLayerError:O,onRenderAnnotationLayerSuccess:X,onRenderError:Q,onRenderSuccess:H,onRenderTextLayerError:J,onRenderTextLayerSuccess:N,pageIndex:tt,pageNumber:$,pdf:G,registerPage:gt,renderAnnotationLayer:nt=!0,renderForms:Tt=!1,renderMode:U="canvas",renderTextLayer:W=!0,rotate:st,scale:lt=hD,unregisterPage:ut,width:Rt}=e,St=MZ(e,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[Ct,xt]=td(),{value:Bt,error:jt}=Ct,Ut=at.useRef(null);qe(G,"Attempted to load a page, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop.");const Ft=bl($)?$-1:tt??null,L=$??(bl(tt)?tt+1:null),ft=st??(Bt?Bt.rotate:null),rt=at.useMemo(()=>{if(!Bt)return null;let C=1;const M=lt??hD;if(Rt||y){const z=Bt.getViewport({scale:1,rotation:ft});Rt?C=Rt/z.width:y&&(C=y/z.height)}return M*C},[y,Bt,ft,lt,Rt]);function K(){return()=>{bl(Ft)&&i&&ut&&ut(Ft)}}at.useEffect(K,[i,G,Ft,ut]);function Z(){if(I){if(!Bt||!rt)return;I(l2(Bt,rt))}if(i&&gt){if(!bl(Ft)||!Ut.current)return;gt(Ft,Ut.current)}}function ot(){jt&&(pi(!1,jt.toString()),j&&j(jt))}function kt(){xt({type:"RESET"})}at.useEffect(kt,[xt,G,Ft]);function Mt(){if(!G||!L)return;const C=_g(G.getPage(L)),M=C;return C.promise.then(z=>{xt({type:"RESOLVE",value:z})}).catch(z=>{xt({type:"REJECT",error:z})}),()=>bc(M)}at.useEffect(Mt,[xt,G,Ft,L,gt]),at.useEffect(()=>{if(Bt!==void 0){if(Bt===!1){ot();return}Z()}},[Bt,rt]);const pt=at.useMemo(()=>Bt&&bl(Ft)&&L&&bl(ft)&&bl(rt)?{_className:n,canvasBackground:r,customTextRenderer:f,devicePixelRatio:p,onGetAnnotationsError:_,onGetAnnotationsSuccess:k,onGetStructTreeError:T,onGetStructTreeSuccess:R,onGetTextError:D,onGetTextSuccess:F,onRenderAnnotationLayerError:O,onRenderAnnotationLayerSuccess:X,onRenderError:Q,onRenderSuccess:H,onRenderTextLayerError:J,onRenderTextLayerSuccess:N,page:Bt,pageIndex:Ft,pageNumber:L,renderForms:Tt,renderTextLayer:W,rotate:ft,scale:rt}:null,[n,r,f,p,_,k,T,R,D,F,O,X,Q,H,J,N,Bt,Ft,L,Tt,W,ft,rt]),Lt=at.useMemo(()=>YI(St,()=>Bt&&(rt?l2(Bt,rt):void 0)),[St,Bt,rt]),It=`${Ft}@${rt}/${ft}`;function Et(){switch(U){case"custom":return qe(d,'renderMode was set to "custom", but no customRenderer was passed.'),A.jsx(d,{},`${It}_custom`);case"none":return null;default:return A.jsx(EZ,{canvasRef:o},`${It}_canvas`)}}function zt(){return W?A.jsx(kZ,{},`${It}_text`):null}function Jt(){return nt?A.jsx(TZ,{},`${It}_annotations`):null}function Ht(){return A.jsxs(n6.Provider,{value:pt,children:[Et(),zt(),Jt(),c]})}function we(){return L?G===null||Bt===void 0||Bt===null?A.jsx(Wu,{type:"loading",children:typeof b=="function"?b():b}):G===!1||Bt===!1?A.jsx(Wu,{type:"error",children:typeof m=="function"?m():m}):Ht():A.jsx(Wu,{type:"no-data",children:typeof E=="function"?E():E})}return A.jsx("div",Object.assign({className:x1(n,h),"data-page-number":L,ref:e6(w,Ut),style:{"--scale-factor":`${rt}`,backgroundColor:r||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},Lt,{children:we()}))}dZ();pC.workerSrc="pdf.worker.mjs";const o6="SET_ZOOM_LEVEL",XA=s=>({type:o6,value:s}),l6="SET_PDF_PAGINATED",PZ=s=>({type:l6,value:s}),c6="SET_NUM_PAGES",uD=s=>({type:c6,value:s}),h6="SET_CURRENT_PAGE",u6="SET_CURRENT_MAIN_STATE",dD=s=>({type:h6,value:s}),Uo={defaultZoomLevel:1,zoomLevel:1,zoomJump:.1,paginated:!0,numPages:0,currentPage:1},LZ=(s=Uo,t)=>{switch(t.type){case o6:{const{value:e}=t;return{...s,zoomLevel:e}}case l6:{const{value:e}=t;return{...s,paginated:e}}case c6:{const{value:e}=t;return{...s,numPages:e}}case h6:{const{value:e}=t;return{...s,currentPage:e}}case u6:{const{value:e}=t;return{...s,mainState:e}}default:return s}},rd=at.createContext({state:Uo,dispatch:()=>null}),DZ=({children:s,mainState:t})=>{var e,n,i,r,o,c,h;const[d,f]=at.useReducer(LZ,{...Uo,defaultZoomLevel:((n=(e=t.config)==null?void 0:e.pdfZoom)==null?void 0:n.defaultZoom)??Uo.defaultZoomLevel,zoomLevel:((r=(i=t.config)==null?void 0:i.pdfZoom)==null?void 0:r.defaultZoom)??Uo.zoomLevel,zoomJump:((c=(o=t.config)==null?void 0:o.pdfZoom)==null?void 0:c.zoomJump)??Uo.zoomJump,paginated:(h=t.config)!=null&&h.pdfVerticalScrollByDefault?!1:Uo.paginated,mainState:t});return at.useEffect(()=>{f({type:u6,value:t})},[t]),A.jsx(rd.Provider,{value:{state:d,dispatch:f},children:s})},d6=({pageNum:s})=>{const{state:{mainState:t,paginated:e,zoomLevel:n,numPages:i,currentPage:r}}=at.useContext(rd),{t:o}=Ec(),c=t?.rendererRect||null,h=s??r;return A.jsxs(NZ,{id:"pdf-page-wrapper",$lastPage:h>=i,children:[!e&&A.jsx(OZ,{id:"pdf-page-info",children:o("pdfPluginPageNumber",{currentPage:h,allPagesCount:i})}),A.jsx(RZ,{pageNumber:h||r,scale:n,height:(c?.height??100)-100,width:(c?.width??100)-100,loading:o("pdfPluginLoading")})]})},NZ=de.div`
  margin: ${s=>s.$lastPage?"20px 0":void 0};
`,OZ=de.div`
  padding: 0 0 10px 10px;
  color: ${s=>s.theme.textTertiary};
  font-size: 14px;
  text-align: left;

  @media (max-width: 768px) {
    font-size: 10px;
  }
`,IZ=()=>{const{state:{numPages:s}}=at.useContext(rd),t=[];for(let e=0;e<s;e++)t.push(A.jsx(d6,{pageNum:e+1},e+1));return A.jsx(A.Fragment,{children:t})},jZ=()=>{const{state:{mainState:s,paginated:t},dispatch:e}=at.useContext(rd),{t:n}=Ec(),i=s?.currentDocument||null;return at.useEffect(()=>{e(uD(Uo.numPages))},[i]),!i||i.fileData===void 0?null:A.jsx(BZ,{file:i.fileData,onLoadSuccess:({numPages:r})=>e(uD(r)),loading:A.jsx("span",{children:n("pdfPluginLoading")}),children:t?A.jsx(d6,{}):A.jsx(IZ,{})})},BZ=de(bZ)`
  display: flex;
  flex-direction: column;
  margin: 0 auto;
`,FZ=s=>A.jsx(f6,{...s,reverse:!0}),zZ=s=>A.jsx(f6,{...s}),f6=s=>{const{color:t,size:e,reverse:n}=s;return A.jsx("svg",{width:e||"100%",height:e||"100%",style:{transform:`${n?"rotate(180deg)":""}`},viewBox:"0 0 12 12",version:"1.1",children:A.jsx("g",{id:"Icons",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:A.jsx("g",{id:"Rounded",transform:"translate(-548.000000, -1000.000000)",children:A.jsx("g",{id:"AV",transform:"translate(100.000000, 852.000000)",children:A.jsx("g",{id:"-Round-/-AV-/-skip_next",transform:"translate(442.000000, 142.000000)",children:A.jsxs("g",{children:[A.jsx("rect",{id:"Rectangle-Copy-52",x:"0",y:"0",width:"24",height:"24"}),A.jsx("path",{d:"M7.58,16.89 L13.35,12.82 C13.91,12.42 13.91,11.58 13.35,11.19 L7.58,7.11 C6.91,6.65 6,7.12 6,7.93 L6,16.07 C6,16.88 6.91,17.35 7.58,16.89 Z M16,7 L16,17 C16,17.55 16.45,18 17,18 C17.55,18 18,17.55 18,17 L18,7 C18,6.45 17.55,6 17,6 C16.45,6 16,6.45 16,7 Z",id:"icon_color",fill:t||"#aaa"})]})})})})})})},UZ=s=>{const{color:t,size:e,reverse:n}=s;return A.jsxs("svg",{width:e||"100%",height:e||"100%",style:{transform:`${n?"rotate(180deg)":""}`},id:"Layer_1",viewBox:"0 0 24 24",children:[A.jsx("path",{d:"M20.57,9.43A8,8,0,0,0,5.26,10,5,5,0,1,0,5,20h5V18H5a3,3,0,0,1,0-6,3.1,3.1,0,0,1,.79.12l1.12.31.14-1.15a6,6,0,0,1,11.74-.82l.15.54.54.16A3.46,3.46,0,0,1,22,14.5,3.5,3.5,0,0,1,18.5,18H16v2h2.5A5.48,5.48,0,0,0,20.57,9.43Z",fill:t||"#aaa"}),A.jsx("polygon",{points:"12 11 12 15.59 10.71 14.29 9.29 15.71 13 19.41 16.71 15.71 15.29 14.29 14 15.59 14 11 12 11",fill:t||"#aaa"})]})},HZ=s=>A.jsx(p6,{...s}),WZ=s=>A.jsx(p6,{...s,reverse:!0}),p6=s=>{const{color:t,size:e,reverse:n}=s;return A.jsx("svg",{width:e||"100%",height:e||"100%",viewBox:"0 0 32 32",version:"1.1",children:A.jsx("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:A.jsx("g",{id:"search-plus-icon",fill:t||"#aaa",children:A.jsx("path",{id:"search-plus",d:n?"M 13 13 L 16 13 L 19 13 L 19 16 L 16 16 L 13 16 L 10 16 L 10 13 Z M 19.4271 21.4271 C 18.0372 22.4175 16.3367 23 14.5 23 C 9.8056 23 6 19.1944 6 14.5 C 6 9.8056 9.8056 6 14.5 6 C 19.1944 6 23 9.8056 23 14.5 C 23 16.3367 22.4175 18.0372 21.4271 19.4271 L 27.0119 25.0119 C 27.5621 25.5621 27.5575 26.4425 27.0117 26.9883 L 26.9883 27.0117 C 26.4439 27.5561 25.5576 27.5576 25.0119 27.0119 L 19.4271 21.4271 L 19.4271 21.4271 L 19.4271 21.4271 Z M 14.5 21 C 18.0899 21 21 18.0899 21 14.5 C 21 10.9101 18.0899 8 14.5 8 C 10.9101 8 8 10.9101 8 14.5 C 8 18.0899 10.9101 21 14.5 21 L 14.5 21 Z":"M 13 13 L 13 10 L 16 10 L 16 13 L 19 13 L 19 16 L 16 16 L 16 19 L 13 19 L 13 16 L 10 16 L 10 13 Z M 19.4271 21.4271 C 18.0372 22.4175 16.3367 23 14.5 23 C 9.8056 23 6 19.1944 6 14.5 C 6 9.8056 9.8056 6 14.5 6 C 19.1944 6 23 9.8056 23 14.5 C 23 16.3367 22.4175 18.0372 21.4271 19.4271 L 27.0119 25.0119 C 27.5621 25.5621 27.5575 26.4425 27.0117 26.9883 L 26.9883 27.0117 C 26.4439 27.5561 25.5576 27.5576 25.0119 27.0119 L 19.4271 21.4271 L 19.4271 21.4271 L 19.4271 21.4271 Z M 14.5 21 C 18.0899 21 21 18.0899 21 14.5 C 21 10.9101 18.0899 8 14.5 8 C 10.9101 8 8 10.9101 8 14.5 C 8 18.0899 10.9101 21 14.5 21 L 14.5 21 Z"})})})})},GZ=s=>{const{color:t,size:e}=s;return A.jsx("svg",{width:e||"100%",height:e||"100%",viewBox:"0 0 24 24",children:A.jsx("path",{fill:t||"#aaa",d:"M9.29,13.29,4,18.59V17a1,1,0,0,0-2,0v4a1,1,0,0,0,.08.38,1,1,0,0,0,.54.54A1,1,0,0,0,3,22H7a1,1,0,0,0,0-2H5.41l5.3-5.29a1,1,0,0,0-1.42-1.42ZM5.41,4H7A1,1,0,0,0,7,2H3a1,1,0,0,0-.38.08,1,1,0,0,0-.54.54A1,1,0,0,0,2,3V7A1,1,0,0,0,4,7V5.41l5.29,5.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42ZM21,16a1,1,0,0,0-1,1v1.59l-5.29-5.3a1,1,0,0,0-1.42,1.42L18.59,20H17a1,1,0,0,0,0,2h4a1,1,0,0,0,.38-.08,1,1,0,0,0,.54-.54A1,1,0,0,0,22,21V17A1,1,0,0,0,21,16Zm.92-13.38a1,1,0,0,0-.54-.54A1,1,0,0,0,21,2H17a1,1,0,0,0,0,2h1.59l-5.3,5.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L20,5.41V7a1,1,0,0,0,2,0V3A1,1,0,0,0,21.92,2.62Z"})})},VZ=s=>{const{color:t,size:e,reverse:n}=s;return A.jsx("svg",{width:e||"100%",height:e||"100%",style:{transform:`${n?"rotate(90deg)":""}`},version:"1.1",id:"Scroll_1",viewBox:"0 0 297 297",xmlSpace:"preserve",children:A.jsx("path",{fill:t||"#aaa",d:`M206.004,200.723h-31.231V96.277h31.231c0.005,0,0.014,0,0.019,0c5.289,0,9.575-4.287,9.575-9.574
  c0-2.342-0.841-4.488-2.236-6.151L156.168,3.851C154.36,1.428,151.515,0,148.492,0c-3.023,0-5.868,1.428-7.675,3.851L83.302,80.98
  c-2.166,2.902-2.507,6.779-0.883,10.017c1.624,3.236,4.936,5.28,8.559,5.28h31.231v104.445H90.978c-3.623,0-6.934,2.044-8.559,5.28
  c-1.624,3.237-1.283,7.114,0.883,10.017l57.513,77.129c1.808,2.424,4.652,3.852,7.675,3.852c3.023,0,5.868-1.428,7.676-3.852
  l57.514-77.129c2.164-2.902,2.507-6.779,0.883-10.017C212.938,202.767,209.627,200.723,206.004,200.723z`})})},$Z=()=>{const{state:{currentPage:s,numPages:t},dispatch:e}=at.useContext(rd),{t:n}=Ec();return A.jsxs(qZ,{id:"pdf-pagination",children:[A.jsx(g6,{id:"pdf-pagination-prev",onClick:()=>e(dD(s-1)),disabled:s===1,children:A.jsx(FZ,{color:"#000",size:"50%"})}),A.jsx(XZ,{id:"pdf-pagination-info",children:n("pdfPluginPageNumber",{currentPage:s,allPagesCount:t})}),A.jsx(YZ,{id:"pdf-pagination-next",onClick:()=>e(dD(s+1)),disabled:s>=t,children:A.jsx(zZ,{color:"#000",size:"50%"})})]})},qZ=de.div`
  display: flex;
  align-items: center;
`,g6=de(r1)`
  width: 30px;
  height: 30px;
  margin: 0 5px;

  @media (max-width: 768px) {
    width: 25px;
    height: 25px;
  }
`,YZ=de(g6)`
  margin: 0 20px 0 5px;
`,XZ=de.div`
  color: ${s=>s.theme.textPrimary};
  font-size: 14px;
  text-align: left;

  @media (max-width: 768px) {
    font-size: 10px;
  }
`,KZ=()=>{const{t:s}=Ec(),{state:{mainState:t,paginated:e,zoomLevel:n,numPages:i,zoomJump:r,defaultZoomLevel:o},dispatch:c}=at.useContext(rd),h=t?.currentDocument||null;return A.jsxs(ZZ,{id:"pdf-controls",children:[e&&i>1&&A.jsx($Z,{}),h?.fileData&&A.jsx(QZ,{id:"pdf-download",href:h?.fileData,download:h?.fileName||h?.uri,title:s("downloadButtonLabel"),children:A.jsx(UZ,{color:"#000",size:"75%"})}),A.jsx(C0,{id:"pdf-zoom-out",onMouseDown:()=>c(XA(n-r)),children:A.jsx(WZ,{color:"#000",size:"80%"})}),A.jsx(C0,{id:"pdf-zoom-in",onMouseDown:()=>c(XA(n+r)),children:A.jsx(HZ,{color:"#000",size:"80%"})}),A.jsx(C0,{id:"pdf-zoom-reset",onMouseDown:()=>c(XA(o)),disabled:n===o,children:A.jsx(GZ,{color:"#000",size:"70%"})}),i>1&&A.jsx(C0,{id:"pdf-toggle-pagination",onMouseDown:()=>c(PZ(!e)),children:A.jsx(VZ,{color:"#000",size:"70%",reverse:e})})]})},ZZ=de.div`
  display: flex;
  position: sticky;
  top: 0;
  left: 0;
  z-index: 1;
  justify-content: flex-end;
  padding: 8px;
  background-color: ${s=>s.theme.tertiary};
  box-shadow: 0px 2px 3px #00000033;

  @media (max-width: 768px) {
    padding: 6px;
  }
`,C0=de(r1)`
  width: 30px;
  height: 30px;
  @media (max-width: 768px) {
    width: 25px;
    height: 25px;
  }
`,QZ=de(YO)`
  width: 30px;
  height: 30px;
  @media (max-width: 768px) {
    width: 25px;
    height: 25px;
  }
`;pC.workerSrc=new URL(`https://unpkg.com/pdfjs-dist@${qI}/build/pdf.worker.min.mjs`).toString();const gC=({mainState:s})=>A.jsx(DZ,{mainState:s,children:A.jsxs(JZ,{id:"pdf-renderer","data-testid":"pdf-renderer",children:[A.jsx(KZ,{}),A.jsx(jZ,{})]})});gC.fileTypes=["pdf","application/pdf"];gC.weight=0;const JZ=de.div`
  display: flex;
  flex-direction: column;
  flex: 1;

  /* width */
  &::-webkit-scrollbar {
    ${s=>s.theme.disableThemeScrollbar?"":"width: 10px"};
  }
  /* Track */
  &::-webkit-scrollbar-track {
    /* background: ${s=>s.theme.secondary}; */
  }
  /* Handle */
  &::-webkit-scrollbar-thumb {
    background: ${s=>s.theme.tertiary};
  }
  /* Handle on hover */
  &::-webkit-scrollbar-thumb:hover {
    background: ${s=>s.theme.primary};
  }
`,tQ=de(Oa)`
  display: flex;
  flex: 1;
  align-items: center;
  justify-content: center;
  height: 100%;
  background-color: white;
  background-image: linear-gradient(45deg, #e0e0e0 25%, transparent 25%),
    linear-gradient(-45deg, #e0e0e0 25%, transparent 25%),
    linear-gradient(45deg, transparent 75%, #e0e0e0 75%),
    linear-gradient(-45deg, transparent 75%, #e0e0e0 75%);
  background-size: 20px 20px;
  background-position:
    0 0,
    0 10px,
    10px -10px,
    -10px 0px;
`,mC=s=>A.jsx(tQ,{...s});mC.fileTypes=["png","image/png"];mC.weight=0;let Ra,as,Bb=[];const eQ=()=>{var s=Ui(2,0);if(s===18761)as=!0;else if(s===19789)as=!1;else throw TypeError("Invalid byte order value.");return as},nQ=()=>{if(Ui(2,2)!==42)throw RangeError("You forgot your towel!");return!0},iQ=s=>{var t={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop"},e;return s in t?e=t[s]:e="Tag"+s,e},sQ=s=>{var t={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE"},e;return s in t&&(e=t[s]),e},rQ=s=>{var t;return["BYTE","ASCII","SBYTE","UNDEFINED"].indexOf(s)!==-1?t=1:["SHORT","SSHORT"].indexOf(s)!==-1?t=2:["LONG","SLONG","FLOAT"].indexOf(s)!==-1?t=4:["RATIONAL","SRATIONAL","DOUBLE"].indexOf(s)!==-1&&(t=8),t},aQ=(s,t,e)=>{e=e||0;var n=Math.floor(e/8),i=t+n,r=e+s,o=32-s;if(r<=0)throw RangeError("No bits requested");if(r<=8)var c=24+e,h=Ra.getUint8(i,as);else if(r<=16)var c=16+e,h=Ra.getUint16(i,as);else if(r<=32)var c=e,h=Ra.getUint32(i,as);else throw RangeError("Too many bits requested");var d={bits:h<<c>>>o,byteOffset:i+Math.floor(r/8),bitOffset:r%8};return d},Ui=(s,t)=>{if(s<=0)throw RangeError("No bytes requested");if(s<=1)return Ra.getUint8(t,as);if(s<=2)return Ra.getUint16(t,as);if(s<=3)return Ra.getUint32(t,as)>>>8;if(s<=4)return Ra.getUint32(t,as);throw RangeError("Too many bytes requested")},oQ=(s,t,e,n)=>{var i=[],r=rQ(t),o=r*e;if(o<=4){if(as===!1)var c=n>>>(4-r)*8;else var c=n;i.push(c)}else for(var h=0;h<e;h++){var d=r*h;if(r>=8)if(["RATIONAL","SRATIONAL"].indexOf(t)!==-1)i.push(Ui(4,n+d)),i.push(Ui(4,n+d+4));else throw TypeError("Can't handle this field type or size");else i.push(Ui(r,n+d))}return t==="ASCII"&&i.forEach(function(f,p,m){m[p]=String.fromCharCode(f)}),i},xl=(s,t)=>{var e=Math.pow(2,8-t);return Math.floor(s*e+(e-1))},fD=(s,t,e,n)=>(typeof n>"u"&&(n=1),"rgba("+s+", "+t+", "+e+", "+n+")"),m6=s=>{for(var t=Ui(2,s),e=[],n=s+2,i=0;i<t;n+=12,i++){var r=Ui(2,n),o=Ui(2,n+2),c=Ui(4,n+4),h=Ui(4,n+8),d=iQ(r),f=sQ(o),p=oQ(d,f,c,h);e[d]={type:f,values:p}}Bb.push(e);var m=Ui(4,n);return m===0?Bb:m6(m)},lQ=(s,t)=>{let e=t||document.createElement("canvas");if(s&&(Ra=new DataView(s),as=eQ(),!!nQ())){var n=Ui(4,4);Bb=m6(n);var i=Bb[0],r=i.ImageWidth.values[0],o=i.ImageLength.values[0];e.width=r,e.height=o;var c=[],h=i.Compression?i.Compression.values[0]:1,d=i.SamplesPerPixel.values[0],f=[],p=0,m=!1;if(i.BitsPerSample.values.forEach(function(It,Et,zt){f[Et]={bitsPerSample:It,hasBytesPerSample:!1,bytesPerSample:void 0},It%8===0&&(f[Et].hasBytesPerSample=!0,f[Et].bytesPerSample=It/8),p+=It},void 0),p%8===0){m=!0;var y=p/8}var w=i.StripOffsets.values,b=w.length;if(i.StripByteCounts)var E=i.StripByteCounts.values;else if(b===1)var E=[Math.ceil(r*o*p/8)];else throw Error("Cannot recover from missing StripByteCounts");for(var _=0;_<b;_++){var k=w[_];c[_]=[];for(var T=E[_],R=0,D=0,F=1,j=!0,I=[],O=0,X=0,Q=0;R<T;R+=F)switch(h){case 1:for(var H=0,I=[];H<d;H++)if(f[H].hasBytesPerSample){var J=f[H].bytesPerSample*H;I.push(Ui(f[H].bytesPerSample,k+R+J))}else{var N=aQ(f[H].bitsPerSample,k+R,D);throw I.push(N.bits),R=N.byteOffset-k,D=N.bitOffset,RangeError("Cannot handle sub-byte bits per sample")}if(c[_].push(I),m)F=y;else throw F=0,RangeError("Cannot handle sub-byte bits per pixel");break;case 2:break;case 3:break;case 4:break;case 5:break;case 6:break;case 7:break;case 32773:if(j){j=!1;var tt=1,$=1,G=Ra.getInt8(k+R,as);G>=0&&G<=127?tt=G+1:G>=-127&&G<=-1?$=-G+1:j=!0}else{for(var gt=Ui(1,k+R),H=0;H<$;H++){if(f[X].hasBytesPerSample)Q=Q<<8*O|gt,O++,O===f[X].bytesPerSample&&(I.push(Q),Q=O=0,X++);else throw RangeError("Cannot handle sub-byte bits per sample");X===d&&(c[_].push(I),I=[],X=0)}tt--,tt===0&&(j=!0)}F=1;break}}if(e.getContext){var nt=e.getContext("2d");if(nt.fillStyle=fD(255,255,255,0),i.RowsPerStrip)var Tt=i.RowsPerStrip.values[0];else var Tt=o;var U=c.length,W=o%Tt,st=W===0?Tt:W,lt=Tt,ut=0,Rt=i.PhotometricInterpretation.values[0],St=[],Ct=0;if(i.ExtraSamples&&(St=i.ExtraSamples.values,Ct=St.length),i.ColorMap)var xt=i.ColorMap.values,Bt=Math.pow(2,f[0].bitsPerSample);for(var _=0;_<U;_++){_+1===U&&(lt=st);for(var jt=c[_].length,Ut=ut*_,Ft=0,L=0;L<jt;Ft++)for(var ft=0;ft<r;ft++,L++){var rt=c[_][L],K=0,Z=0,ot=0,kt=1;if(Ct>0){for(var Mt=0;Mt<Ct;Mt++)if(St[Mt]===1||St[Mt]===2){kt=rt[3+Mt]/256;break}}switch(Rt){case 0:if(f[0].hasBytesPerSample)var pt=Math.pow(16,f[0].bytesPerSample*2);rt.forEach(function(Et,zt,Jt){Jt[zt]=pt-Et});case 1:K=Z=ot=xl(rt[0],f[0].bitsPerSample);break;case 2:K=xl(rt[0],f[0].bitsPerSample),Z=xl(rt[1],f[1].bitsPerSample),ot=xl(rt[2],f[2].bitsPerSample);break;case 3:if(xt===void 0)throw Error("Palette image missing color map");var Lt=rt[0];K=xl(xt[Lt],16),Z=xl(xt[Bt+Lt],16),ot=xl(xt[2*Bt+Lt],16);break;case 4:throw RangeError("Not Yet Implemented: Transparency mask");case 5:throw RangeError("Not Yet Implemented: CMYK");case 6:throw RangeError("Not Yet Implemented: YCbCr");case 8:throw RangeError("Not Yet Implemented: CIELab");default:throw RangeError("Unknown Photometric Interpretation:",Rt)}nt.fillStyle=fD(K,Z,ot,kt),nt.fillRect(ft,Ut+Ft,1,1)}ut=lt}}return e}},_1=s=>{const{mainState:{currentDocument:t}}=s,{t:e}=Ec(),[n,i]=at.useState(!1),[r,o]=at.useState(!1);return at.useEffect(()=>{if(!t||n)return;const c=document.getElementById("tiff-img");try{c&&lQ(t.fileData,c),i(!0)}catch{o(!0)}},[t,n]),r?A.jsx(Oa,{...s,children:A.jsx("div",{children:e("brokenFile")})}):A.jsx(Oa,{...s,children:A.jsx(cQ,{id:"tiff-img"})})};_1.fileTypes=["tif","tiff","image/tif","image/tiff"];_1.weight=0;_1.fileLoader=X$;const cQ=de.canvas`
  max-width: 95%;
  max-height: 95%;
`,E1=({mainState:{currentDocument:s}})=>A.jsx(hQ,{id:"txt-renderer",children:s?.fileData});E1.fileTypes=["txt","text/plain"];E1.weight=0;E1.fileLoader=JO;const hQ=de.div`
  display: flex;
  flex-direction: column;
  width: 100%;
  padding: 30px;
`;var y6={exports:{}};(function(s,t){(function(e,n){s.exports=n()})(kf,function e(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},i=!n.document&&!!n.postMessage,r=n.IS_PAPA_WORKER||!1,o={},c=0,h={parse:function(I,O){var X=(O=O||{}).dynamicTyping||!1;if(j(X)&&(O.dynamicTypingFunction=X,X={}),O.dynamicTyping=X,O.transform=!!j(O.transform)&&O.transform,O.worker&&h.WORKERS_SUPPORTED){var Q=(function(){if(!h.WORKERS_SUPPORTED)return!1;var J=(tt=n.URL||n.webkitURL||null,$=e.toString(),h.BLOB_URL||(h.BLOB_URL=tt.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",$,")();"],{type:"text/javascript"})))),N=new n.Worker(J),tt,$;return N.onmessage=k,N.id=c++,o[N.id]=N})();return Q.userStep=O.step,Q.userChunk=O.chunk,Q.userComplete=O.complete,Q.userError=O.error,O.step=j(O.step),O.chunk=j(O.chunk),O.complete=j(O.complete),O.error=j(O.error),delete O.worker,void Q.postMessage({input:I,config:O,workerId:Q.id})}var H=null;return h.NODE_STREAM_INPUT,typeof I=="string"?(I=(function(J){return J.charCodeAt(0)===65279?J.slice(1):J})(I),H=O.download?new p(O):new y(O)):I.readable===!0&&j(I.read)&&j(I.on)?H=new w(O):(n.File&&I instanceof File||I instanceof Object)&&(H=new m(O)),H.stream(I)},unparse:function(I,O){var X=!1,Q=!0,H=",",J=`\r
`,N='"',tt=N+N,$=!1,G=null,gt=!1;(function(){if(typeof O=="object"){if(typeof O.delimiter!="string"||h.BAD_DELIMITERS.filter(function(W){return O.delimiter.indexOf(W)!==-1}).length||(H=O.delimiter),(typeof O.quotes=="boolean"||typeof O.quotes=="function"||Array.isArray(O.quotes))&&(X=O.quotes),typeof O.skipEmptyLines!="boolean"&&typeof O.skipEmptyLines!="string"||($=O.skipEmptyLines),typeof O.newline=="string"&&(J=O.newline),typeof O.quoteChar=="string"&&(N=O.quoteChar),typeof O.header=="boolean"&&(Q=O.header),Array.isArray(O.columns)){if(O.columns.length===0)throw new Error("Option columns is empty");G=O.columns}O.escapeChar!==void 0&&(tt=O.escapeChar+N),(typeof O.escapeFormulae=="boolean"||O.escapeFormulae instanceof RegExp)&&(gt=O.escapeFormulae instanceof RegExp?O.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var nt=new RegExp(E(N),"g");if(typeof I=="string"&&(I=JSON.parse(I)),Array.isArray(I)){if(!I.length||Array.isArray(I[0]))return Tt(null,I,$);if(typeof I[0]=="object")return Tt(G||Object.keys(I[0]),I,$)}else if(typeof I=="object")return typeof I.data=="string"&&(I.data=JSON.parse(I.data)),Array.isArray(I.data)&&(I.fields||(I.fields=I.meta&&I.meta.fields||G),I.fields||(I.fields=Array.isArray(I.data[0])?I.fields:typeof I.data[0]=="object"?Object.keys(I.data[0]):[]),Array.isArray(I.data[0])||typeof I.data[0]=="object"||(I.data=[I.data])),Tt(I.fields||[],I.data||[],$);throw new Error("Unable to serialize unrecognized input");function Tt(W,st,lt){var ut="";typeof W=="string"&&(W=JSON.parse(W)),typeof st=="string"&&(st=JSON.parse(st));var Rt=Array.isArray(W)&&0<W.length,St=!Array.isArray(st[0]);if(Rt&&Q){for(var Ct=0;Ct<W.length;Ct++)0<Ct&&(ut+=H),ut+=U(W[Ct],Ct);0<st.length&&(ut+=J)}for(var xt=0;xt<st.length;xt++){var Bt=Rt?W.length:st[xt].length,jt=!1,Ut=Rt?Object.keys(st[xt]).length===0:st[xt].length===0;if(lt&&!Rt&&(jt=lt==="greedy"?st[xt].join("").trim()==="":st[xt].length===1&&st[xt][0].length===0),lt==="greedy"&&Rt){for(var Ft=[],L=0;L<Bt;L++){var ft=St?W[L]:L;Ft.push(st[xt][ft])}jt=Ft.join("").trim()===""}if(!jt){for(var rt=0;rt<Bt;rt++){0<rt&&!Ut&&(ut+=H);var K=Rt&&St?W[rt]:rt;ut+=U(st[xt][K],rt)}xt<st.length-1&&(!lt||0<Bt&&!Ut)&&(ut+=J)}}return ut}function U(W,st){if(W==null)return"";if(W.constructor===Date)return JSON.stringify(W).slice(1,25);var lt=!1;gt&&typeof W=="string"&&gt.test(W)&&(W="'"+W,lt=!0);var ut=W.toString().replace(nt,tt);return(lt=lt||X===!0||typeof X=="function"&&X(W,st)||Array.isArray(X)&&X[st]||(function(Rt,St){for(var Ct=0;Ct<St.length;Ct++)if(-1<Rt.indexOf(St[Ct]))return!0;return!1})(ut,h.BAD_DELIMITERS)||-1<ut.indexOf(H)||ut.charAt(0)===" "||ut.charAt(ut.length-1)===" ")?N+ut+N:ut}}};if(h.RECORD_SEP="",h.UNIT_SEP="",h.BYTE_ORDER_MARK="\uFEFF",h.BAD_DELIMITERS=["\r",`
`,'"',h.BYTE_ORDER_MARK],h.WORKERS_SUPPORTED=!i&&!!n.Worker,h.NODE_STREAM_INPUT=1,h.LocalChunkSize=10485760,h.RemoteChunkSize=5242880,h.DefaultDelimiter=",",h.Parser=_,h.ParserHandle=b,h.NetworkStreamer=p,h.FileStreamer=m,h.StringStreamer=y,h.ReadableStreamStreamer=w,n.jQuery){var d=n.jQuery;d.fn.parse=function(I){var O=I.config||{},X=[];return this.each(function(J){if(!(d(this).prop("tagName").toUpperCase()==="INPUT"&&d(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var N=0;N<this.files.length;N++)X.push({file:this.files[N],inputElem:this,instanceConfig:d.extend({},O)})}),Q(),this;function Q(){if(X.length!==0){var J,N,tt,$,G=X[0];if(j(I.before)){var gt=I.before(G.file,G.inputElem);if(typeof gt=="object"){if(gt.action==="abort")return J="AbortError",N=G.file,tt=G.inputElem,$=gt.reason,void(j(I.error)&&I.error({name:J},N,tt,$));if(gt.action==="skip")return void H();typeof gt.config=="object"&&(G.instanceConfig=d.extend(G.instanceConfig,gt.config))}else if(gt==="skip")return void H()}var nt=G.instanceConfig.complete;G.instanceConfig.complete=function(Tt){j(nt)&&nt(Tt,G.file,G.inputElem),H()},h.parse(G.file,G.instanceConfig)}else j(I.complete)&&I.complete()}function H(){X.splice(0,1),Q()}}}function f(I){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(O){var X=D(O);X.chunkSize=parseInt(X.chunkSize),O.step||O.chunk||(X.chunkSize=null),this._handle=new b(X),(this._handle.streamer=this)._config=X}).call(this,I),this.parseChunk=function(O,X){if(this.isFirstChunk&&j(this._config.beforeFirstChunk)){var Q=this._config.beforeFirstChunk(O);Q!==void 0&&(O=Q)}this.isFirstChunk=!1,this._halted=!1;var H=this._partialLine+O;this._partialLine="";var J=this._handle.parse(H,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var N=J.meta.cursor;this._finished||(this._partialLine=H.substring(N-this._baseIndex),this._baseIndex=N),J&&J.data&&(this._rowCount+=J.data.length);var tt=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(r)n.postMessage({results:J,workerId:h.WORKER_ID,finished:tt});else if(j(this._config.chunk)&&!X){if(this._config.chunk(J,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);J=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(J.data),this._completeResults.errors=this._completeResults.errors.concat(J.errors),this._completeResults.meta=J.meta),this._completed||!tt||!j(this._config.complete)||J&&J.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),tt||J&&J.meta.paused||this._nextChunk(),J}this._halted=!0},this._sendError=function(O){j(this._config.error)?this._config.error(O):r&&this._config.error&&n.postMessage({workerId:h.WORKER_ID,error:O,finished:!1})}}function p(I){var O;(I=I||{}).chunkSize||(I.chunkSize=h.RemoteChunkSize),f.call(this,I),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(X){this._input=X,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(O=new XMLHttpRequest,this._config.withCredentials&&(O.withCredentials=this._config.withCredentials),i||(O.onload=F(this._chunkLoaded,this),O.onerror=F(this._chunkError,this)),O.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var X=this._config.downloadRequestHeaders;for(var Q in X)O.setRequestHeader(Q,X[Q])}if(this._config.chunkSize){var H=this._start+this._config.chunkSize-1;O.setRequestHeader("Range","bytes="+this._start+"-"+H)}try{O.send(this._config.downloadRequestBody)}catch(J){this._chunkError(J.message)}i&&O.status===0&&this._chunkError()}},this._chunkLoaded=function(){O.readyState===4&&(O.status<200||400<=O.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:O.responseText.length,this._finished=!this._config.chunkSize||this._start>=(function(X){var Q=X.getResponseHeader("Content-Range");return Q===null?-1:parseInt(Q.substring(Q.lastIndexOf("/")+1))})(O),this.parseChunk(O.responseText)))},this._chunkError=function(X){var Q=O.statusText||X;this._sendError(new Error(Q))}}function m(I){var O,X;(I=I||{}).chunkSize||(I.chunkSize=h.LocalChunkSize),f.call(this,I);var Q=typeof FileReader<"u";this.stream=function(H){this._input=H,X=H.slice||H.webkitSlice||H.mozSlice,Q?((O=new FileReader).onload=F(this._chunkLoaded,this),O.onerror=F(this._chunkError,this)):O=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var H=this._input;if(this._config.chunkSize){var J=Math.min(this._start+this._config.chunkSize,this._input.size);H=X.call(H,this._start,J)}var N=O.readAsText(H,this._config.encoding);Q||this._chunkLoaded({target:{result:N}})},this._chunkLoaded=function(H){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(H.target.result)},this._chunkError=function(){this._sendError(O.error)}}function y(I){var O;f.call(this,I=I||{}),this.stream=function(X){return O=X,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var X,Q=this._config.chunkSize;return Q?(X=O.substring(0,Q),O=O.substring(Q)):(X=O,O=""),this._finished=!O,this.parseChunk(X)}}}function w(I){f.call(this,I=I||{});var O=[],X=!0,Q=!1;this.pause=function(){f.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){f.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(H){this._input=H,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){Q&&O.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),O.length?this.parseChunk(O.shift()):X=!0},this._streamData=F(function(H){try{O.push(typeof H=="string"?H:H.toString(this._config.encoding)),X&&(X=!1,this._checkIsFinished(),this.parseChunk(O.shift()))}catch(J){this._streamError(J)}},this),this._streamError=F(function(H){this._streamCleanUp(),this._sendError(H)},this),this._streamEnd=F(function(){this._streamCleanUp(),Q=!0,this._streamData("")},this),this._streamCleanUp=F(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function b(I){var O,X,Q,H=Math.pow(2,53),J=-H,N=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,tt=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,$=this,G=0,gt=0,nt=!1,Tt=!1,U=[],W={data:[],errors:[],meta:{}};if(j(I.step)){var st=I.step;I.step=function(xt){if(W=xt,Rt())ut();else{if(ut(),W.data.length===0)return;G+=xt.data.length,I.preview&&G>I.preview?X.abort():(W.data=W.data[0],st(W,$))}}}function lt(xt){return I.skipEmptyLines==="greedy"?xt.join("").trim()==="":xt.length===1&&xt[0].length===0}function ut(){return W&&Q&&(Ct("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+h.DefaultDelimiter+"'"),Q=!1),I.skipEmptyLines&&(W.data=W.data.filter(function(xt){return!lt(xt)})),Rt()&&(function(){if(!W)return;function xt(jt,Ut){j(I.transformHeader)&&(jt=I.transformHeader(jt,Ut)),U.push(jt)}if(Array.isArray(W.data[0])){for(var Bt=0;Rt()&&Bt<W.data.length;Bt++)W.data[Bt].forEach(xt);W.data.splice(0,1)}else W.data.forEach(xt)})(),(function(){if(!W||!I.header&&!I.dynamicTyping&&!I.transform)return W;function xt(jt,Ut){var Ft,L=I.header?{}:[];for(Ft=0;Ft<jt.length;Ft++){var ft=Ft,rt=jt[Ft];I.header&&(ft=Ft>=U.length?"__parsed_extra":U[Ft]),I.transform&&(rt=I.transform(rt,ft)),rt=St(ft,rt),ft==="__parsed_extra"?(L[ft]=L[ft]||[],L[ft].push(rt)):L[ft]=rt}return I.header&&(Ft>U.length?Ct("FieldMismatch","TooManyFields","Too many fields: expected "+U.length+" fields but parsed "+Ft,gt+Ut):Ft<U.length&&Ct("FieldMismatch","TooFewFields","Too few fields: expected "+U.length+" fields but parsed "+Ft,gt+Ut)),L}var Bt=1;return!W.data.length||Array.isArray(W.data[0])?(W.data=W.data.map(xt),Bt=W.data.length):W.data=xt(W.data,0),I.header&&W.meta&&(W.meta.fields=U),gt+=Bt,W})()}function Rt(){return I.header&&U.length===0}function St(xt,Bt){return jt=xt,I.dynamicTypingFunction&&I.dynamicTyping[jt]===void 0&&(I.dynamicTyping[jt]=I.dynamicTypingFunction(jt)),(I.dynamicTyping[jt]||I.dynamicTyping)===!0?Bt==="true"||Bt==="TRUE"||Bt!=="false"&&Bt!=="FALSE"&&((function(Ut){if(N.test(Ut)){var Ft=parseFloat(Ut);if(J<Ft&&Ft<H)return!0}return!1})(Bt)?parseFloat(Bt):tt.test(Bt)?new Date(Bt):Bt===""?null:Bt):Bt;var jt}function Ct(xt,Bt,jt,Ut){var Ft={type:xt,code:Bt,message:jt};Ut!==void 0&&(Ft.row=Ut),W.errors.push(Ft)}this.parse=function(xt,Bt,jt){var Ut=I.quoteChar||'"';if(I.newline||(I.newline=(function(ft,rt){ft=ft.substring(0,1048576);var K=new RegExp(E(rt)+"([^]*?)"+E(rt),"gm"),Z=(ft=ft.replace(K,"")).split("\r"),ot=ft.split(`
`),kt=1<ot.length&&ot[0].length<Z[0].length;if(Z.length===1||kt)return`
`;for(var Mt=0,pt=0;pt<Z.length;pt++)Z[pt][0]===`
`&&Mt++;return Mt>=Z.length/2?`\r
`:"\r"})(xt,Ut)),Q=!1,I.delimiter)j(I.delimiter)&&(I.delimiter=I.delimiter(xt),W.meta.delimiter=I.delimiter);else{var Ft=(function(ft,rt,K,Z,ot){var kt,Mt,pt,Lt;ot=ot||[",","	","|",";",h.RECORD_SEP,h.UNIT_SEP];for(var It=0;It<ot.length;It++){var Et=ot[It],zt=0,Jt=0,Ht=0;pt=void 0;for(var we=new _({comments:Z,delimiter:Et,newline:rt,preview:10}).parse(ft),C=0;C<we.data.length;C++)if(K&&lt(we.data[C]))Ht++;else{var M=we.data[C].length;Jt+=M,pt!==void 0?0<M&&(zt+=Math.abs(M-pt),pt=M):pt=M}0<we.data.length&&(Jt/=we.data.length-Ht),(Mt===void 0||zt<=Mt)&&(Lt===void 0||Lt<Jt)&&1.99<Jt&&(Mt=zt,kt=Et,Lt=Jt)}return{successful:!!(I.delimiter=kt),bestDelimiter:kt}})(xt,I.newline,I.skipEmptyLines,I.comments,I.delimitersToGuess);Ft.successful?I.delimiter=Ft.bestDelimiter:(Q=!0,I.delimiter=h.DefaultDelimiter),W.meta.delimiter=I.delimiter}var L=D(I);return I.preview&&I.header&&L.preview++,O=xt,X=new _(L),W=X.parse(O,Bt,jt),ut(),nt?{meta:{paused:!0}}:W||{meta:{paused:!1}}},this.paused=function(){return nt},this.pause=function(){nt=!0,X.abort(),O=j(I.chunk)?"":O.substring(X.getCharIndex())},this.resume=function(){$.streamer._halted?(nt=!1,$.streamer.parseChunk(O,!0)):setTimeout($.resume,3)},this.aborted=function(){return Tt},this.abort=function(){Tt=!0,X.abort(),W.meta.aborted=!0,j(I.complete)&&I.complete(W),O=""}}function E(I){return I.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function _(I){var O,X=(I=I||{}).delimiter,Q=I.newline,H=I.comments,J=I.step,N=I.preview,tt=I.fastMode,$=O=I.quoteChar===void 0||I.quoteChar===null?'"':I.quoteChar;if(I.escapeChar!==void 0&&($=I.escapeChar),(typeof X!="string"||-1<h.BAD_DELIMITERS.indexOf(X))&&(X=","),H===X)throw new Error("Comment character same as delimiter");H===!0?H="#":(typeof H!="string"||-1<h.BAD_DELIMITERS.indexOf(H))&&(H=!1),Q!==`
`&&Q!=="\r"&&Q!==`\r
`&&(Q=`
`);var G=0,gt=!1;this.parse=function(nt,Tt,U){if(typeof nt!="string")throw new Error("Input must be a string");var W=nt.length,st=X.length,lt=Q.length,ut=H.length,Rt=j(J),St=[],Ct=[],xt=[],Bt=G=0;if(!nt)return z();if(I.header&&!Tt){var jt=nt.split(Q)[0].split(X),Ut=[],Ft={},L=!1;for(var ft in jt){var rt=jt[ft];j(I.transformHeader)&&(rt=I.transformHeader(rt,ft));var K=rt,Z=Ft[rt]||0;for(0<Z&&(L=!0,K=rt+"_"+Z),Ft[rt]=Z+1;Ut.includes(K);)K=K+"_"+Z;Ut.push(K)}if(L){var ot=nt.split(Q);ot[0]=Ut.join(X),nt=ot.join(Q)}}if(tt||tt!==!1&&nt.indexOf(O)===-1){for(var kt=nt.split(Q),Mt=0;Mt<kt.length;Mt++){if(xt=kt[Mt],G+=xt.length,Mt!==kt.length-1)G+=Q.length;else if(U)return z();if(!H||xt.substring(0,ut)!==H){if(Rt){if(St=[],Ht(xt.split(X)),et(),gt)return z()}else Ht(xt.split(X));if(N&&N<=Mt)return St=St.slice(0,N),z(!0)}}return z()}for(var pt=nt.indexOf(X,G),Lt=nt.indexOf(Q,G),It=new RegExp(E($)+E(O),"g"),Et=nt.indexOf(O,G);;)if(nt[G]!==O)if(H&&xt.length===0&&nt.substring(G,G+ut)===H){if(Lt===-1)return z();G=Lt+lt,Lt=nt.indexOf(Q,G),pt=nt.indexOf(X,G)}else if(pt!==-1&&(pt<Lt||Lt===-1))xt.push(nt.substring(G,pt)),G=pt+st,pt=nt.indexOf(X,G);else{if(Lt===-1)break;if(xt.push(nt.substring(G,Lt)),M(Lt+lt),Rt&&(et(),gt))return z();if(N&&St.length>=N)return z(!0)}else for(Et=G,G++;;){if((Et=nt.indexOf(O,Et+1))===-1)return U||Ct.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:St.length,index:G}),C();if(Et===W-1)return C(nt.substring(G,Et).replace(It,O));if(O!==$||nt[Et+1]!==$){if(O===$||Et===0||nt[Et-1]!==$){pt!==-1&&pt<Et+1&&(pt=nt.indexOf(X,Et+1)),Lt!==-1&&Lt<Et+1&&(Lt=nt.indexOf(Q,Et+1));var zt=we(Lt===-1?pt:Math.min(pt,Lt));if(nt.substr(Et+1+zt,st)===X){xt.push(nt.substring(G,Et).replace(It,O)),nt[G=Et+1+zt+st]!==O&&(Et=nt.indexOf(O,G)),pt=nt.indexOf(X,G),Lt=nt.indexOf(Q,G);break}var Jt=we(Lt);if(nt.substring(Et+1+Jt,Et+1+Jt+lt)===Q){if(xt.push(nt.substring(G,Et).replace(It,O)),M(Et+1+Jt+lt),pt=nt.indexOf(X,G),Et=nt.indexOf(O,G),Rt&&(et(),gt))return z();if(N&&St.length>=N)return z(!0);break}Ct.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:St.length,index:G}),Et++}}else Et++}return C();function Ht(dt){St.push(dt),Bt=G}function we(dt){var _t=0;if(dt!==-1){var Ot=nt.substring(Et+1,dt);Ot&&Ot.trim()===""&&(_t=Ot.length)}return _t}function C(dt){return U||(dt===void 0&&(dt=nt.substring(G)),xt.push(dt),G=W,Ht(xt),Rt&&et()),z()}function M(dt){G=dt,Ht(xt),xt=[],Lt=nt.indexOf(Q,G)}function z(dt){return{data:St,errors:Ct,meta:{delimiter:X,linebreak:Q,aborted:gt,truncated:!!dt,cursor:Bt+(Tt||0)}}}function et(){J(z()),St=[],Ct=[]}},this.abort=function(){gt=!0},this.getCharIndex=function(){return G}}function k(I){var O=I.data,X=o[O.workerId],Q=!1;if(O.error)X.userError(O.error,O.file);else if(O.results&&O.results.data){var H={abort:function(){Q=!0,T(O.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:R,resume:R};if(j(X.userStep)){for(var J=0;J<O.results.data.length&&(X.userStep({data:O.results.data[J],errors:O.results.errors,meta:O.results.meta},H),!Q);J++);delete O.results}else j(X.userChunk)&&(X.userChunk(O.results,H,O.file),delete O.results)}O.finished&&!Q&&T(O.workerId,O.results)}function T(I,O){var X=o[I];j(X.userComplete)&&X.userComplete(O),X.terminate(),delete o[I]}function R(){throw new Error("Not implemented.")}function D(I){if(typeof I!="object"||I===null)return I;var O=Array.isArray(I)?[]:{};for(var X in I)O[X]=D(I[X]);return O}function F(I,O){return function(){I.apply(O,arguments)}}function j(I){return typeof I=="function"}return r&&(n.onmessage=function(I){var O=I.data;if(h.WORKER_ID===void 0&&O&&(h.WORKER_ID=O.workerId),typeof O.input=="string")n.postMessage({workerId:h.WORKER_ID,results:h.parse(O.input,O.config),finished:!0});else if(n.File&&O.input instanceof File||O.input instanceof Object){var X=h.parse(O.input,O.config);X&&n.postMessage({workerId:h.WORKER_ID,results:X,finished:!0})}}),(p.prototype=Object.create(f.prototype)).constructor=p,(m.prototype=Object.create(f.prototype)).constructor=m,(y.prototype=Object.create(y.prototype)).constructor=y,(w.prototype=Object.create(f.prototype)).constructor=w,h})})(y6);var uQ=y6.exports;const dQ=NN(uQ),C1=({mainState:{currentDocument:s,config:t}})=>{const[e,n]=at.useState([]);return at.useEffect(()=>{var i;if(s!=null&&s.fileData){const r=dQ.parse(s.fileData,{delimiter:t?.csvDelimiter??","});!((i=r.errors)!=null&&i.length)&&r.data&&n(r.data)}},[s,t?.csvDelimiter]),e.length?A.jsx(fQ,{children:A.jsxs(pQ,{children:[A.jsx("thead",{children:A.jsx("tr",{children:e[0].map(i=>A.jsx("th",{children:i},i))})}),A.jsx("tbody",{children:e.slice(1,e.length).map(i=>A.jsx("tr",{children:i.map(r=>A.jsx("td",{children:r},r))},i.join("")))})]})}):null};C1.fileTypes=["csv","text/csv"];C1.weight=0;C1.fileLoader=JO;const fQ=de.div`
  width: 100%;
`,pQ=de.table`
  width: 100%;
  text-align: left;

  th,
  td {
    padding: 5px 10px;

    &:empty {
      display: none;
    }
  }
`,yC=s=>A.jsx(Oa,{...s});yC.fileTypes=["gif","image/gif"];yC.weight=0;const vC=({mainState:{currentDocument:s}})=>s?A.jsx(gQ,{id:"video-renderer",children:A.jsx(mQ,{controls:!0,src:s.uri})}):null;vC.fileTypes=["video/mp4","video/quicktime","video/x-msvideo"];vC.weight=0;const gQ=de.div`
  width: 100%;
`,mQ=de.video`
  width: 100%;
  height: 100%;
  border: 0;
`,bC=s=>A.jsx(Oa,{...s});bC.fileTypes=["webp","image/webp"];bC.weight=0;const v6=[eC,a1,nC,o1,gC,mC,_1,E1,C1,yC,vC,bC],yQ=at.forwardRef((s,t)=>{const{documents:e,theme:n}=s;if(!e)throw new Error("Please provide an array of documents to DocViewer!");return A.jsx(b$,{ref:t,pluginRenderers:v6,...s,children:A.jsx(Y9,{theme:n?{...pL,...n}:pL,children:A.jsxs(bQ,{id:"react-doc-viewer","data-testid":"react-doc-viewer",className:s.className,style:s.style,children:[A.jsx(q$,{}),A.jsx(eq,{})]})})})}),vQ=at.memo(yQ),bQ=de.div`
  display: flex;
  flex-direction: column;
  background: #ffffff;
  width: 100%;
  height: 100%;
`;Pa.workerSrc=new URL("/assets/pdf.worker.min-qwK7q_zL.mjs",import.meta.url).toString();const b6=["doc","docx","docm","dot","dotx","dotm","rtf"],xC=s=>s.toLowerCase().split(".").pop()||"",c2=s=>s.type.includes("pdf")||xC(s.name)==="pdf",x6=s=>b6.includes(xC(s.name)),h2=s=>s.type.startsWith("image/"),xQ=s=>h2(s)||c2(s)||x6(s),wQ=({onBack:s,poStatus:t,isHistoryView:e,attachments:n,onAttachmentsChange:i,onApprove:r})=>{const c=t==="approved"||e,[h,d]=at.useState(!1),[f,p]=at.useState(null),[m,y]=at.useState(!1),[w,b]=at.useState(!1),[E,_]=at.useState(!1),[k,T]=at.useState(!1),[R,D]=at.useState(!1),[F,j]=at.useState(!1),[I,O]=at.useState("loading"),X=Ue.useRef(null),Q=()=>{X.current?.click()},H=tt=>{const $=tt.target.files;if($&&$.length>0){const gt=Array.from($).map(nt=>({name:nt.name,size:(nt.size/(1024*1024)).toFixed(1)+" MB",date:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),type:nt.type,previewUrl:URL.createObjectURL(nt)}));i(nt=>[...nt,...gt])}},J=tt=>{tt.previewUrl&&xQ(tt)&&p({url:tt.previewUrl,type:tt.type,name:tt.name})},N=()=>{j(!0),O("loading"),setTimeout(()=>{O("success"),setTimeout(()=>{j(!1),r()},1500)},1500)};return A.jsxs("div",{className:"dashboard-container",style:{backgroundColor:"#fff",minHeight:"100vh",position:"relative",paddingBottom:"80px"},children:[A.jsxs("header",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",borderBottom:"1px solid #f0f0f0",backgroundColor:"#fff",position:"sticky",top:0,zIndex:10},children:[A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[A.jsx(Ov,{size:24,color:"#1a1a1a",onClick:s,style:{cursor:"pointer"}}),A.jsx("h2",{style:{fontSize:"18px",fontWeight:600,color:"#1a1a1a"},children:"Purchase Order"})]}),A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[!c&&A.jsx("button",{onClick:N,style:{backgroundColor:"#ef4444",color:"#fff",border:"none",borderRadius:"16px",padding:"6px 10px",fontSize:"12px",fontWeight:700,cursor:"pointer"},children:"Approve Now"}),A.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[A.jsx(ho,{size:22,color:"#1a1a1a",onClick:()=>d(!0),style:{cursor:"pointer"}}),n.length>0&&A.jsx("span",{style:{position:"absolute",top:"-6px",right:"-6px",backgroundColor:"#ef4444",color:"#fff",fontSize:"10px",fontWeight:700,height:"14px",minWidth:"14px",borderRadius:"7px",display:"flex",alignItems:"center",justifyContent:"center",padding:"0 2px"},children:n.length})]}),A.jsxs("div",{style:{position:"relative"},children:[A.jsx(Ks,{size:22,color:"#1a1a1a",style:{cursor:"pointer"},onClick:()=>_(!E)}),E&&A.jsxs(A.Fragment,{children:[A.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:49},onClick:()=>_(!1)}),A.jsx("div",{style:{position:"absolute",top:"100%",right:0,width:"200px",backgroundColor:"#fff",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:50,marginTop:"8px",border:"1px solid #f0f0f0",overflow:"hidden"},children:(c?[{label:"View Printable PO"},{label:"Add Record to Favorites",separator:!0}]:[{label:"Hold"},{label:"Approve"},{label:"Reject"},{label:"View Printable PO"},{label:"Add Record to Favorites",separator:!0}]).map((tt,$)=>A.jsx("div",{style:{padding:"12px 16px",fontSize:"14px",color:"#333",cursor:"pointer",borderTop:tt.separator?"1px solid #f0f0f0":"none",marginBottom:(tt.separator,"0"),backgroundColor:"#fff"},onClick:()=>{console.log(`Action: ${tt.label}`),_(!1),tt.label==="Approve"&&!c&&D(!0),tt.label==="View Printable PO"&&T(!0)},children:tt.label},$))})]})]})]})]}),A.jsxs("div",{className:"details-list",children:[A.jsxs("div",{style:{display:"flex",gap:"16px"},children:[A.jsx("div",{style:{flex:1},children:A.jsx(hr,{label:"Order No.:",value:"PO00000000008829"})}),A.jsx("div",{style:{flex:1},children:A.jsx(hr,{label:"Date:",value:"2/3/2026"})})]}),A.jsxs("div",{style:{display:"flex",gap:"16px"},children:[A.jsx("div",{style:{flex:1},children:A.jsx(hr,{label:"Vendor ID:",value:"S00000000000740"})}),A.jsx("div",{style:{flex:1},children:A.jsx(hr,{label:"Currency:",value:"PHP"})})]}),A.jsxs("div",{style:{display:"flex",gap:"16px"},children:[A.jsx("div",{style:{flex:1},children:A.jsx(hr,{label:"Terms:",value:"120 Days"})}),A.jsx("div",{style:{flex:1},children:A.jsx(hr,{label:"Promised Date:",value:"2/3/2026"})})]}),A.jsxs("div",{style:{display:"flex",gap:"16px"},children:[A.jsx("div",{style:{flex:1},children:A.jsx(hr,{label:"Shipment Mode:",value:"Delivery"})}),A.jsx("div",{style:{flex:1},children:A.jsx(hr,{label:"Request Category:",value:"MATERIALS"})})]}),A.jsx(hr,{label:"TO:",value:`TRUSALES CORPORATION
241-926-096-001
4TH ST., HAPPY VALLEY, LABANGON 6000
CITY OF CEBU CEBU PHILIPPINES
Philippines`}),A.jsx(hr,{label:"SHIP TO:",value:`QM BUILDERS 
135-526-837-000
F. Gica St. Poblacion CentraL
Dumanjug, Cebu
Cebu 6035
Philippines
Attn: Greymark Faunillan`})]}),A.jsxs("div",{style:{position:"fixed",bottom:0,left:"50%",transform:"translateX(-50%)",width:"100%",maxWidth:"480px",backgroundColor:"#fff",borderTop:"1px solid #e5e5e5",padding:"12px 16px",display:"flex",gap:"12px",zIndex:40,boxShadow:"0 -2px 10px rgba(0,0,0,0.05)"},children:[A.jsx("button",{style:{flex:1,padding:"12px",borderRadius:"8px",backgroundColor:"#f46464ff",color:"#1f2937",border:"none",fontSize:"13px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",whiteSpace:"normal",lineHeight:1.2},onClick:()=>y(!0),children:"Description & Item details"}),A.jsx("button",{style:{flex:1,padding:"12px",borderRadius:"8px",backgroundColor:"#f46464ff",color:"#1f2937",border:"none",fontSize:"13px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",whiteSpace:"normal",lineHeight:1.2},onClick:()=>b(!0),children:"Signatories"})]}),h&&A.jsxs(A.Fragment,{children:[A.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:50},onClick:()=>d(!1)}),A.jsxs("div",{style:{position:"fixed",bottom:0,left:0,right:0,backgroundColor:"#fff",borderRadius:"16px 16px 0 0",padding:"20px",zIndex:60,boxShadow:"0 -4px 12px rgba(0,0,0,0.1)",maxHeight:"80vh",display:"flex",flexDirection:"column",animation:"slideUp 0.3s ease-out"},children:[A.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[A.jsxs("h3",{style:{fontSize:"18px",margin:0},children:["Attachments ",n.length>0&&A.jsx("span",{style:{color:"#666"},children:n.length})]}),A.jsxs("div",{style:{display:"flex",gap:"16px"},children:[A.jsx(Ej,{size:20,color:"#666"}),A.jsx(Ks,{size:20,color:"#666"})]})]}),A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",color:"#888",fontSize:"13px",marginBottom:"20px"},children:["Sort By ",A.jsx(ej,{size:14})]}),A.jsx("div",{style:{flex:1,overflowY:"auto",marginBottom:"20px"},children:n.length===0?A.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"16px",padding:"40px 0"},children:[A.jsx("div",{style:{width:"64px",height:"80px",border:"2px dashed #ccc",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:A.jsx(Fm,{size:32,color:"#ccc"})}),A.jsx("span",{style:{color:"#888",fontSize:"14px"},children:"Select existing file or use camera"})]}):A.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"12px"},children:n.map((tt,$)=>A.jsxs("div",{onClick:()=>J(tt),style:{cursor:"pointer",border:"1px solid #e5e5e5",borderRadius:"12px",padding:"12px",display:"flex",flexDirection:"column",justifyContent:"space-between",textAlign:"left",aspectRatio:"0.85",backgroundColor:"#fff",position:"relative",overflow:"hidden"},children:[A.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"12px",overflow:"hidden",width:"100%"},children:h2(tt)&&tt.previewUrl?A.jsx("img",{src:tt.previewUrl,alt:tt.name,style:{width:"100%",height:"100%",objectFit:"contain",borderRadius:"4px"}}):c2(tt)?A.jsxs("div",{style:{width:"56px",height:"68px",borderRadius:"10px",backgroundColor:"#fee2e2",border:"1px solid #fca5a5",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:[A.jsx(Fm,{size:30,color:"#dc2626",strokeWidth:2}),A.jsx("span",{style:{position:"absolute",bottom:"-8px",backgroundColor:"#dc2626",color:"#fff",fontSize:"9px",fontWeight:700,borderRadius:"8px",padding:"1px 6px",letterSpacing:"0.4px"},children:"PDF"})]}):x6(tt)?A.jsxs("div",{style:{width:"56px",height:"68px",borderRadius:"10px",backgroundColor:"#dbeafe",border:"1px solid #93c5fd",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:[A.jsx(Fm,{size:30,color:"#1d4ed8",strokeWidth:2}),A.jsx("span",{style:{position:"absolute",bottom:"-8px",backgroundColor:"#1d4ed8",color:"#fff",fontSize:"10px",fontWeight:700,borderRadius:"8px",padding:"1px 8px",letterSpacing:"0.4px"},children:"W"})]}):A.jsx(Fm,{size:42,color:"#6b7280",fill:"#f3f4f6",strokeWidth:1.5})}),A.jsxs("div",{style:{width:"100%"},children:[A.jsx("div",{style:{fontSize:"13px",fontWeight:500,color:"#1a1a1a",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginBottom:"4px"},children:tt.name}),A.jsxs("div",{style:{fontSize:"11px",color:"#666"},children:[tt.size,", ",tt.date]})]})]},$))})}),A.jsxs("div",{style:{display:"flex",gap:"16px"},children:[A.jsx("input",{type:"file",ref:X,style:{display:"none"},onChange:H,accept:"image/*,.pdf,.doc,.docx,.docm,.dot,.dotx,.dotm,.rtf,.txt",multiple:!0}),A.jsxs("button",{style:pD,onClick:Q,children:[A.jsx(Gj,{size:18})," Upload"]}),A.jsxs("button",{style:pD,children:[A.jsx(ij,{size:18})," Camera"]})]})]})]}),F&&A.jsxs(A.Fragment,{children:[A.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.6)",zIndex:90,display:"flex",alignItems:"center",justifyContent:"center"},children:A.jsx("div",{style:{backgroundColor:"#fff",borderRadius:"16px",padding:"40px",display:"flex",flexDirection:"column",alignItems:"center",gap:"20px",minWidth:"200px"},children:I==="loading"?A.jsxs(A.Fragment,{children:[A.jsx("div",{style:{width:"60px",height:"60px",border:"4px solid #f3f4f6",borderTop:"4px solid #ef4444",borderRadius:"50%",animation:"spin 1s linear infinite"}}),A.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#1a1a1a"},children:"Approving..."})]}):A.jsxs(A.Fragment,{children:[A.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"50%",backgroundColor:"#10b981",display:"flex",alignItems:"center",justifyContent:"center",animation:"scaleIn 0.3s ease-out"},children:A.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:A.jsx("polyline",{points:"20 6 9 17 4 12"})})}),A.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#10b981"},children:"Approved Successfully!"})]})})}),A.jsx("style",{children:`
                        @keyframes spin {
                            from { transform: rotate(0deg); }
                            to { transform: rotate(360deg); }
                        }
                        @keyframes scaleIn {
                            from { transform: scale(0); }
                            to { transform: scale(1); }
                        }
                    `})]}),R&&A.jsxs(A.Fragment,{children:[A.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.45)",zIndex:80},onClick:()=>D(!1)}),A.jsxs("div",{style:{position:"fixed",left:"50%",top:"50%",transform:"translate(-50%, -50%)",width:"90%",maxWidth:"360px",backgroundColor:"#fff",borderRadius:"12px",padding:"16px",zIndex:81,boxShadow:"0 10px 30px rgba(0,0,0,0.2)"},children:[A.jsx("h3",{style:{fontSize:"16px",margin:"0 0 8px 0",color:"#1a1a1a"},children:"Approve Purchase Order?"}),A.jsx("p",{style:{fontSize:"13px",color:"#666",margin:0},children:"Approved by: ALLAN QUIRANTE"}),A.jsx("p",{style:{fontSize:"13px",color:"#666",margin:"4px 0 14px 0"},children:"Status: Pending for Approval (Allan Quirante)"}),A.jsxs("div",{style:{display:"flex",gap:"10px"},children:[A.jsx("button",{onClick:()=>D(!1),style:{flex:1,padding:"10px",borderRadius:"8px",border:"1px solid #e5e5e5",backgroundColor:"#fff",color:"#666",fontSize:"13px",fontWeight:600},children:"Cancel"}),A.jsx("button",{onClick:N,style:{flex:1,padding:"10px",borderRadius:"8px",border:"none",backgroundColor:"#ef4444",color:"#fff",fontSize:"13px",fontWeight:700},children:"Approve Now"})]})]})]}),m&&A.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"#f9f9f9",zIndex:60,display:"flex",flexDirection:"column",animation:"fadeIn 0.2s ease-out"},children:[A.jsxs("div",{style:{padding:"16px",backgroundColor:"#fff",borderBottom:"1px solid #e5e5e5",display:"flex",alignItems:"center",gap:"12px"},children:[A.jsx(rs,{size:24,color:"#1a1a1a",onClick:()=>y(!1),style:{cursor:"pointer"}}),A.jsx("h2",{style:{fontSize:"18px",fontWeight:600,margin:0},children:"Item Details"})]}),A.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"16px"},children:[A.jsxs("div",{style:{marginBottom:"24px"},children:[A.jsx("div",{style:{fontSize:"13px",color:"#666",marginBottom:"8px",textTransform:"uppercase",letterSpacing:"0.5px",fontWeight:600},children:"Description"}),A.jsx("div",{style:{fontSize:"15px",color:"#1a1a1a",fontWeight:500},children:"for approval purpose to test in mobile ui"})]}),A.jsx("div",{style:{backgroundColor:"#fff",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.05)",border:"1px solid #000",marginBottom:"24px",overflowX:"auto"},children:A.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"13px",minWidth:"600px"},children:[A.jsx("thead",{children:A.jsxs("tr",{style:{backgroundColor:"#fff",borderBottom:"1px solid #000"},children:[A.jsx("th",{style:{padding:"12px",textAlign:"left",fontWeight:600,color:"#000",borderRight:"1px solid #000"},children:"PROJECT"}),A.jsx("th",{style:{padding:"12px",textAlign:"left",fontWeight:600,color:"#000",borderRight:"1px solid #000"},children:"INVENTORY ID"}),A.jsx("th",{style:{padding:"12px",textAlign:"left",fontWeight:600,color:"#000",borderRight:"1px solid #000"},children:"ITEM"}),A.jsx("th",{style:{padding:"12px",textAlign:"center",fontWeight:600,color:"#000",borderRight:"1px solid #000"},children:"QTY."}),A.jsx("th",{style:{padding:"12px",textAlign:"center",fontWeight:600,color:"#000",borderRight:"1px solid #000"},children:"UOM"}),A.jsx("th",{style:{padding:"12px",textAlign:"right",fontWeight:600,color:"#000",borderRight:"1px solid #000"},children:"UNIT PRICE"}),A.jsx("th",{style:{padding:"12px",textAlign:"right",fontWeight:600,color:"#000"},children:"AMOUNT"})]})}),A.jsx("tbody",{children:A.jsxs("tr",{children:[A.jsx("td",{style:{padding:"12px",color:"#000",borderRight:"1px solid #000",borderBottom:"1px solid #000"},children:"25H00120"}),A.jsx("td",{style:{padding:"12px",color:"#000",borderRight:"1px solid #000",borderBottom:"1px solid #000"},children:"INV000194"}),A.jsx("td",{style:{padding:"12px",color:"#000",borderRight:"1px solid #000",borderBottom:"1px solid #000"},children:"TIE WIRE #16"}),A.jsx("td",{style:{padding:"12px",textAlign:"center",color:"#000",borderRight:"1px solid #000",borderBottom:"1px solid #000"},children:"5.00"}),A.jsx("td",{style:{padding:"12px",textAlign:"center",color:"#000",borderRight:"1px solid #000",borderBottom:"1px solid #000"},children:"ROLL"}),A.jsx("td",{style:{padding:"12px",textAlign:"right",color:"#000",borderRight:"1px solid #000",borderBottom:"1px solid #000"},children:"1,196.000"}),A.jsx("td",{style:{padding:"12px",textAlign:"right",color:"#000",borderBottom:"1px solid #000"},children:"5,980.00"})]})})]})}),A.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"24px",marginBottom:"24px",fontSize:"12px",color:"#666"},children:[A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[A.jsx(rs,{size:14})," Swipe left to view back"]}),A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:["Swipe right to view details ",A.jsx(xD,{size:14})]})]}),A.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"12px",padding:"16px",border:"1px solid #f0f0f0"},children:[A.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[A.jsx("span",{style:{fontSize:"14px",color:"#666"},children:"Gross Amount"}),A.jsx("span",{style:{fontSize:"14px",fontWeight:500},children:"5,980.00"})]}),A.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"12px"},children:[A.jsx("span",{style:{fontSize:"14px",color:"#666"},children:"Less Discount"}),A.jsx("span",{style:{fontSize:"14px",fontWeight:500},children:"0.00"})]}),A.jsx("div",{style:{height:"1px",backgroundColor:"#e5e5e5",margin:"0 -16px 12px -16px"}}),A.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[A.jsx("span",{style:{fontSize:"15px",fontWeight:600,color:"#1a1a1a"},children:"Net Amount"}),A.jsx("span",{style:{fontSize:"18px",fontWeight:700,color:"#059669"},children:"5,980.00"})]}),A.jsx("div",{style:{fontSize:"13px",color:"#555",fontStyle:"italic",borderTop:"1px dashed #e5e5e5",paddingTop:"8px",textAlign:"right"},children:"Amount in words: Five Thousand Nine Hundred Eighty Pesos Only"})]})]})]}),w&&A.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"#fff",zIndex:60,display:"flex",flexDirection:"column",animation:"fadeIn 0.2s ease-out"},children:[A.jsxs("div",{style:{padding:"16px",backgroundColor:"#fff",borderBottom:"1px solid #e5e5e5",display:"flex",alignItems:"center",gap:"12px"},children:[A.jsx(rs,{size:24,color:"#1a1a1a",onClick:()=>b(!1),style:{cursor:"pointer"}}),A.jsx("h2",{style:{fontSize:"18px",fontWeight:600,margin:0},children:"Signatories"})]}),A.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"24px 16px",display:"flex",flexDirection:"column",gap:"40px"},children:[A.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:A.jsxs("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"space-between"},children:[A.jsx("span",{style:{fontSize:"15px",fontWeight:600,color:"#1a1a1a",paddingBottom:"25px"},children:"Prepared by:"}),A.jsxs("div",{style:{flex:1,marginLeft:"16px",display:"flex",flexDirection:"column",alignItems:"center"},children:[A.jsx("span",{style:{fontSize:"13px",color:"#1a1a1a",marginBottom:"4px"},children:"Signed: 2/3/2026 1:23:31 PM"}),A.jsx("div",{style:{height:"1px",backgroundColor:"#000",width:"100%",marginBottom:"8px"}}),A.jsx("span",{style:{fontSize:"15px",fontWeight:700,color:"#1a1a1a",textTransform:"uppercase"},children:"ED CHRISTOPHER ESTOY"})]})]})}),A.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:A.jsxs("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"space-between"},children:[A.jsx("span",{style:{fontSize:"15px",fontWeight:600,color:"#1a1a1a",paddingBottom:"50px"},children:"Approved by:"}),A.jsxs("div",{style:{flex:1,marginLeft:"16px",display:"flex",flexDirection:"column",alignItems:"center"},children:[c?A.jsx("span",{style:{fontSize:"13px",color:"#1a1a1a",marginBottom:"4px"},children:"Signed: 2/3/2026 1:30:12 PM"}):A.jsx("div",{style:{height:"24px"}}),A.jsx("div",{style:{height:"1px",backgroundColor:"#000",width:"100%",marginBottom:"8px"}}),A.jsx("span",{style:{fontSize:"15px",fontWeight:700,color:"#1a1a1a",textTransform:"uppercase"},children:"ALLAN QUIRANTE"}),c?A.jsx("span",{style:{fontSize:"13px",color:"#059669",marginTop:"4px",fontStyle:"italic"},children:"Approved by Allan Quirante"}):A.jsx("span",{style:{fontSize:"13px",color:"#dc2626",marginTop:"4px",fontStyle:"italic"},children:"Pending for Approval: Allan Quirante"})]})]})})]})]}),k&&A.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"#000",zIndex:70,display:"flex",flexDirection:"column",animation:"fadeIn 0.2s ease-out"},children:[A.jsxs("div",{style:{padding:"16px",backgroundColor:"#fff",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid #e5e5e5"},children:[A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[A.jsx(rs,{size:24,color:"#1a1a1a",onClick:()=>T(!1),style:{cursor:"pointer"}}),A.jsx("h2",{style:{fontSize:"18px",fontWeight:600,margin:0},children:"Printable PO"})]}),A.jsx(RR,{size:20,color:"#1a1a1a"})]}),A.jsx("div",{style:{flex:1,overflow:"auto",display:"flex",justifyContent:"center",padding:"16px",backgroundColor:"#525659"},children:A.jsx("img",{src:"./printable_po.png",alt:"Printable Purchase Order",style:{maxWidth:"100%",height:"auto",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",objectFit:"contain"}})})]}),f&&A.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"#fff",zIndex:100,display:"flex",flexDirection:"column"},onClick:()=>p(null),children:[A.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",backgroundColor:"#fff",borderBottom:"1px solid #e0e0e0",color:"#1a1a1a",height:"56px",boxSizing:"border-box"},onClick:tt=>tt.stopPropagation(),children:[A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",flex:1,overflow:"hidden"},children:[A.jsx(rs,{size:24,color:"#1a1a1a",onClick:()=>p(null),style:{cursor:"pointer"}}),A.jsx("span",{style:{fontSize:"18px",fontWeight:500,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:f.name})]}),A.jsxs("div",{style:{display:"flex",gap:"16px"},children:[A.jsx(RR,{size:24,color:"#1a1a1a"}),A.jsx(Ks,{size:24,color:"#1a1a1a"})]})]}),A.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",backgroundColor:"#f5f5f5",position:"relative"},children:h2(f)?A.jsx("img",{src:f.url,alt:"Preview",style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"},onClick:tt=>tt.stopPropagation()}):c2(f)?A.jsx(SQ,{file:f}):A.jsx(AQ,{file:f})})]})]})},AQ=({file:s})=>{const t=xC(s.name),e=b6.includes(t),n=["docx","docm","dotx","dotm"].includes(t),[i,r]=at.useState(!0),[o,c]=at.useState(null),h=Ue.useRef(null);return e?(at.useEffect(()=>{if(!n||!h.current)return;let d=!0;return r(!0),c(null),(async()=>{try{const m=await(await fetch(s.url)).blob();if(!d||!h.current)return;h.current.innerHTML="",await AF(m,h.current,void 0,{inWrapper:!1,ignoreWidth:!0,ignoreHeight:!0}),d&&r(!1)}catch(p){console.error("Word preview error:",p),d&&(c("This Word file could not be rendered in-app."),r(!1))}})(),()=>{d=!1}},[s.url,t,n]),n?A.jsxs("div",{style:{width:"100%",height:"100%",position:"relative",overflowY:"auto",backgroundColor:"#fff"},onClick:d=>d.stopPropagation(),children:[i&&A.jsxs("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"12px",backgroundColor:"#fff",zIndex:10},children:[A.jsx(ZA,{className:"animate-spin",size:32,color:"#3b82f6"}),A.jsx("span",{style:{color:"#666",fontSize:"14px"},children:"Opening Word document..."})]}),o?A.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:A.jsxs("div",{style:{textAlign:"center"},children:[A.jsx("div",{style:{fontSize:"15px",fontWeight:600,color:"#333",marginBottom:"6px"},children:o}),A.jsx("div",{style:{fontSize:"13px",color:"#666"},children:"Try another Word file format such as `.docx`."})]})}):A.jsxs(A.Fragment,{children:[A.jsx("div",{ref:h,style:{width:"100%",minHeight:"100%",padding:"12px",backgroundColor:"#fff"}}),A.jsx("style",{children:`
                            .docx {
                                width: 100% !important;
                                max-width: 100% !important;
                                min-height: auto !important;
                                padding: 16px !important;
                                margin: 0 !important;
                                box-sizing: border-box !important;
                                overflow-wrap: anywhere !important;
                            }
                            .docx section {
                                width: 100% !important;
                                max-width: 100% !important;
                                min-height: auto !important;
                                padding: 0 !important;
                                margin: 0 !important;
                                box-sizing: border-box !important;
                            }
                            .docx article,
                            .docx p,
                            .docx span,
                            .docx table {
                                max-width: 100% !important;
                                word-break: break-word !important;
                                overflow-wrap: anywhere !important;
                            }
                            .docx img {
                                max-width: 100% !important;
                                height: auto !important;
                            }
                        `})]})]}):A.jsx("div",{style:{width:"100%",height:"100%",backgroundColor:"#f5f5f5"},onClick:d=>d.stopPropagation(),children:A.jsx(vQ,{documents:[{uri:s.url,fileName:s.name,fileType:t}],pluginRenderers:v6,config:{header:{disableHeader:!0,disableFileName:!0,retainURLParams:!1}},style:{width:"100%",height:"100%"}})})):A.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},onClick:d=>d.stopPropagation(),children:A.jsxs("div",{style:{textAlign:"center"},children:[A.jsx("div",{style:{fontSize:"16px",fontWeight:500,color:"#333"},children:"Cannot preview this file type"}),A.jsx("div",{style:{fontSize:"14px",color:"#666"},children:"Only PDF and Word files are supported in in-app preview."})]})})},SQ=({file:s})=>{const[t,e]=at.useState(null),[n,i]=at.useState(!0);function r({numPages:o}){e(o),i(!1)}return A.jsxs("div",{style:{width:"100%",height:"100%",overflowY:"auto",display:"flex",flexDirection:"column",alignItems:"center",padding:"16px"},onClick:o=>o.stopPropagation(),children:[n&&A.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"12px",marginTop:"40px"},children:[A.jsx(ZA,{className:"animate-spin",size:32,color:"#3b82f6"}),A.jsx("span",{style:{color:"#666",fontSize:"14px"},children:"Loading PDF..."})]}),A.jsx(G8,{file:s.url,onLoadSuccess:r,loading:A.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"12px",marginTop:"40px"},children:[A.jsx(ZA,{className:"animate-spin",size:32,color:"#3b82f6"}),A.jsx("span",{style:{color:"#666",fontSize:"14px"},children:"Loading PDF..."})]}),error:A.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#ef4444"},children:A.jsx("p",{children:"Failed to load PDF."})}),children:t&&Array.from(new Array(t),(o,c)=>A.jsx(tU,{pageNumber:c+1,width:window.innerWidth>600?600:window.innerWidth-40,renderTextLayer:!1,renderAnnotationLayer:!1,className:"pdf-page"},`page_${c+1}`))}),A.jsx("style",{children:`
                .pdf-page canvas {
                    margin-bottom: 20px;
                    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
                    border-radius: 4px;
                }
                .animate-spin {
                    animation: spin 1s linear infinite;
                }
                @keyframes spin {
                    from { transform: rotate(0deg); }
                    to { transform: rotate(360deg); }
                }
            `})]})},pD={flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",backgroundColor:"#dbeafe",color:"#000",padding:"12px",borderRadius:"24px",border:"none",fontSize:"15px",fontWeight:500,cursor:"pointer"},hr=({label:s,value:t,hasDropdown:e})=>A.jsxs("div",{style:{padding:"16px",borderBottom:"1px solid #f0f0f0",display:"flex",flexDirection:"column",gap:"4px"},children:[A.jsx("div",{style:{fontSize:"13px",color:"#888"},children:s}),A.jsxs("div",{style:{fontSize:"15px",color:"#1a1a1a",display:"flex",justifyContent:"space-between",alignItems:"center",whiteSpace:"pre-line"},children:[t,e&&A.jsx(wD,{size:16,color:"#666"})]})]});Pa.workerSrc=new URL("/assets/pdf.worker.min-qwK7q_zL.mjs",import.meta.url).toString();const _Q=["doc","docx","docm","dot","dotx","dotm","rtf"],w6=s=>s.toLowerCase().split(".").pop()||"",A6=s=>s.type.includes("pdf")||w6(s.name)==="pdf",EQ=s=>_Q.includes(w6(s.name)),S6=s=>s.type.startsWith("image/"),CQ=s=>S6(s)||A6(s)||EQ(s),wl=({label:s,onClick:t})=>A.jsx("button",{onClick:t,style:{padding:"16px 0",backgroundColor:"transparent",border:"none",borderBottom:"1px solid #f0f0f0",fontSize:"15px",color:"#1a1a1a",textAlign:"left",cursor:"pointer",fontWeight:400},children:s}),gD=({onBack:s,isHistoryView:t,isPrepayment:e,onNavigateToPO:n,onApproveBill:i,attachments:r=[],onAttachmentsChange:o})=>{const[h,d]=Ue.useState(""),[f,p]=Ue.useState(!1),[m,y]=Ue.useState(!1),[w,b]=Ue.useState(!1),[E,_]=Ue.useState(!1),[k,T]=Ue.useState(!1),[R,D]=Ue.useState(!1),[F,j]=Ue.useState(!1),[I,O]=Ue.useState(null),[X,Q]=Ue.useState(null),[H,J]=Ue.useState(!1),[N,tt]=Ue.useState(!1),[$,G]=Ue.useState(null),[gt,nt]=Ue.useState(!1),[Tt,U]=Ue.useState("loading"),W=Ue.useRef(null),st=h.trim().length>0,lt=()=>{nt(!0),U("loading"),setTimeout(()=>{U("success"),setTimeout(()=>{nt(!1),i?.()},1500)},1500)},ut=Ct=>{Ct.previewUrl&&CQ(Ct)&&G({url:Ct.previewUrl,type:Ct.type,name:Ct.name})},Rt=()=>{W.current?.click()},St=Ct=>{const xt=Ct.target.files;if(xt&&xt.length>0&&o){const jt=Array.from(xt).map(Ut=>({name:Ut.name,size:(Ut.size/(1024*1024)).toFixed(1)+" MB",date:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),type:Ut.type,previewUrl:URL.createObjectURL(Ut)}));o(Ut=>[...Ut,...jt])}};return A.jsxs("div",{className:"dashboard-container",style:{backgroundColor:"#fff",minHeight:"100vh",position:"relative",paddingBottom:"84px"},children:[A.jsxs("header",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",borderBottom:"1px solid #f0f0f0",backgroundColor:"#fff",position:"sticky",top:0,zIndex:10},children:[A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[A.jsx(Ov,{size:24,color:"#1a1a1a",onClick:s,style:{cursor:"pointer"}}),A.jsx("h2",{style:{fontSize:"18px",fontWeight:600,color:"#1a1a1a"},children:e?"Prepayment":"Bills and Adjustments"})]}),A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"14px"},children:[!t&&A.jsx("button",{onClick:lt,style:{backgroundColor:"#ef4444",color:"#fff",border:"none",borderRadius:"16px",padding:"6px 10px",fontSize:"12px",fontWeight:700,cursor:"pointer"},children:"Approve Now"}),A.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[A.jsx(ho,{size:22,color:"#1a1a1a",onClick:()=>tt(!0),style:{cursor:"pointer"}}),r.length>0&&A.jsx("span",{style:{position:"absolute",top:"-6px",right:"-6px",backgroundColor:"#ef4444",color:"#fff",fontSize:"10px",fontWeight:700,height:"14px",minWidth:"14px",borderRadius:"7px",display:"flex",alignItems:"center",justifyContent:"center",padding:"0 2px"},children:r.length})]}),A.jsxs("div",{style:{position:"relative"},children:[A.jsx(Ks,{size:22,color:"#1a1a1a",style:{cursor:"pointer"},onClick:()=>J(!H)}),H&&A.jsxs(A.Fragment,{children:[A.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:49},onClick:()=>J(!1)}),A.jsxs("div",{style:{position:"absolute",top:"100%",right:0,width:"200px",backgroundColor:"#fff",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:50,marginTop:"8px",border:"1px solid #f0f0f0",overflow:"hidden"},children:[A.jsx("div",{style:{padding:"12px 16px",fontSize:"14px",color:"#333",cursor:"pointer",backgroundColor:"#fff"},onClick:()=>{console.log("Reject clicked"),J(!1)},children:"Reject"}),A.jsx("div",{style:{padding:"12px 16px",fontSize:"14px",color:"#333",cursor:"pointer",borderTop:"1px solid #f0f0f0",backgroundColor:"#fff"},onClick:()=>{console.log("Add Record to Favorites clicked"),J(!1)},children:"Add Record to Favorites"})]})]})]})]})]}),A.jsxs("div",{className:"details-list",children:[A.jsxs("div",{style:{display:"flex",gap:"16px"},children:[A.jsx("div",{style:{flex:1},children:A.jsx(Hs,{label:"Type:",value:e?"Prepayment":"Bill"})}),A.jsx("div",{style:{flex:1},children:A.jsx(Hs,{label:"Reference Nbr.",value:e?"AP0000000020286":"AP00000020285"})})]}),A.jsxs("div",{style:{display:"flex",gap:"16px"},children:[A.jsx("div",{style:{flex:1},children:A.jsx(Hs,{label:"Status:",value:t?"Balance":"Pending Approval"})}),A.jsx("div",{style:{flex:1},children:A.jsx(Hs,{label:"Date*",value:e?"Feb 11, 2026":"Feb 10, 2026"})})]}),A.jsxs("div",{style:{display:"flex",gap:"16px"},children:[A.jsx("div",{style:{flex:1},children:A.jsx(Hs,{label:"Vendor Ref*",value:"SI#2132"})}),A.jsx("div",{style:{flex:1},children:A.jsx(Hs,{label:"Description:",value:e?"test approval":"test"})})]}),A.jsx(Hs,{label:"Vendor*",value:e?"TRUSALES CORPORATION":"CEBU SEALTRUST AUTO SUPPLY"}),A.jsx(Hs,{label:"Vendor ID",value:e?"S0000000000740":"S0000000000023"}),A.jsxs("div",{style:{display:"flex",gap:"16px"},children:[A.jsx("div",{style:{flex:1},children:A.jsx(Hs,{label:"Currency*",value:"PHP"})}),A.jsx("div",{style:{flex:1},children:A.jsx(Hs,{label:"Terms*",value:"120 Days"})})]}),A.jsxs("div",{style:{display:"flex",gap:"16px"},children:[A.jsx("div",{style:{flex:1},children:A.jsx(mD,{label:"PO Number",value:e?"PO00000000008831":"PO00000008830",onClick:n})}),A.jsx("div",{style:{flex:1},children:A.jsx(mD,{label:"PO Receipt Nbr.",value:e?"PR00000000011089":"PR000000011088"})})]}),A.jsx(Hs,{label:"Amount:",value:e?"105,000.00":"535.72"}),A.jsxs("div",{style:{padding:"16px",borderBottom:"1px solid #f0f0f0",display:"flex",flexDirection:"column",gap:"6px"},children:[A.jsxs("button",{type:"button",onClick:()=>{y(!m),m||p(!0)},style:{width:"100%",textAlign:"left",background:st?"#fef3c7":"transparent",border:st?"1px solid #fcd34d":"none",borderRadius:st?"8px":0,padding:st?"8px 10px":0,display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer"},children:[A.jsxs("span",{style:{fontSize:"13px",color:st?"#b45309":"#888",fontWeight:st?700:400},children:["Notes:",st?" Filled":""]}),st&&A.jsx("span",{style:{width:"8px",height:"8px",borderRadius:"999px",backgroundColor:"#f59e0b",marginLeft:"8px",marginRight:"8px"}}),A.jsx(wD,{size:16,color:"#666",style:{transform:m?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"}})]}),m&&(f?A.jsx("textarea",{value:h,onChange:Ct=>d(Ct.target.value),onBlur:()=>{p(!1),y(!1)},onKeyDown:Ct=>{Ct.key==="Enter"&&!Ct.shiftKey&&(Ct.preventDefault(),p(!1),y(!1))},autoFocus:!0,rows:3,placeholder:"input notes here",style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"10px",fontSize:"14px",color:"#1a1a1a",resize:"vertical",outline:"none"}}):A.jsx("button",{type:"button",onClick:()=>p(!0),style:{width:"100%",textAlign:"left",background:"transparent",border:"1px dashed #d1d5db",borderRadius:"8px",padding:"10px",fontSize:"15px",color:"#1a1a1a",cursor:"text"},children:h||"input notes here"}))]})]}),A.jsxs("div",{style:{position:"fixed",bottom:0,left:"50%",transform:"translateX(-50%)",width:"100%",maxWidth:"480px",backgroundColor:"#fff",borderTop:"1px solid #e5e5e5",padding:"12px 16px",display:"flex",gap:"12px",zIndex:40,boxShadow:"0 -2px 10px rgba(0,0,0,0.05)"},children:[A.jsx("button",{style:KA,onClick:()=>b(!0),children:"Details"}),A.jsx("button",{style:KA,onClick:()=>_(!0),children:"Taxes"}),A.jsx("button",{style:KA,onClick:()=>D(!0),children:"Approvals"})]}),w&&A.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"#f9f9f9",zIndex:60,display:"flex",flexDirection:"column"},children:[A.jsxs("header",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",backgroundColor:"#fff",borderBottom:"1px solid #e5e5e5"},children:[A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[A.jsx(Ov,{size:24,color:"#1a1a1a",onClick:()=>b(!1),style:{cursor:"pointer"}}),A.jsx("h2",{style:{fontSize:"18px",fontWeight:600,margin:0},children:"Details"})]}),A.jsx(ho,{size:22,color:"#1a1a1a",style:{cursor:"pointer"}})]}),A.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"16px"},children:[A.jsx("div",{style:{backgroundColor:"#fff",borderRadius:"10px",border:"1px solid #e5e7eb",overflow:"hidden"},children:A.jsx("div",{style:{overflowX:"auto"},children:A.jsxs("table",{style:{width:"max-content",minWidth:"1700px",borderCollapse:"collapse"},children:[A.jsx("thead",{children:A.jsxs("tr",{style:{backgroundColor:"#f3f4f6"},children:[A.jsx("th",{style:Qi,children:"Branch*"}),A.jsx("th",{style:Qi,children:"Inventory ID"}),A.jsx("th",{style:Qi,children:"Transaction Descr."}),A.jsx("th",{style:Qi,children:"Qty"}),A.jsx("th",{style:Qi,children:"UOM"}),A.jsx("th",{style:Qi,children:"Unit Cost"}),A.jsx("th",{style:Qi,children:"Discount Amount"}),A.jsx("th",{style:Qi,children:"Project*"}),A.jsx("th",{style:Qi,children:"Project Task"}),A.jsx("th",{style:Qi,children:"Cost Code"}),A.jsx("th",{style:Qi,children:"Tax Category"}),A.jsx("th",{style:Qi,children:"PO Number"}),A.jsx("th",{style:Qi,children:"PO Receipt Nbr."})]})}),A.jsx("tbody",{children:A.jsxs("tr",{children:[A.jsx("td",{style:Ji,children:"ADC CONSTRUCTION"}),A.jsx("td",{style:Ji,children:"INV012642"}),A.jsx("td",{style:Ji,children:"Alternator Assy 6M60"}),A.jsx("td",{style:Ji,children:"10"}),A.jsx("td",{style:Ji,children:"PCS"}),A.jsx("td",{style:Ji,children:"10,500.000"}),A.jsx("td",{style:Ji,children:"0.00"}),A.jsx("td",{style:Ji,children:"25HO0135"}),A.jsx("td",{style:Ji,children:"A.1.1(6)"}),A.jsx("td",{style:Ji,children:"000-000"}),A.jsx("td",{style:Ji,children:"PDOMESTIC"}),A.jsx("td",{style:Ji,children:e?"PO00000000008831":"PO0000008830"}),A.jsx("td",{style:Ji,children:e?"PR00000000011089":"PR00000011088"})]})})]})})}),A.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"24px",marginTop:"24px",fontSize:"12px",color:"#666"},children:[A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[A.jsx(rs,{size:14})," Swipe left to view back"]}),A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:["Swipe right to view details ",A.jsx(xD,{size:14})]})]})]})]}),E&&A.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"#fff",zIndex:60,display:"flex",flexDirection:"column"},children:[A.jsxs("header",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",backgroundColor:"#fff",borderBottom:"1px solid #e5e5e5"},children:[A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[A.jsx(rs,{size:24,color:"#1a1a1a",onClick:()=>_(!1),style:{cursor:"pointer"}}),A.jsx("h2",{style:{fontSize:"18px",fontWeight:600,margin:0},children:"Taxes"})]}),A.jsx(Eu,{size:22,color:"#1a1a1a",style:{cursor:"pointer"}})]}),A.jsxs("div",{style:{flex:1,overflowY:"auto",backgroundColor:"#fff",position:"relative"},children:[A.jsxs("button",{onClick:()=>T(!0),style:{width:"100%",padding:"16px",display:"flex",alignItems:"center",gap:"8px",color:"#666",fontSize:"14px",backgroundColor:"transparent",border:"none",borderBottom:"1px solid #f0f0f0",cursor:"pointer",textAlign:"left"},children:[A.jsx("span",{children:"Sort By"}),A.jsx(Ks,{size:16,color:"#666",style:{transform:"rotate(90deg)"}})]}),A.jsxs("div",{children:[A.jsx(vD,{category:"PURCHINCPDOMESTIC01",leftAmount:"478.32",rightTop:"12.000000",rightBottom:"57.40",isExpanded:I==="PURCHINCPDOMESTIC01",onToggle:()=>O(I==="PURCHINCPDOMESTIC01"?null:"PURCHINCPDOMESTIC01")}),A.jsx(vD,{category:"PURCHINCPDOMESTIC04",leftAmount:"478.32",rightTop:"0.000000",rightBottom:"0.00",isExpanded:I==="PURCHINCPDOMESTIC04",onToggle:()=>O(I==="PURCHINCPDOMESTIC04"?null:"PURCHINCPDOMESTIC04")})]}),k&&A.jsxs(A.Fragment,{children:[A.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:70},onClick:()=>T(!1)}),A.jsxs("div",{style:{position:"fixed",bottom:0,left:0,right:0,backgroundColor:"#fff",borderRadius:"16px 16px 0 0",padding:"20px",zIndex:80,boxShadow:"0 -4px 12px rgba(0,0,0,0.1)",animation:"slideUp 0.3s ease-out"},children:[A.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[A.jsx("h3",{style:{fontSize:"18px",fontWeight:600,margin:0,color:"#1a1a1a"},children:"Sort By"}),A.jsx("button",{onClick:()=>T(!1),style:{backgroundColor:"transparent",border:"none",color:"#2563eb",fontSize:"15px",fontWeight:600,cursor:"pointer",padding:0},children:"RESET"})]}),A.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[A.jsx(wl,{label:"Tax ID",onClick:()=>T(!1)}),A.jsx(wl,{label:"Tax Rate",onClick:()=>T(!1)}),A.jsx(wl,{label:"Taxable Amount",onClick:()=>T(!1)}),A.jsx(wl,{label:"Tax Amount",onClick:()=>T(!1)})]})]})]})]})]}),R&&A.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"#fff",zIndex:60,display:"flex",flexDirection:"column"},children:[A.jsxs("header",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",backgroundColor:"#fff",borderBottom:"1px solid #e5e5e5"},children:[A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[A.jsx(rs,{size:24,color:"#1a1a1a",onClick:()=>D(!1),style:{cursor:"pointer"}}),A.jsx("h2",{style:{fontSize:"18px",fontWeight:600,margin:0},children:"Approvals"})]}),A.jsx(Eu,{size:22,color:"#1a1a1a",style:{cursor:"pointer"}})]}),A.jsxs("div",{style:{flex:1,overflowY:"auto",backgroundColor:"#fff",position:"relative"},children:[A.jsxs("button",{onClick:()=>j(!0),style:{width:"100%",padding:"16px",display:"flex",alignItems:"center",gap:"8px",color:"#666",fontSize:"14px",backgroundColor:"transparent",border:"none",borderBottom:"1px solid #f0f0f0",cursor:"pointer",textAlign:"left"},children:[A.jsx("span",{children:"Sort By"}),A.jsx(Ks,{size:16,color:"#666",style:{transform:"rotate(90deg)"}})]}),A.jsxs("div",{children:[A.jsx(yD,{name:"Jennylyn Calago",status:"Approved",date:"Feb 10, 2026",isExpanded:X==="jennylyn",onToggle:()=>Q(X==="jennylyn"?null:"jennylyn"),approvalDate:"Feb 10, 2026",workgroup:"",approvedBy:"Jennylyn Calago"}),A.jsx(yD,{name:"Allan Quirante",status:t?"Approved":"Pending for Approval",date:t?"Feb 10, 2026":"--/--/---",isExpanded:X==="allan",onToggle:()=>Q(X==="allan"?null:"allan"),approvalDate:t?"Feb 10, 2026":"",workgroup:"",approvedBy:t?"Allan Quirante":""})]}),F&&A.jsxs(A.Fragment,{children:[A.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:70},onClick:()=>j(!1)}),A.jsxs("div",{style:{position:"fixed",bottom:0,left:0,right:0,backgroundColor:"#fff",borderRadius:"16px 16px 0 0",padding:"20px",zIndex:80,boxShadow:"0 -4px 12px rgba(0,0,0,0.1)",animation:"slideUp 0.3s ease-out"},children:[A.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[A.jsx("h3",{style:{fontSize:"18px",fontWeight:600,margin:0,color:"#1a1a1a"},children:"Sort By"}),A.jsx("button",{onClick:()=>j(!1),style:{backgroundColor:"transparent",border:"none",color:"#2563eb",fontSize:"15px",fontWeight:600,cursor:"pointer",padding:0},children:"RESET"})]}),A.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[A.jsx(wl,{label:"Name",onClick:()=>j(!1)}),A.jsx(wl,{label:"Status",onClick:()=>j(!1)}),A.jsx(wl,{label:"Date",onClick:()=>j(!1)})]})]})]})]})]}),gt&&A.jsxs(A.Fragment,{children:[A.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.6)",zIndex:90,display:"flex",alignItems:"center",justifyContent:"center"},children:A.jsx("div",{style:{backgroundColor:"#fff",borderRadius:"16px",padding:"40px",display:"flex",flexDirection:"column",alignItems:"center",gap:"20px",minWidth:"200px"},children:Tt==="loading"?A.jsxs(A.Fragment,{children:[A.jsx("div",{style:{width:"60px",height:"60px",border:"4px solid #f3f4f6",borderTop:"4px solid #ef4444",borderRadius:"50%",animation:"spin 1s linear infinite"}}),A.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#1a1a1a"},children:"Approving..."})]}):A.jsxs(A.Fragment,{children:[A.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"50%",backgroundColor:"#10b981",display:"flex",alignItems:"center",justifyContent:"center",animation:"scaleIn 0.3s ease-out"},children:A.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:A.jsx("polyline",{points:"20 6 9 17 4 12"})})}),A.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#10b981"},children:"Approved Successfully!"})]})})}),A.jsx("style",{children:`
                        @keyframes spin {
                            from { transform: rotate(0deg); }
                            to { transform: rotate(360deg); }
                        }
                        @keyframes scaleIn {
                            from { transform: scale(0); }
                            to { transform: scale(1); }
                        }
                    `})]}),N&&A.jsxs(A.Fragment,{children:[A.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:50},onClick:()=>tt(!1)}),A.jsxs("div",{style:{position:"fixed",bottom:0,left:0,right:0,backgroundColor:"#fff",borderRadius:"16px 16px 0 0",padding:"20px",zIndex:60,boxShadow:"0 -4px 12px rgba(0,0,0,0.1)",maxHeight:"80vh",display:"flex",flexDirection:"column",animation:"slideUp 0.3s ease-out"},children:[A.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[A.jsxs("h3",{style:{fontSize:"18px",margin:0},children:["Attachments ",r.length>0&&A.jsx("span",{style:{color:"#666"},children:r.length})]}),A.jsx("div",{style:{display:"flex",gap:"16px"},children:A.jsx(Ks,{size:20,color:"#666"})})]}),A.jsx("div",{style:{flex:1,overflowY:"auto",marginBottom:"20px"},children:r.length===0?A.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"16px",padding:"40px 0"},children:[A.jsx("div",{style:{width:"64px",height:"80px",border:"2px dashed #ccc",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:A.jsx(ho,{size:32,color:"#ccc"})}),A.jsx("span",{style:{color:"#888",fontSize:"14px"},children:"Select existing file or use camera"})]}):A.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"12px"},children:r.map((Ct,xt)=>A.jsxs("div",{onClick:()=>ut(Ct),style:{cursor:"pointer",border:"1px solid #e5e5e5",borderRadius:"12px",padding:"12px",display:"flex",flexDirection:"column",justifyContent:"space-between",textAlign:"left",aspectRatio:"0.85",backgroundColor:"#fff",position:"relative",overflow:"hidden"},children:[A.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"12px",overflow:"hidden",width:"100%"},children:Ct.type.startsWith("image/")&&Ct.previewUrl?A.jsx("img",{src:Ct.previewUrl,alt:Ct.name,style:{width:"100%",height:"100%",objectFit:"contain",borderRadius:"4px"}}):Ct.type.includes("pdf")?A.jsxs("div",{style:{width:"56px",height:"68px",borderRadius:"10px",backgroundColor:"#fee2e2",border:"1px solid #fca5a5",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:[A.jsx(ho,{size:30,color:"#dc2626",strokeWidth:2}),A.jsx("span",{style:{position:"absolute",bottom:"-8px",backgroundColor:"#dc2626",color:"#fff",fontSize:"9px",fontWeight:700,borderRadius:"8px",padding:"1px 6px",letterSpacing:"0.4px"},children:"PDF"})]}):Ct.name.endsWith(".doc")||Ct.name.endsWith(".docx")?A.jsxs("div",{style:{width:"56px",height:"68px",borderRadius:"10px",backgroundColor:"#dbeafe",border:"1px solid #93c5fd",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:[A.jsx(ho,{size:30,color:"#1d4ed8",strokeWidth:2}),A.jsx("span",{style:{position:"absolute",bottom:"-8px",backgroundColor:"#1d4ed8",color:"#fff",fontSize:"10px",fontWeight:700,borderRadius:"8px",padding:"1px 8px",letterSpacing:"0.4px"},children:"W"})]}):A.jsx(ho,{size:42,color:"#6b7280",strokeWidth:1.5})}),A.jsxs("div",{style:{width:"100%"},children:[A.jsx("div",{style:{fontSize:"13px",fontWeight:500,color:"#1a1a1a",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginBottom:"4px"},children:Ct.name}),A.jsxs("div",{style:{fontSize:"11px",color:"#666"},children:[Ct.size,", ",Ct.date]})]})]},xt))})}),A.jsxs("div",{style:{display:"flex",gap:"16px"},children:[A.jsx("input",{type:"file",ref:W,style:{display:"none"},onChange:St,accept:"image/*,.pdf,.doc,.docx,.docm,.dot,.dotx,.dotm,.rtf,.txt",multiple:!0}),A.jsxs("button",{onClick:Rt,style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",backgroundColor:"#dbeafe",color:"#000",padding:"12px",borderRadius:"24px",border:"none",fontSize:"15px",fontWeight:500,cursor:"pointer"},children:[A.jsx(rs,{size:18,style:{transform:"rotate(-90deg)"}})," Upload"]}),A.jsxs("button",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",backgroundColor:"#dbeafe",color:"#000",padding:"12px",borderRadius:"24px",border:"none",fontSize:"15px",fontWeight:500,cursor:"pointer"},children:[A.jsx(Eu,{size:18})," Camera"]})]})]})]}),$&&A.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"#fff",zIndex:100,display:"flex",flexDirection:"column"},onClick:()=>G(null),children:[A.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",backgroundColor:"#fff",borderBottom:"1px solid #e0e0e0",color:"#1a1a1a",height:"56px",boxSizing:"border-box"},onClick:Ct=>Ct.stopPropagation(),children:[A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",flex:1,overflow:"hidden"},children:[A.jsx(rs,{size:24,color:"#1a1a1a",onClick:()=>G(null),style:{cursor:"pointer"}}),A.jsx("span",{style:{fontSize:"18px",fontWeight:500,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:$.name})]}),A.jsx("div",{style:{display:"flex",gap:"16px"},children:A.jsx(Ks,{size:24,color:"#1a1a1a"})})]}),A.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",overflow:"auto",backgroundColor:"#f5f5f5",position:"relative"},children:S6($)?A.jsx("img",{src:$.url,alt:"Preview",style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"},onClick:Ct=>Ct.stopPropagation()}):A6($)?A.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},onClick:Ct=>Ct.stopPropagation(),children:A.jsxs("div",{style:{textAlign:"center",color:"#666"},children:[A.jsx(ho,{size:64,color:"#dc2626",style:{marginBottom:"16px"}}),A.jsx("div",{style:{fontSize:"16px",fontWeight:500,marginBottom:"8px"},children:"PDF Document"}),A.jsx("div",{style:{fontSize:"14px"},children:$.name}),A.jsx("div",{style:{fontSize:"12px",marginTop:"16px",color:"#999"},children:"PDF preview not available in this view"})]})}):null})]})]})},KA={flex:1,padding:"12px",borderRadius:"8px",border:"none",backgroundColor:"#f46464ff",color:"#1f2937",fontSize:"13px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",whiteSpace:"normal",lineHeight:1.2},Hs=({label:s,value:t})=>A.jsxs("div",{style:{padding:"16px",borderBottom:"1px solid #f0f0f0",display:"flex",flexDirection:"column",gap:"4px"},children:[A.jsx("div",{style:{fontSize:"13px",color:"#888"},children:s}),A.jsx("div",{style:{fontSize:"15px",color:"#1a1a1a"},children:t})]}),mD=({label:s,value:t,onClick:e})=>A.jsxs("div",{style:{padding:"16px",borderBottom:"1px solid #f0f0f0",display:"flex",flexDirection:"column",gap:"4px"},children:[A.jsx("div",{style:{fontSize:"13px",color:"#888"},children:s}),A.jsx("div",{style:{fontSize:"15px",color:"#2563eb",textDecoration:"underline",cursor:e?"pointer":"default"},onClick:e,children:t})]}),Qi={borderBottom:"1px solid #d1d5db",borderRight:"1px solid #e5e7eb",padding:"10px 12px",fontSize:"12px",fontWeight:700,color:"#374151",textAlign:"left",whiteSpace:"nowrap"},Ji={borderBottom:"1px solid #e5e7eb",borderRight:"1px solid #f3f4f6",padding:"10px 12px",fontSize:"13px",color:"#1f2937",whiteSpace:"nowrap"},yD=({name:s,status:t,date:e,isExpanded:n,onToggle:i,approvalDate:r,workgroup:o,approvedBy:c})=>A.jsxs("div",{style:{borderBottom:"1px solid #f0f0f0"},children:[A.jsxs("button",{onClick:i,style:{width:"100%",padding:"16px",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"transparent",border:"none",cursor:"pointer",textAlign:"left"},children:[A.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[A.jsx("div",{style:{fontSize:"15px",fontWeight:500,color:"#1a1a1a"},children:s}),A.jsx("div",{style:{fontSize:"14px",color:"#666"},children:t})]}),A.jsx("div",{style:{fontSize:"14px",color:"#666"},children:e})]}),n&&A.jsx("div",{style:{padding:"16px",backgroundColor:"#f9fafb",borderTop:"1px solid #e5e7eb"},children:A.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[A.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[A.jsx("span",{style:{fontSize:"14px",color:"#666"},children:"Assigned To"}),A.jsx("span",{style:{fontSize:"14px",fontWeight:500,color:"#1a1a1a"},children:s})]}),A.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[A.jsx("span",{style:{fontSize:"14px",color:"#666"},children:"Status"}),A.jsx("span",{style:{fontSize:"14px",fontWeight:500,color:"#1a1a1a"},children:t})]}),r&&A.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[A.jsx("span",{style:{fontSize:"14px",color:"#666"},children:"Approval Date"}),A.jsx("span",{style:{fontSize:"14px",fontWeight:500,color:"#1a1a1a"},children:r})]}),A.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[A.jsx("span",{style:{fontSize:"14px",color:"#666"},children:"Workgroup"}),A.jsx("span",{style:{fontSize:"14px",fontWeight:500,color:"#1a1a1a"},children:o||"-"})]}),c&&A.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[A.jsx("span",{style:{fontSize:"14px",color:"#666"},children:"Approved By"}),A.jsx("span",{style:{fontSize:"14px",fontWeight:500,color:"#1a1a1a"},children:c})]})]})})]}),vD=({category:s,leftAmount:t,rightTop:e,rightBottom:n,isExpanded:i,onToggle:r})=>A.jsxs("div",{style:{borderBottom:"1px solid #f0f0f0"},children:[A.jsxs("button",{onClick:r,style:{width:"100%",padding:"16px",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"transparent",border:"none",cursor:"pointer",textAlign:"left"},children:[A.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[A.jsx("div",{style:{fontSize:"15px",fontWeight:500,color:"#1a1a1a"},children:s}),A.jsx("div",{style:{fontSize:"14px",color:"#666"},children:t})]}),A.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",alignItems:"flex-end"},children:[A.jsx("div",{style:{fontSize:"15px",fontWeight:500,color:"#1a1a1a"},children:e}),A.jsx("div",{style:{fontSize:"14px",color:"#666"},children:n})]})]}),i&&A.jsx("div",{style:{padding:"16px",backgroundColor:"#f9fafb",borderTop:"1px solid #e5e7eb"},children:A.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[A.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[A.jsx("span",{style:{fontSize:"14px",color:"#666"},children:"Tax ID*"}),A.jsx("span",{style:{fontSize:"14px",fontWeight:500,color:"#1a1a1a"},children:s})]}),A.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[A.jsx("span",{style:{fontSize:"14px",color:"#666"},children:"Tax Rate"}),A.jsx("span",{style:{fontSize:"14px",fontWeight:500,color:"#1a1a1a"},children:e})]}),A.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[A.jsx("span",{style:{fontSize:"14px",color:"#666"},children:"Taxable Amount"}),A.jsx("span",{style:{fontSize:"14px",fontWeight:500,color:"#1a1a1a"},children:t})]}),A.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[A.jsx("span",{style:{fontSize:"14px",color:"#666"},children:"Tax Amount"}),A.jsx("span",{style:{fontSize:"14px",fontWeight:500,color:"#1a1a1a"},children:n})]})]})})]}),kQ=({onBack:s,onNavigateToPurchaseOrders:t})=>A.jsxs("div",{className:"dashboard-container",children:[A.jsxs("div",{className:"sticky-header",style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px"},children:[A.jsx(rs,{size:24,color:"#000",onClick:s,style:{cursor:"pointer"}}),A.jsx("h2",{style:{fontSize:"24px",fontWeight:"400",margin:0,flex:1},children:"Purchases"})]}),A.jsxs("div",{className:"dashboard-content",style:{paddingTop:"80px"},children:[A.jsx("button",{style:{width:"100%",padding:"16px",backgroundColor:"#f5f5f5",border:"none",borderRadius:"8px",fontSize:"16px",color:"#666",cursor:"pointer",marginBottom:"24px"},children:"Add KPI"}),A.jsxs("div",{style:{marginBottom:"24px"},children:[A.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[A.jsx("h3",{style:{fontSize:"16px",fontWeight:"500",color:"#666",margin:0},children:"Screens"}),A.jsx(Ks,{size:20,color:"#666",style:{cursor:"pointer"}})]}),A.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[A.jsx("button",{onClick:t,style:{flex:1,padding:"16px",backgroundColor:"#fecaca",border:"2px solid #ef4444",borderRadius:"12px",fontSize:"16px",color:"#000",textAlign:"left",cursor:"pointer",fontWeight:"500",boxShadow:"0 2px 4px rgba(239, 68, 68, 0.2)"},children:"Purchase Orders"}),A.jsx("button",{style:{width:"48px",height:"48px",backgroundColor:"#bbf7d0",border:"none",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:A.jsx(AD,{size:24,color:"#000"})})]}),A.jsx("button",{style:{width:"100%",padding:"16px",backgroundColor:"#fee2e2",border:"none",borderRadius:"12px",fontSize:"16px",color:"#000",textAlign:"left",cursor:"pointer",fontWeight:"400"},children:"Purchase Receipts"}),A.jsx("button",{style:{width:"100%",padding:"16px",backgroundColor:"#fee2e2",border:"none",borderRadius:"12px",fontSize:"16px",color:"#000",textAlign:"left",cursor:"pointer",fontWeight:"400"},children:"Requests"}),A.jsx("button",{style:{width:"100%",padding:"16px",backgroundColor:"#fee2e2",border:"none",borderRadius:"12px",fontSize:"16px",color:"#000",textAlign:"left",cursor:"pointer",fontWeight:"400"},children:"Requisitions"})]})]})]})]}),TQ=({onBack:s})=>{const[t,e]=Ue.useState("all"),n=[{id:"PO000000008832",company:"ICONIC DEALERSHIP, INC.",amount:"20,000,000.00",date:"Feb 11, 2026",status:"Closed"},{id:"PO000000008831",company:"TRUSALES CORPORATION",amount:"105,000.00",date:"Feb 11, 2026",status:"Open"},{id:"PO000000008830",company:"CEBU SEALTRUST AUTO SUPPLY",amount:"535.72",date:"Feb 10, 2026",status:"Closed"},{id:"PO000000008829",company:"TRUSALES CORPORATION",amount:"5,980.00",date:"Feb 3, 2026",status:"Pending Printing"},{id:"PO000000008828",company:"LIM, DERICK MASON",amount:"53,392.85",date:"Jan 30, 2026",status:"Open"},{id:"PO000000008827",company:"ESTRADA, LOWIN",amount:"9,000.00",date:"Jan 30, 2026",status:"Closed"}];return A.jsxs("div",{className:"dashboard-container",style:{backgroundColor:"#f5f5f5"},children:[A.jsxs("div",{style:{position:"fixed",top:0,left:"50%",transform:"translateX(-50%)",width:"100%",maxWidth:"480px",zIndex:100,backgroundColor:"#fff",borderBottom:"1px solid #e5e5e5"},children:[A.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px"},children:[A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[A.jsx(rs,{size:24,color:"#000",onClick:s,style:{cursor:"pointer"}}),A.jsx("h2",{style:{fontSize:"20px",fontWeight:"500",margin:0},children:"Purchase Orders"})]}),A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[A.jsx(Eu,{size:24,color:"#000",style:{cursor:"pointer"}}),A.jsx(Ks,{size:24,color:"#000",style:{cursor:"pointer"}})]})]}),A.jsxs("div",{style:{display:"flex",gap:"8px",padding:"16px",backgroundColor:"#f5f5f5",overflowX:"auto",overflowY:"hidden",WebkitOverflowScrolling:"touch",scrollbarWidth:"none",msOverflowStyle:"none"},children:[A.jsxs("button",{onClick:()=>e("all"),style:{padding:"8px 16px",borderRadius:"20px",border:"1px solid #e5e5e5",backgroundColor:t==="all"?"#e3f2fd":"#fff",color:"#000",fontSize:"14px",cursor:"pointer",whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:"6px",flexShrink:0},children:[A.jsx("span",{style:{fontSize:"16px"},children:""})," All"]}),A.jsxs("button",{onClick:()=>e("my"),style:{padding:"8px 16px",borderRadius:"20px",border:"1px solid #e5e5e5",backgroundColor:t==="my"?"#e3f2fd":"#fff",color:"#000",fontSize:"14px",cursor:"pointer",whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:"6px",flexShrink:0},children:[A.jsx("span",{style:{fontSize:"16px"},children:""})," My Purchase Orders"]}),A.jsxs("button",{onClick:()=>e("adc"),style:{padding:"8px 16px",borderRadius:"20px",border:"1px solid #e5e5e5",backgroundColor:t==="adc"?"#e3f2fd":"#fff",color:"#000",fontSize:"14px",cursor:"pointer",whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:"6px",flexShrink:0},children:[A.jsx("span",{style:{fontSize:"16px"},children:""})," ADC"]}),A.jsxs("button",{onClick:()=>e("qdc"),style:{padding:"8px 16px",borderRadius:"20px",border:"1px solid #e5e5e5",backgroundColor:t==="qdc"?"#e3f2fd":"#fff",color:"#000",fontSize:"14px",cursor:"pointer",whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:"6px",flexShrink:0},children:[A.jsx("span",{style:{fontSize:"16px"},children:""})," QDC"]}),A.jsxs("button",{onClick:()=>e("qmb"),style:{padding:"8px 16px",borderRadius:"20px",border:"1px solid #e5e5e5",backgroundColor:t==="qmb"?"#e3f2fd":"#fff",color:"#000",fontSize:"14px",cursor:"pointer",whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:"6px",flexShrink:0},children:[A.jsx("span",{style:{fontSize:"16px"},children:""})," QMB"]})]}),A.jsxs("div",{style:{padding:"12px 16px",backgroundColor:"#fff",display:"flex",alignItems:"center",gap:"8px",color:"#666",fontSize:"14px"},children:[A.jsx("span",{children:"Sort By"}),A.jsx("span",{style:{fontSize:"16px"},children:""})]})]}),A.jsx("div",{style:{paddingTop:"200px",backgroundColor:"#fff",minHeight:"100vh"},children:n.map(i=>A.jsxs("div",{style:{backgroundColor:"#fff",padding:"16px",cursor:"pointer",borderBottom:"1px solid #e5e5e5"},children:[A.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[A.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",margin:0,color:"#000"},children:i.id}),A.jsx("span",{style:{fontSize:"16px",fontWeight:"500",color:"#000"},children:i.amount})]}),A.jsx("p",{style:{fontSize:"14px",color:"#666",margin:"4px 0",lineHeight:1.4},children:i.company}),A.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"8px"},children:[A.jsx("span",{style:{fontSize:"13px",color:"#999"},children:i.status}),A.jsx("span",{style:{fontSize:"13px",color:"#666"},children:i.date})]})]},i.id))}),A.jsx("button",{style:{position:"fixed",bottom:"24px",right:"24px",width:"56px",height:"56px",borderRadius:"50%",backgroundColor:"#ef4444",border:"none",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(239, 68, 68, 0.3)",cursor:"pointer",zIndex:1e3},children:A.jsx(AD,{size:28,color:"#fff"})})]})},MQ=()=>{const[s,t]=at.useState(null),[e,n]=at.useState(!1),[i,r]=at.useState(!1);at.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches){r(!0);return}const h=localStorage.getItem("pwa-install-dismissed");if(h){const f=parseInt(h);if((Date.now()-f)/(1e3*60*60*24)<7)return}const d=f=>{f.preventDefault(),t(f),setTimeout(()=>{n(!0)},3e3)};return window.addEventListener("beforeinstallprompt",d),window.addEventListener("appinstalled",()=>{r(!0),n(!1),t(null)}),()=>{window.removeEventListener("beforeinstallprompt",d)}},[]);const o=async()=>{if(!s)return;s.prompt();const{outcome:h}=await s.userChoice;h==="accepted"?console.log("User accepted the install prompt"):(console.log("User dismissed the install prompt"),localStorage.setItem("pwa-install-dismissed",Date.now().toString())),t(null),n(!1)},c=()=>{n(!1),localStorage.setItem("pwa-install-dismissed",Date.now().toString())};return i||!e?null:A.jsxs("div",{style:{position:"fixed",bottom:"80px",left:"50%",transform:"translateX(-50%)",width:"calc(100% - 32px)",maxWidth:"448px",backgroundColor:"#ffffff",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",padding:"16px",zIndex:1e3,animation:"slideUp 0.3s ease-out"},children:[A.jsx("style",{children:`
          @keyframes slideUp {
            from {
              transform: translateX(-50%) translateY(100%);
              opacity: 0;
            }
            to {
              transform: translateX(-50%) translateY(0);
              opacity: 1;
            }
          }
        `}),A.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px"},children:[A.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"8px",backgroundColor:"#fef2f2",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:A.jsx(aj,{size:24,color:"#ef4444"})}),A.jsxs("div",{style:{flex:1},children:[A.jsx("h3",{style:{margin:"0 0 4px 0",fontSize:"16px",fontWeight:"600",color:"#1f2937"},children:"Install Acumatica Preview"}),A.jsx("p",{style:{margin:"0 0 12px 0",fontSize:"14px",color:"#6b7280",lineHeight:"1.4"},children:"Install this app on your device for quick access and a better experience."}),A.jsxs("div",{style:{display:"flex",gap:"8px"},children:[A.jsx("button",{onClick:o,style:{flex:1,padding:"10px 16px",backgroundColor:"#ef4444",color:"#ffffff",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:h=>{h.currentTarget.style.backgroundColor="#dc2626"},onMouseOut:h=>{h.currentTarget.style.backgroundColor="#ef4444"},children:"Install"}),A.jsx("button",{onClick:c,style:{padding:"10px 16px",backgroundColor:"#f3f4f6",color:"#6b7280",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:h=>{h.currentTarget.style.backgroundColor="#e5e7eb"},onMouseOut:h=>{h.currentTarget.style.backgroundColor="#f3f4f6"},children:"Not Now"})]})]}),A.jsx("button",{onClick:c,style:{padding:"4px",backgroundColor:"transparent",border:"none",cursor:"pointer",color:"#9ca3af",display:"flex",alignItems:"center",justifyContent:"center"},"aria-label":"Close",children:A.jsx(Ov,{size:20})})]})]})};class RQ{permission="default";constructor(){"Notification"in window&&(this.permission=Notification.permission)}async requestPermission(){if(!("Notification"in window))return console.warn("This browser does not support notifications"),!1;if(this.permission==="granted")return!0;if(this.permission==="denied")return console.warn("Notification permission was denied"),!1;try{const t=await Notification.requestPermission();return this.permission=t,t==="granted"?(console.log("Notification permission granted"),!0):(console.warn("Notification permission denied"),!1)}catch(t){return console.error("Error requesting notification permission:",t),!1}}isSupported(){return"Notification"in window&&(this.permission=Notification.permission),"Notification"in window&&this.permission==="granted"}getPermission(){return"Notification"in window&&(this.permission=Notification.permission),this.permission}async showNotification(t){if("Notification"in window&&(this.permission=Notification.permission),!this.isSupported()){console.warn("Notifications are not supported or permission not granted. Current permission:",this.permission);return}console.log("Showing notification:",t.title);try{const e={body:t.body,icon:t.icon||"/icons/android/android-launchericon-192-192.png",badge:t.badge||"/icons/android/android-launchericon-96-96.png",tag:t.tag,data:t.data,requireInteraction:!1,silent:!1,vibrate:[200,100,200]};if("serviceWorker"in navigator)try{const n=await navigator.serviceWorker.ready;console.log("Service worker is ready, showing notification"),await n.showNotification(t.title,e),console.log("Notification sent successfully via service worker"),navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"SHOW_NOTIFICATION",title:t.title,options:e})}catch(n){console.warn("Service worker notification failed, falling back to regular notification:",n),new Notification(t.title,e),console.log("Notification sent successfully via fallback")}else console.log("Using regular notification (no service worker)"),new Notification(t.title,e),console.log("Notification sent successfully")}catch(e){console.error("Error showing notification:",e)}}async notifyPOApproval(){await this.showNotification({title:"New PO for Approval",body:"You have 1 new Purchase Order pending approval",tag:"po-approval",data:{type:"po",action:"approval"}})}async notifyBillApproval(){await this.showNotification({title:"New Bill for Approval",body:"You have 1 new Bill pending approval",tag:"bill-approval",data:{type:"bill",action:"approval"}})}async notifyPrepaymentApproval(){await this.showNotification({title:"New Prepayment for Approval",body:"You have 1 new Prepayment pending approval",tag:"prepayment-approval",data:{type:"prepayment",action:"approval"}})}async notifyPurchases(){await this.showNotification({title:"Purchases Enabled",body:"You can now view and manage purchases",tag:"purchases-enabled",data:{type:"purchases",action:"enabled"}})}}const na=new RQ,Es=(s,t)=>{try{const e=localStorage.getItem(s);return e?JSON.parse(e):t}catch{return t}},Cs=(s,t)=>{try{localStorage.setItem(s,JSON.stringify(t))}catch{}};function PQ(){const[s,t]=at.useState(()=>Es("appView","dashboard")),[e,n]=at.useState(()=>Es("isApprovalsVisible",!1)),[i,r]=at.useState(()=>Es("isPurchasesEnabled",!1)),[o,c]=at.useState(()=>Es("approvalType","po")),[h,d]=at.useState(()=>Es("poStatus","pending")),[f,p]=at.useState(()=>Es("billStatus","pending")),[m,y]=at.useState(()=>Es("prepaymentStatus","pending")),[w,b]=at.useState(()=>Es("isHistoryView",!1)),[E,_]=at.useState(()=>Es("poAttachments",[])),[k,T]=at.useState(()=>Es("billAttachments",[])),[R,D]=at.useState(()=>Es("prepaymentAttachments",[])),[F,j]=at.useState(()=>Es("notificationPermissionGranted",!1));at.useEffect(()=>{const X=setTimeout(async()=>{F||await na.requestPermission()&&j(!0)},2e3);return()=>clearTimeout(X)},[F]),at.useEffect(()=>{if("serviceWorker"in navigator){const O=X=>{if(console.log("App received message from service worker:",X.data),X.data&&X.data.type==="NAVIGATE"){const{view:Q,notificationType:H}=X.data;Q==="approvals"?(H==="po"?c("po"):H==="bill"?c("bill"):H==="prepayment"&&c("prepayment"),t("approvals")):Q==="purchases"&&t("purchases")}};return navigator.serviceWorker.addEventListener("message",O),()=>{navigator.serviceWorker.removeEventListener("message",O)}}},[]),at.useEffect(()=>{Cs("appView",s)},[s]),at.useEffect(()=>{Cs("isApprovalsVisible",e)},[e]),at.useEffect(()=>{Cs("approvalType",o)},[o]),at.useEffect(()=>{Cs("poStatus",h)},[h]),at.useEffect(()=>{Cs("billStatus",f)},[f]),at.useEffect(()=>{Cs("prepaymentStatus",m)},[m]),at.useEffect(()=>{Cs("isHistoryView",w)},[w]),at.useEffect(()=>{Cs("poAttachments",E)},[E]),at.useEffect(()=>{Cs("billAttachments",k)},[k]),at.useEffect(()=>{Cs("prepaymentAttachments",R)},[R]),at.useEffect(()=>{Cs("isPurchasesEnabled",i)},[i]),at.useEffect(()=>{Cs("notificationPermissionGranted",F)},[F]);const I=()=>e?o==="po"?h==="pending"?1:0:o==="bill"?f==="pending"?1:0:o==="prepayment"&&m==="pending"?1:0:0;return A.jsxs(A.Fragment,{children:[A.jsx(MQ,{}),s==="dashboard"&&A.jsx(Xj,{onNavigate:O=>t(O),showApprovals:e,approvalsCount:I(),isPurchasesEnabled:i}),s==="functions"&&A.jsx(Kj,{onNavigate:O=>t(O),onEnableApprovals:async()=>{n(!0),c("po"),d("pending"),_([]),F||await na.requestPermission()&&j(!0),await na.notifyPOApproval()},onEnableBillApprovals:async()=>{n(!0),c("bill"),p("pending"),F||await na.requestPermission()&&j(!0),await na.notifyBillApproval()},onEnablePrepaymentApprovals:async()=>{n(!0),c("prepayment"),y("pending"),F||await na.requestPermission()&&j(!0),await na.notifyPrepaymentApproval()},onDisableApprovals:()=>n(!1),onDisableBillApprovals:()=>{n(!1),c("po")},onDisablePrepaymentApprovals:()=>{n(!1),c("po")},onEnablePurchases:async()=>{r(!0),F||await na.requestPermission()&&j(!0),await na.notifyPurchases()},onDisablePurchases:()=>r(!1),isApprovalsEnabled:e&&o==="po",isBillApprovalsEnabled:e&&o==="bill",isPrepaymentApprovalsEnabled:e&&o==="prepayment",isPurchasesEnabled:i}),s==="approvals"&&A.jsx(Zj,{onBack:()=>t("dashboard"),onDetails:O=>{if(O?.recordType==="bill"){b(!!O?.fromHistory),t("billDetails");return}if(O?.recordType==="prepayment"){b(!!O?.fromHistory),t("prepaymentDetails");return}b(!!O?.fromHistory),t("details")},onNavigateToPO:()=>{d("approved"),b(!1),t("details")},poStatus:h,billStatus:f,prepaymentStatus:m,approvalType:o}),s==="details"&&A.jsx(wQ,{onBack:()=>t("approvals"),poStatus:h,isHistoryView:w,attachments:E,onAttachmentsChange:_,onApprove:()=>{d("approved"),t("approvals")}}),s==="billDetails"&&A.jsx(gD,{onBack:()=>t("approvals"),isHistoryView:w,attachments:k,onAttachmentsChange:T,onNavigateToPO:()=>{d("approved"),b(!1),t("details")},onApproveBill:()=>{p("approved"),t("approvals")}}),s==="prepaymentDetails"&&A.jsx(gD,{onBack:()=>t("approvals"),isHistoryView:w,isPrepayment:!0,attachments:R,onAttachmentsChange:D,onNavigateToPO:()=>{d("approved"),b(!1),t("details")},onApproveBill:()=>{y("approved"),t("approvals")}}),s==="purchases"&&A.jsx(kQ,{onBack:()=>t("dashboard"),onNavigateToPurchaseOrders:()=>t("purchaseOrders")}),s==="purchaseOrders"&&A.jsx(TQ,{onBack:()=>t("purchases")}),s!=="approvals"&&s!=="details"&&s!=="billDetails"&&s!=="prepaymentDetails"&&s!=="purchases"&&s!=="purchaseOrders"&&A.jsxs("div",{style:{position:"fixed",bottom:0,left:"50%",transform:"translateX(-50%)",width:"100%",maxWidth:"480px",backgroundColor:"#f9dcdc",display:"flex",justifyContent:"space-around",padding:"16px 0",zIndex:100},children:[A.jsx(k0,{icon:"home",active:s==="dashboard",onClick:()=>t("dashboard")}),A.jsx(k0,{icon:"search"}),A.jsx(k0,{icon:"star"}),A.jsx(k0,{icon:"user",active:s==="functions",onClick:()=>t("functions")})]})]})}const k0=({icon:s,onClick:t,active:e})=>{const n="#ef4444",i=()=>{switch(s){case"home":return A.jsx("img",{src:"/Home icon.png",alt:"Home",style:{width:"28px",height:"28px"}});case"search":return A.jsx(Eu,{size:28,color:n,strokeWidth:2.5});case"star":return A.jsx(zj,{size:28,color:n,strokeWidth:2.5});case"user":return A.jsx($j,{size:28,color:n,fill:n});default:return null}};return A.jsx("div",{onClick:t,style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"0 12px",cursor:"pointer",opacity:e===!1?.7:1},children:i()})};function LQ(s={}){const{immediate:t=!1,onNeedRefresh:e,onOfflineReady:n,onRegistered:i,onRegisteredSW:r,onRegisterError:o}=s;let c,h;const d=async(p=!0)=>{await h};async function f(){if("serviceWorker"in navigator){if(c=await Cf(async()=>{const{Workbox:p}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:p}},[]).then(({Workbox:p})=>new p("/sw.js",{scope:"/",type:"classic"})).catch(p=>{o?.(p)}),!c)return;c.addEventListener("activated",p=>{(p.isUpdate||p.isExternal)&&window.location.reload()}),c.addEventListener("installed",p=>{p.isUpdate||n?.()}),c.register({immediate:t}).then(p=>{r?r("/sw.js",p):i?.(p)}).catch(p=>{o?.(p)})}}return h=f(),d}const DQ=LQ({onNeedRefresh(){confirm("New content available. Reload to update?")&&DQ(!0)},onOfflineReady(){console.log("App ready to work offline")},onRegistered(s){console.log("Service Worker registered:",s)},onRegisterError(s){console.error("Service Worker registration error:",s)}});$4.createRoot(document.getElementById("root")).render(A.jsx(at.StrictMode,{children:A.jsx(PQ,{})}));export{LS as A,NN as J,IQ as a,se as c,jQ as n,kf as r};
